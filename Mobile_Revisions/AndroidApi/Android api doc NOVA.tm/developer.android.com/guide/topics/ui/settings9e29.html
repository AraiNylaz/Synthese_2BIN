





<!DOCTYPE html>
<html lang="ja">

<!-- Mirrored from developer.android.com/guide/topics/ui/settings.html?hl=ja by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:16:32 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

  



<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta content="IE=edge" http-equiv="X-UA-Compatible">





<script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script>

<meta charset="utf-8">



<meta name="xsrf_token" content="xpESqBdUEmPU9FfPFvM_BOSUhETE4dz1NIpKrylk-z06MTQ5NzUxNzE1Mzg5MjU0MA" />

  
    <link rel="canonical" href="settings9e29.html?hl=ja">
  

  
    <link rel="alternate" href="settings9201.html?hl=ru" hreflang="ru">
  
    <link rel="alternate" href="settingsf854.html?hl=zh-tw" hreflang="zh-Hant">
  
    <link rel="alternate" href="settings327f.html?hl=vi" hreflang="vi">
  
    <link rel="alternate" href="settings0b8e.html?hl=zh-cn" hreflang="zh-Hans">
  
    <link rel="alternate" href="settings7554.html?hl=es-419" hreflang="es-419">
  
    <link rel="alternate" href="settings232e.html?hl=ko" hreflang="ko">
  
    <link rel="alternate" href="settings0cf2.html?hl=id" hreflang="id">
  
    <link rel="alternate" href="settings9e29.html?hl=ja" hreflang="ja">
  
    <link rel="alternate" href="settings6dd3.html?hl=pt-br" hreflang="pt-br">
  
    <link rel="alternate" href="settings.html" hreflang="en">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=ru" hreflang="ru-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=zh-tw" hreflang="zh-Hant-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=vi" hreflang="vi-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=zh-cn" hreflang="zh-Hans-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=es-419" hreflang="es-419-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=ko" hreflang="ko-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=id" hreflang="id-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=ja" hreflang="ja-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=pt-br" hreflang="pt-br-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html" hreflang="en-cn">
  

  <link rel="alternate" href="settings.html" hreflang="x-default">




<link rel="shortcut icon" href="../../../_static/f304fc21fa/images/android/favicon9e29.png?hl=ja">

<link rel="apple-touch-icon" href="../../../_static/f304fc21fa/images/android/touchicon-1809e29.png?hl=ja">


<title>

  設定 | Android Developers

</title>

  <meta name="description" content="Applications often include settings that allow users to modify app features and behaviors. For example, some apps allow users to specify whether notifications are enabled or specify how often the application syncs data with the cloud. If you want to provide…">


<!-- STYLESHEETS -->
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto+Condensed">
<link rel="stylesheet"
    href="http://fonts.googleapis.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold"
    title="roboto">







<link href="../../../static/css/defaultdd52.css?hl=ja?v=2017061508" rel="stylesheet" type="text/css">
<!-- JAVASCRIPT -->
<script src="../../../_static/f304fc21fa/js/android_3p-bundle9e29.js?hl=ja" type="text/javascript"></script>
<script src="../../../_static/f304fc21fa/js/script_foot_closure_android__ja9e29.js?hl=ja"></script>
<script src="../../../_static/f304fc21fa/js/script_foot_android9e29.js?hl=ja"></script>

<script type="text/javascript">
  var toRoot = 'https://developer.android.com/';
  devsite.permissions.init({"039e5d84b87fd75807ffb37b7f1bbf2c": true, "098dafe57affddc137df300142652cfd": false, "cb025a64a50094835616312f4774a53d": true, "51470233c56fc1fde50f00b73c52b216": false, "752953480de00a336d911a46966cc16d": false, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true});

  var replaceBlog = false;
  var replaceYouTube = false;
  var siteDefaultLocale = 'en';

  var ANDROID_LANGUAGES = [
      'id','de','en','es','es-419','fr','pt-br','vi','tr','ru','th','ja','zh-cn','zh-tw','ko'
  ];
</script>
<script src="../../../static/js/docsdd52.js?hl=ja?v=2017061508" type="text/javascript"></script>


</head>

<body class="gc-documentation
            
            
              develop
              guide
            
            "
      itemscope itemtype="http://schema.org/Article">
  


  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;ja&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;ja&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-49880327-2&quot;}">
  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;ja&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;ja&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-5831155-1&quot;}">
  



  
  
    <script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "userCountry": "BE", "language": {"requested": "ja", "served": "ja"}, "projectName": "API Guides", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>
  



  
  <a href="#top" id="skip-to-main">Skip to content</a>
  <header id="header-wrapper">
    <div class="dac-header" id="header">
      <div class="dac-header-inner">
        <a class="dac-nav-toggle" data-dac-toggle-nav href="#" title="Open navigation">
          <span class="dac-nav-hamburger">
            <span class="dac-nav-hamburger-top"></span>
            <span class="dac-nav-hamburger-mid"></span>
            <span class="dac-nav-hamburger-bot"></span>
          </span>
        </a>
        
        <a class="dac-header-logo" href="https://developer.android.com/index.html?hl=ja">
          <img class="dac-header-logo-image" src="../../../static/images/android_logo9e29.png?hl=ja"
              srcset="https://developer.android.com/static/images/android_logo_2x.png 2x?hl=ja"
              width="32" height="36" alt="Android"> Developers</a>
        <ul class="dac-header-tabs">
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/design/index.html?hl=ja"
               zh-tw-lang="設計"
               zh-cn-lang="设计"
               ru-lang="Проектирование"
               ko-lang="디자인"
               ja-lang="設計"
               es-lang="Diseñar">Design</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/develop/index.html?hl=ja"
               zh-tw-lang="開發"
               zh-cn-lang="开发"
               ru-lang="Разработка"
               ko-lang="개발"
               ja-lang="開発"
               es-lang="Desarrollar">Develop</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/distribute/index.html?hl=ja"
               zh-tw-lang="發佈"
               zh-cn-lang="分发"
               ru-lang="Распространение"
               ko-lang="배포"
               ja-lang="配布"
               es-lang="Distribuir">Distribute</a>
          </li>
        </ul>


        

        <a class="dac-header-console-btn gc-analytics-event" href="https://play.google.com/apps/publish/"
           data-category="User" data-action="Console" data-label="Clicked">
          <img src="https://developer.android.com/static/images/developer-console-icon.svg?hl=ja" width="18" height="19" alt="Play コンソール">Play Console</a>

        

<form data-search="" class="dac-header-search">
  <button class="dac-header-search-close" data-search-close="">
    <i class="dac-sprite dac-back-arrow"></i>
  </button>

  <div class="dac-header-search-inner">
    <i class="dac-sprite dac-search-white dac-header-search-icon"></i>
    
    <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q" class="dac-header-search-input" placeholder="検索">
    <button class="dac-header-search-clear dac-hidden" data-search-clear="">
      <i class="dac-sprite dac-close-black"></i>
    </button>
  </div>
</form>

        
      </div><!--/.header-wrap.wrap-->
    </div><!--/.header-->

    

<div id="search-results" class="dac-search-results">
  <div id="dac-search-results-history" class="dac-search-results-history">
    <div class="wrap dac-search-results-history-wrap">
      <div class="cols">
        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Most visited</h2>
          <div class="resource-flow-layout" data-history-query="history:most/visited" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>

        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Recently visited</h2>
          <div class="resource-flow-layout cols" data-history-query="history:recent" data-allow-duplicates="true" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="dac-search-results-content" class="dac-search-results-content">
    <div class="dac-search-results-metadata wrap">
      <div class="dac-search-results-for">
        
          <h2>
          Results for <span id="search-results-for"></span>
          </h2>
      </div>

      <div id="dac-search-results-hero"></div>

      <div class="dac-search-results-hero cols">
        <div id="dac-search-results-reference" class="col-6of6 col-tablet-2of2 col-mobile-1of1">
          <div class="suggest-card reference no-display">
            <ul class="dac-search-results-reference">
            </ul>
          </div>
        </div>
      </div>

      <div class="cols dac-search-results-cse">
        <script src="../../../../cse.google.com/f4116.txt?cx=000521750095050289010:zpcpi1ea4s8" async></script>
        <gcse:searchresults-only linkTarget="_self"></gcse:searchresults-only>
      </div>
    </div>
  </div>
</div>

  </header>

  <a name="navigation" tabindex=0 class="nav-start-marker">navigation</a>
  <nav class="dac-nav">
    <div class="dac-nav-dimmer" data-dac-toggle-nav></div>
    <div class="dac-nav-sidebar" data-swap data-dynamic="false" data-transition-speed="300" data-dac-nav>
      <div data-swap-container>
        
        <a class="dac-nav-back-button dac-swap-section dac-up dac-no-anim" tabindex=0 data-swap-button>
          
          <i class="dac-sprite dac-nav-back"></i> <span class="dac-nav-back-title">戻る</span>
        </a>

        <div class="dac-nav-sub dac-swap-section dac-right dac-active" itemscope
            itemtype="http://schema.org/SiteNavigationElement">
          
          
            
            <ul id="nav">
              <li class="nav-section"><div class="nav-section-header"><a href="../../index9e29.html?hl=ja" >はじめに</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/fundamentals9e29.html?hl=ja" >アプリケーションの基礎</a></li><li><a href="../../practices/compatibility9e29.html?hl=ja" >端末の互換性</a></li><li><a href="../security/permissions9e29.html?hl=ja" >システム パーミッション</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../platform/index9e29.html?hl=ja" >プラットフォーム アーキテクチャ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../platform/j8-jack9e29.html?hl=ja"  es-lang="Funciones del lenguaje Java 8" in-lang="Fitur Bahasa Java 8" ja-lang="Java 8 の機能" ko-lang="Java 8 언어 기능" pt-br-lang="Recursos de linguagem do Java 8" ru-lang="Возможности языка Java 8" vi-lang="Tính năng của Ngôn ngữ Java 8" zh-cn-lang="Java 8 语言功能" zh-tw-lang="Java 8 語言功能">Java 8 の言語機能を使う</a></li><li><a href="../../practices/verifying-apps-art9e29.html?hl=ja" >Android ランタイム（ART）でのアプリの動作確認</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/index9e29.html?hl=ja" >アプリのコンポーネント</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../../components/intents-filters9e29.html?hl=ja" >インテントとインテント フィルタ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/intents-common9e29.html?hl=ja" >一般的なインテント</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/activities9e29.html?hl=ja" >アクティビティ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/fragments9e29.html?hl=ja" >フラグメント</a></li><li><a href="../../components/loaders9e29.html?hl=ja" >ローダ</a></li><li><a href="../../components/tasks-and-back-stack9e29.html?hl=ja" >タスクとバックスタック</a></li><li><a href="../../components/recents9e29.html?hl=ja" >オーバービュー画面</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/services9e29.html?hl=ja" >サービス</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/bound-services9e29.html?hl=ja" >バインドされたサービス</a></li><li><a href="../../components/aidl9e29.html?hl=ja" >AIDL</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../providers/content-providers9e29.html?hl=ja" >コンテンツ プロバイダ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../providers/content-provider-basics9e29.html?hl=ja" >コンテンツ プロバイダの基本</a></li><li><a href="../providers/content-provider-creating9e29.html?hl=ja" >コンテンツ プロバイダの作成</a></li><li><a href="../providers/calendar-provider9e29.html?hl=ja" >カレンダー プロバイダ</a></li><li><a href="../providers/contacts-provider9e29.html?hl=ja" >連絡先プロバイダ</a></li><li><a href="../providers/document-provider9e29.html?hl=ja" >ストレージ アクセス フレームワーク</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../appwidgets/index9e29.html?hl=ja" >アプリ ウィジェット</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../appwidgets/host9e29.html?hl=ja" >アプリ ウィジェットのホスト</a></li></ul></li><li><a href="../../components/processes-and-threads9e29.html?hl=ja" >プロセスとスレッド</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/index9e29.html?hl=ja" >アプリのリソース</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/overview9e29.html?hl=ja" >リソースの概要</a></li><li><a href="../resources/providing-resources9e29.html?hl=ja" >リソースの提供</a></li><li><a href="../resources/accessing-resources9e29.html?hl=ja" >リソースへのアクセス</a></li><li><a href="../resources/runtime-changes9e29.html?hl=ja" >実行時の変更の処理</a></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/localization9e29.html?hl=ja" >ローカライズ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/icu4j-framework9e29.html?hl=ja" >ICU4J Android Framework API</a></li><li><a href="../resources/multilingual-support9e29.html?hl=ja" >言語とロケール</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/available-resources9e29.html?hl=ja" >リソースのタイプ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/animation-resource9e29.html?hl=ja" >アニメーション</a></li><li><a href="../resources/color-list-resource9e29.html?hl=ja" >色状態リスト</a></li><li><a href="../resources/drawable-resource9e29.html?hl=ja" >ドローアブル</a></li><li><a href="../resources/layout-resource9e29.html?hl=ja" >レイアウト</a></li><li><a href="../resources/menu-resource9e29.html?hl=ja" >メニュー</a></li><li><a href="../resources/string-resource9e29.html?hl=ja" >文字列</a></li><li><a href="../resources/style-resource9e29.html?hl=ja" >スタイル</a></li><li><a href="../resources/more-resources9e29.html?hl=ja" >その他のタイプ</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../manifest/manifest-intro9e29.html?hl=ja" >アプリ マニフェスト</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../manifest/action-element9e29.html?hl=ja" >&lt;action&gt;</a></li><li><a href="../manifest/activity-element9e29.html?hl=ja" >&lt;activity&gt;</a></li><li><a href="../manifest/activity-alias-element9e29.html?hl=ja" >&lt;activity-alias&gt;</a></li><li><a href="../manifest/application-element9e29.html?hl=ja" >&lt;application&gt;</a></li><li><a href="../manifest/category-element9e29.html?hl=ja" >&lt;category&gt;</a></li><li><a href="../manifest/compatible-screens-element9e29.html?hl=ja" >&lt;compatible-screens&gt;</a></li><li><a href="../manifest/data-element9e29.html?hl=ja" >&lt;data&gt;</a></li><li><a href="../manifest/grant-uri-permission-element9e29.html?hl=ja" >&lt;grant-uri-permission&gt;</a></li><li><a href="../manifest/instrumentation-element9e29.html?hl=ja" >&lt;instrumentation&gt;</a></li><li><a href="../manifest/intent-filter-element9e29.html?hl=ja" >&lt;intent-filter&gt;</a></li><li><a href="../manifest/manifest-element9e29.html?hl=ja" >&lt;manifest&gt;</a></li><li><a href="../manifest/meta-data-element9e29.html?hl=ja" >&lt;meta-data&gt;</a></li><li><a href="../manifest/path-permission-element9e29.html?hl=ja" >&lt;path-permission&gt;</a></li><li><a href="../manifest/permission-element9e29.html?hl=ja" >&lt;permission&gt;</a></li><li><a href="../manifest/permission-group-element9e29.html?hl=ja" >&lt;permission-group&gt;</a></li><li><a href="../manifest/permission-tree-element9e29.html?hl=ja" >&lt;permission-tree&gt;</a></li><li><a href="../manifest/provider-element9e29.html?hl=ja" >&lt;provider&gt;</a></li><li><a href="../manifest/receiver-element9e29.html?hl=ja" >&lt;receiver&gt;</a></li><li><a href="../manifest/service-element9e29.html?hl=ja" >&lt;service&gt;</a></li><li><a href="../manifest/supports-gl-texture-element9e29.html?hl=ja" >&lt;supports-gl-texture&gt;</a></li><li><a href="../manifest/supports-screens-element9e29.html?hl=ja" >&lt;supports-screens&gt;</a></li><li><a href="../manifest/uses-configuration-element9e29.html?hl=ja" >&lt;uses-configuration&gt;</a></li><li><a href="../manifest/uses-feature-element9e29.html?hl=ja" >&lt;uses-feature&gt;</a></li><li><a href="../manifest/uses-library-element9e29.html?hl=ja" >&lt;uses-library&gt;</a></li><li><a href="../manifest/uses-permission-element9e29.html?hl=ja" >&lt;uses-permission&gt;</a></li><li><a href="../manifest/uses-permission-sdk-23-element9e29.html?hl=ja" >&lt;uses-permission-sdk-23&gt;</a></li><li><a href="../manifest/uses-sdk-element9e29.html?hl=ja" >&lt;uses-sdk&gt;</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="index9e29.html?hl=ja" >ユーザー インターフェース</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="overview9e29.html?hl=ja" >UI の概要</a></li><li class="nav-section"><div class="nav-section-header"><a href="declaring-layout9e29.html?hl=ja" >レイアウト</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="layout/linear9e29.html?hl=ja" >線形レイアウト</a></li><li><a href="layout/relative9e29.html?hl=ja" >相対レイアウト</a></li><li><a href="layout/listview9e29.html?hl=ja" >リストビュー</a></li><li><a href="layout/gridview9e29.html?hl=ja" >グリッドビュー</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="controls9e29.html?hl=ja" >入力コントロール</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="controls/button9e29.html?hl=ja" >ボタン</a></li><li><a href="https://developer.android.com/training/keyboard-input/style.html?hl=ja" >テキスト フィールド</a></li><li><a href="controls/checkbox9e29.html?hl=ja" >チェックボックス</a></li><li><a href="controls/radiobutton9e29.html?hl=ja" >ラジオボタン</a></li><li><a href="controls/togglebutton9e29.html?hl=ja" >切り替えボタン</a></li><li><a href="controls/spinner9e29.html?hl=ja" >スピナー</a></li><li><a href="controls/pickers9e29.html?hl=ja" >ピッカー</a></li></ul></li><li><a href="ui-events9e29.html?hl=ja" >入力イベント</a></li><li><a href="menus9e29.html?hl=ja" >メニュー</a></li><li><a href="settings9e29.html?hl=ja" >設定</a></li><li><a href="dialogs9e29.html?hl=ja" >ダイアログ</a></li><li><a href="notifiers/notifications9e29.html?hl=ja" >通知</a></li><li><a href="notifiers/toasts9e29.html?hl=ja" >トースト</a></li><li class="nav-section"><div class="nav-section-header"><a href="../search/index9e29.html?hl=ja" >検索</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../search/search-dialog9e29.html?hl=ja" >検索インターフェースの作成</a></li><li><a href="../search/adding-recent-query-suggestions9e29.html?hl=ja" >検索候補の表示の追加</a></li><li><a href="../search/adding-custom-suggestions9e29.html?hl=ja" >カスタム候補の追加</a></li><li><a href="../search/searchable-config9e29.html?hl=ja" >検索可能な設定</a></li></ul></li><li><a href="multi-window9e29.html?hl=ja" >マルチ ウィンドウのサポート</a></li><li><a href="drag-drop9e29.html?hl=ja" >ドラッグ＆ドロップ</a></li><li class="nav-section"><div class="nav-section-header"><a href="accessibility/index9e29.html?hl=ja" >ユーザー補助機能</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="accessibility/apps9e29.html?hl=ja" >ユーザー補助機能に対応</a></li><li><a href="accessibility/checklist9e29.html?hl=ja" >ユーザー補助機能のデベロッパー チェックリスト</a></li><li><a href="accessibility/services9e29.html?hl=ja" >ユーザー補助機能サービスの作成</a></li></ul></li><li><a href="themes9e29.html?hl=ja" >スタイルとテーマ</a></li><li><a href="custom-components9e29.html?hl=ja" >カスタム コンポーネント</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../graphics/index9e29.html?hl=ja" >アニメーションとグラフィック</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../graphics/overview9e29.html?hl=ja" >アニメーションとグラフィックの概要</a></li><li><a href="../graphics/prop-animation9e29.html?hl=ja" >プロパティ アニメーション</a></li><li><a href="../graphics/view-animation9e29.html?hl=ja" >ビュー アニメーション</a></li><li><a href="../graphics/drawable-animation9e29.html?hl=ja" >ドローアブル アニメーション</a></li><li><a href="../graphics/2d-graphics9e29.html?hl=ja" >キャンバスとドローアブル</a></li><li><a href="../graphics/opengl9e29.html?hl=ja" >OpenGL ES</a></li><li><a href="../graphics/hardware-accel9e29.html?hl=ja" >ハードウェア アクセラレーション</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../renderscript/index9e29.html?hl=ja" >演算処理</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../renderscript/compute9e29.html?hl=ja" >RenderScript</a></li><li><a href="../renderscript/advanced9e29.html?hl=ja" >高度な RenderScript</a></li><li class="nav-section"><div class="nav-section-header"><a href="../renderscript/reference/overview9e29.html?hl=ja" >ランタイム API リファレンス</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../renderscript/reference/rs_value_types9e29.html?hl=ja" >数値型</a></li><li><a href="../renderscript/reference/rs_object_types9e29.html?hl=ja" >オブジェクト型</a></li><li><a href="../renderscript/reference/rs_convert9e29.html?hl=ja" >変換関数</a></li><li><a href="../renderscript/reference/rs_math9e29.html?hl=ja" >数学定数と数学関数</a></li><li><a href="../renderscript/reference/rs_vector_math9e29.html?hl=ja" >ベクター数学関数</a></li><li><a href="../renderscript/reference/rs_matrix9e29.html?hl=ja" >行列関数</a></li><li><a href="../renderscript/reference/rs_quaternion9e29.html?hl=ja" >四元数関数</a></li><li><a href="../renderscript/reference/rs_atomic9e29.html?hl=ja" >アトミック更新関数</a></li><li><a href="../renderscript/reference/rs_time9e29.html?hl=ja" >時間関数と時間型</a></li><li><a href="../renderscript/reference/rs_allocation_data9e29.html?hl=ja" >アロケーション データ アクセス関数</a></li><li><a href="../renderscript/reference/rs_object_info9e29.html?hl=ja" >オブジェクト特性関数</a></li><li><a href="../renderscript/reference/rs_for_each9e29.html?hl=ja" >カーネル呼び出し関数とカーネル呼び出し型</a></li><li><a href="../renderscript/reference/rs_io9e29.html?hl=ja" >入出力関数</a></li><li><a href="../renderscript/reference/rs_debug9e29.html?hl=ja" >デバッグ関数</a></li><li><a href="../renderscript/reference/rs_graphics9e29.html?hl=ja" >グラフィック関数とグラフィック型</a></li><li><a href="../renderscript/reference/index9e29.html?hl=ja" >インデックス</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../media/index9e29.html?hl=ja" >メディアとカメラ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media/mediaplayer9e29.html?hl=ja" >メディア再生</a></li><li><a href="../media/mediarouter9e29.html?hl=ja" >メディア ルーター</a></li><li><a href="../media/mediarouteprovider9e29.html?hl=ja" >メディア ルーター プロバイダ</a></li><li><a href="../media/exoplayer9e29.html?hl=ja" >ExoPlayer</a></li><li><a href="../media/media-formats9e29.html?hl=ja" >サポートされているメディア形式</a></li><li><a href="../media/mediarecorder9e29.html?hl=ja" >オーディオの録音</a></li><li><a href="../media/jetplayer9e29.html?hl=ja" >JetPlayer</a></li><li><a href="../media/camera9e29.html?hl=ja" >カメラ</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../sensors/index9e29.html?hl=ja" >位置情報とセンサー</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../location/index9e29.html?hl=ja" >位置情報と地図</a></li><li><a href="../location/strategies9e29.html?hl=ja" >位置情報に関する戦略</a></li><li><a href="../sensors/sensors_overview9e29.html?hl=ja" >センサーの概要</a></li><li><a href="../sensors/sensors_motion9e29.html?hl=ja" >モーション センサー</a></li><li><a href="../sensors/sensors_position9e29.html?hl=ja" >位置センサー</a></li><li><a href="../sensors/sensors_environment9e29.html?hl=ja" >環境センサー</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/index9e29.html?hl=ja" >ネットワーク接続</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/bluetooth9e29.html?hl=ja" >Bluetooth</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/bluetooth-le9e29.html?hl=ja" >Bluetooth Low Energy</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/nfc/index9e29.html?hl=ja" >NFC</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/nfc/nfc9e29.html?hl=ja" >NFC の基本</a></li><li><a href="../connectivity/nfc/advanced-nfc9e29.html?hl=ja" >NFC の高度な利用</a></li><li><a href="../connectivity/nfc/hce9e29.html?hl=ja" >ホストベースのカード エミュレーション</a></li></ul></li><li><a href="../connectivity/wifip2p9e29.html?hl=ja" >Wi-Fi P2P</a></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/usb/index9e29.html?hl=ja" >USB</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/usb/accessory9e29.html?hl=ja" >アクセサリ</a></li><li><a href="../connectivity/usb/host9e29.html?hl=ja" >ホスト</a></li></ul></li><li><a href="../connectivity/sip9e29.html?hl=ja" >SIP</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../text/index9e29.html?hl=ja" >テキストと入力</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../text/copy-paste9e29.html?hl=ja" >コピーとペースト</a></li><li><a href="../text/creating-input-method9e29.html?hl=ja" >IME の作成</a></li><li><a href="../text/spell-checker-framework9e29.html?hl=ja" >スペル チェッカー</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../data/index9e29.html?hl=ja" >データ ストレージ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../data/data-storage9e29.html?hl=ja" >ストレージ オプション</a></li><li><a href="../data/backup9e29.html?hl=ja" >データのバックアップ</a></li><li><a href="../data/install-location9e29.html?hl=ja" >アプリのインストール場所</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/topic/libraries/index.html?hl=ja" >ライブラリ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/topic/libraries/support-library/index.html?hl=ja" >Support Library</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="https://developer.android.com/topic/libraries/support-library/features.html?hl=ja" >機能</a></li><li><a href="https://developer.android.com/topic/libraries/support-library/setup.html?hl=ja" >セットアップ</a></li><li><a href="https://developer.android.com/topic/libraries/support-library/revisions.html?hl=ja" >変更履歴</a></li></ul></li><li><a href="https://developer.android.com/topic/libraries/data-binding/index.html?hl=ja" >データ バインディング ライブラリ</a></li><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/topic/libraries/testing-support-library/index.html?hl=ja" >Testing Support Library</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="https://developer.android.com/reference/android/support/test/package-summary.html?hl=ja" >API リファレンス</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../admin/index9e29.html?hl=ja" >管理</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../admin/device-admin9e29.html?hl=ja" >端末ポリシー</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../webapps/index9e29.html?hl=ja" >ウェブアプリ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../webapps/targeting9e29.html?hl=ja" >ウェブアプリでの異なる画面のサポート</a></li><li><a href="../../webapps/webview9e29.html?hl=ja" >WebView によるウェブアプリの作成</a></li><li><a href="../../webapps/migrating9e29.html?hl=ja" >Android 4.4 での WebView への移行</a></li><li><a href="../../webapps/debugging9e29.html?hl=ja" >ウェブアプリのデバッグ</a></li><li><a href="../../webapps/best-practices9e29.html?hl=ja" >ウェブアプリのベスト プラクティス</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../practices/index9e29.html?hl=ja"  de-lang="Bewährte Verfahren" es-lang="Prácticas recomendadas" fr-lang="Meilleures pratiques" it-lang="Best practice" ja-lang="ベスト プラクティス" zh-cn-lang="最佳实践" zh-tw-lang="最佳實務">ベスト プラクティス</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../../practices/screens_support9e29.html?hl=ja" >複数の画面のサポート</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../practices/screens-distribution9e29.html?hl=ja" >特定の画面の端末にのみ配布</a></li><li><a href="../../practices/screen-compat-mode9e29.html?hl=ja" >画面互換性モード</a></li></ul></li><li><a href="../../practices/tablets-and-handsets9e29.html?hl=ja" >タブレットとハンドセットのサポート</a></li></ul></li>
            </ul>
            
          
        </div>
        
        
          



<ul id="dac-main-navigation" class="dac-nav-list dac-swap-section dac-left dac-no-anim" tabindex=0>
  <li class="dac-nav-item home">
    <a class="dac-nav-link" href="https://developer.android.com/index.html?hl=ja">ホーム</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary about">
      <li class="dac-nav-item versions">
        <a class="dac-nav-link" href="https://developer.android.com/about/versions/nougat/index.html?hl=ja">Android</a>
      </li>
      <li class="dac-nav-item wear">
        <a class="dac-nav-link" href="https://developer.android.com/wear/index.html?hl=ja">Wear</a>
      </li>
      <li class="dac-nav-item tv">
        <a class="dac-nav-link" href="https://developer.android.com/tv/index.html?hl=ja">TV</a>
      </li>
      <li class="dac-nav-item auto">
        <a class="dac-nav-link" href="https://developer.android.com/auto/index.html?hl=ja">Auto</a>
      </li>
      <li class="dac-nav-item things">
        <a class="dac-nav-link" href="https://developer.android.com/things/index.html?hl=ja">Things</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item design">
    <a class="dac-nav-link" href="https://developer.android.com/design/index.html?hl=ja"
       zh-tw-lang="設計"
       zh-cn-lang="设计"
       ru-lang="Проектирование"
       ko-lang="디자인"
       ja-lang="設計"
       es-lang="Diseñar">Design</a>
  </li>
  <li class="dac-nav-item develop">
    <a class="dac-nav-link" href="https://developer.android.com/develop/index.html?hl=ja"
       zh-tw-lang="開發"
       zh-cn-lang="开发"
       ru-lang="Разработка"
       ko-lang="개발"
       ja-lang="開発"
       es-lang="Desarrollar">Develop</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary develop">
      <li class="dac-nav-item training">
        <a class="dac-nav-link" href="https://developer.android.com/training/index.html?hl=ja"
           zh-tw-lang="訓練課程"
           zh-cn-lang="培训"
           ru-lang="Курсы"
           ko-lang="교육"
           ja-lang="トレーニング"
           es-lang="Capacitación">トレーニング</a>
      </li>
      <li class="dac-nav-item guide">
        <a class="dac-nav-link" href="../../index9e29.html?hl=ja"
           zh-tw-lang="API 指南"
           zh-cn-lang="API 指南"
           ru-lang="Руководства по API"
           ko-lang="API 가이드"
           ja-lang="API ガイド"
           es-lang="Guías de la API">API Guides</a>
      </li>
      <li class="dac-nav-item reference">
        <a class="dac-nav-link" href="https://developer.android.com/reference/packages.html?hl=ja"
           zh-tw-lang="參考資源"
           zh-cn-lang="参考"
           ru-lang="Справочник"
           ko-lang="참조문서"
           ja-lang="リファレンス"
           es-lang="Referencia">リファレンス</a>
      </li>
      <li class="dac-nav-item samples">
        <a class="dac-nav-link" href="https://developer.android.com/samples/index.html?hl=ja">サンプル</a>
      </li>
      <li class="dac-nav-item libraries">
        <a class="dac-nav-link" href="https://developer.android.com/topic/libraries/index.html?hl=ja"
           >ライブラリ</a></li>
      <li class="dac-nav-item studio">
        <a class="dac-nav-link" href="https://developer.android.com/studio/index.html?hl=ja"
           >Android Studio</a></li>
      <li class="dac-nav-item ndk">
        <a class="dac-nav-link" href="https://developer.android.com/ndk/index.html?hl=ja"
           >Android NDK</a></li>
      <li class="dac-nav-item google">
        <a class="dac-nav-link" href="https://developer.android.com/google/index.html?hl=ja">Google Services</a>
      </li>
      <li class="dac-nav-item quality-guidelines">
        <a class="dac-nav-link" href="https://developer.android.com/develop/quality-guidelines/index.html?hl=ja">Quality Guidelines</a>
      </li>
      <li class="dac-nav-item kotlin">
        <a class="dac-nav-link" href="https://developer.android.com/kotlin/index.html?hl=ja">Kotlin</a>
       </li>
    </ul>
  </li>
  <li class="dac-nav-item distribute">
    <a class="dac-nav-link" href="https://developer.android.com/distribute/index.html?hl=ja"
       zh-tw-lang="發佈"
       zh-cn-lang="分发"
       ru-lang="Распространение"
       ko-lang="배포"
       ja-lang="配布"
       de-lang="Vertrieb"
       es-lang="Distribuir"
       es-419-lang="Distribuye"
       fr-lang="Distribuer"
       id-lang="Distribusikan"
       pt-br-lang="Distribuição"
       th-lang="จัดจำหน่าย"
       tr-lang="Dağıtma"
       vi-lang="Phân phối">Distribute</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary distribute">
      <li class="dac-nav-item google-play">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/google-play/index.html?hl=ja">Google Play</a>
      </li>
      <li class="dac-nav-item console">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/console/index.html?hl=ja">Play コンソール</a>
      </li>
      <li class="dac-nav-item best-practices">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/best-practices/index.html?hl=ja"
          es-419-lang="Recomendaciones"
          fr-lang="Bonnes pratiques"
          id-lang="Praktik terbaik"
          ja-lang="おすすめの方法"
          ko-lang="권장사항"
          pt-br-lang="Práticas recomendadas"
          ru-lang="Рекомендации"
          th-lang="จัดจำหน่าย"
          tr-lang="En iyi uygulamalar"
          vi-lang="Các phương pháp hay nhất"
          zh-cn-lang="最佳做法"
          zh-tw-lang="最佳做法">Best practices</a>
      </li>
      <li class="dac-nav-item marketing-tools">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/marketing-tools/index.html?hl=ja"
          de-lang="Marketing-Tools"
          es-419-lang="Herramientas de marketing"
          fr-lang="Outils marketing"
          id-lang="Fitur pemasaran"
          ja-lang="マーケティング ツール"
          ko-lang="마케팅 도구"
          pt-br-lang="Ferramentas de marketing"
          ru-lang="Маркетинговые инструменты"
          th-lang="เครื่องมือการตลาด"
          tr-lang="Pazarlama araçları"
          vi-lang="Công cụ tiếp thị"
          zh-cn-lang="营销工具"
          zh-tw-lang="行銷工具">Marketing tools</a>
      </li>
      <li class="dac-nav-item policy-center">
        <a class="dac-nav-link" href="https://play.google.com/about/developer-content-policy/" target="_blank">Policy center</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item stories">
    <a class="dac-nav-link" href="https://developer.android.com/stories/index.html?hl=ja">Stories</a>
  </li>
  
  <li class="dac-nav-item preview">
    <a class="dac-nav-link" href="https://developer.android.com/preview/index.html?hl=ja">Preview</a>
  </li>
  
</ul>

        
      </div>
    </div>
  </nav>

  <a name="top" tabindex="0"></a>
  
  <div class="wrap clearfix" id="body-content">
  
    
      
      <div class="content-header">
        <ul class="dac-header-crumbs"></ul>
        <!-- Breadcrumb Setup -->
        <script>$('.dac-nav-list').dacCurrentPage().dacCrumbs();</script>
        <h1 itemprop="name">設定</h1>
      
        
      
      </div>
      
    
    <div class="jd-descr " itemprop="articleBody">
      

<div id="qv-wrapper">
<div id="qv">

<h2>このドキュメントの内容</h2>
<ol>
  <li><a href="#Overview">概要</a>
    <ol>
      <li><a href="#SettingTypes">プリファレンス</a></li>
    </ol>
  </li>
  <li><a href="#DefiningPrefs">XML にプリファレンスを定義する</a>
    <ol>
      <li><a href="#Groups">設定グループを作成する</a></li>
      <li><a href="#Intents">インテントを使用する</a></li>
    </ol>
  </li>
  <li><a href="#Activity">プリファレンス アクティビティを作成する</a></li>
  <li><a href="#Fragment">プリファレンス フラグメントを使用する</a></li>
  <li><a href="#Defaults">デフォルト値を設定する</a></li>
  <li><a href="#PreferenceHeaders">プリファレンス ヘッダーを使用する</a>
    <ol>
      <li><a href="#CreateHeaders">ヘッダー ファイルを作成する</a></li>
      <li><a href="#DisplayHeaders">ヘッダーを表示する</a></li>
      <li><a href="#BackCompatHeaders">旧バージョンでプリファレンス ヘッダーをサポートする</a></li>
    </ol>
  </li>
  <li><a href="#ReadingPrefs">プリファレンスを読み込む</a>
    <ol>
      <li><a href="#Listening">プリファレンスの変化をリッスンする</a></li>
    </ol>
  </li>
  <li><a href="#NetworkUsage">ネットワークの使用を管理する</a></li>
  <li><a href="#Custom">カスタム プリファレンスを作成する</a>
    <ol>
      <li><a href="#CustomSelected">ユーザー インターフェースを指定する</a></li>
      <li><a href="#CustomSave">設定の値を保存する</a></li>
      <li><a href="#CustomInitialize">現在の値を初期化する</a></li>
      <li><a href="#CustomDefault">デフォルト値を提供する</a></li>
      <li><a href="#CustomSaveState">プリファレンスの状態を保存し復元する</a></li>
    </ol>
  </li>
</ol>

<h2>キークラス</h2>
<ol>
  <li><code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code></li>
  <li><code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja">PreferenceActivity</a></code></li>
  <li><code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja">PreferenceFragment</a></code></li>
</ol>


<h2>関連ドキュメント</h2>
<ol>
  <li><a href="https://developer.android.com/design/patterns/settings.html?hl=ja">設定のデザインガイド</a></li>
</ol>
</div>
</div>




<p>多くの場合、アプリケーションには、ユーザーがアプリの機能や動作を変更できる設定が含まれています。たとえば、一部のアプリでは、通知を有効にするかどうかや、アプリケーションがクラウドとデータを同期する頻度を、ユーザーが指定できます。

</p>

<p>アプリに設定機能を提供するには、Android の <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> API を使用して、他の Android アプリ（システム設定を含む）の操作と整合性のあるインターフェースを構築する必要があります。

このドキュメントでは、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> API を使用して、アプリの設定機能を構築する方法について説明します。
</p>

<div class="note design">
<p><strong>設定の設計</strong></p>
  <p>設定の設計方法については、<a href="https://developer.android.com/design/patterns/settings.html?hl=ja">設定</a>のデザインガイドをご覧ください。</p>
</div>


<img src="../../../images/ui/settings/settings9e29.png?hl=ja" alt="" width="435" />
<p class="img-caption"><strong>図 1.</strong> Android SMS アプリの設定のスクリーンショット。
<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> で定義されたアイテムを選択すると、設定を変更するためのインターフェースが表示されます。
</p>




<h2 id="Overview">概要</h2>

<p>設定は、<code><a href="https://developer.android.com/reference/android/view/View.html?hl=ja">View</a></code> オブジェクトを使用してユーザー インターフェースを作成する方法ではなく、XML ファイルで宣言された <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> クラスの各種のサブクラスを使用する方法で作成されます。

</p>

<p>1 つの <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> オブジェクトが、1 つの設定の構成要素になります。
各 <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> はアイテムとしてリストに表示され、ユーザーが設定を変更するための適切な UI を提供します。
たとえば、<code><a href="https://developer.android.com/reference/android/preference/CheckBoxPreference.html?hl=ja">CheckBoxPreference</a></code> はチェックボックスを表示するリストアイテムを作成し、<code><a href="https://developer.android.com/reference/android/preference/ListPreference.html?hl=ja">ListPreference</a></code> は、選択リスト付きのダイアログを開くアイテムを作成します。</p>

<p>追加した各 <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> は、アプリの設定のためのデフォルトの <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=ja">SharedPreferences</a></code> ファイルに設定を保存するためにシステムが使用する対応するキーと値のペアを持ちます。

ユーザーが設定を変更する場合、システムが <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=ja">SharedPreferences</a></code> ファイルの対応する値を更新します。
関連する <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=ja">SharedPreferences</a></code> ファイルを直接操作することが必要なのは、ユーザーの設定に基づいてアプリの動作を決定するために値を読み込むことが必要な場合のみです。

</p>

<p>各設定の <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=ja">SharedPreferences</a></code> に保存される値のデータ型は、次のいずれかにすることができます。
</p>

<ul>
  <li>Boolean 型</li>
  <li>Float</li>
  <li>Int</li>
  <li>Long</li>
  <li>文字列</li>
  <li>String <code><a href="https://developer.android.com/reference/java/util/Set.html?hl=ja">Set</a></code></li>
</ul>

<p>アプリの設定の UI は <code><a href="https://developer.android.com/reference/android/view/View.html?hl=ja">View</a></code> オブジェクトではなく <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> で作成されているため、リストの設定を表示するには、専用の <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=ja">Activity</a></code> サブクラスまたは <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=ja">Fragment</a></code> サブクラスを使用する必要があります。


</p>

<ul>
  <li>アプリが 3.0 よりも前のバージョンの Android（API レベル 10 以下）をサポートしている場合は、<code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja">PreferenceActivity</a></code> クラスを継承してアクティビティを作成する必要があります。
</li>
  <li>Android 3.0 以降では、代わりに、アプリの設定を表示する <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja">PreferenceFragment</a></code> をホストする従来の <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=ja">Activity</a></code> を使用します。ただし、設定のグループが複数ある場合は、<code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja">PreferenceActivity</a></code> を使用して大きな画面用の 2 ペイン レイアウトを作成することもできます。


</li>
</ul>

<p><code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja">PreferenceActivity</a></code> と <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja">PreferenceFragment</a></code> のインスタンスの設定方法は、<a href="#Activity">プリファレンス アクティビティを作成する</a>と<a href="#Fragment">プリファレンス フラグメントを使用する</a>のセクションをご覧ください。
</p>


<h3 id="SettingTypes">プリファレンス</h3>

<p>アプリの各設定は、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> クラスの個々のサブクラスに相当します。各サブクラスには、設定のタイトルやデフォルト値などを指定できる一連の核となるプロパティが含まれています。
また、各サブクラスは、専用のプロパティとユーザー インターフェースを提供しています。
たとえば、図 1. は、SMS アプリの設定のスクリーンショットです。
設定画面の各リスト アイテムは、それぞれ異なる <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> オブジェクトに基づいています。</p>

<p>以下は、最も一般的なプリファレンスの一部です。</p>

<dl>
  <dt><code><a href="https://developer.android.com/reference/android/preference/CheckBoxPreference.html?hl=ja">CheckBoxPreference</a></code></dt>
  <dd>有効または無効にする設定のチェックボックス付きのアイテムを表示します。保存される値は、Boolean です（オンの場合、<code>true</code>）。
</dd>

  <dt><code><a href="https://developer.android.com/reference/android/preference/ListPreference.html?hl=ja">ListPreference</a></code></dt>
  <dd>ラジオボタンのリスト付きのダイアログを開きます。保存される値は、サポートされるデータ型（上記参照）であればどのデータ型にもできます。
</dd>

  <dt><code><a href="https://developer.android.com/reference/android/preference/EditTextPreference.html?hl=ja">EditTextPreference</a></code></dt>
  <dd><code><a href="https://developer.android.com/reference/android/widget/EditText.html?hl=ja">EditText</a></code> ウィジェット付きのダイアログを開きます。保存される値は、<code><a href="https://developer.android.com/reference/java/lang/String.html?hl=ja">String</a></code> です。</dd>
</dl>

<p>その他のサブクラスと対応するプロパティについては、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> クラスをご覧ください。
</p>

<p>もちろん、組み込みのクラスがすべてのニーズを満たすわけではなく、アプリケーションがより特殊な機能を必要とする可能性もあります。
たとえば、プラットフォームは、現時点では、数字や日付を選択するための <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> クラスを提供していません。そのため、独自の <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> サブクラスを定義することが必要になる場合もあります。
詳細については、<a href="#Custom">カスタム プリファレンスを作成する</a>セクションをご覧ください。</p>



<h2 id="DefiningPrefs">XML にプリファレンスを定義する</h2>

<p>実行時に新しい <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> オブジェクトのインスタンスを作成することもできますが、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> オブジェクトの階層で XML に設定のリストを定義する必要があります。

XML ファイルは更新が容易な簡単に読むことができる構造を持つため XML ファイルを使用して設定のコレクションを定義することをお勧めします。
また、アプリの設定は通常、事前設定されていますが、設定のコレクションを実行時に変更することもできます。
</p>

<p>各 <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> サブクラスは、<code>&lt;CheckBoxPreference&gt;</code> などのクラス名と一致する XML 要素で定義できます。
</p>

<p>この XML ファイルは、<code>res/xml/</code> ディレクトリに保存する必要があります。この XML ファイルには好きな名前を付けることができますが、一般的には、<code>preferences.xml</code> という名前が使用されています。
階層の分岐（この分岐がそれ自身の設定のリストを開きます）が <code><a href="https://developer.android.com/reference/android/preference/PreferenceScreen.html?hl=ja">PreferenceScreen</a></code> のネストされたインスタンスを使用して宣言されているため、必要なファイルは通常 1 ファイルのみです。

</p>

<p class="note"><strong>注: </strong>複数ペイン レイアウトの設定を作成する場合は、フラグメントごとに別々の XML ファイルが必要です。
</p>

<p>XML ファイルのルートノードは、<code><a href="https://developer.android.com/reference/android/preference/PreferenceScreen.html?hl=ja">&lt;PreferenceScreen&gt;</a></code>
<PreferenceScreen>要素にする必要があります。この要素内に、各 <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> を追加します。<code><a href="https://developer.android.com/reference/android/preference/PreferenceScreen.html?hl=ja">&lt;PreferenceScreen&gt;</a></code> 要素内に追加したそれぞれの子は、設定のリストで 1 つのアイテムとして表示されます。

</p>

<p>次に例を示します。</p>

<pre>
&lt;?xml version="1.0" encoding="utf-8"?>
&lt;PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    &lt;CheckBoxPreference
        android:key="pref_sync"
        android:title="@string/pref_sync"
        android:summary="@string/pref_sync_summ"
        android:defaultValue="true" />
    &lt;ListPreference
        android:dependency="pref_sync"
        android:key="pref_syncConnectionType"
        android:title="@string/pref_syncConnectionType"
        android:dialogTitle="@string/pref_syncConnectionType"
        android:entries="@array/pref_syncConnectionTypes_entries"
        android:entryValues="@array/pref_syncConnectionTypes_values"
        android:defaultValue="@string/pref_syncConnectionTypes_default" />
&lt;/PreferenceScreen>
</pre>

<p>この例には、<code><a href="https://developer.android.com/reference/android/preference/CheckBoxPreference.html?hl=ja">CheckBoxPreference</a></code> と <code><a href="https://developer.android.com/reference/android/preference/ListPreference.html?hl=ja">ListPreference</a></code> が含まれています。どちらのアイテムにも次の 3 つの属性が含まれています。</p>

<dl>
  <dt><code>android:key</code></dt>
  <dd>この属性は、データ値を保持するプリファレンスで必要です。設定の値を <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=ja">SharedPreferences</a></code> に保存するときにシステムが使用する一意のキー（文字列）を指定します。

  <p>プリファレンスが <code><a href="https://developer.android.com/reference/android/preference/PreferenceCategory.html?hl=ja">PreferenceCategory</a></code> または<code><a href="https://developer.android.com/reference/android/preference/PreferenceScreen.html?hl=ja">PreferenceScreen</a></code> の場合、もしくはプリファレンスが <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja">Intent</a></code> の呼び出しを指定している場合（<a href="#Intents"><code>&lt;intent&gt;</code></a> 要素を使用）、または <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=ja">Fragment</a></code> の表示を指定している場合（<a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja#attr_android:fragment"><code>android:fragment</code></a> 属性を使用）のみ、インスタンスでこの属性は必要ありません。

<em></em></p>
  </dd>
  <dt><code>android:title</code></dt>
  <dd>この属性は、ユーザーに表示される設定の名前です。</dd>
  <dt><code>android:defaultValue</code></dt>
  <dd>この属性は、システムが <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=ja">SharedPreferences</a></code> ファイルに設定する必要がある初期値を指定します。すべての設定のデフォルト値を指定する必要があります。
</dd>
</dl>

<p>その他のサポートされている属性については、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code>（と対応するサブクラス）のドキュメントをご覧ください。</p>


<div class="figure" style="width:300px">
  <img src="../../../images/ui/settings/settings-titles9e29.png?hl=ja" alt="" />
  <p class="img-caption"><strong>図 2.</strong> カテゴリを設定してタイトルを付ける。
 <br/><b>1.</b> カテゴリは <code><a href="https://developer.android.com/reference/android/preference/PreferenceCategory.html?hl=ja">&lt;PreferenceCategory&gt;</a></code> 要素で指定します。 <br/><b>2.</b> タイトルは、<code>android:title</code> 属性で指定します。
</p>
</div>


<p>設定のリストが 10 アイテムを超える場合は、タイトルを追加して設定のグループを定義するか、それらのグループを別の画面に表示することをお勧めします。

詳細については、次のセクションで説明します。</p>


<h3 id="Groups">設定グループを作成する</h3>

<p>10 以上の設定のリストがある場合、ユーザーが目を通して把握し処理することが難しくなる場合があります。
この問題を解決するには、設定の一部またはすべてをグループに分割し、1 つの長いリストを複数の短いリストに変えます。

関連設定のグループは、次の 2 つの方法のいずれかで表示できます。</p>

<ul>
  <li><a href="#Titles">タイトルを使用する</a></li>
  <li><a href="#Subscreens">サブ画面を使用する</a></li>
</ul>

<p>これらのグループ化方法の 1 つまたは両方を利用して、アプリの設定を整理できます。使用する方法と設定の分割方法を決定する際は、Android Design の<a href="https://developer.android.com/design/patterns/settings.html?hl=ja">Settings</a> ガイドのガイドラインに従ってください。

</p>


<h4 id="Titles">タイトルを使用する</h4>

<p>設定のグループ間にある見出しに区切り線を入れる場合（図 2 参照）、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> オブジェクトをグループごとに 1 つの <code><a href="https://developer.android.com/reference/android/preference/PreferenceCategory.html?hl=ja">PreferenceCategory</a></code> 内にセットしてください。
</p>

<p>次に例を示します。</p>

<pre>
&lt;PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    &lt;PreferenceCategory
        android:title="&#64;string/pref_sms_storage_title"
        android:key="pref_key_storage_settings">
        &lt;CheckBoxPreference
            android:key="pref_key_auto_delete"
            android:summary="&#64;string/pref_summary_auto_delete"
            android:title="&#64;string/pref_title_auto_delete"
            android:defaultValue="false"... />
        &lt;Preference
            android:key="pref_key_sms_delete_limit"
            android:dependency="pref_key_auto_delete"
            android:summary="&#64;string/pref_summary_delete_limit"
            android:title="&#64;string/pref_title_sms_delete"... />
        &lt;Preference
            android:key="pref_key_mms_delete_limit"
            android:dependency="pref_key_auto_delete"
            android:summary="&#64;string/pref_summary_delete_limit"
            android:title="&#64;string/pref_title_mms_delete" ... />
    &lt;/PreferenceCategory>
    ...
&lt;/PreferenceScreen>
</pre>


<h4 id="Subscreens">サブ画面を使用する</h4>

<p>設定のグループをサブ画面に配置する場合（図 3 参照）、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> オブジェクトのグループを <code><a href="https://developer.android.com/reference/android/preference/PreferenceScreen.html?hl=ja">PreferenceScreen</a></code> 内にセットしてください。
</p>

<img src="../../../images/ui/settings/settings-subscreen9e29.png?hl=ja" alt="" />
<p class="img-caption"><strong>図3.</strong> 子画面を設定する。<code>&lt;PreferenceScreen&gt;</code> 要素は、選択されると個別のリストを開き、ネストされた設定を表示するアイテムを作成します。
</p>

<p>次に例を示します。</p>

<pre>
&lt;PreferenceScreen  xmlns:android="http://schemas.android.com/apk/res/android">
    &lt;!-- opens a subscreen of settings -->
    &lt;PreferenceScreen
        android:key="button_voicemail_category_key"
        android:title="&#64;string/voicemail"
        android:persistent="false">
        &lt;ListPreference
            android:key="button_voicemail_provider_key"
            android:title="&#64;string/voicemail_provider" ... />
        &lt;!-- opens another nested subscreen -->
        &lt;PreferenceScreen
            android:key="button_voicemail_setting_key"
            android:title="&#64;string/voicemail_settings"
            android:persistent="false">
            ...
        &lt;/PreferenceScreen>
        &lt;RingtonePreference
            android:key="button_voicemail_ringtone_key"
            android:title="&#64;string/voicemail_ringtone_title"
            android:ringtoneType="notification" ... />
        ...
    &lt;/PreferenceScreen>
    ...
&lt;/PreferenceScreen>
</pre>


<h3 id="Intents">インテントを使用する</h3>

<p>設定画面ではなく、ウェブページを表示するためのウェブブラウザなどの別のアクティビティを開くプリファレンス アイテムが必要になることもあります。
ユーザーがプリファレンス アイテムを選択したときに <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja">Intent</a></code> が呼び出されるようにするには、対応する <code>&lt;Preference&gt;</code> 要素の子として <code>&lt;intent&gt;</code> 要素を追加します。
</p>

<p>たとえば、次の方法で、プリファレンス アイテムを使用してウェブページを開くことができます。</p>

<pre>
&lt;Preference android:title="@string/prefs_web_page" >
    &lt;intent android:action="android.intent.action.VIEW"
            android:data="http://www.example.com" />
&lt;/Preference>
</pre>

<p>次の属性を使用して、明示的なインテントと黙示的なインテントの両方を作成できます。</p>

<dl>
  <dt><code>android:action</code></dt>
    <dd><code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#setAction(java.lang.String)">setAction()</a></code> メソッドで割り当てるアクション。
</dd>
  <dt><code>android:data</code></dt>
    <dd><code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#setData(android.net.Uri)">setData()</a></code> メソッドで割り当てるデータ。</dd>
  <dt><code>android:mimeType</code></dt>
    <dd><code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#setType(java.lang.String)">setType()</a></code> メソッドで割り当てる MIME タイプ。
</dd>
  <dt><code>android:targetClass</code></dt>
    <dd><code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#setComponent(android.content.ComponentName)">setComponent()</a></code> メソッドでのコンポーネント名のクラス部分。
</dd>
  <dt><code>android:targetPackage</code></dt>
    <dd><code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#setComponent(android.content.ComponentName)">setComponent()</a></code> メソッドでのコンポーネント名のパッケージ部分。</dd>
</dl>



<h2 id="Activity">プリファレンス アクティビティを作成する</h2>

<p>アクティビティに設定を表示するには、<code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja">PreferenceActivity</a></code> クラスを継承します。このクラスは、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> オブジェクトの階層に基づいて設定のリストを表示する従来の <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=ja">Activity</a></code> クラスを継承したものです。<code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja">PreferenceActivity</a></code> は、ユーザーが変更を行ったときに、各 <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> に対応する設定を自動的に保存します。
</p>

<p class="note"><strong>注: </strong>Android 3.0 以降向けにアプリケーションを開発する場合は、代わりに <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja">PreferenceFragment</a></code> を使用する必要があります。
<a href="#Fragment">プリファレンス フラグメントの使用</a>についての詳細は、次のセグメントをご覧ください。
</p>

<p><code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja#onCreate(android.os.Bundle)">onCreate()</a></code> のコールバック時に、ビューのレイアウトをロードしてはならないことを忘れないよう注意してください。代わりに <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja#addPreferencesFromResource(int)">addPreferencesFromResource()</a></code> を呼び出し、XML ファイルで宣言済みのプリファレンスをアクティビティに追加する必要があります。
以下は、<code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja">PreferenceActivity</a></code> を機能させるために最小限必要なコードです。
</p>

<pre>
public class SettingsActivity extends PreferenceActivity {
    &#64;Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);
    }
}
</pre>

<p>ユーザーがプリファレンスを変更するとすぐに、ユーザーの設定のチェックが必要なときに他のアプリケーション コンポーネントが読み取ることができるデフォルトの <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=ja">SharedPreferences</a></code> ファイルにシステムによって変更が保存されるため、実際一部のアプリではこのコードで十分です。

ただし、多くのアプリでは、プリファレンスに発生する変化をリッスンするために、もう少し多くのコードが必要になります。<code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=ja">SharedPreferences</a></code> ファイルの変更のリッスンについての詳細は、<a href="#ReadingPrefs">プリファレンスの読み取り</a>についてのセクションをご覧ください。


</p>




<h2 id="Fragment">プリファレンス フラグメントを使用する</h2>

<p>Android 3.0（API レベル 11）以降向けに開発を行っている場合は、<code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja">PreferenceFragment</a></code> を使用して <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> オブジェクトのリストを表示する必要があります。
<code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja">PreferenceFragment</a></code> はどのアクティビティにでも追加できます &mdash; <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja">PreferenceActivity</a></code> を使用する必要はありません。
</p>

<p>作成するアクティビティの種類にかかわらず、<a href="../../components/fragments9e29.html?hl=ja">フラグメント</a>を使用すると、アクティビティを単体で使用する場合と比べて、柔軟なアーキテクチャを持つアプリケーションを作成できます。

そのため、可能な限り <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja">PreferenceActivity</a></code> ではなく、<code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja">PreferenceFragment</a></code> を使用して設定の表示を管理することをお勧めします。</p>

<p><code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja">PreferenceFragment</a></code> の実装は、<code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja#onCreate(android.os.Bundle)">onCreate()</a></code> メソッドを <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja#addPreferencesFromResource(int)">addPreferencesFromResource()</a></code> を使用してプリファレンス ファイルをロードするように定義するだけと簡単です。


次に例を示します。</p>

<pre>
public static class SettingsFragment extends PreferenceFragment {
    &#64;Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Load the preferences from an XML resource
        addPreferencesFromResource(R.xml.preferences);
    }
    ...
}
</pre>

<p>他の <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=ja">Fragment</a></code> と同様に、このフラグメントは <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=ja">Activity</a></code> に追加できます。
次に例を示します。</p>

<pre>
public class SettingsActivity extends Activity {
    &#64;Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Display the fragment as the main content.
        getFragmentManager().beginTransaction()
                .replace(android.R.id.content, new SettingsFragment())
                .commit();
    }
}
</pre>

<p class="note"><strong>注: </strong><code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja">PreferenceFragment</a></code> は、独自の <code><a href="https://developer.android.com/reference/android/content/Context.html?hl=ja">Context</a></code> オブジェクトを持ちません。
<code><a href="https://developer.android.com/reference/android/content/Context.html?hl=ja">Context</a></code> オブジェクトが必要な場合は、<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=ja#getActivity()">getActivity()</a></code> を呼び出すことができます。
ただし、<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=ja#getActivity()">getActivity()</a></code> はフラグメントがアクティビティにアタッチされている場合にのみ呼び出すようにしてください。
フラグメントがまだアタッチされていない場合や、ライフサイクルの終了時にデタッチされた場合は、<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=ja#getActivity()">getActivity()</a></code> は null を返します。
</p>


<h2 id="Defaults">デフォルト値を設定する</h2>

<p>作成するプリファレンスは、多くの場合、アプリケーションにとって重要ないくつかの動作を定義します。そのため、ユーザーが最初にプリケーションを開いたときに、各 <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> のデフォルト値で、関連する <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=ja">SharedPreferences</a></code> ファイルを初期化する必要があります。


</p>

<p>まず、<code>android:defaultValue</code> 属性を使用して、XML ファイルの各 <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> オブジェクトにデフォルト値を指定してください。
指定する値は、対応する <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> オブジェクトで使用できるデータ型であればどのようなデータ型でもかまいません。
次に例を示します。
</p>

<pre>
&lt;!-- default value is a boolean -->
&lt;CheckBoxPreference
    android:defaultValue="true"
    ... />

&lt;!-- default value is a string -->
&lt;ListPreference
    android:defaultValue="@string/pref_syncConnectionTypes_default"
    ... />
</pre>

<p>次に、アプリケーションのメイン アクティビティ、およびユーザーがアプリケーションを最初に開いたときに表示されるその他のアクティビティの <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=ja#onCreate(android.os.Bundle)">onCreate()</a></code> メソッドから、<code><a href="https://developer.android.com/reference/android/preference/PreferenceManager.html?hl=ja#setDefaultValues(android.content.Context, int, boolean)">setDefaultValues()</a></code> を呼び出します。


</p>

<pre>
PreferenceManager.setDefaultValues(this, R.xml.advanced_preferences, false);
</pre>

<p><code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=ja#onCreate(android.os.Bundle)">onCreate()</a></code> 時に、このメソッドを呼び出すと、アプリケーションがデフォルト設定で適切に初期化されます。アプリケーションには、動作（セルラー ネットワーク上でデータをダウンロードするかどうかなど）を決定するために、デフォルト設定を読み込むことが必要な場合があります。


</p>

<p>このメソッドは次の 3 つの引数を取ります。</p>
<ul>
  <li>アプリケーションの <code><a href="https://developer.android.com/reference/android/content/Context.html?hl=ja">Context</a></code>。</li>
  <li>デフォルト値を設定するプリファレンス XML ファイルのリソース ID。</li>
  <li>デフォルト値を複数回設定すべきかどうかを示すブール値。
<p><code>false</code> の場合、デフォルト値は過去にこのメソッドが 1 度も呼ばれたことがない場合（または、デフォルト値の共有プリファレンス ファイルの<code><a href="https://developer.android.com/reference/android/preference/PreferenceManager.html?hl=ja#KEY_HAS_SET_DEFAULT_VALUES">KEY_HAS_SET_DEFAULT_VALUES</a></code> が false の場合）のみ設定されます。

</p></li>
</ul>

<p>この 3 番目の引数を <code>false</code> に設定している限り、アクティビティが開始するたびに、ユーザーが保存したプリファレンスをデフォルト値にリセットして上書きすることなく、安全にこのメソッドを呼び出すことができます。

この引数を <code>true</code> に設定した場合は、以前の値がすべてデフォルト値で上書きされます。
</p>



<h2 id="PreferenceHeaders">プリファレンス ヘッダーを使用する</h2>

<p>まれに、最初の画面が<a href="#Subscreens">サブ画面</a>のリストのみを表示するように設定を設計した方がよい場合もあります（図 4. と図 5. のシステム設定アプリなど）。

このような設計を Android 3.0 以降で開発する場合、ネストした <code><a href="https://developer.android.com/reference/android/preference/PreferenceScreen.html?hl=ja">PreferenceScreen</a></code> 要素でサブ画面を作成するのではなく、「ヘッダー」機能を使用する必要があります。

</p>

<p>ヘッダーを使用して設定を作成するには、次の準備が必要です。</p>
<ol>
  <li>設定をグループごとに <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja">PreferenceFragment</a></code> の別々のインスタンスに分けます。この場合、設定のグループごとに、個別の XML ファイルが必要になります。
</li>
  <li>各設定グループをリストアップし対応する設定のリストを含むのがどのフラグメントかを宣言する XML ヘッダー ファイルを作成します。
</li>
  <li><code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja">PreferenceActivity</a></code> クラスを継承し、設定をホストします。</li>
  <li><code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja#onBuildHeaders(java.util.List<android.preference.PreferenceActivity.Header>)">onBuildHeaders()</a></code> コールバックを実装して、ヘッダー ファイルを指定します。
</li>
</ol>

<p>この設計を使用する大きなメリットは、大きな画面で実行する場合に、<code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja">PreferenceActivity</a></code> によって自動的に図. 4 の 2 ペイン レイアウトで表示されることです。
</p>

<p>アプリケーションが 3.0 より前のバージョンの Android をサポートしている場合でも、3.0 より前の端末で従来の多画面階層をサポートしながら、<code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja">PreferenceFragment</a></code> を使用して 3.0 以降の端末で 2 ペイン表示を行うことができます（詳細については、<a href="#BackCompatHeaders">旧バージョンでのプリファレンス ヘッダーのサポート</a>についてのセクションをご覧ください）。



</p>

<img src="../../../images/ui/settings/settings-headers-tablet9e29.png?hl=ja" alt="" />
<p class="img-caption"><strong>図 4.</strong> ヘッダー付きの 2 ペイン レイアウト。 <br/><b>1.</b> ヘッダーは、XML ヘッダー ファイルで定義します。
 <br/><b>2.</b> 設定の各グループは、XML ヘッダー ファイルの <code>&lt;header&gt;</code> 要素で指定された <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja">PreferenceFragment</a></code> ファイルで定義します。

</p>

<img src="../../../images/ui/settings/settings-headers-handset9e29.png?hl=ja" alt="" />
<p class="img-caption"><strong>図 5.</strong> ヘッダーが設定されたモバイル端末。アイテムが選択されると、対応する <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja">PreferenceFragment</a></code> がヘッダーを置き換えます。

</p>


<h3 id="CreateHeaders" style="clear:left">ヘッダー ファイルを作成する</h3>

<p>ヘッダーのリストの設定の各グループは、ルート <code>&lt;preference-headers&gt;</code> 要素内の単独の <code>&lt;header&gt;</code> 要素によって指定されます。
次に例を示します。</p>

<pre>
&lt;?xml version="1.0" encoding="utf-8"?>
&lt;preference-headers xmlns:android="http://schemas.android.com/apk/res/android">
    &lt;header
        android:fragment="com.example.prefs.SettingsActivity$SettingsFragmentOne"
        android:title="@string/prefs_category_one"
        android:summary="@string/prefs_summ_category_one" />
    &lt;header
        android:fragment="com.example.prefs.SettingsActivity$SettingsFragmentTwo"
        android:title="@string/prefs_category_two"
        android:summary="@string/prefs_summ_category_two" >
        &lt;!-- key/value pairs can be included as arguments for the fragment. -->
        &lt;extra android:name="someKey" android:value="someHeaderValue" />
    &lt;/header>
&lt;/preference-headers>
</pre>

<p><code>android:fragment</code> 属性を使用して、各ヘッダーは、ユーザーがヘッダーを選択したときに開く <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja">PreferenceFragment</a></code> のインスタンスを宣言します。</p>

<p><code>&lt;extras&gt;</code> 要素を使用すると、キーと値のペアを <code><a href="https://developer.android.com/reference/android/os/Bundle.html?hl=ja">Bundle</a></code> のフラグメントに渡すことができます。<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=ja#getArguments()">getArguments()</a></code> を呼び出すことで、フラグメントは引数を取得できます。フラグメントに引数を渡す理由はさまざまですが、各グループの <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja">PreferenceFragment</a></code> の同じサブクラスを再利用し、引数を使用してフラグメントがロードするプリファレンス XML ファイルを指定することは、効果的な引数の使い方の 1 つです。

</p>

<p>たとえば、次のフラグメントは、各ヘッダーが <code>"settings"</code> キーを使用して <code>&lt;extra&gt;</code> 引数を定義している場合、複数の設定グループで再利用できます。
</p>

<pre>
public static class SettingsFragment extends PreferenceFragment {
    &#64;Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        String settings = getArguments().getString("settings");
        if ("notifications".equals(settings)) {
            addPreferencesFromResource(R.xml.settings_wifi);
        } else if ("sync".equals(settings)) {
            addPreferencesFromResource(R.xml.settings_sync);
        }
    }
}
</pre>



<h3 id="DisplayHeaders">ヘッダーを表示する</h3>

<p>プリファレンス ヘッダーを表示するには、<code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja#onBuildHeaders(java.util.List<android.preference.PreferenceActivity.Header>)">onBuildHeaders()</a></code> コールバックメソッドを実装し、<code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja#loadHeadersFromResource(int, java.util.List<android.preference.PreferenceActivity.Header>)">loadHeadersFromResource()</a></code> を呼び出す必要があります。
次に例を示します。</p>

<pre>
public class SettingsActivity extends PreferenceActivity {
    &#64;Override
    public void onBuildHeaders(List&lt;Header> target) {
        loadHeadersFromResource(R.xml.preference_headers, target);
    }
}
</pre>

<p>ユーザーがヘッダーのリストからアイテムを選択した場合、システムが対応する <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=ja">PreferenceFragment</a></code> を開きます。</p>

<p class="note"><strong>注: </strong>プリファレンス ヘッダーを使用する場合、アクティビティで必要なタスクはヘッダーのロードのみであるため、<code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja">PreferenceActivity</a></code> のサブクラスが <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja#onCreate(android.os.Bundle)">onCreate()</a></code> メソッドを実装する必要はありません。
</p>


<h3 id="BackCompatHeaders">旧バージョンでプリファレンス ヘッダーをサポートする</h3>

<p>アプリケーションが Android 3.0 よりも前のバージョンをサポートしている場合でも、3.0 以降で実行するときに、ヘッダーを使用して 2 ペイン レイアウトを提供できます。
必要なことは、3.0 よりも前のバージョンの Android で使用するために、ヘッダー アイテムのように動作する基本的な <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">&lt;Preference&gt;</a></code> 要素を使用する追加のプリファレンス XML ファイルを作成することだけです。


</p>

<p>新しい <code><a href="https://developer.android.com/reference/android/preference/PreferenceScreen.html?hl=ja">PreferenceScreen</a></code> を開く代わりに、各 <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">&lt;Preference&gt;</a></code> 要素が、ロードするプリファレンス XML ファイルが指定されている <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja">PreferenceActivity</a></code> に <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja">Intent</a></code> を送ります。

</p>

<p>たとえば、以下は Android 3.0 以降で使用されるプリファレンス ヘッダーの XML ファイル（<code>res/xml/preference_headers.xml</code>）です。
</p>

<pre>
&lt;preference-headers xmlns:android="http://schemas.android.com/apk/res/android">
    &lt;header
        android:fragment="com.example.prefs.SettingsFragmentOne"
        android:title="@string/prefs_category_one"
        android:summary="@string/prefs_summ_category_one" />
    &lt;header
        android:fragment="com.example.prefs.SettingsFragmentTwo"
        android:title="@string/prefs_category_two"
        android:summary="@string/prefs_summ_category_two" />
&lt;/preference-headers>
</pre>

<p>また、以下は Android 3.0 よりも前のバージョンに同じヘッダーを提供するプリファレンス ファイル（<code>res/xml/preference_headers_legacy.xml</code>）です。
</p>

<pre>
&lt;PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    &lt;Preference
        android:title="@string/prefs_category_one"
        android:summary="@string/prefs_summ_category_one"  >
        &lt;intent
            android:targetPackage="com.example.prefs"
            android:targetClass="com.example.prefs.SettingsActivity"
            android:action="com.example.prefs.PREFS_ONE" />
    &lt;/Preference>
    &lt;Preference
        android:title="@string/prefs_category_two"
        android:summary="@string/prefs_summ_category_two" >
        &lt;intent
            android:targetPackage="com.example.prefs"
            android:targetClass="com.example.prefs.SettingsActivity"
            android:action="com.example.prefs.PREFS_TWO" />
    &lt;/Preference>
&lt;/PreferenceScreen>
</pre>

<p><code>&lt;preference-headers&gt;</code> のサポートは Android 3.0 で追加されたため、Android 3.0 以降で実行されている場合のみ、システムは <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja">PreferenceActivity</a></code> の <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja#onBuildHeaders(java.util.List<android.preference.PreferenceActivity.Header>)">onBuildHeaders()</a></code> を呼び出します。
「レガシー」ヘッダー ファイル（<code>preference_headers_legacy.xml</code>）をロードするには、Android のバージョンを確認し、Android 3.0（<code><a href="https://developer.android.com/reference/android/os/Build.VERSION_CODES.html?hl=ja#HONEYCOMB">HONEYCOMB</a></code>}）よりも前のバージョンの場合、<code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja#addPreferencesFromResource(int)">addPreferencesFromResource()</a></code> を呼び出す必要があります。


次に例を示します。</p>

<pre>
&#64;Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ...

    if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.HONEYCOMB) {
        // Load the legacy preferences headers
        addPreferencesFromResource(R.xml.preference_headers_legacy);
    }
}

// Called only on Honeycomb and later
&#64;Override
public void onBuildHeaders(List&lt;Header> target) {
   loadHeadersFromResource(R.xml.preference_headers, target);
}
</pre>

<p>残りの手順は、アクティビティに渡される <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja">Intent</a></code> を処理して、ロードするプリファレンス ファイルを指定するだけです。
それには、インテントのアクションを取得し、プリファレンス XML の <code>&lt;intent&gt;</code> タグで使用した既知のアクション文字列と比較します。
</p>

<pre>
final static String ACTION_PREFS_ONE = "com.example.prefs.PREFS_ONE";
...

&#64;Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String action = getIntent().getAction();
    if (action != null &amp;&amp; action.equals(ACTION_PREFS_ONE)) {
        addPreferencesFromResource(R.xml.preferences);
    }
    ...

    else if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.HONEYCOMB) {
        // Load the legacy preferences headers
        addPreferencesFromResource(R.xml.preference_headers_legacy);
    }
}
</pre>

<p><code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja#addPreferencesFromResource(int)">addPreferencesFromResource()</a></code> の連続呼び出しは、すべてのプリファレンスを 1 つのリストにスタックすることに注意してください。そのため、else if ステートメントを使用して条件を適切に記述して、1 度のみ呼び出されるようにしてください。

</p>





<h2 id="ReadingPrefs">プリファレンスを読み込む</h2>

<p>デフォルトでは、アプリのプリファレンスは、静的メソッド <code><a href="https://developer.android.com/reference/android/preference/PreferenceManager.html?hl=ja#getDefaultSharedPreferences(android.content.Context)">PreferenceManager.getDefaultSharedPreferences()</a></code> を呼び出すとアプリケーション内のどこからでもアクセス可能なファイルに保存されます。
このメソッドは、<code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja">PreferenceActivity</a></code> で使用される <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> オブジェクトに関連するすべてのキーと値のペアを含む <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=ja">SharedPreferences</a></code> オブジェクトを返します。
</p>

<p>たとえば、次の方法で、アプリケーションのその他のアクティビティからプリファレンスの値の 1 つを読み込むことができます。
</p>

<pre>
SharedPreferences sharedPref = PreferenceManager.getDefaultSharedPreferences(this);
String syncConnPref = sharedPref.getString(SettingsActivity.KEY_PREF_SYNC_CONN, "");
</pre>



<h3 id="Listening">プリファレンスの変化をリッスンする</h3>

<p>さまざまな理由で、ユーザーがプリファレンスを変更してすぐに通知を受け取ることが必要になることがあります。
プリファレンスの 1 つに変化が発生したときにコールバックを受け取るには、 <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html?hl=ja">SharedPreference.OnSharedPreferenceChangeListener</a></code> インターフェースを実装し、<code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=ja#registerOnSharedPreferenceChangeListener(android.content.SharedPreferences.OnSharedPreferenceChangeListener)">registerOnSharedPreferenceChangeListener()</a></code> を呼び出して <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=ja">SharedPreferences</a></code> オブジェクトにリスナを登録します。

</p>

<p>このインターフェースには、コールバック メソッドが <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html?hl=ja#onSharedPreferenceChanged(android.content.SharedPreferences, java.lang.String)">onSharedPreferenceChanged()</a></code> 1 つのみしか含まれておらず、アクティビティの一部として簡単に実装できます。
次に例を示します。</p>

<pre>
public class SettingsActivity extends PreferenceActivity
                              implements OnSharedPreferenceChangeListener {
    public static final String KEY_PREF_SYNC_CONN = "pref_syncConnectionType";
    ...

    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
        String key) {
        if (key.equals(KEY_PREF_SYNC_CONN)) {
            Preference connectionPref = findPreference(key);
            // Set summary to be the user-description for the selected value
            connectionPref.setSummary(sharedPreferences.getString(key, ""));
        }
    }
}
</pre>

<p>この例では、メソッドが、変更された設定が、既知のプリファレンス キーの設定かどうかチェックしています。メソッドは <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja#findPreference(java.lang.CharSequence)">findPreference()</a></code> を呼び出して、変更された <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> オブジェクトを取得しています。これにより、メソッドは、ユーザー選択の説明として表示されるアイテムの概要を変更できます。


つまり、その設定が <code><a href="https://developer.android.com/reference/android/preference/ListPreference.html?hl=ja">ListPreference</a></code> またはその他の複数選択可な設定の場合、設定が変更されたときに <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja#setSummary(int)">setSummary()</a></code> を呼び出して現在のステータス（図 5 のスリープ設定など）を表示する必要があります。
</p>

<p class="note"><strong>注: </strong>Android Design の <a href="https://developer.android.com/design/patterns/settings.html?hl=ja">Settings</a> に説明されているように、ユーザーがプリファレンスを変更するごとに、<code><a href="https://developer.android.com/reference/android/preference/ListPreference.html?hl=ja">ListPreference</a></code> の概要を更新して最新の設定を表示することをお勧めします。

</p>

<p>アクティビティでの適切なライフサイクル管理のために、<code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=ja#onResume()">onResume()</a></code> と <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=ja#onPause()">onPause()</a></code> のそれぞれのコールバック時に、<code><a href="https://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html?hl=ja">SharedPreferences.OnSharedPreferenceChangeListener</a></code> の登録と登録解除を行うことをお勧めします。
</p>

<pre>
&#64;Override
protected void onResume() {
    super.onResume();
    getPreferenceScreen().getSharedPreferences()
            .registerOnSharedPreferenceChangeListener(this);
}

&#64;Override
protected void onPause() {
    super.onPause();
    getPreferenceScreen().getSharedPreferences()
            .unregisterOnSharedPreferenceChangeListener(this);
}
</pre>

<p class="caution"><strong>警告: </strong><code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=ja#registerOnSharedPreferenceChangeListener(android.content.SharedPreferences.OnSharedPreferenceChangeListener)">registerOnSharedPreferenceChangeListener()</a></code> を呼び出す場合、現時点では、プリファレンス マネージャーにはリスナへの強い参照を格納できません。
リスナへの強い参照を格納しない場合は、リスナがガベージ コレクションの影響を受けやすくなります。
リスナが必要な間存在し続けるオブジェクトのインスタンス データ内に、リスナへの参照を保持することをお勧めします。

</p>

<p>たとえば、以下のコードでは、呼び出し元は、リスナへの参照を保持していません。
結果として、リスナはガベージ コレクションの影響を受けることになり、その後のいずれかの時点でエラーになります。
</p>

<pre>
prefs.registerOnSharedPreferenceChangeListener(
  // Bad! The listener is subject to garbage collection!
  new SharedPreferences.OnSharedPreferenceChangeListener() {
  public void onSharedPreferenceChanged(SharedPreferences prefs, String key) {
    // listener implementation
  }
});
</pre>

<p>そのため、リスナが必要な間存在し続けるオブジェクトのインスタンス データ フィールドに、リスナへの参照を格納してください。
</p>

<pre>
SharedPreferences.OnSharedPreferenceChangeListener listener =
    new SharedPreferences.OnSharedPreferenceChangeListener() {
  public void onSharedPreferenceChanged(SharedPreferences prefs, String key) {
    // listener implementation
  }
};
prefs.registerOnSharedPreferenceChangeListener(listener);
</pre>

<h2 id="NetworkUsage">ネットワークの使用を管理する</h2>


<p>Android 4.0 以降では、フォアグラウンドとバックグラウンドでのアプリケーションのネットワーク データの使用量を、システムの設定アプリケーションでユーザーが確認できます。
また、ユーザーは、個々のアプリのバックグラウンド データの使用を無効にできます。
アプリのバックグラウンドからのデータへのアクセスをユーザーが無効にすることを防ぐには、データ接続を効率的に使用することと、アプリケーションの設定でアプリのデータの利用方法をユーザーが調整できるようにすることが必要です。

<p>

<p>たとえば、データを同期する頻度や、Wi-Fi 上でのみアップロードやダウンロードを実行するようにするかどうか、ローミング時にデータを使用するかどうかなどを、ユーザーが設定できるようにすることができます。
これらをユーザーが管理できる場合、システム設定に設定した限度にデータ使用量が近づいたときに、データへのアプリのアクセスをユーザーが無効にする可能性は減少します。ユーザーはアプリのアクセスを無効にする代わりに、アプリのデータの使用量を厳密に管理できます。


</p>

<p>アプリのデータ使用を管理するために <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja">PreferenceActivity</a></code> に必要なプリファレンスを追加したら、マニフェスト ファイルに <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_MANAGE_NETWORK_USAGE">ACTION_MANAGE_NETWORK_USAGE</a></code> のインテント フィルタを追加する必要があります。
次に例を示します。</p>

<pre>
&lt;activity android:name="SettingsActivity" ... >
    &lt;intent-filter>
       &lt;action android:name="android.intent.action.MANAGE_NETWORK_USAGE" />
       &lt;category android:name="android.intent.category.DEFAULT" />
    &lt;/intent-filter>
&lt;/activity>
</pre>

<p>このインテント フィルタは、これがアプリケーションのデータ使用をコントロールしているアクティビティであるとシステムに示します。
これにより、ユーザーがシステム設定アプリからアプリのデータ使用量を調べるときに、[<em>View application settings</em>] ボタンを使用できるようになります。このボタンを押すと、<code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=ja">PreferenceActivity</a></code> が開始し、アプリのデータ使用量を調整できるようになります。


</p>







<h2 id="Custom">カスタム プリファレンスを作成する</h2>

<p>Android フレームワークには、異なる設定タイプの UI を作成できるさまざまな <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> サブクラスが含まれています。ただし、必要とする設定に、番号ピッカーや日付ピッカーなどの組み込みソリューションがない可能性もあります。


このような場合、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> クラスまたは他のサブクラスの 1 つを継承して、カスタム プリファレンスを作成する必要があります。
</p>

<p><code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> クラスを継承する場合、次のことが必要です。
</p>

<ul>
  <li>ユーザーがその設定を選択したときに表示されるユーザー インターフェースを指定する。</li>
  <li>適切なタイミングで設定の値を保存する。</li>
  <li><code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> が表示されるときに、現在の値（またはデフォルト値）で初期化する。
</li>
  <li>システムによってリクエストされた場合にデフォルト値を提供する。</li>
  <li><code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> が独自の UI（ダイアログなど）を提供している場合、状態を保存し復元してライフサイクルの変化を処理する（ユーザーが画面を回転させた場合など）。
</li>
</ul>

<p>以下の各セクションでは、上記の各事項を実現する方法を説明します。</p>



<h3 id="CustomSelected">ユーザー インターフェースを指定する</h3>

  <p><code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> クラスを直接継承する場合、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja#onClick()">onClick()</a></code> を実装して、ユーザーがアイテムを選択したときに発生するアクションを定義する必要があります。

ただし、大部分のカスタム設定では、手順が簡単な <code><a href="https://developer.android.com/reference/android/preference/DialogPreference.html?hl=ja">DialogPreference</a></code> を継承してダイアログを表示する方法が利用されています。
<code><a href="https://developer.android.com/reference/android/preference/DialogPreference.html?hl=ja">DialogPreference</a></code> を継承する場合、クラス コンストラクタで <code><a href="https://developer.android.com/reference/android/preference/DialogPreference.html?hl=ja#setDialogLayoutResource(int)">setDialogLayoutResourcs()</a></code> を呼び出してダイアログのレイアウトを指定する必要があります。
</p>

  <p>たとえば、以下のカスタム <code><a href="https://developer.android.com/reference/android/preference/DialogPreference.html?hl=ja">DialogPreference</a></code> のコンストラクタでは、レイアウトを宣言しデフォルトのポジティブとネガティブのダイアログ ボタンのテキストを指定しています。
</p>

<pre>
public class NumberPickerPreference extends DialogPreference {
    public NumberPickerPreference(Context context, AttributeSet attrs) {
        super(context, attrs);

        setDialogLayoutResource(R.layout.numberpicker_dialog);
        setPositiveButtonText(android.R.string.ok);
        setNegativeButtonText(android.R.string.cancel);

        setDialogIcon(null);
    }
    ...
}
</pre>



<h3 id="CustomSave">設定の値を保存する</h3>

<p>設定の値が整数の場合、またはブール値を保存する<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja#persistBoolean(boolean)">persistBoolean()</a></code> の場合、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja#persistInt(int)">persistInt()</a></code> など、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> クラスの <code>persist*()</code> メソッドのいずれかを呼び出すことで、設定の値をいつでも保存できます。
</p>

<p class="note"><strong>注: </strong>各 <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> には、1 つのデータ型のデータのみ保存できます。そのため、カスタム <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> で使用されているデータ型に対応する <code>persist*()</code> メソッドを使用する必要があります。

</p>

<p>設定をいつ保存したらよいかは、継承する <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> クラスによって異なります。<code><a href="https://developer.android.com/reference/android/preference/DialogPreference.html?hl=ja">DialogPreference</a></code> を継承する場合、ポジティブな結果でダイアログが閉じられたとき（ユーザーが [OK] ボタンを選択したとき）のみ、値を保存する必要があります。
</p>

<p><code><a href="https://developer.android.com/reference/android/preference/DialogPreference.html?hl=ja">DialogPreference</a></code> が閉じられたときには、システムが <code><a href="https://developer.android.com/reference/android/preference/DialogPreference.html?hl=ja#onDialogClosed(boolean)">onDialogClosed()</a></code> メソッドを呼び出します。このメソッドには、ユーザーの結果が「Positive」かどうかを指定するブール値の引数が含まれています &mdash; この値が <code>true</code> の場合はユーザーがポジティブ ボタンを選択しているということであり、新しい値を保存する必要があります。

次に例を示します。
</p>

<pre>
&#64;Override
protected void onDialogClosed(boolean positiveResult) {
    // When the user selects "OK", persist the new value
    if (positiveResult) {
        persistInt(mNewValue);
    }
}
</pre>

<p>この例では、<code>mNewValue</code> は、設定の現在の値を保持するクラスの 1 つです。
<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja#persistInt(int)">persistInt()</a></code> を呼び出すと、値が <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=ja">SharedPreferences</a></code> ファイルに保存されます（この <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> の XML ファイルに指定されたキーを自動的に使用して保存されます）。

</p>


<h3 id="CustomInitialize">現在の値を初期化する</h3>

<p>システムは <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> を画面に追加すると、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja#onSetInitialValue(boolean, java.lang.Object)">onSetInitialValue()</a></code> を呼び出し、その設定用に保存されている値がある場合は通知します。

保存されている値がない場合、この呼び出しによりデフォルト値が設定されます。
</p>

<p>この <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja#onSetInitialValue(boolean, java.lang.Object)">onSetInitialValue()</a></code> メソッドは、ブール値の <code>restorePersistedValue</code> を、その設定用に値が保存済みかどうか示すために渡します。

<code>true</code> の場合、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> クラスの <code>getPersisted*()</code> メソッド（整数用の <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja#getPersistedInt(int)">getPersistedInt()</a></code> など）のいずれかを呼び出して保存されている値を取得する必要があります。
通常は保存されている値を取得するのは、UI を更新して以前保存した値を反映させるためです。

</p>

<p><code>restorePersistedValue</code> が <code>false</code> の場合、2 番目の引数で渡されたデフォルト値を使用する必要があります。
</p>

<pre>
&#64;Override
protected void onSetInitialValue(boolean restorePersistedValue, Object defaultValue) {
    if (restorePersistedValue) {
        // Restore existing state
        mCurrentValue = this.getPersistedInt(DEFAULT_VALUE);
    } else {
        // Set default state from the XML attribute
        mCurrentValue = (Integer) defaultValue;
        persistInt(mCurrentValue);
    }
}
</pre>

<p>各 <code>getPersisted*()</code> メソッドは、値が保存されていない場合またはキーが存在しない場合に使用するデフォルト値を指定する引数を取ります。
上記の例では、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja#getPersistedInt(int)">getPersistedInt()</a></code> が保存されている値を返すことができない場合に備えて、ローカル定数がデフォルト値を指定するために使用されています。
</p>

<p class="caution"><strong>警告: </strong><code>defaultValue</code> は、<code>restorePersistedValue</code> が <code>true</code> の場合、常に null になるため、<code>getPersisted*()</code> メソッドでデフォルト値として使用<strong>できません</strong>。

</p>


<h3 id="CustomDefault">デフォルト値を提供する</h3>

<p><code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> クラスのインスタンスがデフォルト値を指定している場合（<code>android:defaultValue</code> 属性を使用）、システムは、オブジェクトのインスタンスを作成するときに <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja#onGetDefaultValue(android.content.res.TypedArray, int)">onGetDefaultValue()</a></code> を呼び出してデフォルト値を取得します。

システムでデフォルト値を <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=ja">SharedPreferences</a></code> に保存するには、このメソッドを実装する必要があります。
次に例を示します。</p>

<pre>
&#64;Override
protected Object onGetDefaultValue(TypedArray a, int index) {
    return a.getInteger(index, DEFAULT_VALUE);
}
</pre>

<p>このメソッドの引数によって、必要なすべての情報（属性の配列と <code>android:defaultValue</code> のインデックス位置）を取得します。
属性からデフォルト値を抽出するためにこのメソッドの実装が必要なのは、デフォルト値が定義されていないときのために属性のローカル デフォルト値を指定する必要があるためです。

</p>



<h3 id="CustomSaveState">プリファレンスの状態を保存し復元する</h3>

<p>レイアウトの <code><a href="https://developer.android.com/reference/android/view/View.html?hl=ja">View</a></code> と同じく、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> サブクラスは、アクティビティやフラグメントが再開される場合（ユーザーが画面を回転させた場合など）に状態の保存と復元を担当します。

<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> クラスの状態を適切に保存し復元するには、ライフサイクル コールバック メソッドの <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja#onSaveInstanceState()">onSaveInstanceState()</a></code> と <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja#onRestoreInstanceState(android.os.Parcelable)">onRestoreInstanceState()</a></code> を実装する必要があります。

</p>

<p><code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> の状態は、<code><a href="https://developer.android.com/reference/android/os/Parcelable.html?hl=ja">Parcelable</a></code> インターフェースを実装するオブジェクトによって定義されます。
Android フレームワークでは、このようなオブジェクトである <code><a href="https://developer.android.com/reference/android/preference/Preference.BaseSavedState.html?hl=ja">Preference.BaseSavedState</a></code> クラスが状態オブジェクトを定義するためのベースクラスとして提供されています。
</p>

<p><code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> クラスが状態を保存する方法を定義するには、<code><a href="https://developer.android.com/reference/android/preference/Preference.BaseSavedState.html?hl=ja">Preference.BaseSavedState</a></code> クラスを継承する必要があります。
いくつかのメソッドをオーバーライドして <code><a href="https://developer.android.com/reference/android/preference/Preference.BaseSavedState.html?hl=ja#CREATOR">CREATOR</a></code> オブジェクトを定義してください。

</p>

<p>大部分のアプリでは、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> サブクラスが整数以外のデータ型のデータを保存している場合は、次の実装をコピーして、<code>value</code> を処理している行を変更するだけで使用できます。

</p>

<pre>
private static class SavedState extends BaseSavedState {
    // Member that holds the setting's value
    // Change this data type to match the type saved by your Preference
    int value;

    public SavedState(Parcelable superState) {
        super(superState);
    }

    public SavedState(Parcel source) {
        super(source);
        // Get the current preference's value
        value = source.readInt();  // Change this to read the appropriate data type
    }

    &#64;Override
    public void writeToParcel(Parcel dest, int flags) {
        super.writeToParcel(dest, flags);
        // Write the preference's value
        dest.writeInt(value);  // Change this to write the appropriate data type
    }

    // Standard creator object using an instance of this class
    public static final Parcelable.Creator&lt;SavedState> CREATOR =
            new Parcelable.Creator&lt;SavedState>() {

        public SavedState createFromParcel(Parcel in) {
            return new SavedState(in);
        }

        public SavedState[] newArray(int size) {
            return new SavedState[size];
        }
    };
}
</pre>

<p><code><a href="https://developer.android.com/reference/android/preference/Preference.BaseSavedState.html?hl=ja">Preference.BaseSavedState</a></code> の上記の実装をアプリに追加（通常、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> サブクラスのサブクラスとして追加）するとともに、<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja">Preference</a></code> サブクラスの <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja#onSaveInstanceState()">onSaveInstanceState()</a></code> と <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=ja#onRestoreInstanceState(android.os.Parcelable)">onRestoreInstanceState()</a></code> メソッドを実装する必要があります。


</p>

<p>次に例を示します。</p>

<pre>
&#64;Override
protected Parcelable onSaveInstanceState() {
    final Parcelable superState = super.onSaveInstanceState();
    // Check whether this Preference is persistent (continually saved)
    if (isPersistent()) {
        // No need to save instance state since it's persistent,
        // use superclass state
        return superState;
    }

    // Create instance of custom BaseSavedState
    final SavedState myState = new SavedState(superState);
    // Set the state's value with the class member that holds current
    // setting value
    myState.value = mNewValue;
    return myState;
}

&#64;Override
protected void onRestoreInstanceState(Parcelable state) {
    // Check whether we saved the state in onSaveInstanceState
    if (state == null || !state.getClass().equals(SavedState.class)) {
        // Didn't save the state, so call superclass
        super.onRestoreInstanceState(state);
        return;
    }

    // Cast state to custom BaseSavedState and pass to superclass
    SavedState myState = (SavedState) state;
    super.onRestoreInstanceState(myState.getSuperState());

    // Set this Preference's widget to reflect the restored state
    mNumberPicker.setValue(myState.value);
}
</pre>




    </div>

    

  
    
  
    



<div class="wrap">
  <footer class="dac-footer ">
    <div class="cols dac-footer-main">
      <div class="col-1of2">
        <div class="dac-footer-contact">
          <a class="dac-footer-contact-link" href="https://developer.android.com/newsletter/index.html?hl=ja" title="Newsletter">Newsletter</a>
          <a class="dac-footer-contact-link" href="https://android-developers.blogspot.com/" title="ブログ" target="_blank">ブログ</a>
          <a class="dac-footer-contact-link" href="https://developer.android.com/support.html?hl=ja" title="サポート">サポート</a>
        </div>
      </div>
      <div class="col-1of2 dac-footer-reachout">
        <div class="dac-footer-social">
          <a class="dac-button-social dac-youtube dac-footer-social-link" href="https://www.youtube.com/user/androiddevelopers" title="Android Developers on YouTube" target="_blank"><i class="dac-sprite dac-youtube"></i><span class="hide-text">Android Developers on YouTube</span></a>
          <a class="dac-button-social dac-gplus dac-footer-social-link" href="https://plus.google.com/+AndroidDevelopers" title="Android Developers on Google+" target="_blank"><i class="dac-sprite dac-gplus"></i><span class="hide-text">Android Developers on Google+</span></a>
          <a class="dac-button-social dac-twitter dac-footer-social-link" href="https://twitter.com/AndroidDev" title="Android Developers on Twitter" target="_blank"><i class="dac-sprite dac-twitter"></i><span class="hide-text">Android Developers on Twitter</span></a>
        </div>
      </div>
    </div>

    <hr class="dac-footer-separator"/>
      
      <p class="dac-footer-copyright">
        
        Except as noted, this content is licensed under <a href="http://creativecommons.org/licenses/by/2.5/" target="_blank">Creative Commons Attribution 2.5</a>. For details and restrictions, see the <a href="https://developer.android.com/license.html">Content License</a>.
      </p>
    

    <p class="dac-footer-links">
      <a href="https://www.android.com/" title="Android.com" target="_blank">Android.com</a>
      <a href="https://developer.android.com/?hl=ja" title="Android Developers">Android Developers</a>
      <a href="https://developer.android.com/studio/index.html?hl=ja" title="Android Studio">Android Studio</a>
      <a href="https://developer.android.com/distribute/console/index.html?hl=ja" title="Google Play Console">Google Play Console</a>
      <a href="https://developer.android.com/legal.html?hl=ja" title="Legal Notice">Legal Notice</a>
    </p>

    <!-- TODO(akassay) Update all DAC js to use the class instead of the id b/30368561 -->
    <form class="devsite-utility-footer-language" id="setlang" action="https://developer.android.com/i18n/setlang/" method="post">
      <input type="hidden" name="xsrf_token" value="xpESqBdUEmPU9FfPFvM_BOSUhETE4dz1NIpKrylk-z06MTQ5NzUxNzE1Mzg5MjU0MA" />
      <input type="hidden" name="next" value="settings.html">
      <span id="language" class="locales">
        <select class="devsite-utility-footer-language-select" name="language">
          
          <option value="id"
            >
            Bahasa Indonesia
          </option>
          
          <option value="de"
            >
            Deutsch
          </option>
          
          <option value="en"
            >
            English
          </option>
          
          <option value="es"
            >
            español
          </option>
          
          <option value="es-419"
            >
            Español (América Latina)
          </option>
          
          <option value="fr"
            >
            français
          </option>
          
          <option value="pt-br"
            >
            Português Brasileiro
          </option>
          
          <option value="vi"
            >
            Tiếng Việt
          </option>
          
          <option value="tr"
            >
            Türkçe
          </option>
          
          <option value="ru"
            >
            Русский
          </option>
          
          <option value="th"
            >
            ภาษาไทย
          </option>
          
          <option value="ja"
             selected="selected" >
            日本語
          </option>
          
          <option value="zh-cn"
            >
            简体中文
          </option>
          
          <option value="zh-tw"
            >
            繁體中文
          </option>
          
          <option value="ko"
            >
            한국어
          </option>
          
        </select>
      </span>
    </form>
  </footer>
</div><!--/.wrap -->

<div class="dac-toast-group">
  <div class="dac-toast" data-toast>
    <div class="dac-toast-wrap">
      This site uses cookies to store your preferences for site-specific language and display options.
    </div>
  </div>
</div>

<div data-modal="newsletter" data-newsletter-fb data-swap class="dac-modal newsletter">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <div class="dac-swap" data-swap-container>
          <section class="dac-swap-section dac-active dac-down">
            <h2 class="norule dac-modal-header-title" data-t="newsletter.title">Get the latest Android developer news and tips that will help you find success on Google Play.</h2>
            <p class="dac-modal-header-subtitle" data-t="newsletter.requiredHint">* Required Fields</p>
          </section>
          <section class="dac-swap-section dac-up">
            
            <h2 class="norule dac-modal-header-title" data-t="newsletter.successTitle">Hooray!</h2>
          </section>
        </div>
      </header>
      <div class="dac-swap" data-swap-container>
        <section class="dac-swap-section dac-active dac-left">
          <form action="https://services.google.com/fb/submissions/android-developer-mailing-list/" class="dac-form" method="post">
            <section class="dac-modal-content">
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-full-name" class="dac-form-floatlabel" data-t="newsletter.name">Full name</label>
                      <input type="text" class="dac-form-input" name="fullname" id="newsletter-full-name" required>
                      <span class="dac-form-required">*</span>
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-email" class="dac-form-floatlabel" data-t="newsletter.email">メールアドレス</label>
                      <input type="email" class="dac-form-input" name="emailaddress" id="newsletter-email" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-company" class="dac-form-floatlabel" data-t="newsletter.company">Company / developer name</label>
                      <input type="text" class="dac-form-input" name="companydevelopername" id="newsletter-company">
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-play-store" class="dac-form-floatlabel" data-t="newsletter.appUrl">One of your Play Store app URLs</label>
                      <input type="url" class="dac-form-input" name="playstoreappurls" id="newsletter-play-store">
                    </div>
                  </div>
                </div>
              </fieldset>
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol newsletter-interested" data-validation-message="Please check at least one item.">
                    <legend class="dac-form-legend">What are you interested in?<span class="dac-form-required">*</span></legend>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-whats-new" value="whats-new">
                      <label for="interested-whats-new" class="dac-form-checkbox-button"></label>
                      <label for="interested-whats-new" class="dac-form-label">What's new</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-games-updates" value="games-updates">
                      <label for="interested-games-updates" class="dac-form-checkbox-button"></label>
                      <label for="interested-games-updates" class="dac-form-label">Games updates</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-android-development" value="android-development">
                      <label for="interested-android-development" class="dac-form-checkbox-button"></label>
                      <label for="interested-android-development" class="dac-form-label">Android development</label>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol newsletter-checkboxes">
                    <div class="dac-form-input-group">
                      <label for="newsletter-receive-in">Receive newsletter in</label>
                      <select name="language" class="dac-form-select" id="newsletter-receive-in">
                        <option value="en-US" selected>English</option>
                        <option value="ar">Arabic</option>
                        <option value="zh">Chinese (Simplified)</option>
                        <option value="zh-TW">Chinese (Traditional)</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="id">Indonesian (Bahasa)</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="pt-BR">Portuguese (Brazilian)</option>
                        <option value="ru">Russian</option>
                        <option value="es-419">Spanish (Latin American)</option>
                        <option value="th">Thai</option>
                        <option value="tr">Turkish</option>
                        <option value="vi">Vietnamese</option>
                      </select>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="marketingoptin" id="newsletter-add" required value="Add me to the mailing list.">
                          <label for="newsletter-add" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-add" class="dac-form-label dac-form-aside">
                            Add me to the mailing list.
                            <span class="dac-form-required">*</span>
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="privacystatement" id="newsletter-terms" required value="I acknowledge that the information provided in this form will be subject to Google's privacy policy (https://www.google.com/policies/privacy/).">
                          <label for="newsletter-terms" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-terms" class="dac-form-label dac-form-aside"><span data-t="newsletter.privacyPolicy" data-t-html>
                            
                            I acknowledge that the information provided in this form will be subject to <a href="https://www.google.com/policies/privacy/">Google's privacy policy</a>.
                          </span>
                          <span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fieldset>
            </section>
            <input type="hidden" name="referrer" value="dac">
            <footer class="dac-modal-footer">
              <div class="cols">
                <div class="col-2of5">
                </div>
              </div>
              <button type="submit" value="Submit" class="dac-fab dac-primary dac-large dac-modal-action"><i class="dac-sprite dac-arrow-right"></i></button>
            </footer>
          </form>
        </section>
        <section class="dac-swap-section dac-right">
          <div class="dac-modal-content">
            <p class="newsletter-success-message" data-t="newsletter.successDetails">
              You have successfully signed up for the latest Android developer news and tips.
            </p>
          </div>
        </section>
      </div>
    </div>
  </div>
</div><!--/.dac-modal.newsletter-->


<div data-modal="langform" class="dac-modal" id="langform">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            Browse this site in <span class="span-target-lang"></span>?
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <fieldset class="dac-form-fieldset">
              <div class="cols">
                <div class="col-2of2 langform-leftCol">
                  <p id="resetLangText">
                    You requested a page in <span class="span-target-lang"></span>, but your language preference for this site is <span class="span-current-lang"></span>.
                  </p>
                  <p id="resetLangCta">
                    Would you like to change your language preference and browse this site in <span class="span-target-lang"></span>? If you want to change your language preference later, use the language menu at the bottom of each page.
                  </p>
                </div>
              </div>
            </fieldset>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="yes" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang yes" data-t="newsletter.resetLangButtonYes" data-modal-toggle>
                Change Language
              </button>
            </a>
            <a href="#" class="" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang no" data-t="newsletter.resetLangButtonNo" data-modal-toggle>
                Not Now
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal-->


<div data-modal="api-unavailable" class="dac-modal" id="api-unavailable">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            This class requires API level <span class="api-level"></span> or higher
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <p>
              This doc is hidden because your selected API level for the documentation is <span class="api-level"></span>. You can change the documentation API level with the selector above the left navigation.
            </p>
            
            <p>For more information about specifying the API level your app requires, read <a href="https://developer.android.com/training/basics/supporting-devices/platforms.html">Supporting Different Platform Versions</a>.</p>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="ok" onclick="return false;">
              <button class="button dac-primary dac-modal-action ok"
              data-modal-toggle>
                OK, make this page visible
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal#api-unavailable-->

    
  </div><!--/#body-content-->

  <!-- Nav Setup -->
  <script>$('[data-dac-nav]').dacNav();</script>
  <script type="text/javascript">
    $('.slideshow-container').dacSlideshow({
        btnPrev: '.slideshow-prev',
        btnNext: '.slideshow-next',
        btnPause: '#pauseButton'
    });

    $(".feed").dacTabbedList({
      nav_id: '.feed-nav',
      frame_id: '.feed-frame'
    });
  </script>
  
  <script src="../../../ytblogger_lists_unifieddd52.js?hl=ja?v=2017061508" defer></script>
  <script src="../../../android_metadata_endd52.js?hl=ja?v=2017061508" defer></script>
  
  <script src="../../../reference/listsdd52.js?hl=ja?v=2017061508" defer></script>
  <script src="../../../reference/gms_listsdd52.js?hl=ja?v=2017061508" defer></script>
  <script src="../../../reference/android/support/wearable/listsdd52.js?hl=ja?v=2017061508" defer></script>
  <script src="../../../reference/android/support/test/listsdd52.js?hl=ja?v=2017061508" defer></script>
  <script src="../../../reference/android/support/constraint/listsdd52.js?hl=ja?v=2017061508" defer></script>
  <script src="https://developer.android.com/_static2/f304fc21fa/jsi18n/?hl=ja"></script>
  <script>
    // Load localized metadata.
    (function(lang) {
      if (lang === 'en') { return; }
      document.write('<script src="https://developer.android.com/android_metadata_ja.js?hl=ja?v=2017061508" defer></' + 'script>');
    })(getLangPref())

    // Add skip to content for accessibility.
    $('#skip-to-main').click(function() {
      $('a[name=top]').focus();
    });

    $('.devsite-utility-footer-language-select').each(function() {
      $(this).change(function() {
        changeLangPref(this.value, true)
        $('.devsite-utility-footer-language').submit();
      });
    });
  </script>

  <script>
    (function($) {
      devsite.analytics.InitAnalytics();
    })(jQuery);
  </script>

  


<div id="survey-box-wrapper">
  <div class="material-dialog" style="width:270px">
    <div class="material-dialog-title">
      Take a one-minute survey?
    </div>
    <div class="material-dialog-description">
      Help us improve Android tools and documentation.
    </div>
    <div class="material-button-bar">
      <a class="dac-button dac-primary dac-raised" target="_blank"
          href="https://goo.gl/forms/kV7MoyD2dvcWkd5N2">Sure</a>
      <a class="dac-button" href="#">No thanks</a>
    </div>
  </div>
</div>

</body>

<!-- Mirrored from developer.android.com/guide/topics/ui/settings.html?hl=ja by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:16:34 GMT -->
</html>

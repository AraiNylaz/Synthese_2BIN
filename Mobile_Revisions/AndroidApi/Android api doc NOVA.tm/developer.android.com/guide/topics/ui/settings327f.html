





<!DOCTYPE html>
<html lang="vi">

<!-- Mirrored from developer.android.com/guide/topics/ui/settings.html?hl=vi by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:05:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

  



<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta content="IE=edge" http-equiv="X-UA-Compatible">





<script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script>

<meta charset="utf-8">



<meta name="xsrf_token" content="zA21zzO8o1pQCRbF-11UsNEM9XyqluxCWbXGgZKHDnU6MTQ5NzUxNjI1MzcxMjg2MA" />

  
    <link rel="canonical" href="settings327f.html?hl=vi">
  

  
    <link rel="alternate" href="settings9201.html?hl=ru" hreflang="ru">
  
    <link rel="alternate" href="settingsf854.html?hl=zh-tw" hreflang="zh-Hant">
  
    <link rel="alternate" href="settings327f.html?hl=vi" hreflang="vi">
  
    <link rel="alternate" href="settings0b8e.html?hl=zh-cn" hreflang="zh-Hans">
  
    <link rel="alternate" href="settings7554.html?hl=es-419" hreflang="es-419">
  
    <link rel="alternate" href="settings232e.html?hl=ko" hreflang="ko">
  
    <link rel="alternate" href="settings0cf2.html?hl=id" hreflang="id">
  
    <link rel="alternate" href="settings9e29.html?hl=ja" hreflang="ja">
  
    <link rel="alternate" href="settings6dd3.html?hl=pt-br" hreflang="pt-br">
  
    <link rel="alternate" href="settings.html" hreflang="en">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=ru" hreflang="ru-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=zh-tw" hreflang="zh-Hant-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=vi" hreflang="vi-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=zh-cn" hreflang="zh-Hans-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=es-419" hreflang="es-419-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=ko" hreflang="ko-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=id" hreflang="id-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=ja" hreflang="ja-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html?hl=pt-br" hreflang="pt-br-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/ui/settings.html" hreflang="en-cn">
  

  <link rel="alternate" href="settings.html" hreflang="x-default">




<link rel="shortcut icon" href="../../../_static/f304fc21fa/images/android/favicon327f.png?hl=vi">

<link rel="apple-touch-icon" href="../../../_static/f304fc21fa/images/android/touchicon-180327f.png?hl=vi">


<title>

  Thiết đặt | Android Developers

</title>

  <meta name="description" content="Ứng dụng thường bao gồm những thiết đặt cho phép người dùng sửa đổi các tính năng và hành vi của ứng dụng. Ví dụ, một số ứng dụng cho phép người dùng quy định xem thông báo có được kích hoạt hay không hoặc quy định tần suất ứng dụng sẽ đồng bộ dữ liệu…">


<!-- STYLESHEETS -->
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto+Condensed">
<link rel="stylesheet"
    href="http://fonts.googleapis.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold"
    title="roboto">







<link href="../../../static/css/default0c0e.css?hl=vi?v=2017061508" rel="stylesheet" type="text/css">
<!-- JAVASCRIPT -->
<script src="../../../_static/f304fc21fa/js/android_3p-bundle327f.js?hl=vi" type="text/javascript"></script>
<script src="../../../_static/f304fc21fa/js/script_foot_closure_android__vi327f.js?hl=vi"></script>
<script src="../../../_static/f304fc21fa/js/script_foot_android327f.js?hl=vi"></script>

<script type="text/javascript">
  var toRoot = 'https://developer.android.com/';
  devsite.permissions.init({"039e5d84b87fd75807ffb37b7f1bbf2c": true, "098dafe57affddc137df300142652cfd": false, "cb025a64a50094835616312f4774a53d": true, "51470233c56fc1fde50f00b73c52b216": false, "752953480de00a336d911a46966cc16d": false, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true});

  var replaceBlog = false;
  var replaceYouTube = false;
  var siteDefaultLocale = 'en';

  var ANDROID_LANGUAGES = [
      'id','de','en','es','es-419','fr','pt-br','vi','tr','ru','th','ja','zh-cn','zh-tw','ko'
  ];
</script>
<script src="../../../static/js/docs0c0e.js?hl=vi?v=2017061508" type="text/javascript"></script>


</head>

<body class="gc-documentation
            
            
              develop
              guide
            
            "
      itemscope itemtype="http://schema.org/Article">
  


  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;vi&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;vi&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-49880327-2&quot;}">
  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;vi&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;vi&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-5831155-1&quot;}">
  



  
  
    <script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "userCountry": "BE", "language": {"requested": "vi", "served": "vi"}, "projectName": "API Guides", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>
  



  
  <a href="#top" id="skip-to-main">Skip to content</a>
  <header id="header-wrapper">
    <div class="dac-header" id="header">
      <div class="dac-header-inner">
        <a class="dac-nav-toggle" data-dac-toggle-nav href="#" title="Open navigation">
          <span class="dac-nav-hamburger">
            <span class="dac-nav-hamburger-top"></span>
            <span class="dac-nav-hamburger-mid"></span>
            <span class="dac-nav-hamburger-bot"></span>
          </span>
        </a>
        
        <a class="dac-header-logo" href="https://developer.android.com/index.html?hl=vi">
          <img class="dac-header-logo-image" src="../../../static/images/android_logo327f.png?hl=vi"
              srcset="https://developer.android.com/static/images/android_logo_2x.png 2x?hl=vi"
              width="32" height="36" alt="Android"> Developers</a>
        <ul class="dac-header-tabs">
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/design/index.html?hl=vi"
               zh-tw-lang="設計"
               zh-cn-lang="设计"
               ru-lang="Проектирование"
               ko-lang="디자인"
               ja-lang="設計"
               es-lang="Diseñar">Design</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/develop/index.html?hl=vi"
               zh-tw-lang="開發"
               zh-cn-lang="开发"
               ru-lang="Разработка"
               ko-lang="개발"
               ja-lang="開発"
               es-lang="Desarrollar">Develop</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/distribute/index.html?hl=vi"
               zh-tw-lang="發佈"
               zh-cn-lang="分发"
               ru-lang="Распространение"
               ko-lang="배포"
               ja-lang="配布"
               es-lang="Distribuir">Distribute</a>
          </li>
        </ul>


        

        <a class="dac-header-console-btn gc-analytics-event" href="https://play.google.com/apps/publish/"
           data-category="User" data-action="Console" data-label="Clicked">
          <img src="https://developer.android.com/static/images/developer-console-icon.svg?hl=vi" width="18" height="19" alt="Bảng điều khiển Play">Play Console</a>

        

<form data-search="" class="dac-header-search">
  <button class="dac-header-search-close" data-search-close="">
    <i class="dac-sprite dac-back-arrow"></i>
  </button>

  <div class="dac-header-search-inner">
    <i class="dac-sprite dac-search-white dac-header-search-icon"></i>
    
    <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q" class="dac-header-search-input" placeholder="Tìm kiếm">
    <button class="dac-header-search-clear dac-hidden" data-search-clear="">
      <i class="dac-sprite dac-close-black"></i>
    </button>
  </div>
</form>

        
      </div><!--/.header-wrap.wrap-->
    </div><!--/.header-->

    

<div id="search-results" class="dac-search-results">
  <div id="dac-search-results-history" class="dac-search-results-history">
    <div class="wrap dac-search-results-history-wrap">
      <div class="cols">
        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Most visited</h2>
          <div class="resource-flow-layout" data-history-query="history:most/visited" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>

        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Recently visited</h2>
          <div class="resource-flow-layout cols" data-history-query="history:recent" data-allow-duplicates="true" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="dac-search-results-content" class="dac-search-results-content">
    <div class="dac-search-results-metadata wrap">
      <div class="dac-search-results-for">
        
          <h2>
          Results for <span id="search-results-for"></span>
          </h2>
      </div>

      <div id="dac-search-results-hero"></div>

      <div class="dac-search-results-hero cols">
        <div id="dac-search-results-reference" class="col-6of6 col-tablet-2of2 col-mobile-1of1">
          <div class="suggest-card reference no-display">
            <ul class="dac-search-results-reference">
            </ul>
          </div>
        </div>
      </div>

      <div class="cols dac-search-results-cse">
        <script src="../../../../cse.google.com/f4116.txt?cx=000521750095050289010:zpcpi1ea4s8" async></script>
        <gcse:searchresults-only linkTarget="_self"></gcse:searchresults-only>
      </div>
    </div>
  </div>
</div>

  </header>

  <a name="navigation" tabindex=0 class="nav-start-marker">navigation</a>
  <nav class="dac-nav">
    <div class="dac-nav-dimmer" data-dac-toggle-nav></div>
    <div class="dac-nav-sidebar" data-swap data-dynamic="false" data-transition-speed="300" data-dac-nav>
      <div data-swap-container>
        
        <a class="dac-nav-back-button dac-swap-section dac-up dac-no-anim" tabindex=0 data-swap-button>
          
          <i class="dac-sprite dac-nav-back"></i> <span class="dac-nav-back-title">Quay lại</span>
        </a>

        <div class="dac-nav-sub dac-swap-section dac-right dac-active" itemscope
            itemtype="http://schema.org/SiteNavigationElement">
          
          
            
            <ul id="nav">
              <li class="nav-section"><div class="nav-section-header"><a href="../../index327f.html?hl=vi" >Introduction</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/fundamentals327f.html?hl=vi" >App Fundamentals</a></li><li><a href="../../practices/compatibility327f.html?hl=vi" >Device Compatibility</a></li><li class="nav-section"><div class="nav-section-header"><a href="../permissions/index327f.html?hl=vi" >System Permissions</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../permissions/requesting327f.html?hl=vi" >Requesting Permissions</a></li><li><a href="../permissions/defining327f.html?hl=vi" >Defining Permissions</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../platform/index327f.html?hl=vi" >Platform Architecture</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../platform/j8-jack327f.html?hl=vi"  es-lang="Funciones del lenguaje Java 8" in-lang="Fitur Bahasa Java 8" ja-lang="Java 8 の機能" ko-lang="Java 8 언어 기능" pt-br-lang="Recursos de linguagem do Java 8" ru-lang="Возможности языка Java 8" vi-lang="Tính năng của Ngôn ngữ Java 8" zh-cn-lang="Java 8 语言功能" zh-tw-lang="Java 8 語言功能">Use Java 8 Language Features</a></li><li><a href="../../practices/verifying-apps-art327f.html?hl=vi" >Verifying App Behavior on the Android Runtime (ART)</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/index327f.html?hl=vi" >App Components</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../../components/intents-filters327f.html?hl=vi" >Intents and Intent Filters</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/intents-common327f.html?hl=vi" >Common Intents</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/activities/index327f.html?hl=vi" >Activities</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/activities/intro-activities327f.html?hl=vi" >Introduction to Activities</a></li><li><a href="../../components/activities/activity-lifecycle327f.html?hl=vi" >The Activity Lifecycle</a></li><li><a href="../../components/activities/state-changes327f.html?hl=vi" >Activity State Changes</a></li><li><a href="../../components/activities/tasks-and-back-stack327f.html?hl=vi" >Tasks and Back Stack</a></li><li><a href="../../components/activities/process-lifecycle327f.html?hl=vi" >Processes and Application Lifecycle</a></li><li><a href="../../components/activities/parcelables-and-bundles327f.html?hl=vi" >Parcelables and Bundles</a></li><li><a href="../../components/activities/recents327f.html?hl=vi" >Recents Screen</a></li></ul></li><li><a href="../../components/fragments327f.html?hl=vi" >Fragments</a></li><li><a href="../../components/loaders327f.html?hl=vi" >Loaders</a></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/services327f.html?hl=vi" >Services</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/bound-services327f.html?hl=vi" >Bound Services</a></li><li><a href="../../components/aidl327f.html?hl=vi" >AIDL</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../providers/content-providers327f.html?hl=vi" >Content Providers</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../providers/content-provider-basics327f.html?hl=vi" >Content Provider Basics</a></li><li><a href="../providers/content-provider-creating327f.html?hl=vi" >Creating a Content Provider</a></li><li><a href="../providers/calendar-provider327f.html?hl=vi" >Calendar Provider</a></li><li><a href="../providers/contacts-provider327f.html?hl=vi" >Contacts Provider</a></li><li><a href="../providers/document-provider327f.html?hl=vi" >Open files using Storage Access Framework</a></li><li><a href="../providers/create-document-provider327f.html?hl=vi" >Create a Custom Document Provider</a></li></ul></li><li><a href="../../components/broadcasts327f.html?hl=vi" >Broadcasts</a></li><li class="nav-section"><div class="nav-section-header"><a href="../appwidgets/index327f.html?hl=vi" >App Widgets</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../appwidgets/host327f.html?hl=vi" >App Widget Host</a></li></ul></li><li><a href="../../components/processes-and-threads327f.html?hl=vi" >Processes and Threads</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/index327f.html?hl=vi" >App Resources</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/overview327f.html?hl=vi" >Overview</a></li><li><a href="../resources/providing-resources327f.html?hl=vi" >Providing Resources</a></li><li><a href="../resources/accessing-resources327f.html?hl=vi" >Accessing Resources</a></li><li><a href="../resources/runtime-changes327f.html?hl=vi" >Handling Runtime Changes</a></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/localization327f.html?hl=vi" >Localization</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/icu4j-framework327f.html?hl=vi" >ICU4J Android Framework APIs</a></li><li><a href="../resources/multilingual-support327f.html?hl=vi" >Language and Locale</a></li></ul></li><li><a href="../resources/complex-xml-resources327f.html?hl=vi" >Complex XML Resources</a></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/available-resources327f.html?hl=vi" >Resource Types</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/animation-resource327f.html?hl=vi" >Animation</a></li><li><a href="../resources/color-list-resource327f.html?hl=vi" >Color State List</a></li><li><a href="../resources/drawable-resource327f.html?hl=vi" >Drawable</a></li><li><a href="../resources/layout-resource327f.html?hl=vi" >Layout</a></li><li><a href="../resources/menu-resource327f.html?hl=vi" >Menu</a></li><li><a href="../resources/string-resource327f.html?hl=vi" >String</a></li><li><a href="../resources/style-resource327f.html?hl=vi" >Style</a></li><li><a href="../resources/more-resources327f.html?hl=vi" >More Types</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../manifest/manifest-intro327f.html?hl=vi" >App Manifest</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../manifest/action-element327f.html?hl=vi" >&lt;action&gt;</a></li><li><a href="../manifest/activity-element327f.html?hl=vi" >&lt;activity&gt;</a></li><li><a href="../manifest/activity-alias-element327f.html?hl=vi" >&lt;activity-alias&gt;</a></li><li><a href="../manifest/application-element327f.html?hl=vi" >&lt;application&gt;</a></li><li><a href="../manifest/category-element327f.html?hl=vi" >&lt;category&gt;</a></li><li><a href="../manifest/compatible-screens-element327f.html?hl=vi" >&lt;compatible-screens&gt;</a></li><li><a href="../manifest/data-element327f.html?hl=vi" >&lt;data&gt;</a></li><li><a href="../manifest/grant-uri-permission-element327f.html?hl=vi" >&lt;grant-uri-permission&gt;</a></li><li><a href="../manifest/instrumentation-element327f.html?hl=vi" >&lt;instrumentation&gt;</a></li><li><a href="../manifest/intent-filter-element327f.html?hl=vi" >&lt;intent-filter&gt;</a></li><li><a href="../manifest/manifest-element327f.html?hl=vi" >&lt;manifest&gt;</a></li><li><a href="../manifest/meta-data-element327f.html?hl=vi" >&lt;meta-data&gt;</a></li><li><a href="../manifest/path-permission-element327f.html?hl=vi" >&lt;path-permission&gt;</a></li><li><a href="../manifest/permission-element327f.html?hl=vi" >&lt;permission&gt;</a></li><li><a href="../manifest/permission-group-element327f.html?hl=vi" >&lt;permission-group&gt;</a></li><li><a href="../manifest/permission-tree-element327f.html?hl=vi" >&lt;permission-tree&gt;</a></li><li><a href="../manifest/provider-element327f.html?hl=vi" >&lt;provider&gt;</a></li><li><a href="../manifest/receiver-element327f.html?hl=vi" >&lt;receiver&gt;</a></li><li><a href="../manifest/service-element327f.html?hl=vi" >&lt;service&gt;</a></li><li><a href="../manifest/supports-gl-texture-element327f.html?hl=vi" >&lt;supports-gl-texture&gt;</a></li><li><a href="../manifest/supports-screens-element327f.html?hl=vi" >&lt;supports-screens&gt;</a></li><li><a href="../manifest/uses-configuration-element327f.html?hl=vi" >&lt;uses-configuration&gt;</a></li><li><a href="../manifest/uses-feature-element327f.html?hl=vi" >&lt;uses-feature&gt;</a></li><li><a href="../manifest/uses-library-element327f.html?hl=vi" >&lt;uses-library&gt;</a></li><li><a href="../manifest/uses-permission-element327f.html?hl=vi" >&lt;uses-permission&gt;</a></li><li><a href="../manifest/uses-permission-sdk-23-element327f.html?hl=vi" >&lt;uses-permission-sdk-23&gt;</a></li><li><a href="../manifest/uses-sdk-element327f.html?hl=vi" >&lt;uses-sdk&gt;</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="index327f.html?hl=vi" >User Interface</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="overview327f.html?hl=vi" >Overview</a></li><li class="nav-section"><div class="nav-section-header"><a href="declaring-layout327f.html?hl=vi" >Layouts</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="layout/linear327f.html?hl=vi" >Linear Layout</a></li><li><a href="layout/relative327f.html?hl=vi" >Relative Layout</a></li><li><a href="layout/recyclerview327f.html?hl=vi" >Recycler View</a></li><li><a href="layout/listview327f.html?hl=vi" >List View</a></li><li><a href="layout/gridview327f.html?hl=vi" >Grid View</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="controls327f.html?hl=vi" >Input Controls</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="controls/button327f.html?hl=vi" >Buttons</a></li><li><a href="controls/checkbox327f.html?hl=vi" >Checkboxes</a></li><li><a href="controls/radiobutton327f.html?hl=vi" >Radio Buttons</a></li><li><a href="controls/togglebutton327f.html?hl=vi" >Toggle Buttons</a></li><li><a href="controls/spinner327f.html?hl=vi" >Spinners</a></li><li><a href="controls/pickers327f.html?hl=vi" >Pickers</a></li></ul></li><li><a href="ui-events327f.html?hl=vi" >Input Events</a></li><li><a href="menus327f.html?hl=vi" >Menus</a></li><li><a href="settings327f.html?hl=vi" >Settings</a></li><li><a href="dialogs327f.html?hl=vi" >Dialogs</a></li><li><a href="notifiers/notifications327f.html?hl=vi" >Notifications</a></li><li><a href="notifiers/toasts327f.html?hl=vi" >Toasts</a></li><li><a href="shortcuts327f.html?hl=vi" >App Shortcuts</a></li><li class="nav-section"><div class="nav-section-header"><a href="../search/index327f.html?hl=vi" >Search</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../search/search-dialog327f.html?hl=vi" >Creating a Search Interface</a></li><li><a href="../search/adding-recent-query-suggestions327f.html?hl=vi" >Adding Recent Query Suggestions</a></li><li><a href="../search/adding-custom-suggestions327f.html?hl=vi" >Adding Custom Suggestions</a></li><li><a href="../search/searchable-config327f.html?hl=vi" >Searchable Configuration</a></li></ul></li><li><a href="multi-window327f.html?hl=vi" >Multi-Window Support</a></li><li><a href="drag-drop327f.html?hl=vi" >Drag and Drop</a></li><li class="nav-section"><div class="nav-section-header"><a href="accessibility/index327f.html?hl=vi" >Accessibility</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="accessibility/apps327f.html?hl=vi" >Making Apps More Accessible</a></li><li><a href="accessibility/checklist327f.html?hl=vi" >Accessibility Developer Checklist</a></li><li><a href="accessibility/node-tree-debugging327f.html?hl=vi" >Using Node Tree Debugging</a></li><li><a href="accessibility/services327f.html?hl=vi" >Building Accessibility Services</a></li><li><a href="accessibility/custom-views327f.html?hl=vi" >Building Accessible Custom Views</a></li></ul></li><li><a href="themes327f.html?hl=vi" >Styles and Themes</a></li><li><a href="custom-components327f.html?hl=vi" >Custom Components</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../graphics/index327f.html?hl=vi" >Animation and Graphics</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../graphics/overview327f.html?hl=vi" >Overview</a></li><li><a href="../graphics/prop-animation327f.html?hl=vi" >Property Animation</a></li><li><a href="../graphics/view-animation327f.html?hl=vi" >View Animation</a></li><li><a href="../graphics/drawable-animation327f.html?hl=vi" >Drawable Animation</a></li><li class="nav-section"><div class="nav-section-header"><a href="../graphics/2d-graphics327f.html?hl=vi" >Canvas and Drawables</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../graphics/vector-drawable-resources327f.html?hl=vi" >Vector Drawable</a></li></ul></li><li><a href="../graphics/opengl327f.html?hl=vi" >OpenGL ES</a></li><li><a href="../graphics/hardware-accel327f.html?hl=vi" >Hardware Acceleration</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../renderscript/index327f.html?hl=vi" >Computation</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../renderscript/compute327f.html?hl=vi" >RenderScript</a></li><li><a href="../renderscript/advanced327f.html?hl=vi" >Advanced RenderScript</a></li><li class="nav-section"><div class="nav-section-header"><a href="../renderscript/reference/overview327f.html?hl=vi" >Runtime API Reference</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../renderscript/reference/rs_value_types327f.html?hl=vi" >Numerical Types</a></li><li><a href="../renderscript/reference/rs_object_types327f.html?hl=vi" >Object Types</a></li><li><a href="../renderscript/reference/rs_convert327f.html?hl=vi" >Conversion Functions</a></li><li><a href="../renderscript/reference/rs_math327f.html?hl=vi" >Mathematical Constants and Functions</a></li><li><a href="../renderscript/reference/rs_vector_math327f.html?hl=vi" >Vector Math Functions</a></li><li><a href="../renderscript/reference/rs_matrix327f.html?hl=vi" >Matrix Functions</a></li><li><a href="../renderscript/reference/rs_quaternion327f.html?hl=vi" >Quaternion Functions</a></li><li><a href="../renderscript/reference/rs_atomic327f.html?hl=vi" >Atomic Update Functions</a></li><li><a href="../renderscript/reference/rs_time327f.html?hl=vi" >Time Functions and Types</a></li><li><a href="../renderscript/reference/rs_allocation_data327f.html?hl=vi" >Allocation Data Access Functions</a></li><li><a href="../renderscript/reference/rs_object_info327f.html?hl=vi" >Object Characteristics Functions</a></li><li><a href="../renderscript/reference/rs_for_each327f.html?hl=vi" >Kernel Invocation Functions and Types</a></li><li><a href="../renderscript/reference/rs_io327f.html?hl=vi" >Input/Output Functions</a></li><li><a href="../renderscript/reference/rs_debug327f.html?hl=vi" >Debugging Functions</a></li><li><a href="../renderscript/reference/rs_graphics327f.html?hl=vi" >Graphics Functions and Types</a></li><li><a href="../renderscript/reference/index327f.html?hl=vi" >Index</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../media-apps/index327f.html?hl=vi" >Media Apps</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media-apps/media-apps-overview327f.html?hl=vi" >Media Apps Overview</a></li><li><a href="../media-apps/working-with-a-media-session327f.html?hl=vi" >Working with a Media Session</a></li><li class="nav-section"><div class="nav-section-header"><a href="../media-apps/audio-app/building-an-audio-app327f.html?hl=vi" >Building an Audio App</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media-apps/audio-app/building-a-mediabrowserservice327f.html?hl=vi" >Building a Media Browser Service</a></li><li><a href="../media-apps/audio-app/building-a-mediabrowser-client327f.html?hl=vi" >Building a Media Browser Client</a></li><li><a href="../media-apps/audio-app/mediasession-callbacks327f.html?hl=vi" >Media Session Callbacks</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../media-apps/video-app/building-a-video-app327f.html?hl=vi" >Building a Video App</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media-apps/video-app/building-a-video-player-activity327f.html?hl=vi" >Building a Video Player Activity</a></li><li><a href="../media-apps/video-app/mediasession-callbacks327f.html?hl=vi" >Media Session Callbacks</a></li></ul></li><li><a href="../media-apps/mediabuttons327f.html?hl=vi" >Responding to Media Buttons</a></li><li><a href="../media-apps/volume-and-earphones327f.html?hl=vi" >Handling Changes in Audio Output</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../media/index327f.html?hl=vi" >Media and Camera</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media/media-formats327f.html?hl=vi" >Supported Media Formats</a></li><li><a href="../media/mediaplayer327f.html?hl=vi" >MediaPlayer</a></li><li><a href="../media/mediarecorder327f.html?hl=vi" >MediaRecorder</a></li><li><a href="../media/exoplayer327f.html?hl=vi" >ExoPlayer</a></li><li class="nav-section"><div class="nav-section-header"><a href="../media/media-routing327f.html?hl=vi" >Media Routing</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media/mediarouter327f.html?hl=vi" >MediaRouter API</a></li><li><a href="../media/mediarouteprovider327f.html?hl=vi" >MediaRouteProvider API</a></li></ul></li><li><a href="../media/camera327f.html?hl=vi" >Camera API</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../sensors/index327f.html?hl=vi" >Location and Sensors</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../location/index327f.html?hl=vi" >Location and Maps</a></li><li><a href="../location/strategies327f.html?hl=vi" >Location Strategies</a></li><li><a href="../sensors/sensors_overview327f.html?hl=vi" >Sensors Overview</a></li><li><a href="../sensors/sensors_motion327f.html?hl=vi" >Motion Sensors</a></li><li><a href="../sensors/sensors_position327f.html?hl=vi" >Position Sensors</a></li><li><a href="../sensors/sensors_environment327f.html?hl=vi" >Environment Sensors</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/index327f.html?hl=vi" >Connectivity</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/bluetooth327f.html?hl=vi" >Bluetooth</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/bluetooth-le327f.html?hl=vi" >Bluetooth Low Energy</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/nfc/index327f.html?hl=vi" >NFC</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/nfc/nfc327f.html?hl=vi" >NFC Basics</a></li><li><a href="../connectivity/nfc/advanced-nfc327f.html?hl=vi" >Advanced NFC</a></li><li><a href="../connectivity/nfc/hce327f.html?hl=vi" >Host-based Card Emulation</a></li></ul></li><li><a href="../connectivity/wifip2p327f.html?hl=vi" >Wi-Fi P2P</a></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/usb/index327f.html?hl=vi" >USB</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/usb/accessory327f.html?hl=vi" >Accessory</a></li><li><a href="../connectivity/usb/host327f.html?hl=vi" >Host</a></li></ul></li><li><a href="../connectivity/sip327f.html?hl=vi" >SIP</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../text/index327f.html?hl=vi" >Text and Input</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../text/copy-paste327f.html?hl=vi" >Copy and Paste</a></li><li class="nav-section"><div class="nav-section-header"><a href="../text/creating-input-method327f.html?hl=vi" >Creating an IME</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../text/image-keyboard327f.html?hl=vi" >Image Keyboard</a></li></ul></li><li><a href="../text/spell-checker-framework327f.html?hl=vi" >Spelling Checker</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../data/index327f.html?hl=vi" >Data Storage</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../data/data-storage327f.html?hl=vi" >Storage Options</a></li><li class="nav-section"><div class="nav-section-header"><a href="../data/backup327f.html?hl=vi" >Data Backup</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../data/autobackup327f.html?hl=vi" >Auto Backup</a></li><li><a href="../data/keyvaluebackup327f.html?hl=vi" >Key/Value Backup</a></li><li><a href="../data/testingbackup327f.html?hl=vi" >Testing Backup and Restore</a></li></ul></li><li><a href="../data/install-location327f.html?hl=vi" >App Install Location</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../admin/index327f.html?hl=vi" >Administration</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../admin/device-admin327f.html?hl=vi" >Device Policies</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../webapps/index327f.html?hl=vi" >Web Apps</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../webapps/targeting327f.html?hl=vi" >Supporting Different Screens in Web Apps</a></li><li><a href="../../webapps/webview327f.html?hl=vi" >Building Web Apps in WebView</a></li><li><a href="../../webapps/migrating327f.html?hl=vi" >Migrating to WebView in Android 4.4</a></li><li><a href="../../webapps/debugging327f.html?hl=vi" >Debugging Web Apps</a></li><li><a href="../../webapps/best-practices327f.html?hl=vi" >Best Practices for Web Apps</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../practices/index327f.html?hl=vi"  de-lang="Bewährte Verfahren" es-lang="Prácticas recomendadas" fr-lang="Meilleures pratiques" it-lang="Best practice" ja-lang="ベスト プラクティス" zh-cn-lang="最佳实践" zh-tw-lang="最佳實務">Best Practices</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../../practices/screens_support327f.html?hl=vi" >Supporting Multiple Screens</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../practices/screens-distribution327f.html?hl=vi" >Distributing to Specific Screens</a></li><li><a href="../../practices/screen-compat-mode327f.html?hl=vi" >Screen Compatibility Mode</a></li></ul></li><li><a href="../../practices/app-design/seamlessness327f.html?hl=vi" >Designing for Seamlessness</a></li><li><a href="../../practices/tablets-and-handsets327f.html?hl=vi" >Supporting Tablets and Handsets</a></li></ul></li>
            </ul>
            
          
        </div>
        
        
          



<ul id="dac-main-navigation" class="dac-nav-list dac-swap-section dac-left dac-no-anim" tabindex=0>
  <li class="dac-nav-item home">
    <a class="dac-nav-link" href="https://developer.android.com/index.html?hl=vi">Trang chủ</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary about">
      <li class="dac-nav-item versions">
        <a class="dac-nav-link" href="https://developer.android.com/about/versions/nougat/index.html?hl=vi">Android</a>
      </li>
      <li class="dac-nav-item wear">
        <a class="dac-nav-link" href="https://developer.android.com/wear/index.html?hl=vi">Wear</a>
      </li>
      <li class="dac-nav-item tv">
        <a class="dac-nav-link" href="https://developer.android.com/tv/index.html?hl=vi">TV</a>
      </li>
      <li class="dac-nav-item auto">
        <a class="dac-nav-link" href="https://developer.android.com/auto/index.html?hl=vi">Auto</a>
      </li>
      <li class="dac-nav-item things">
        <a class="dac-nav-link" href="https://developer.android.com/things/index.html?hl=vi">Things</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item design">
    <a class="dac-nav-link" href="https://developer.android.com/design/index.html?hl=vi"
       zh-tw-lang="設計"
       zh-cn-lang="设计"
       ru-lang="Проектирование"
       ko-lang="디자인"
       ja-lang="設計"
       es-lang="Diseñar">Design</a>
  </li>
  <li class="dac-nav-item develop">
    <a class="dac-nav-link" href="https://developer.android.com/develop/index.html?hl=vi"
       zh-tw-lang="開發"
       zh-cn-lang="开发"
       ru-lang="Разработка"
       ko-lang="개발"
       ja-lang="開発"
       es-lang="Desarrollar">Develop</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary develop">
      <li class="dac-nav-item training">
        <a class="dac-nav-link" href="https://developer.android.com/training/index.html?hl=vi"
           zh-tw-lang="訓練課程"
           zh-cn-lang="培训"
           ru-lang="Курсы"
           ko-lang="교육"
           ja-lang="トレーニング"
           es-lang="Capacitación">Đào tạo</a>
      </li>
      <li class="dac-nav-item guide">
        <a class="dac-nav-link" href="../../index327f.html?hl=vi"
           zh-tw-lang="API 指南"
           zh-cn-lang="API 指南"
           ru-lang="Руководства по API"
           ko-lang="API 가이드"
           ja-lang="API ガイド"
           es-lang="Guías de la API">API Guides</a>
      </li>
      <li class="dac-nav-item reference">
        <a class="dac-nav-link" href="https://developer.android.com/reference/packages.html?hl=vi"
           zh-tw-lang="參考資源"
           zh-cn-lang="参考"
           ru-lang="Справочник"
           ko-lang="참조문서"
           ja-lang="リファレンス"
           es-lang="Referencia">Tham chiếu</a>
      </li>
      <li class="dac-nav-item samples">
        <a class="dac-nav-link" href="https://developer.android.com/samples/index.html?hl=vi">Mẫu</a>
      </li>
      <li class="dac-nav-item libraries">
        <a class="dac-nav-link" href="https://developer.android.com/topic/libraries/index.html?hl=vi"
           >Thư viện</a></li>
      <li class="dac-nav-item studio">
        <a class="dac-nav-link" href="https://developer.android.com/studio/index.html?hl=vi"
           >Android Studio</a></li>
      <li class="dac-nav-item ndk">
        <a class="dac-nav-link" href="https://developer.android.com/ndk/index.html?hl=vi"
           >Android NDK</a></li>
      <li class="dac-nav-item google">
        <a class="dac-nav-link" href="https://developer.android.com/google/index.html?hl=vi">Google Services</a>
      </li>
      <li class="dac-nav-item quality-guidelines">
        <a class="dac-nav-link" href="https://developer.android.com/develop/quality-guidelines/index.html?hl=vi">Quality Guidelines</a>
      </li>
      <li class="dac-nav-item kotlin">
        <a class="dac-nav-link" href="https://developer.android.com/kotlin/index.html?hl=vi">Kotlin</a>
       </li>
    </ul>
  </li>
  <li class="dac-nav-item distribute">
    <a class="dac-nav-link" href="https://developer.android.com/distribute/index.html?hl=vi"
       zh-tw-lang="發佈"
       zh-cn-lang="分发"
       ru-lang="Распространение"
       ko-lang="배포"
       ja-lang="配布"
       de-lang="Vertrieb"
       es-lang="Distribuir"
       es-419-lang="Distribuye"
       fr-lang="Distribuer"
       id-lang="Distribusikan"
       pt-br-lang="Distribuição"
       th-lang="จัดจำหน่าย"
       tr-lang="Dağıtma"
       vi-lang="Phân phối">Distribute</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary distribute">
      <li class="dac-nav-item google-play">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/google-play/index.html?hl=vi">Google Play</a>
      </li>
      <li class="dac-nav-item console">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/console/index.html?hl=vi">Bảng điều khiển Play</a>
      </li>
      <li class="dac-nav-item best-practices">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/best-practices/index.html?hl=vi"
          es-419-lang="Recomendaciones"
          fr-lang="Bonnes pratiques"
          id-lang="Praktik terbaik"
          ja-lang="おすすめの方法"
          ko-lang="권장사항"
          pt-br-lang="Práticas recomendadas"
          ru-lang="Рекомендации"
          th-lang="จัดจำหน่าย"
          tr-lang="En iyi uygulamalar"
          vi-lang="Các phương pháp hay nhất"
          zh-cn-lang="最佳做法"
          zh-tw-lang="最佳做法">Best practices</a>
      </li>
      <li class="dac-nav-item marketing-tools">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/marketing-tools/index.html?hl=vi"
          de-lang="Marketing-Tools"
          es-419-lang="Herramientas de marketing"
          fr-lang="Outils marketing"
          id-lang="Fitur pemasaran"
          ja-lang="マーケティング ツール"
          ko-lang="마케팅 도구"
          pt-br-lang="Ferramentas de marketing"
          ru-lang="Маркетинговые инструменты"
          th-lang="เครื่องมือการตลาด"
          tr-lang="Pazarlama araçları"
          vi-lang="Công cụ tiếp thị"
          zh-cn-lang="营销工具"
          zh-tw-lang="行銷工具">Marketing tools</a>
      </li>
      <li class="dac-nav-item policy-center">
        <a class="dac-nav-link" href="https://play.google.com/about/developer-content-policy/" target="_blank">Policy center</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item stories">
    <a class="dac-nav-link" href="https://developer.android.com/stories/index.html?hl=vi">Stories</a>
  </li>
  
  <li class="dac-nav-item preview">
    <a class="dac-nav-link" href="https://developer.android.com/preview/index.html?hl=vi">Preview</a>
  </li>
  
</ul>

        
      </div>
    </div>
  </nav>

  <a name="top" tabindex="0"></a>
  
  <div class="wrap clearfix" id="body-content">
  
    
      
      <div class="content-header">
        <ul class="dac-header-crumbs"></ul>
        <!-- Breadcrumb Setup -->
        <script>$('.dac-nav-list').dacCurrentPage().dacCrumbs();</script>
        <h1 itemprop="name">Thiết đặt</h1>
      
        
      
      </div>
      
    
    <div class="jd-descr " itemprop="articleBody">
      

<div id="qv-wrapper">
<div id="qv">

<h2>Trong tài liệu này</h2>
<ol>
  <li><a href="#Overview">Tổng quan</a>
    <ol>
      <li><a href="#SettingTypes">Tùy chọn</a></li>
    </ol>
  </li>
  <li><a href="#DefiningPrefs">Định nghĩa Tùy chọn trong XML</a>
    <ol>
      <li><a href="#Groups">Tạo nhóm thiết đặt</a></li>
      <li><a href="#Intents">Sử dụng ý định</a></li>
    </ol>
  </li>
  <li><a href="#Activity">Tạo một Hoạt động Tùy chọn</a></li>
  <li><a href="#Fragment">Sử dụng Phân đoạn Tùy chọn</a></li>
  <li><a href="#Defaults">Thiết đặt Giá trị Mặc định</a></li>
  <li><a href="#PreferenceHeaders">Sử dụng Tiêu đề Tùy chọn</a>
    <ol>
      <li><a href="#CreateHeaders">Tạo tệp tiêu đề</a></li>
      <li><a href="#DisplayHeaders">Hiển thị tiêu đề</a></li>
      <li><a href="#BackCompatHeaders">Hỗ trợ các phiên bản cũ hơn với tiêu đề tùy chọn</a></li>
    </ol>
  </li>
  <li><a href="#ReadingPrefs">Đọc Tùy chọn</a>
    <ol>
      <li><a href="#Listening">Theo dõi thay đổi tùy chọn</a></li>
    </ol>
  </li>
  <li><a href="#NetworkUsage">Quản lý Sử dụng Mạng</a></li>
  <li><a href="#Custom">Xây dựng một Thiết đặt Tùy chỉnh</a>
    <ol>
      <li><a href="#CustomSelected">Quy định một giao diện người dùng</a></li>
      <li><a href="#CustomSave">Lưu giá trị của thiết đặt</a></li>
      <li><a href="#CustomInitialize">Khởi tạo giá trị hiện tại</a></li>
      <li><a href="#CustomDefault">Cung cấp một giá trị mặc định</a></li>
      <li><a href="#CustomSaveState">Lưu và khôi phục trạng thái của Tùy chọn</a></li>
    </ol>
  </li>
</ol>

<h2>Lớp khóa</h2>
<ol>
  <li><code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code></li>
  <li><code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi">PreferenceActivity</a></code></li>
  <li><code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi">PreferenceFragment</a></code></li>
</ol>


<h2>Xem thêm</h2>
<ol>
  <li><a href="https://developer.android.com/design/patterns/settings.html?hl=vi">Hướng dẫn thiết kế Thiết đặt</a></li>
</ol>
</div>
</div>




<p>Ứng dụng thường bao gồm những thiết đặt cho phép người dùng sửa đổi các tính năng và hành vi của ứng dụng. Ví
dụ, một số ứng dụng cho phép người dùng quy định xem thông báo có được kích hoạt hay không hoặc quy định tần suất
ứng dụng sẽ đồng bộ dữ liệu với đám mây.</p>

<p>Nếu muốn cung cấp thiết đặt cho ứng dụng của mình, bạn nên sử dụng
các API <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> của Android để xây dựng một giao diện phù hợp với
trải nghiệm người dùng trong các ứng dụng Android khác (bao gồm thiết đặt hệ thống). Tài liệu này mô tả
cách xây dựng thiết đặt ứng dụng của bạn bằng cách sử dụng các API <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code>.</p>

<div class="note design">
<p><strong>Thiết kế Thiết đặt</strong></p>
  <p>Để biết thông tin về cách thiết kế thiết đặt của bạn, hãy đọc hướng dẫn thiết kế <a href="https://developer.android.com/design/patterns/settings.html?hl=vi">Thiết đặt</a>.</p>
</div>


<img src="../../../images/ui/settings/settings327f.png?hl=vi" alt="" width="435" />
<p class="img-caption"><strong>Hình 1.</strong> Ảnh chụp màn hình từ thiết đặt của ứng dụng
Messaging trên Android. Chọn một mục được định nghĩa bởi một <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code>
sẽ mở ra một giao diện để thay đổi thiết đặt.</p>




<h2 id="Overview">Tổng quan</h2>

<p>Thay vì sử dụng các đối tượng <code><a href="https://developer.android.com/reference/android/view/View.html?hl=vi">View</a></code> để xây dựng giao diện người dùng, thiết đặt được
xây dựng bằng cách sử dụng các lớp con khác nhau của lớp <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> mà bạn
khai báo trong một tệp XML.</p>

<p>Đối tượng <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> là một khối dựng cho một thiết đặt
đơn lẻ. Mỗi <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> xuất hiện như một mục trong một danh sách và cung cấp
UI phù hợp để người dùng sửa đổi thiết đặt. Ví dụ, một <code><a href="https://developer.android.com/reference/android/preference/CheckBoxPreference.html?hl=vi">CheckBoxPreference</a></code> tạo một mục danh sách hiển thị một hộp kiểm, và một <code><a href="https://developer.android.com/reference/android/preference/ListPreference.html?hl=vi">ListPreference</a></code> tạo một mục mở ra một hộp thoại với danh sách lựa chọn.</p>

<p>Mỗi <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> mà bạn thêm có một cặp khóa-giá trị tương ứng mà
hệ thống sử dụng để lưu thiết đặt trong một tệp <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=vi">SharedPreferences</a></code>
mặc định cho thiết đặt của ứng dụng của bạn. Khi người dùng thay đổi một thiết đặt, hệ thống sẽ cập nhật giá trị
tương ứng trong tệp <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=vi">SharedPreferences</a></code> cho bạn. Lần duy nhất mà bạn nên
trực tiếp tương tác với tệp <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=vi">SharedPreferences</a></code> được liên kết đó là khi bạn
cần đọc giá trị để xác định xem hành vi ứng dụng của mình có được dựa trên thiết đặt của người dùng không.</p>

<p>Giá trị được lưu trong <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=vi">SharedPreferences</a></code> cho từng thiết đặt có thể là một trong các kiểu dữ liệu
sau:</p>

<ul>
  <li>Boolean</li>
  <li>Float</li>
  <li>Int</li>
  <li>Long</li>
  <li>String</li>
  <li>String <code><a href="https://developer.android.com/reference/java/util/Set.html?hl=vi">Set</a></code></li>
</ul>

<p>Vì thiết đặt của ứng dụng của bạn được xây dựng bằng cách sử dụng các đối tượng <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code>
thay vì đối tượng
<code><a href="https://developer.android.com/reference/android/view/View.html?hl=vi">View</a></code>, bạn nên sử dụng một lớp con <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=vi">Activity</a></code> hoặc
<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=vi">Fragment</a></code> chuyên dụng để hiển thị thiết đặt danh sách:</p>

<ul>
  <li>Nếu ứng dụng của bạn hỗ trợ các phiên bản Android cũ hơn 3.0 (API mức 10 và thấp hơn), bạn phải
xây dựng hoạt động như một phần mở rộng của lớp <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi">PreferenceActivity</a></code>.</li>
  <li>Trên phiên bản Android 3.0 trở lên, thay vào đó, bạn nên sử dụng một <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=vi">Activity</a></code>
truyền thống nơi lưu giữ <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi">PreferenceFragment</a></code> để hiển thị thiết đặt ứng dụng của bạn.
Tuy nhiên, bạn cũng có thể sử dụng <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi">PreferenceActivity</a></code> để tạo một bố trí hai bảng
cho màn hình lớn khi bạn có nhiều nhóm thiết đặt.</li>
</ul>

<p>Cách thiết đặt <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi">PreferenceActivity</a></code> của bạn và các thực thể của <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi">PreferenceFragment</a></code> được trình bày trong các phần về <a href="#Activity">Tạo một Hoạt động Tùy chọn</a> và <a href="#Fragment">Sử dụng
Phân đoạn Tùy chọn</a>.</p>


<h3 id="SettingTypes">Tùy chọn</h3>

<p>Mọi thiết đặt cho ứng dụng của bạn đều được biểu diễn bởi một lớp con cụ thể của lớp <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code>. Mỗi lớp con lại bao gồm một tập hợp các tính chất cốt lõi cho phép bạn
quy định những thứ như tiêu đề cho thiết đặt và giá trị mặc định. Mỗi lớp con cũng cung cấp
các tính chất và giao diện người dùng chuyên dụng của chính nó. Ví dụ, hình 1 mình họa một ảnh chụp màn hình từ thiết đặt của ứng dụng
Messaging. Mỗi mục danh sách trong màn hình thiết đặt được hỗ trợ bởi một đối tượng <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> khác nhau.</p>

<p>Sau đây là một số tùy chọn phổ biến nhất:</p>

<dl>
  <dt><code><a href="https://developer.android.com/reference/android/preference/CheckBoxPreference.html?hl=vi">CheckBoxPreference</a></code></dt>
  <dd>Hiển thị một mục kèm một hộp kiểm cho thiết đặt hoặc được kích hoạt hoặc bị vô hiệu hóa. Giá trị
được lưu là một boolean (<code>true</code> nếu nó được chọn).</dd>

  <dt><code><a href="https://developer.android.com/reference/android/preference/ListPreference.html?hl=vi">ListPreference</a></code></dt>
  <dd>Mở một hộp thoại kèm danh sách nút chọn một. Giá trị được lưu
có thể là bất kỳ loại giá trị được hỗ trợ nào (liệt kê bên trên).</dd>

  <dt><code><a href="https://developer.android.com/reference/android/preference/EditTextPreference.html?hl=vi">EditTextPreference</a></code></dt>
  <dd>Mở một hộp thoại kèm một widget <code><a href="https://developer.android.com/reference/android/widget/EditText.html?hl=vi">EditText</a></code>. Giá trị được lưu là một <code><a href="https://developer.android.com/reference/java/lang/String.html?hl=vi">String</a></code>.</dd>
</dl>

<p>Xem lớp <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> để biết danh sách tất cả các lớp con khác và tính chất
tương ứng của chúng.</p>

<p>Dĩ nhiên, các lớp tích hợp không đáp ứng mọi nhu cầu và ứng dụng của bạn có thể yêu cầu
lớp con chuyên dụng hơn. Ví dụ, nền tảng này hiện chưa cung cấp một lớp <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> cho việc chọn một số hay ngày. Vì thế, bạn có thể cần phải định nghĩa
lớp con <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> của chính mình. Để được trợ giúp khi làm vậy, hãy xem phần về <a href="#Custom">Xây dựng Thiết đặt Tùy chỉnh</a>.</p>



<h2 id="DefiningPrefs">Định nghĩa Tùy chọn trong XML</h2>

<p>Mặc dù bạn có thể khởi tạo các đối tượng <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> mới vào thời gian chạy, bạn
nên định nghĩa danh sách các thiết đặt của mình trong XML kèm một phân cấp của các đối tượng <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code>
. Việc sử dụng một tệp XML để định nghĩa bộ sưu tập thiết đặt của bạn sẽ được ưu tiên vì tệp
cung cấp một cấu trúc dễ đọc, cập nhật đơn giản. Bên cạnh đó, các thiết đặt ứng dụng của bạn thường được
xác định trước, mặc dù bạn vẫn có thể sửa đổi bộ sưu tập vào thời gian chạy.</p>

<p>Mỗi lớp con <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> có thể được khai báo bằng một phần tử XML mà
khớp với tên lớp đó, chẳng hạn như <code>&amp;lt;CheckBoxPreference&amp;gt;</code>.</p>

<p>Bạn phải lưu tệp XML trong thư mục <code>res/xml/</code>. Mặc dù bạn có thể đặt tên tệp là
bất cứ thứ gì mình muốn, nó thường được đặt tên là<code>preferences.xml</code>. Bạn thường chỉ cần một tệp,
bởi các nhánh trong phân cấp (mà mở danh sách thiết đặt của riêng chúng) sẽ được khai báo bằng cách sử dụng các thực thể
lồng nhau của <code><a href="https://developer.android.com/reference/android/preference/PreferenceScreen.html?hl=vi">PreferenceScreen</a></code>.</p>

<p class="note"><strong>Lưu ý:</strong> Nếu bạn muốn tạo một bố trí đa bảng cho thiết đặt
của mình, vậy bạn nên tách riêng các tệp XML cho từng phân đoạn.</p>

<p>Node gốc cho tệp XML phải là một phần tử <code><a href="https://developer.android.com/reference/android/preference/PreferenceScreen.html?hl=vi">&lt;PreferenceScreen&gt;</a></code>. Trong phần tử này là nơi bạn thêm từng <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code>. Từng phần tử con mà bạn thêm vào trong phần tử
<code><a href="https://developer.android.com/reference/android/preference/PreferenceScreen.html?hl=vi">&lt;PreferenceScreen&gt;</a></code> sẽ xuất hiện như một mục
đơn lẻ trong danh sách thiết đặt.</p>

<p>Ví dụ:</p>

<pre>
&lt;?xml version="1.0" encoding="utf-8"?>
&lt;PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    &lt;CheckBoxPreference
        android:key="pref_sync"
        android:title="@string/pref_sync"
        android:summary="@string/pref_sync_summ"
        android:defaultValue="true" />
    &lt;ListPreference
        android:dependency="pref_sync"
        android:key="pref_syncConnectionType"
        android:title="@string/pref_syncConnectionType"
        android:dialogTitle="@string/pref_syncConnectionType"
        android:entries="@array/pref_syncConnectionTypes_entries"
        android:entryValues="@array/pref_syncConnectionTypes_values"
        android:defaultValue="@string/pref_syncConnectionTypes_default" />
&lt;/PreferenceScreen>
</pre>

<p>Trong ví dụ này, có một <code><a href="https://developer.android.com/reference/android/preference/CheckBoxPreference.html?hl=vi">CheckBoxPreference</a></code> và một <code><a href="https://developer.android.com/reference/android/preference/ListPreference.html?hl=vi">ListPreference</a></code>. Cả hai mục đều bao gồm ba thuộc tính sau:</p>

<dl>
  <dt><code>android:key</code></dt>
  <dd>Thuộc tính này được yêu cầu cho các tùy chọn duy trì một giá trị dữ liệu. Nó quy định khóa
(xâu) duy nhất mà hệ thống sử dụng khi lưu giá trị của thiết đặt này trong <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=vi">SharedPreferences</a></code>.
  <p>Các thực thể duy nhất mà thuộc tính này không <em>được yêu cầu</em> là khi tùy chọn là một
<code><a href="https://developer.android.com/reference/android/preference/PreferenceCategory.html?hl=vi">PreferenceCategory</a></code> hoặc <code><a href="https://developer.android.com/reference/android/preference/PreferenceScreen.html?hl=vi">PreferenceScreen</a></code>, hoặc
tùy chọn quy định một <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=vi">Intent</a></code> để gọi ra (bằng phần tử <a href="#Intents"><code>&amp;lt;intent&amp;gt;</code></a>) hoặc <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=vi">Fragment</a></code> để hiển thị (bằng thuộc tính <a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi#attr_android:fragment"><code>android:fragment</code></a>).</p>
  </dd>
  <dt><code>android:title</code></dt>
  <dd>Thuộc tính này cung cấp một tên hiển thị với người dùng cho thiết đặt.</dd>
  <dt><code>android:defaultValue</code></dt>
  <dd>Nó quy định giá trị ban đầu mà hệ thống nên đặt trong tệp <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=vi">SharedPreferences</a></code>. Bạn nên cung cấp một giá trị mặc định cho tất cả
thiết đặt.</dd>
</dl>

<p>Để biết thông tin về tất cả thuộc tính được hỗ trợ khác, hãy xem tài liệu <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> (và lớp con tương ứng).</p>


<div class="figure" style="width:300px">
  <img src="../../../images/ui/settings/settings-titles327f.png?hl=vi" alt="" />
  <p class="img-caption"><strong>Hình 2.</strong> Thiết đặt thể loại
    có tiêu đề. <br/><b>1.</b> Thể loại được quy định bởi phần tử <code><a href="https://developer.android.com/reference/android/preference/PreferenceCategory.html?hl=vi">&lt;PreferenceCategory&gt;</a></code>. <br/><b>2.</b> Tiêu đề
được quy định bằng thuộc tính <code>android:title</code>.</p>
</div>


<p>Khi danh sách thiết đặt của bạn vượt quá khoảng 10 mục, bạn có thể muốn thêm tiêu đề để
định nghĩa các nhóm thiết đặt hoặc hiển thị các nhóm đó trong một
màn hình riêng. Những tùy chọn này được mô tả trong các phần sau.</p>


<h3 id="Groups">Tạo nhóm thiết đặt</h3>

<p>Nếu bạn trình bày một danh sách từ 10 thiết đặt trở lên, người dùng
có thể gặp khó khăn trong việc dò tìm, hiểu và xử lý chúng. Bạn có thể khắc phục điều này bằng cách
chia một số hoặc tất cả thiết đặt thành các nhóm, qua đó biến một danh sách dài thành nhiều
danh sách ngắn hơn. Một nhóm các thiết đặt có liên quan có thể được trình bày bằng một trong hai cách:</p>

<ul>
  <li><a href="#Titles">Sử dụng tiêu đề</a></li>
  <li><a href="#Subscreens">Sử dụng màn hình con</a></li>
</ul>

<p>Bạn có thể sử dụng một hoặc cả hai kỹ thuật tạo nhóm này để sắp xếp các thiết đặt cho ứng dụng của mình. Khi
quyết định sử dụng cái nào và làm thế nào để chia các thiết đặt của mình, bạn nên tuân theo các hướng dẫn trong tài liệu hướng dẫn
<a href="https://developer.android.com/design/patterns/settings.html?hl=vi">Thiết đặt</a> của Thiết kế Android.</p>


<h4 id="Titles">Sử dụng tiêu đề</h4>

<p>Nếu bạn muốn cung cấp các thanh chia có tiêu đề giữa các nhóm thiết đặt (như minh họa trong hình 2),
hãy đặt từng nhóm đối tượng <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> vào bên trong một <code><a href="https://developer.android.com/reference/android/preference/PreferenceCategory.html?hl=vi">PreferenceCategory</a></code>.</p>

<p>Ví dụ:</p>

<pre>
&lt;PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    &lt;PreferenceCategory
        android:title="&#64;string/pref_sms_storage_title"
        android:key="pref_key_storage_settings">
        &lt;CheckBoxPreference
            android:key="pref_key_auto_delete"
            android:summary="&#64;string/pref_summary_auto_delete"
            android:title="&#64;string/pref_title_auto_delete"
            android:defaultValue="false"... />
        &lt;Preference
            android:key="pref_key_sms_delete_limit"
            android:dependency="pref_key_auto_delete"
            android:summary="&#64;string/pref_summary_delete_limit"
            android:title="&#64;string/pref_title_sms_delete"... />
        &lt;Preference
            android:key="pref_key_mms_delete_limit"
            android:dependency="pref_key_auto_delete"
            android:summary="&#64;string/pref_summary_delete_limit"
            android:title="&#64;string/pref_title_mms_delete" ... />
    &lt;/PreferenceCategory>
    ...
&lt;/PreferenceScreen>
</pre>


<h4 id="Subscreens">Sử dụng màn hình con</h4>

<p>Nếu bạn muốn đặt các nhóm thiết đặt vào một màn hình con (như minh họa trong hình 3), hãy đặt nhóm
các đối tượng <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> vào bên trong một <code><a href="https://developer.android.com/reference/android/preference/PreferenceScreen.html?hl=vi">PreferenceScreen</a></code>.</p>

<img src="../../../images/ui/settings/settings-subscreen327f.png?hl=vi" alt="" />
<p class="img-caption"><strong>Hình 3.</strong> Màn hình con thiết đặt. Phần tử <code>&amp;lt;PreferenceScreen&amp;gt;</code> sẽ tạo
một mục mà, khi được chọn, nó sẽ mở ra một danh sách riêng để hiển thị các thiết đặt lồng nhau.</p>

<p>Ví dụ:</p>

<pre>
&lt;PreferenceScreen  xmlns:android="http://schemas.android.com/apk/res/android">
    &lt;!-- opens a subscreen of settings -->
    &lt;PreferenceScreen
        android:key="button_voicemail_category_key"
        android:title="&#64;string/voicemail"
        android:persistent="false">
        &lt;ListPreference
            android:key="button_voicemail_provider_key"
            android:title="&#64;string/voicemail_provider" ... />
        &lt;!-- opens another nested subscreen -->
        &lt;PreferenceScreen
            android:key="button_voicemail_setting_key"
            android:title="&#64;string/voicemail_settings"
            android:persistent="false">
            ...
        &lt;/PreferenceScreen>
        &lt;RingtonePreference
            android:key="button_voicemail_ringtone_key"
            android:title="&#64;string/voicemail_ringtone_title"
            android:ringtoneType="notification" ... />
        ...
    &lt;/PreferenceScreen>
    ...
&lt;/PreferenceScreen>
</pre>


<h3 id="Intents">Sử dụng ý định</h3>

<p>Trong một số trường hợp, bạn có thể muốn một mục tùy chọn mở một hoạt động khác thay vì một
màn hình thiết đặt, chẳng hạn như một trình duyệt web để xem một trang web. Để gọi ra một <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=vi">Intent</a></code> khi người dùng chọn một mục tùy chọn, hãy thêm một phần tử <code>&amp;lt;intent&amp;gt;</code>
làm con của phần tử <code>&amp;lt;Preference&amp;gt;</code> tương ứng.</p>

<p>Ví dụ, sau đây là cách bạn có thể sử dụng một mục tùy chọn để mở một trang web:</p>

<pre>
&lt;Preference android:title="@string/prefs_web_page" >
    &lt;intent android:action="android.intent.action.VIEW"
            android:data="http://www.example.com" />
&lt;/Preference>
</pre>

<p>Bạn có thể tạo cả ý định biểu thị và không biểu thị bằng cách sử dụng các thuộc tính sau:</p>

<dl>
  <dt><code>android:action</code></dt>
    <dd>Hành động cần gán, theo mỗi phương pháp <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=vi#setAction(java.lang.String)">setAction()</a></code>
.</dd>
  <dt><code>android:data</code></dt>
    <dd>Dữ liệu cần gán, theo mỗi phương pháp <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=vi#setData(android.net.Uri)">setData()</a></code>.</dd>
  <dt><code>android:mimeType</code></dt>
    <dd>Kiểu MIME cần gán, theo mỗi phương pháp <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=vi#setType(java.lang.String)">setType()</a></code>
.</dd>
  <dt><code>android:targetClass</code></dt>
    <dd>Phần lớp của tên thành phần, theo mỗi phương pháp <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=vi#setComponent(android.content.ComponentName)">setComponent()</a></code>.</dd>
  <dt><code>android:targetPackage</code></dt>
    <dd>Phần gói của tên thành phần, theo mỗi phương pháp <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=vi#setComponent(android.content.ComponentName)">setComponent()</a></code>.</dd>
</dl>



<h2 id="Activity">Tạo một Hoạt động Tùy chọn</h2>

<p>Để hiển thị thiết đặt của bạn trong một hoạt động, hãy mở rộng lớp <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi">PreferenceActivity</a></code>. Đây là phần mở rộng của lớp <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=vi">Activity</a></code> truyền thống mà hiển thị một danh sách các thiết đặt dựa trên một phân cấp của các đối tượng <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code>. <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi">PreferenceActivity</a></code>
sẽ tự động duy trì các thiết đặt liên kết với từng <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> khi người dùng thực hiện một thay đổi.</p>

<p class="note"><strong>Lưu ý:</strong> Nếu bạn đang phát triển ứng dụng của mình cho phiên bản Android 3.0 và
cao hơn, thay vào đó bạn nên sử dụng <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi">PreferenceFragment</a></code>. Đi đến phần
tiếp theo về <a href="#Fragment">Sử dụng Phân đoạn Tùy chọn</a>.</p>

<p>Điều quan trọng nhất cần nhớ đó là bạn không được tải một bố trí dạng xem trong khi gọi lại <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi#onCreate(android.os.Bundle)">onCreate()</a></code>. Thay vào đó, bạn hãy gọi <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi#addPreferencesFromResource(int)">addPreferencesFromResource()</a></code> để
thêm tùy chọn mà bạn đã khai báo trong một tệp XML vào hoạt động. Ví dụ, sau đây là đoạn mã tối thiểu
cần thiết cho một <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi">PreferenceActivity</a></code> chức năng:</p>

<pre>
public class SettingsActivity extends PreferenceActivity {
    &#64;Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);
    }
}
</pre>

<p>Đây là đoạn mã vừa đủ cho một số ứng dụng bởi ngay khi người dùng sửa đổi một tùy chọn,
hệ thống sẽ lưu thay đổi đối với tệp <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=vi">SharedPreferences</a></code> mặc định mà các
thành phần ứng dụng khác của bạn có thể đọc khi bạn cần kiểm tra thiết đặt của người dùng. Tuy nhiên,
nhiều ứng dụng lại yêu cầu thêm mã để theo dõi những thay đổi xảy ra với các tùy chọn đó.
Để biết thông tin về việc theo dõi thay đổi trong tệp <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=vi">SharedPreferences</a></code>,
hãy xem phần về <a href="#ReadingPrefs">Đọc Tùy chọn</a>.</p>




<h2 id="Fragment">Sử dụng Phân đoạn Tùy chọn</h2>

<p>Nếu bạn đang phát triển cho phiên bản Android 3.0 (API mức 11) trở lên, bạn nên sử dụng một <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi">PreferenceFragment</a></code> để hiển thị danh sách các đối tượng <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code>
của bạn. Bạn có thể thêm một <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi">PreferenceFragment</a></code> vào bất kỳ hoạt động nào&mdash;bạn không cần
sử dụng <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi">PreferenceActivity</a></code>.</p>

<p><a href="../../components/fragments327f.html?hl=vi">Phân đoạn</a> cung cấp một kiến trúc
linh hoạt hơn cho ứng dụng của bạn, so với việc sử dụng chỉ các hoạt động, dù loại hoạt động
mà bạn đang xây dựng là gì. Như vậy, chúng tôi gợi ý bạn sử dụng <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi">PreferenceFragment</a></code> để kiểm soát hiển thị các thiết đặt của mình thay cho <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi">PreferenceActivity</a></code> khi có thể.</p>

<p>Việc triển khai <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi">PreferenceFragment</a></code> có thể chỉ đơn giản như
định nghĩa phương pháp <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi#onCreate(android.os.Bundle)">onCreate()</a></code> để tải một
tệp tùy chọn bằng <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi#addPreferencesFromResource(int)">addPreferencesFromResource()</a></code>. Ví dụ:</p>

<pre>
public static class SettingsFragment extends PreferenceFragment {
    &#64;Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Load the preferences from an XML resource
        addPreferencesFromResource(R.xml.preferences);
    }
    ...
}
</pre>

<p>Khi đó, bạn có thể thêm phân đoạn này vào một <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=vi">Activity</a></code> giống như cách mà bạn sẽ làm với bất kỳ
<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=vi">Fragment</a></code> nào khác. Ví dụ:</p>

<pre>
public class SettingsActivity extends Activity {
    &#64;Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Display the fragment as the main content.
        getFragmentManager().beginTransaction()
                .replace(android.R.id.content, new SettingsFragment())
                .commit();
    }
}
</pre>

<p class="note"><strong>Lưu ý:</strong> <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi">PreferenceFragment</a></code> không có một
đối tượng <code><a href="https://developer.android.com/reference/android/content/Context.html?hl=vi">Context</a></code> của chính nó. Nếu bạn cần một đối tượng <code><a href="https://developer.android.com/reference/android/content/Context.html?hl=vi">Context</a></code>
, bạn có thể gọi <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=vi#getActivity()">getActivity()</a></code>. Tuy nhiên, hãy chắc chắn là chỉ gọi
<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=vi#getActivity()">getActivity()</a></code> khi phân đoạn đó được gắn kèm với một hoạt động. Khi
phân đoạn chưa được gắn kèm, hoặc bị bỏ gắn kèm trong khi kết thúc vòng đời của nó, <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=vi#getActivity()">getActivity()</a></code> sẽ trả về rỗng.</p>


<h2 id="Defaults">Thiết đặt Giá trị Mặc định</h2>

<p>Tùy chọn mà bạn tạo có thể định nghĩa một số hành vi quan trọng cho ứng dụng của bạn, vì thế
bạn cần phải khởi tạo tệp <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=vi">SharedPreferences</a></code> kèm theo với các
giá trị mặc định cho từng <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> khi người dùng lần đầu mở
ứng dụng của bạn.</p>

<p>Điều đầu tiên bạn phải làm đó là quy định một giá trị mặc định cho từng đối tượng <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code>
trong tệp XML của bạn bằng cách sử dụng thuộc tính <code>android:defaultValue</code>. Giá trị đó có thể là bất kỳ kiểu
dữ liệu nào mà phù hợp với đối tượng <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> tương ứng. Ví
dụ:</p>

<pre>
&lt;!-- default value is a boolean -->
&lt;CheckBoxPreference
    android:defaultValue="true"
    ... />

&lt;!-- default value is a string -->
&lt;ListPreference
    android:defaultValue="@string/pref_syncConnectionTypes_default"
    ... />
</pre>

<p>Khi đó, từ phương pháp <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=vi#onCreate(android.os.Bundle)">onCreate()</a></code> trong hoạt động chính
&mdash;của ứng dụng của bạn và trong bất kỳ hoạt động nào khác mà thông qua đó người dùng có thể vào ứng dụng của bạn lần
đầu tiên&mdash;hãy gọi <code><a href="https://developer.android.com/reference/android/preference/PreferenceManager.html?hl=vi#setDefaultValues(android.content.Context, int, boolean)">setDefaultValues()</a></code>:</p>

<pre>
PreferenceManager.setDefaultValues(this, R.xml.advanced_preferences, false);
</pre>

<p>Việc gọi này trong khi <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=vi#onCreate(android.os.Bundle)">onCreate()</a></code> sẽ đảm bảo rằng
ứng dụng của bạn được khởi tạo phù hợp với các thiết đặt mặc định mà ứng dụng của bạn có thể cần
đọc để xác định một số hành vi (chẳng hạn như có tải xuống dữ liệu trong khi đang trên
mạng di động hay không).</p>

<p>Phương pháp này dùng ba tham đối:</p>
<ul>
  <li><code><a href="https://developer.android.com/reference/android/content/Context.html?hl=vi">Context</a></code> ứng dụng của bạn.</li>
  <li>ID tài nguyên cho tệp XML tùy chọn mà bạn muốn đặt các giá trị mặc định cho.</li>
  <li>Một boolean cho biết các giá trị mặc định có nên được đặt nhiều hơn một lần hay không.
<p>Khi tham đối này là <code>false</code>, hệ thống sẽ đặt các giá trị mặc định chỉ khi phương pháp này chưa từng được
gọi trước đây (hoặc <code><a href="https://developer.android.com/reference/android/preference/PreferenceManager.html?hl=vi#KEY_HAS_SET_DEFAULT_VALUES">KEY_HAS_SET_DEFAULT_VALUES</a></code>
trong tệp tùy chọn được chia sẻ giá trị mặc định là sai).</p></li>
</ul>

<p>Miễn là bạn đặt tham đối thứ ba này thành <code>false</code>, bạn có thể gọi phương pháp này một cách an toàn
mỗi khi hoạt động của bạn bắt đầu mà không khống chế các tùy chọn đã lưu của người dùng bằng cách đặt lại chúng thành
mặc định. Tuy nhiên, nếu bạn đặt nó thành <code>true</code>, bạn sẽ khống chế mọi giá trị
trước đó bằng các giá trị mặc định.</p>



<h2 id="PreferenceHeaders">Sử dụng Tiêu đề Tùy chọn</h2>

<p>Trong vài trường hợp hiếm gặp, bạn có thể muốn thiết kế các thiết đặt của mình sao cho màn hình thứ nhất
chỉ hiển thị một danh sách <a href="#Subscreens">các màn hình con</a> (chẳng hạn như trong ứng dụng Thiết đặt của hệ thống,
như minh họa trong các hình 4 và 5). Khi phát triển thiết kế như vậy cho phiên bản Android 3.0 trở lên, bạn
nên sử dụng tính năng "tiêu đề" mới trong Android 3.0, thay vì xây dựng màn hình con với các phần tử
<code><a href="https://developer.android.com/reference/android/preference/PreferenceScreen.html?hl=vi">PreferenceScreen</a></code> lồng nhau.</p>

<p>Để xây dựng thiết đặt có tiêu đề của mình, bạn cần:</p>
<ol>
  <li>Tách riêng từng nhóm thiết đặt thành các thực thể riêng của <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi">PreferenceFragment</a></code>. Cụ thể, mỗi nhóm thiết đặt cần một tệp XML
riêng.</li>
  <li>Tạo một tệp tiêu đề XML liệt kê từng nhóm thiết đặt và khai báo phân đoạn nào
chứa danh sách thiết đặt tương ứng.</li>
  <li>Mở rộng lớp <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi">PreferenceActivity</a></code> để lưu trữ các thiết đặt của bạn.</li>
  <li>Triển khai lệnh gọi lại <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi#onBuildHeaders(java.util.List<android.preference.PreferenceActivity.Header>)">onBuildHeaders()</a></code> để quy định
tệp tiêu đề.</li>
</ol>

<p>Một lợi ích tuyệt vời đối với việc sử dụng thiết kế này đó là <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi">PreferenceActivity</a></code>
tự động trình bày bố trí hai bảng như minh họa trong hình 4 khi chạy trên màn hình lớn.</p>

<p>Ngay cả khi ứng dụng của bạn hỗ trợ các phiên bản Android cũ hơn 3.0, bạn có thể xây dựng ứng dụng
của mình để sử dụng <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi">PreferenceFragment</a></code> cho một trình chiếu hai bảng trên
các thiết bị mới hơn, trong khi vẫn hỗ trợ phân cấp đa màn hình truyền thống trên các thiết bị
cũ hơn (xem phần nói về <a href="#BackCompatHeaders">Hỗ trợ các phiên bản cũ hơn
với tiêu đề tùy chọn</a>).</p>

<img src="../../../images/ui/settings/settings-headers-tablet327f.png?hl=vi" alt="" />
<p class="img-caption"><strong>Hình 4.</strong> Bố trí có hai bảng với tiêu đề. <br/><b>1.</b>
Tiêu đề được định nghĩa trong một tệp tiêu đề XML. <br/><b>2.</b> Mỗi nhóm thiết đặt được định nghĩa bởi một
<code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi">PreferenceFragment</a></code>, được quy định bởi một phần tử <code>&amp;lt;header&amp;gt;</code> trong tệp tiêu đề
.</p>

<img src="../../../images/ui/settings/settings-headers-handset327f.png?hl=vi" alt="" />
<p class="img-caption"><strong>Hình 5.</strong> Thiết bị cầm tay với các tiêu đề thiết đặt. Khi một
mục được chọn, <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi">PreferenceFragment</a></code> được liên kết sẽ thay thế
tiêu đề.</p>


<h3 id="CreateHeaders" style="clear:left">Tạo tệp tiêu đề</h3>

<p>Mỗi nhóm thiết đặt trong danh sách tiêu đề của bạn được quy định bởi một phần tử <code>&amp;lt;header&amp;gt;</code>
đơn lẻ bên trong một phần tử <code>&amp;lt;preference-headers&amp;gt;</code> gốc. Ví dụ:</p>

<pre>
&lt;?xml version="1.0" encoding="utf-8"?>
&lt;preference-headers xmlns:android="http://schemas.android.com/apk/res/android">
    &lt;header
        android:fragment="com.example.prefs.SettingsActivity$SettingsFragmentOne"
        android:title="@string/prefs_category_one"
        android:summary="@string/prefs_summ_category_one" />
    &lt;header
        android:fragment="com.example.prefs.SettingsActivity$SettingsFragmentTwo"
        android:title="@string/prefs_category_two"
        android:summary="@string/prefs_summ_category_two" >
        &lt;!-- key/value pairs can be included as arguments for the fragment. -->
        &lt;extra android:name="someKey" android:value="someHeaderValue" />
    &lt;/header>
&lt;/preference-headers>
</pre>

<p>Với thuộc tính <code>android:fragment</code>, mỗi tiêu đề sẽ khai báo một thực thể của <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi">PreferenceFragment</a></code> mà sẽ mở khi người dùng chọn tiêu đề đó.</p>

<p>Phần tử <code>&amp;lt;extras&amp;gt;</code> cho phép bạn chuyển các cặp khóa-giá trị sang phân đoạn trong một <code><a href="https://developer.android.com/reference/android/os/Bundle.html?hl=vi">Bundle</a></code>. Phân đoạn có thể truy xuất các tham đối bằng cách gọi <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=vi#getArguments()">getArguments()</a></code>. Bạn có thể chuyển các tham đối tới phân đoạn vì nhiều
lý do khác nhau, nhưng một lý do chính đáng đó là để sử dụng lại cùng lớp con của <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi">PreferenceFragment</a></code> cho mỗi nhóm và sử dụng tham đối để quy định
tệp XML tùy chọn nào mà phân đoạn cần tải.</p>

<p>Ví dụ, sau đây là một phân đoạn mà có thể được tái sử dụng cho nhiều nhóm thiết đặt, khi từng
tiêu đề định nghĩa một tham đối <code>&amp;lt;extra&amp;gt;</code> với khóa <code>"settings"</code>:</p>

<pre>
public static class SettingsFragment extends PreferenceFragment {
    &#64;Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        String settings = getArguments().getString("settings");
        if ("notifications".equals(settings)) {
            addPreferencesFromResource(R.xml.settings_wifi);
        } else if ("sync".equals(settings)) {
            addPreferencesFromResource(R.xml.settings_sync);
        }
    }
}
</pre>



<h3 id="DisplayHeaders">Hiển thị tiêu đề</h3>

<p>Để hiển thị tiêu đề tùy chọn, bạn phải triển khai phương pháp gọi lại <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi#onBuildHeaders(java.util.List<android.preference.PreferenceActivity.Header>)">onBuildHeaders()</a></code> và gọi
<code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi#loadHeadersFromResource(int, java.util.List<android.preference.PreferenceActivity.Header>)">loadHeadersFromResource()</a></code>. Ví dụ:</p>

<pre>
public class SettingsActivity extends PreferenceActivity {
    &#64;Override
    public void onBuildHeaders(List&lt;Header> target) {
        loadHeadersFromResource(R.xml.preference_headers, target);
    }
}
</pre>

<p>Khi người dùng chọn một mục từ danh sách tiêu đề, hệ thống sẽ mở <code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=vi">PreferenceFragment</a></code> kèm theo.</p>

<p class="note"><strong>Lưu ý:</strong> Khi sử dụng tiêu đề tùy chọn, lớp con <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi">PreferenceActivity</a></code> của bạn không cần triển khai phương pháp <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi#onCreate(android.os.Bundle)">onCreate()</a></code>, vì tác vụ cần thiết duy nhất
cho hoạt động đó là tải tiêu đề.</p>


<h3 id="BackCompatHeaders">Hỗ trợ các phiên bản cũ hơn với tiêu đề tùy chọn</h3>

<p>Nếu ứng dụng của bạn hỗ trợ các phiên bản Android cũ hơn 3.0, bạn vẫn có thể sử dụng tiêu đề để
cung cấp một bố trí hai bảng khi chạy trên Android 3.0 trở lên. Tất cả những việc bạn cần làm đó là tạo một
tệp XML tùy chọn bổ sung có sử dụng phần tử cơ bản <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">&lt;Preference&gt;</a></code> đóng vai trò như mục tiêu đề (để dùng cho các phiên bản Android
cũ hơn).</p>

<p>Tuy nhiên, thay vì mở một <code><a href="https://developer.android.com/reference/android/preference/PreferenceScreen.html?hl=vi">PreferenceScreen</a></code> mới, từng phần tử <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">&lt;Preference&gt;</a></code> sẽ gửi một <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=vi">Intent</a></code> tới
<code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi">PreferenceActivity</a></code> mà quy định tệp XML tùy chọn cần
tải.</p>

<p>Ví dụ, sau đây là một tệp XML cho các tiêu đề tùy chọn được sử dụng trên Android 3.0
trở lên (<code>res/xml/preference_headers.xml</code>):</p>

<pre>
&lt;preference-headers xmlns:android="http://schemas.android.com/apk/res/android">
    &lt;header
        android:fragment="com.example.prefs.SettingsFragmentOne"
        android:title="@string/prefs_category_one"
        android:summary="@string/prefs_summ_category_one" />
    &lt;header
        android:fragment="com.example.prefs.SettingsFragmentTwo"
        android:title="@string/prefs_category_two"
        android:summary="@string/prefs_summ_category_two" />
&lt;/preference-headers>
</pre>

<p>Và sau đây là một tệp tùy chọn cung cấp cùng các tiêu đề cho các phiên bản cũ hơn
Android 3.0 (<code>res/xml/preference_headers_legacy.xml</code>):</p>

<pre>
&lt;PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    &lt;Preference
        android:title="@string/prefs_category_one"
        android:summary="@string/prefs_summ_category_one"  >
        &lt;intent
            android:targetPackage="com.example.prefs"
            android:targetClass="com.example.prefs.SettingsActivity"
            android:action="com.example.prefs.PREFS_ONE" />
    &lt;/Preference>
    &lt;Preference
        android:title="@string/prefs_category_two"
        android:summary="@string/prefs_summ_category_two" >
        &lt;intent
            android:targetPackage="com.example.prefs"
            android:targetClass="com.example.prefs.SettingsActivity"
            android:action="com.example.prefs.PREFS_TWO" />
    &lt;/Preference>
&lt;/PreferenceScreen>
</pre>

<p>Vì hỗ trợ dành cho <code>&amp;lt;preference-headers&amp;gt;</code> đã được thêm trong Android 3.0, hệ thống sẽ gọi
<code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi#onBuildHeaders(java.util.List<android.preference.PreferenceActivity.Header>)">onBuildHeaders()</a></code> trong <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi">PreferenceActivity</a></code> của bạn chỉ khi đang chạy trên phiên bản Androd 3.0 hoặc cao hơn. Để tải
tệp tiêu đề "kế thừa" (<code>preference_headers_legacy.xml</code>), bạn phải kiểm tra phiên bản Android
và, nếu phiên bản cũ hơn Android 3.0 (<code><a href="https://developer.android.com/reference/android/os/Build.VERSION_CODES.html?hl=vi#HONEYCOMB">HONEYCOMB</a></code>), hãy gọi <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi#addPreferencesFromResource(int)">addPreferencesFromResource()</a></code> để
tải tệp tiêu đề kế thừa. Ví dụ:</p>

<pre>
&#64;Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ...

    if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.HONEYCOMB) {
        // Load the legacy preferences headers
        addPreferencesFromResource(R.xml.preference_headers_legacy);
    }
}

// Called only on Honeycomb and later
&#64;Override
public void onBuildHeaders(List&lt;Header> target) {
   loadHeadersFromResource(R.xml.preference_headers, target);
}
</pre>

<p>Việc duy nhất còn lại cần làm đó là xử lý <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=vi">Intent</a></code> mà được chuyển vào
hoạt động để nhận biết tệp tùy chọn nào cần tải. Vì vậy, hãy truy xuất hành động của ý định và so sánh nó với
các xâu hành động đã biết mà bạn đã sử dụng trong tag <code>&amp;lt;intent&amp;gt;</code> của XML tùy chọn:</p>

<pre>
final static String ACTION_PREFS_ONE = "com.example.prefs.PREFS_ONE";
...

&#64;Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String action = getIntent().getAction();
    if (action != null &amp;&amp; action.equals(ACTION_PREFS_ONE)) {
        addPreferencesFromResource(R.xml.preferences);
    }
    ...

    else if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.HONEYCOMB) {
        // Load the legacy preferences headers
        addPreferencesFromResource(R.xml.preference_headers_legacy);
    }
}
</pre>

<p>Lưu ý rằng các lệnh gọi liên tiếp đến <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi#addPreferencesFromResource(int)">addPreferencesFromResource()</a></code> sẽ
xếp chồng tất cả tùy chọn trong một danh sách duy nhất, vì thế hãy chắc chắn rằng nó chỉ được gọi một lần bằng cách liên kết các
điều kiện với mệnh đề else-if.</p>





<h2 id="ReadingPrefs">Đọc Tùy chọn</h2>

<p>Theo mặc định, tất cả tùy chọn của ứng dụng của bạn đều được lưu vào một tệp có thể truy cập từ bất kỳ nơi nào
trong ứng dụng của bạn bằng cách gọi phương pháp tĩnh <code><a href="https://developer.android.com/reference/android/preference/PreferenceManager.html?hl=vi#getDefaultSharedPreferences(android.content.Context)">PreferenceManager.getDefaultSharedPreferences()</a></code>. Điều này sẽ trả về đối tượng <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=vi">SharedPreferences</a></code> chứa tất cả cặp khóa-giá trị liên kết
với các đối tượng <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> được sử dụng trong <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi">PreferenceActivity</a></code>.</p>

<p>Ví dụ, sau đây là cách bạn có thể đọc một trong các giá trị tùy chọn từ bất kỳ hoạt động nào khác trong ứng dụng
của mình:</p>

<pre>
SharedPreferences sharedPref = PreferenceManager.getDefaultSharedPreferences(this);
String syncConnPref = sharedPref.getString(SettingsActivity.KEY_PREF_SYNC_CONN, "");
</pre>



<h3 id="Listening">Theo dõi thay đổi tùy chọn</h3>

<p>Có một vài lý do khiến bạn có thể muốn được thông báo càng sớm càng tốt nếu người dùng thay đổi một trong các
tùy chọn. Để nhận một phương pháp gọi lại khi thay đổi xảy ra với bất kỳ tùy chọn nào,
hãy triển khai giao diện <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html?hl=vi">SharedPreference.OnSharedPreferenceChangeListener</a></code> và đăng ký đối tượng theo dõi cho đối tượng
<code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=vi">SharedPreferences</a></code> bằng cách gọi <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=vi#registerOnSharedPreferenceChangeListener(android.content.SharedPreferences.OnSharedPreferenceChangeListener)">registerOnSharedPreferenceChangeListener()</a></code>.</p>

<p>Giao diện này chỉ có một phương pháp gọi lại, <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html?hl=vi#onSharedPreferenceChanged(android.content.SharedPreferences, java.lang.String)">onSharedPreferenceChanged()</a></code>, và bạn có thể thấy đây là cách dễ nhất để triển khai giao diện như một phần
hoạt động của mình. Ví dụ:</p>

<pre>
public class SettingsActivity extends PreferenceActivity
                              implements OnSharedPreferenceChangeListener {
    public static final String KEY_PREF_SYNC_CONN = "pref_syncConnectionType";
    ...

    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
        String key) {
        if (key.equals(KEY_PREF_SYNC_CONN)) {
            Preference connectionPref = findPreference(key);
            // Set summary to be the user-description for the selected value
            connectionPref.setSummary(sharedPreferences.getString(key, ""));
        }
    }
}
</pre>

<p>Trong ví dụ này, phương pháp sẽ kiểm tra xem thiết đặt bị thay đổi có áp dụng cho một khóa tùy chọn đã biết không. Nó
sẽ gọi <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi#findPreference(java.lang.CharSequence)">findPreference()</a></code> để nhận đối tượng
<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> đã bị thay đổi để nó có thể sửa đổi tóm tắt
của mục đó thành mô tả lựa chọn của người dùng. Cụ thể, khi thiết đặt là một <code><a href="https://developer.android.com/reference/android/preference/ListPreference.html?hl=vi">ListPreference</a></code> hoặc thiết đặt nhiều lựa chọn khác, bạn nên gọi <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi#setSummary(int)">setSummary()</a></code> khi thiết đặt thay đổi để hiển thị
trạng thái hiện tại (chẳng hạn như thiết đặt Ngủ như minh họa trong hình 5).</p>

<p class="note"><strong>Lưu ý:</strong> Như đã mô tả trong tài liệu Thiết kế Android về <a href="https://developer.android.com/design/patterns/settings.html?hl=vi">Thiết đặt</a>, chúng tôi khuyên bạn nên cập nhật
tóm tắt cho <code><a href="https://developer.android.com/reference/android/preference/ListPreference.html?hl=vi">ListPreference</a></code> mỗi khi người dùng thay đổi tùy chọn để
mô tả thiết đặt hiện tại.</p>

<p>Để quản lý vòng đời trong hoạt động cho phù hợp, chúng tôi khuyên rằng bạn nên đăng ký và bỏ đăng ký
<code><a href="https://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html?hl=vi">SharedPreferences.OnSharedPreferenceChangeListener</a></code> của mình tương ứng trong <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=vi#onResume()">onResume()</a></code> và các lệnh gọi lại <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=vi#onPause()">onPause()</a></code>:</p>

<pre>
&#64;Override
protected void onResume() {
    super.onResume();
    getPreferenceScreen().getSharedPreferences()
            .registerOnSharedPreferenceChangeListener(this);
}

&#64;Override
protected void onPause() {
    super.onPause();
    getPreferenceScreen().getSharedPreferences()
            .unregisterOnSharedPreferenceChangeListener(this);
}
</pre>

<p class="caution"><strong>Chú ý:</strong> Khi bạn gọi <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=vi#registerOnSharedPreferenceChangeListener(android.content.SharedPreferences.OnSharedPreferenceChangeListener)">registerOnSharedPreferenceChangeListener()</a></code>, trình quản lý tùy chọn hiện
không lưu trữ một tham chiếu mạnh tới đối tượng theo dõi. Bạn phải lưu trữ một tham chiếu
mạnh tới đối tượng theo dõi, nếu không nó sẽ dễ bị thu thập thông tin rác. Chúng tôi
khuyên bạn nên giữ một tham chiếu tới đối tượng theo dõi trong dữ liệu thực thể của một đối tượng
mà sẽ tồn tại miễn là bạn còn cần đối tượng theo dõi đó.</p>

<p>Ví dụ, trong đoạn mã sau, hàm gọi không giữ tham chiếu tới
đối tượng theo dõi. Kết quả là đối tượng theo dõi sẽ bị thu thập thông tin rác,
và nó sẽ bị lỗi tại một thời điểm không xác định trong tương lai:</p>

<pre>
prefs.registerOnSharedPreferenceChangeListener(
  // Bad! The listener is subject to garbage collection!
  new SharedPreferences.OnSharedPreferenceChangeListener() {
  public void onSharedPreferenceChanged(SharedPreferences prefs, String key) {
    // listener implementation
  }
});
</pre>

<p>Thay vào đó, hãy lưu một tham chiếu tới đối tượng theo dõi trong một trường dữ liệu thực thể của một
đối tượng mà sẽ tồn tại miễn là còn cần đối tượng theo dõi đó:</p>

<pre>
SharedPreferences.OnSharedPreferenceChangeListener listener =
    new SharedPreferences.OnSharedPreferenceChangeListener() {
  public void onSharedPreferenceChanged(SharedPreferences prefs, String key) {
    // listener implementation
  }
};
prefs.registerOnSharedPreferenceChangeListener(listener);
</pre>

<h2 id="NetworkUsage">Quản lý Sử dụng Mạng</h2>


<p>Bắt đầu với Android 4.0, ứng dụng Thiết đặt của hệ thống sẽ cho phép người dùng xem
ứng dụng của họ đang sử dụng bao nhiêu dữ liệu mạng khi đang ở tiền cảnh và dưới nền. Khi đó, người dùng có thể
vô hiệu hóa việc sử dụng dữ liệu chạy ngầm cho từng ứng dụng. Để tránh việc người dùng vô hiệu hóa truy cập dữ liệu
của ứng dụng của bạn từ dưới nền, bạn nên sử dụng kết nối dữ liệu một cách hiệu quả và cho phép
người dùng tinh chỉnh mức sử dụng dữ liệu cho ứng dụng của bạn thông qua thiết đặt ứng dụng.<p>

<p>Ví dụ, bạn có thể cho phép người dùng kiểm soát tần suất ứng dụng của bạn đồng bộ dữ liệu, ứng dụng của bạn
chỉ được thực hiện tải lên/tải xuống khi trên Wi-Fi, ứng dụng của bạn sử dụng dữ liệu trong khi đang chuyển vùng dữ liệu, v.v... hay không. Với
những kiểm soát này, người dùng sẽ ít có khả năng vô hiệu hóa truy cập dữ liệu của ứng dụng của bạn
hơn nhiều khi họ đạt gần mức giới hạn đặt ra trong Thiết đặt hệ thống, vì thay vào đó, họ có thể kiểm soát chính xác
lượng dữ liệu mà ứng dụng của bạn sử dụng.</p>

<p>Sau khi bạn đã thêm các tùy chọn cần thiết trong <code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi">PreferenceActivity</a></code>
của mình để kiểm soát các thói quen dữ liệu của ứng dụng của bạn, bạn nên thêm một bộ lọc ý định cho <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=vi#ACTION_MANAGE_NETWORK_USAGE">ACTION_MANAGE_NETWORK_USAGE</a></code> trong tệp bản kê khai của mình. Ví dụ:</p>

<pre>
&lt;activity android:name="SettingsActivity" ... >
    &lt;intent-filter>
       &lt;action android:name="android.intent.action.MANAGE_NETWORK_USAGE" />
       &lt;category android:name="android.intent.category.DEFAULT" />
    &lt;/intent-filter>
&lt;/activity>
</pre>

<p>Bộ lọc ý định này cho hệ thống biết rằng đây là hoạt động kiểm soát mức sử dụng dữ liệu
của ứng dụng của bạn. Vì thế, khi người dùng kiểm tra lượng dữ liệu mà ứng dụng của bạn đang dùng từ ứng dụng
Thiết đặt của hệ thống, sẽ có một nút <em>Xem thiết đặt ứng dụng</em> khởi chạy
<code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=vi">PreferenceActivity</a></code> của bạn, vì thế người dùng có thể tinh chỉnh lượng dữ liệu mà ứng dụng của bạn
dùng.</p>







<h2 id="Custom">Xây dựng một Thiết đặt Tùy chỉnh</h2>

<p>Khuôn khổ Android bao gồm nhiều lớp con <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> mà
cho phép bạn xây dựng một UI cho một vài loại thiết đặt khác nhau.
Tuy nhiên, bạn có thể khám phá thiết đặt mình cần mà chưa có giải pháp tích hợp sẵn, chẳng hạn như một
bộ chọn số hay bộ chọn ngày. Trong trường hợp như vậy, bạn sẽ cần tạo một tùy chọn tùy chỉnh bằng cách mở rộng
lớp <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> hoặc một trong các lớp con khác.</p>

<p>Khi bạn mở rộng lớp <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code>, có một vài điều quan trọng
mà bạn cần làm:</p>

<ul>
  <li>Quy định giao diện người dùng sẽ xuất hiện khi người dùng chọn thiết đặt.</li>
  <li>Lưu giá trị của thiết đặt khi phù hợp.</li>
  <li>Khởi tạo <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> bằng giá trị hiện tại (hoặc mặc định)
khi xét tới dạng xem.</li>
  <li>Cung cấp giá trị mặc định khi hệ thống yêu cầu.</li>
  <li>Nếu <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> cung cấp UI của chính mình (chẳng hạn như một hộp thoại), hãy lưu
và khôi phục trạng thái để xử lý các thay đổi trong vòng đời (chẳng hạn như khi người dùng xoay màn hình).</li>
</ul>

<p>Các phần sau mô tả cách hoàn thành từng tác vụ này.</p>



<h3 id="CustomSelected">Quy định một giao diện người dùng</h3>

  <p>Nếu bạn trực tiếp mở rộng lớp <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code>, bạn cần triển khai
<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi#onClick()">onClick()</a></code> để định nghĩa hành động xảy ra khi người dùng
chọn mục. Tuy nhiên, hầu hết các thiết đặt tùy chỉnh sẽ mở rộng <code><a href="https://developer.android.com/reference/android/preference/DialogPreference.html?hl=vi">DialogPreference</a></code> để
hiển thị một hộp thoại, điều này làm đơn giản hóa quy trình. Khi bạn mở rộng <code><a href="https://developer.android.com/reference/android/preference/DialogPreference.html?hl=vi">DialogPreference</a></code>, bạn phải gọi <code><a href="https://developer.android.com/reference/android/preference/DialogPreference.html?hl=vi#setDialogLayoutResource(int)">setDialogLayoutResourcs()</a></code> trong khi đang ở trong
hàm dựng lớp để quy định bố trí cho hộp thoại.</p>

  <p>Ví dụ, sau đây là hàm dựng cho một <code><a href="https://developer.android.com/reference/android/preference/DialogPreference.html?hl=vi">DialogPreference</a></code> tùy chỉnh mà khai báo bố trí và quy định văn bản cho
các nút hộp thoại tích cực và tiêu cực mặc định:</p>

<pre>
public class NumberPickerPreference extends DialogPreference {
    public NumberPickerPreference(Context context, AttributeSet attrs) {
        super(context, attrs);

        setDialogLayoutResource(R.layout.numberpicker_dialog);
        setPositiveButtonText(android.R.string.ok);
        setNegativeButtonText(android.R.string.cancel);

        setDialogIcon(null);
    }
    ...
}
</pre>



<h3 id="CustomSave">Lưu giá trị của thiết đặt</h3>

<p>Bạn có thể lưu một giá trị cho thiết đặt vào bất cứ lúc nào bằng cách gọi một trong các phương pháp của lớp <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code>, <code>persist*()</code>, chẳng hạn như <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi#persistInt(int)">persistInt()</a></code> nếu giá trị của thiết đặt là một số nguyên hoặc
<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi#persistBoolean(boolean)">persistBoolean()</a></code> để lưu một boolean.</p>

<p class="note"><strong>Lưu ý:</strong> Mỗi <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> chỉ có thể lưu một
kiểu dữ liệu, vì thế bạn phải sử dụng phương pháp <code>persist*()</code> phù hợp cho kiểu dữ liệu được sử dụng bởi
<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> tùy chỉnh của mình.</p>

<p>Thời điểm bạn chọn duy trì thiết đặt có thể phụ thuộc vào lớp <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> nào mà bạn mở rộng. Nếu mở rộng <code><a href="https://developer.android.com/reference/android/preference/DialogPreference.html?hl=vi">DialogPreference</a></code>, khi đó bạn nên duy trì giá trị đó chỉ khi hộp thoại
đóng lại do kết quả tích cực (người dùng chọn nút "OK").</p>

<p>Khi <code><a href="https://developer.android.com/reference/android/preference/DialogPreference.html?hl=vi">DialogPreference</a></code> đóng lại, hệ thống sẽ gọi phương pháp <code><a href="https://developer.android.com/reference/android/preference/DialogPreference.html?hl=vi#onDialogClosed(boolean)">onDialogClosed()</a></code>. Phương pháp bao gồm một
tham đối boolean quy định xem người dùng có trả về kết quả "tích cực" hay không&mdash;nếu kết quả là
<code>true</code>, khi đó, người dùng đã chọn nút tích cực và bạn nên lưu giá trị mới này. Ví
dụ:</p>

<pre>
&#64;Override
protected void onDialogClosed(boolean positiveResult) {
    // When the user selects "OK", persist the new value
    if (positiveResult) {
        persistInt(mNewValue);
    }
}
</pre>

<p>Trong ví dụ này, <code>mNewValue</code> là một thành viên lớp lưu giữ giá trị
hiện tại của thiết đặt. Việc gọi <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi#persistInt(int)">persistInt()</a></code> sẽ lưu giá trị vào
tệp <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=vi">SharedPreferences</a></code> (tự động sử dụng khóa mà
được quy định trong tệp XML cho <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> này).</p>


<h3 id="CustomInitialize">Khởi tạo giá trị hiện tại</h3>

<p>Khi hệ thống thêm <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> của bạn vào màn hình, nó
gọi <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi#onSetInitialValue(boolean, java.lang.Object)">onSetInitialValue()</a></code> để thông báo
với bạn xem thiết đặt có giá trị được duy trì hay không. Nếu không có giá trị được duy trì, lệnh gọi này sẽ cung cấp
cho bạn giá trị mặc định.</p>

<p>Phương pháp <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi#onSetInitialValue(boolean, java.lang.Object)">onSetInitialValue()</a></code> chuyển một
boolean, <code>restorePersistedValue</code>, để cho biết liệu giá trị đã được duy trì
cho thiết đặt hay không. Nếu nó là <code>true</code>, khi đó bạn nên truy xuất giá trị được duy trì bằng cách gọi
một trong các phương pháp của lớp <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code>, <code>getPersisted*()</code>, chẳng hạn như <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi#getPersistedInt(int)">getPersistedInt()</a></code> đối với một giá trị số nguyên. Bạn sẽ
thường muốn truy xuất giá trị được duy trì sao cho bạn có thể cập nhật UI cho phù hợp để phản ánh
giá trị đã lưu trước đó.</p>

<p>Nếu <code>restorePersistedValue</code> là <code>false</code>, vậy bạn
nên sử dụng giá trị mặc định được chuyển trong tham đối thứ hai.</p>

<pre>
&#64;Override
protected void onSetInitialValue(boolean restorePersistedValue, Object defaultValue) {
    if (restorePersistedValue) {
        // Restore existing state
        mCurrentValue = this.getPersistedInt(DEFAULT_VALUE);
    } else {
        // Set default state from the XML attribute
        mCurrentValue = (Integer) defaultValue;
        persistInt(mCurrentValue);
    }
}
</pre>

<p>Mỗi phương pháp <code>getPersisted*()</code> sẽ lấy một tham đối quy định
giá trị mặc định sẽ sử dụng trong trường hợp thực sự không có giá trị được duy trì hoặc khóa không tồn tại. Trong
ví dụ trên, một hằng số cục bộ được sử dụng để quy định giá trị mặc định trong trường hợp <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi#getPersistedInt(int)">getPersistedInt()</a></code> không thể trả về một giá trị được duy trì.</p>

<p class="caution"><strong>Chú ý:</strong> Bạn <strong>không thể</strong> sử dụng
<code>defaultValue</code> làm giá trị mặc định trong phương pháp <code>getPersisted*()</code>, bởi
giá trị của nó luôn rỗng khi <code>restorePersistedValue</code> là <code>true</code>.</p>


<h3 id="CustomDefault">Cung cấp một giá trị mặc định</h3>

<p>Nếu trường hợp lớp <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> của bạn quy định một giá trị mặc định
(với thuộc tính <code>android:defaultValue</code>), khi đó hệ thống
sẽ gọi <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi#onGetDefaultValue(android.content.res.TypedArray, int)">onGetDefaultValue()</a></code> khi nó khởi tạo đối tượng để truy xuất giá trị. Bạn phải
triển khai phương pháp này để hệ thống lưu giá trị mặc định trong <code><a href="https://developer.android.com/reference/android/content/SharedPreferences.html?hl=vi">SharedPreferences</a></code>. Ví dụ:</p>

<pre>
&#64;Override
protected Object onGetDefaultValue(TypedArray a, int index) {
    return a.getInteger(index, DEFAULT_VALUE);
}
</pre>

<p>Các tham đối của phương pháp cung cấp mọi thứ bạn cần: mảng thuộc tính và vị trí chỉ mục
của <code>android:defaultValue</code> mà bạn phải truy xuất. Lý do bạn phải triển khai
phương pháp này nhằm trích xuất giá trị mặc định từ thuộc tính đó là bởi bạn phải quy định
một giá trị mặc định cục bộ cho thuộc tính trong trường hợp giá trị không được định nghĩa.</p>



<h3 id="CustomSaveState">Lưu và khôi phục trạng thái của Tùy chọn</h3>

<p>Giống như <code><a href="https://developer.android.com/reference/android/view/View.html?hl=vi">View</a></code> trong một bố trí, lớp con <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code>
của bạn chịu trách nhiệm lưu và khôi phục trạng thái của nó trong trường hợp hoạt động hoặc phân đoạn
được khởi động lại (chẳng hạn như khi người dùng xoay màn hình). Để lưu và khôi phục
trạng thái của lớp <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> của bạn cho đúng, bạn phải triển khai các
phương pháp gọi lại vòng đời <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi#onSaveInstanceState()">onSaveInstanceState()</a></code> và <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi#onRestoreInstanceState(android.os.Parcelable)">onRestoreInstanceState()</a></code>.</p>

<p>Trạng thái của <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> của bạn được định nghĩa bởi một đối tượng mà triển khai
giao diện <code><a href="https://developer.android.com/reference/android/os/Parcelable.html?hl=vi">Parcelable</a></code>. Khuôn khổ Android sẽ cung cấp một đối tượng như vậy cho bạn
như một điểm bắt đầu để định nghĩa đối tượng trạng thái của bạn: lớp <code><a href="https://developer.android.com/reference/android/preference/Preference.BaseSavedState.html?hl=vi">Preference.BaseSavedState</a></code>.</p>

<p>Để định nghĩa cách thức lớp <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> của bạn lưu trạng thái của nó
hãy mở rộng lớp <code><a href="https://developer.android.com/reference/android/preference/Preference.BaseSavedState.html?hl=vi">Preference.BaseSavedState</a></code>. Bạn cần khống chế chỉ
 một vài phương pháp và định nghĩa đối tượng <code><a href="https://developer.android.com/reference/android/preference/Preference.BaseSavedState.html?hl=vi#CREATOR">CREATOR</a></code>
.</p>

<p>Đối với hầu hết ứng dụng, bạn có thể sao chép triển khai sau và chỉ cần thay đổi các dòng
xử lý <code>value</code> nếu lớp con <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> của bạn lưu một kiểu
dữ liệu khác số nguyên.</p>

<pre>
private static class SavedState extends BaseSavedState {
    // Member that holds the setting's value
    // Change this data type to match the type saved by your Preference
    int value;

    public SavedState(Parcelable superState) {
        super(superState);
    }

    public SavedState(Parcel source) {
        super(source);
        // Get the current preference's value
        value = source.readInt();  // Change this to read the appropriate data type
    }

    &#64;Override
    public void writeToParcel(Parcel dest, int flags) {
        super.writeToParcel(dest, flags);
        // Write the preference's value
        dest.writeInt(value);  // Change this to write the appropriate data type
    }

    // Standard creator object using an instance of this class
    public static final Parcelable.Creator&lt;SavedState> CREATOR =
            new Parcelable.Creator&lt;SavedState>() {

        public SavedState createFromParcel(Parcel in) {
            return new SavedState(in);
        }

        public SavedState[] newArray(int size) {
            return new SavedState[size];
        }
    };
}
</pre>

<p>Với triển khai <code><a href="https://developer.android.com/reference/android/preference/Preference.BaseSavedState.html?hl=vi">Preference.BaseSavedState</a></code> bên trên được thêm
vào ứng dụng của bạn (thường dưới dạng một lớp con của lớp con <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> của bạn), khi đó
bạn cần triển khai các phương pháp <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi#onSaveInstanceState()">onSaveInstanceState()</a></code> và <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi#onRestoreInstanceState(android.os.Parcelable)">onRestoreInstanceState()</a></code> cho lớp con
<code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=vi">Preference</a></code> của mình.</p>

<p>Ví dụ:</p>

<pre>
&#64;Override
protected Parcelable onSaveInstanceState() {
    final Parcelable superState = super.onSaveInstanceState();
    // Check whether this Preference is persistent (continually saved)
    if (isPersistent()) {
        // No need to save instance state since it's persistent,
        // use superclass state
        return superState;
    }

    // Create instance of custom BaseSavedState
    final SavedState myState = new SavedState(superState);
    // Set the state's value with the class member that holds current
    // setting value
    myState.value = mNewValue;
    return myState;
}

&#64;Override
protected void onRestoreInstanceState(Parcelable state) {
    // Check whether we saved the state in onSaveInstanceState
    if (state == null || !state.getClass().equals(SavedState.class)) {
        // Didn't save the state, so call superclass
        super.onRestoreInstanceState(state);
        return;
    }

    // Cast state to custom BaseSavedState and pass to superclass
    SavedState myState = (SavedState) state;
    super.onRestoreInstanceState(myState.getSuperState());

    // Set this Preference's widget to reflect the restored state
    mNumberPicker.setValue(myState.value);
}
</pre>




    </div>

    

  
    
  
    



<div class="wrap">
  <footer class="dac-footer ">
    <div class="cols dac-footer-main">
      <div class="col-1of2">
        <div class="dac-footer-contact">
          <a class="dac-footer-contact-link" href="https://developer.android.com/newsletter/index.html?hl=vi" title="Newsletter">Newsletter</a>
          <a class="dac-footer-contact-link" href="https://android-developers.blogspot.com/" title="Blog" target="_blank">Blog</a>
          <a class="dac-footer-contact-link" href="https://developer.android.com/support.html?hl=vi" title="Hỗ trợ">Hỗ trợ</a>
        </div>
      </div>
      <div class="col-1of2 dac-footer-reachout">
        <div class="dac-footer-social">
          <a class="dac-button-social dac-youtube dac-footer-social-link" href="https://www.youtube.com/user/androiddevelopers" title="Android Developers on YouTube" target="_blank"><i class="dac-sprite dac-youtube"></i><span class="hide-text">Android Developers on YouTube</span></a>
          <a class="dac-button-social dac-gplus dac-footer-social-link" href="https://plus.google.com/+AndroidDevelopers" title="Android Developers on Google+" target="_blank"><i class="dac-sprite dac-gplus"></i><span class="hide-text">Android Developers on Google+</span></a>
          <a class="dac-button-social dac-twitter dac-footer-social-link" href="https://twitter.com/AndroidDev" title="Android Developers on Twitter" target="_blank"><i class="dac-sprite dac-twitter"></i><span class="hide-text">Android Developers on Twitter</span></a>
        </div>
      </div>
    </div>

    <hr class="dac-footer-separator"/>
      
      <p class="dac-footer-copyright">
        
        Except as noted, this content is licensed under <a href="http://creativecommons.org/licenses/by/2.5/" target="_blank">Creative Commons Attribution 2.5</a>. For details and restrictions, see the <a href="https://developer.android.com/license.html">Content License</a>.
      </p>
    

    <p class="dac-footer-links">
      <a href="https://www.android.com/" title="Android.com" target="_blank">Android.com</a>
      <a href="https://developer.android.com/?hl=vi" title="Android Developers">Android Developers</a>
      <a href="https://developer.android.com/studio/index.html?hl=vi" title="Android Studio">Android Studio</a>
      <a href="https://developer.android.com/distribute/console/index.html?hl=vi" title="Google Play Console">Google Play Console</a>
      <a href="https://developer.android.com/legal.html?hl=vi" title="Legal Notice">Legal Notice</a>
    </p>

    <!-- TODO(akassay) Update all DAC js to use the class instead of the id b/30368561 -->
    <form class="devsite-utility-footer-language" id="setlang" action="https://developer.android.com/i18n/setlang/" method="post">
      <input type="hidden" name="xsrf_token" value="zA21zzO8o1pQCRbF-11UsNEM9XyqluxCWbXGgZKHDnU6MTQ5NzUxNjI1MzcxMjg2MA" />
      <input type="hidden" name="next" value="settings.html">
      <span id="language" class="locales">
        <select class="devsite-utility-footer-language-select" name="language">
          
          <option value="id"
            >
            Bahasa Indonesia
          </option>
          
          <option value="de"
            >
            Deutsch
          </option>
          
          <option value="en"
            >
            English
          </option>
          
          <option value="es"
            >
            español
          </option>
          
          <option value="es-419"
            >
            Español (América Latina)
          </option>
          
          <option value="fr"
            >
            français
          </option>
          
          <option value="pt-br"
            >
            Português Brasileiro
          </option>
          
          <option value="vi"
             selected="selected" >
            Tiếng Việt
          </option>
          
          <option value="tr"
            >
            Türkçe
          </option>
          
          <option value="ru"
            >
            Русский
          </option>
          
          <option value="th"
            >
            ภาษาไทย
          </option>
          
          <option value="ja"
            >
            日本語
          </option>
          
          <option value="zh-cn"
            >
            简体中文
          </option>
          
          <option value="zh-tw"
            >
            繁體中文
          </option>
          
          <option value="ko"
            >
            한국어
          </option>
          
        </select>
      </span>
    </form>
  </footer>
</div><!--/.wrap -->

<div class="dac-toast-group">
  <div class="dac-toast" data-toast>
    <div class="dac-toast-wrap">
      This site uses cookies to store your preferences for site-specific language and display options.
    </div>
  </div>
</div>

<div data-modal="newsletter" data-newsletter-fb data-swap class="dac-modal newsletter">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <div class="dac-swap" data-swap-container>
          <section class="dac-swap-section dac-active dac-down">
            <h2 class="norule dac-modal-header-title" data-t="newsletter.title">Get the latest Android developer news and tips that will help you find success on Google Play.</h2>
            <p class="dac-modal-header-subtitle" data-t="newsletter.requiredHint">* Required Fields</p>
          </section>
          <section class="dac-swap-section dac-up">
            
            <h2 class="norule dac-modal-header-title" data-t="newsletter.successTitle">Hooray!</h2>
          </section>
        </div>
      </header>
      <div class="dac-swap" data-swap-container>
        <section class="dac-swap-section dac-active dac-left">
          <form action="https://services.google.com/fb/submissions/android-developer-mailing-list/" class="dac-form" method="post">
            <section class="dac-modal-content">
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-full-name" class="dac-form-floatlabel" data-t="newsletter.name">Full name</label>
                      <input type="text" class="dac-form-input" name="fullname" id="newsletter-full-name" required>
                      <span class="dac-form-required">*</span>
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-email" class="dac-form-floatlabel" data-t="newsletter.email">Địa chỉ email</label>
                      <input type="email" class="dac-form-input" name="emailaddress" id="newsletter-email" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-company" class="dac-form-floatlabel" data-t="newsletter.company">Company / developer name</label>
                      <input type="text" class="dac-form-input" name="companydevelopername" id="newsletter-company">
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-play-store" class="dac-form-floatlabel" data-t="newsletter.appUrl">One of your Play Store app URLs</label>
                      <input type="url" class="dac-form-input" name="playstoreappurls" id="newsletter-play-store">
                    </div>
                  </div>
                </div>
              </fieldset>
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol newsletter-interested" data-validation-message="Please check at least one item.">
                    <legend class="dac-form-legend">What are you interested in?<span class="dac-form-required">*</span></legend>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-whats-new" value="whats-new">
                      <label for="interested-whats-new" class="dac-form-checkbox-button"></label>
                      <label for="interested-whats-new" class="dac-form-label">What's new</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-games-updates" value="games-updates">
                      <label for="interested-games-updates" class="dac-form-checkbox-button"></label>
                      <label for="interested-games-updates" class="dac-form-label">Games updates</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-android-development" value="android-development">
                      <label for="interested-android-development" class="dac-form-checkbox-button"></label>
                      <label for="interested-android-development" class="dac-form-label">Android development</label>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol newsletter-checkboxes">
                    <div class="dac-form-input-group">
                      <label for="newsletter-receive-in">Receive newsletter in</label>
                      <select name="language" class="dac-form-select" id="newsletter-receive-in">
                        <option value="en-US" selected>English</option>
                        <option value="ar">Arabic</option>
                        <option value="zh">Chinese (Simplified)</option>
                        <option value="zh-TW">Chinese (Traditional)</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="id">Indonesian (Bahasa)</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="pt-BR">Portuguese (Brazilian)</option>
                        <option value="ru">Russian</option>
                        <option value="es-419">Spanish (Latin American)</option>
                        <option value="th">Thai</option>
                        <option value="tr">Turkish</option>
                        <option value="vi">Vietnamese</option>
                      </select>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="marketingoptin" id="newsletter-add" required value="Add me to the mailing list.">
                          <label for="newsletter-add" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-add" class="dac-form-label dac-form-aside">
                            Add me to the mailing list.
                            <span class="dac-form-required">*</span>
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="privacystatement" id="newsletter-terms" required value="I acknowledge that the information provided in this form will be subject to Google's privacy policy (https://www.google.com/policies/privacy/).">
                          <label for="newsletter-terms" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-terms" class="dac-form-label dac-form-aside"><span data-t="newsletter.privacyPolicy" data-t-html>
                            
                            I acknowledge that the information provided in this form will be subject to <a href="https://www.google.com/policies/privacy/">Google's privacy policy</a>.
                          </span>
                          <span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fieldset>
            </section>
            <input type="hidden" name="referrer" value="dac">
            <footer class="dac-modal-footer">
              <div class="cols">
                <div class="col-2of5">
                </div>
              </div>
              <button type="submit" value="Submit" class="dac-fab dac-primary dac-large dac-modal-action"><i class="dac-sprite dac-arrow-right"></i></button>
            </footer>
          </form>
        </section>
        <section class="dac-swap-section dac-right">
          <div class="dac-modal-content">
            <p class="newsletter-success-message" data-t="newsletter.successDetails">
              You have successfully signed up for the latest Android developer news and tips.
            </p>
          </div>
        </section>
      </div>
    </div>
  </div>
</div><!--/.dac-modal.newsletter-->


<div data-modal="langform" class="dac-modal" id="langform">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            Browse this site in <span class="span-target-lang"></span>?
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <fieldset class="dac-form-fieldset">
              <div class="cols">
                <div class="col-2of2 langform-leftCol">
                  <p id="resetLangText">
                    You requested a page in <span class="span-target-lang"></span>, but your language preference for this site is <span class="span-current-lang"></span>.
                  </p>
                  <p id="resetLangCta">
                    Would you like to change your language preference and browse this site in <span class="span-target-lang"></span>? If you want to change your language preference later, use the language menu at the bottom of each page.
                  </p>
                </div>
              </div>
            </fieldset>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="yes" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang yes" data-t="newsletter.resetLangButtonYes" data-modal-toggle>
                Change Language
              </button>
            </a>
            <a href="#" class="" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang no" data-t="newsletter.resetLangButtonNo" data-modal-toggle>
                Not Now
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal-->


<div data-modal="api-unavailable" class="dac-modal" id="api-unavailable">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            This class requires API level <span class="api-level"></span> or higher
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <p>
              This doc is hidden because your selected API level for the documentation is <span class="api-level"></span>. You can change the documentation API level with the selector above the left navigation.
            </p>
            
            <p>For more information about specifying the API level your app requires, read <a href="https://developer.android.com/training/basics/supporting-devices/platforms.html">Supporting Different Platform Versions</a>.</p>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="ok" onclick="return false;">
              <button class="button dac-primary dac-modal-action ok"
              data-modal-toggle>
                OK, make this page visible
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal#api-unavailable-->

    
  </div><!--/#body-content-->

  <!-- Nav Setup -->
  <script>$('[data-dac-nav]').dacNav();</script>
  <script type="text/javascript">
    $('.slideshow-container').dacSlideshow({
        btnPrev: '.slideshow-prev',
        btnNext: '.slideshow-next',
        btnPause: '#pauseButton'
    });

    $(".feed").dacTabbedList({
      nav_id: '.feed-nav',
      frame_id: '.feed-frame'
    });
  </script>
  
  <script src="../../../ytblogger_lists_unified0c0e.js?hl=vi?v=2017061508" defer></script>
  <script src="../../../android_metadata_en0c0e.js?hl=vi?v=2017061508" defer></script>
  
  <script src="../../../reference/lists0c0e.js?hl=vi?v=2017061508" defer></script>
  <script src="../../../reference/gms_lists0c0e.js?hl=vi?v=2017061508" defer></script>
  <script src="../../../reference/android/support/wearable/lists0c0e.js?hl=vi?v=2017061508" defer></script>
  <script src="../../../reference/android/support/test/lists0c0e.js?hl=vi?v=2017061508" defer></script>
  <script src="../../../reference/android/support/constraint/lists0c0e.js?hl=vi?v=2017061508" defer></script>
  <script src="https://developer.android.com/_static2/f304fc21fa/jsi18n/?hl=vi"></script>
  <script>
    // Load localized metadata.
    (function(lang) {
      if (lang === 'en') { return; }
      document.write('<script src="https://developer.android.com/android_metadata_vi.js?hl=vi?v=2017061508" defer></' + 'script>');
    })(getLangPref())

    // Add skip to content for accessibility.
    $('#skip-to-main').click(function() {
      $('a[name=top]').focus();
    });

    $('.devsite-utility-footer-language-select').each(function() {
      $(this).change(function() {
        changeLangPref(this.value, true)
        $('.devsite-utility-footer-language').submit();
      });
    });
  </script>

  <script>
    (function($) {
      devsite.analytics.InitAnalytics();
    })(jQuery);
  </script>

  


<div id="survey-box-wrapper">
  <div class="material-dialog" style="width:270px">
    <div class="material-dialog-title">
      Take a one-minute survey?
    </div>
    <div class="material-dialog-description">
      Help us improve Android tools and documentation.
    </div>
    <div class="material-button-bar">
      <a class="dac-button dac-primary dac-raised" target="_blank"
          href="https://goo.gl/forms/kV7MoyD2dvcWkd5N2">Sure</a>
      <a class="dac-button" href="#">No thanks</a>
    </div>
  </div>
</div>

</body>

<!-- Mirrored from developer.android.com/guide/topics/ui/settings.html?hl=vi by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:05:50 GMT -->
</html>

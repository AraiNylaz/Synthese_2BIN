





<!DOCTYPE html>
<html lang="zh-cn">

<!-- Mirrored from developer.android.com/guide/topics/text/creating-input-method.html?hl=zh-cn by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:15:25 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

  



<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta content="IE=edge" http-equiv="X-UA-Compatible">





<script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script>

<meta charset="utf-8">



<meta name="xsrf_token" content="XlwWyGhQOo3Oy-xfLIrPpx4MKnIfJe0KJfNf6UhWd6s6MTQ5NzUxNzA4MTkxMzUxMA" />

  
    <link rel="canonical" href="creating-input-method.html">
  

  
    <link rel="alternate" href="creating-input-method.html" hreflang="en">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/text/creating-input-method.html" hreflang="en-cn">
  

  <link rel="alternate" href="creating-input-method.html" hreflang="x-default">




<link rel="shortcut icon" href="../../../_static/f304fc21fa/images/android/favicon0b8e.png?hl=zh-cn">

<link rel="apple-touch-icon" href="../../../_static/f304fc21fa/images/android/touchicon-1800b8e.png?hl=zh-cn">


<title>

  Creating an Input Method | Android Developers

</title>

  <meta name="description" content="An input method editor (IME) is a user control that enables users to enter text. Android provides an extensible input-method framework that allows applications to provide users alternative input methods, such as on-screen keyboards or even speech input…">


<!-- STYLESHEETS -->
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto+Condensed">
<link rel="stylesheet"
    href="http://fonts.googleapis.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold"
    title="roboto">







<link href="../../../static/css/default414d.css?hl=zh-cn?v=2017061508" rel="stylesheet" type="text/css">
<!-- JAVASCRIPT -->
<script src="../../../_static/f304fc21fa/js/android_3p-bundle0b8e.js?hl=zh-cn" type="text/javascript"></script>
<script src="../../../_static/f304fc21fa/js/script_foot_closure_android__zh_cn0b8e.js?hl=zh-cn"></script>
<script src="../../../_static/f304fc21fa/js/script_foot_android0b8e.js?hl=zh-cn"></script>

<script type="text/javascript">
  var toRoot = 'https://developer.android.com/';
  devsite.permissions.init({"039e5d84b87fd75807ffb37b7f1bbf2c": true, "098dafe57affddc137df300142652cfd": false, "cb025a64a50094835616312f4774a53d": true, "51470233c56fc1fde50f00b73c52b216": false, "752953480de00a336d911a46966cc16d": false, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true});

  var replaceBlog = false;
  var replaceYouTube = false;
  var siteDefaultLocale = 'en';

  var ANDROID_LANGUAGES = [
      'id','de','en','es','es-419','fr','pt-br','vi','tr','ru','th','ja','zh-cn','zh-tw','ko'
  ];
</script>
<script src="../../../static/js/docs414d.js?hl=zh-cn?v=2017061508" type="text/javascript"></script>


</head>

<body class="gc-documentation
            
            
              develop
              guide
            
            "
      itemscope itemtype="http://schema.org/Article">
  


  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;en&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;zh-cn&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-49880327-2&quot;}">
  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;en&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;zh-cn&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-5831155-1&quot;}">
  



  
  
    <script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "userCountry": "BE", "language": {"requested": "zh-cn", "served": "en"}, "projectName": "API Guides", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>
  



  
  <a href="#top" id="skip-to-main">Skip to content</a>
  <header id="header-wrapper">
    <div class="dac-header" id="header">
      <div class="dac-header-inner">
        <a class="dac-nav-toggle" data-dac-toggle-nav href="#" title="Open navigation">
          <span class="dac-nav-hamburger">
            <span class="dac-nav-hamburger-top"></span>
            <span class="dac-nav-hamburger-mid"></span>
            <span class="dac-nav-hamburger-bot"></span>
          </span>
        </a>
        
        <a class="dac-header-logo" href="https://developer.android.com/index.html?hl=zh-cn">
          <img class="dac-header-logo-image" src="../../../static/images/android_logo0b8e.png?hl=zh-cn"
              srcset="https://developer.android.com/static/images/android_logo_2x.png 2x?hl=zh-cn"
              width="32" height="36" alt="Android"> Developers</a>
        <ul class="dac-header-tabs">
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/design/index.html?hl=zh-cn"
               zh-tw-lang="設計"
               zh-cn-lang="设计"
               ru-lang="Проектирование"
               ko-lang="디자인"
               ja-lang="設計"
               es-lang="Diseñar">Design</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/develop/index.html?hl=zh-cn"
               zh-tw-lang="開發"
               zh-cn-lang="开发"
               ru-lang="Разработка"
               ko-lang="개발"
               ja-lang="開発"
               es-lang="Desarrollar">Develop</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/distribute/index.html?hl=zh-cn"
               zh-tw-lang="發佈"
               zh-cn-lang="分发"
               ru-lang="Распространение"
               ko-lang="배포"
               ja-lang="配布"
               es-lang="Distribuir">Distribute</a>
          </li>
        </ul>


        

        <a class="dac-header-console-btn gc-analytics-event" href="https://play.google.com/apps/publish/"
           data-category="User" data-action="Console" data-label="Clicked">
          <img src="https://developer.android.com/static/images/developer-console-icon.svg?hl=zh-cn" width="18" height="19" alt="Play 控制台">Play Console</a>

        

<form data-search="" class="dac-header-search">
  <button class="dac-header-search-close" data-search-close="">
    <i class="dac-sprite dac-back-arrow"></i>
  </button>

  <div class="dac-header-search-inner">
    <i class="dac-sprite dac-search-white dac-header-search-icon"></i>
    
    <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q" class="dac-header-search-input" placeholder="搜索">
    <button class="dac-header-search-clear dac-hidden" data-search-clear="">
      <i class="dac-sprite dac-close-black"></i>
    </button>
  </div>
</form>

        
      </div><!--/.header-wrap.wrap-->
    </div><!--/.header-->

    

<div id="search-results" class="dac-search-results">
  <div id="dac-search-results-history" class="dac-search-results-history">
    <div class="wrap dac-search-results-history-wrap">
      <div class="cols">
        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Most visited</h2>
          <div class="resource-flow-layout" data-history-query="history:most/visited" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>

        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Recently visited</h2>
          <div class="resource-flow-layout cols" data-history-query="history:recent" data-allow-duplicates="true" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="dac-search-results-content" class="dac-search-results-content">
    <div class="dac-search-results-metadata wrap">
      <div class="dac-search-results-for">
        
          <h2>
          Results for <span id="search-results-for"></span>
          </h2>
      </div>

      <div id="dac-search-results-hero"></div>

      <div class="dac-search-results-hero cols">
        <div id="dac-search-results-reference" class="col-6of6 col-tablet-2of2 col-mobile-1of1">
          <div class="suggest-card reference no-display">
            <ul class="dac-search-results-reference">
            </ul>
          </div>
        </div>
      </div>

      <div class="cols dac-search-results-cse">
        <script src="../../../../cse.google.com/f4116.txt?cx=000521750095050289010:zpcpi1ea4s8" async></script>
        <gcse:searchresults-only linkTarget="_self"></gcse:searchresults-only>
      </div>
    </div>
  </div>
</div>

  </header>

  <a name="navigation" tabindex=0 class="nav-start-marker">navigation</a>
  <nav class="dac-nav">
    <div class="dac-nav-dimmer" data-dac-toggle-nav></div>
    <div class="dac-nav-sidebar" data-swap data-dynamic="false" data-transition-speed="300" data-dac-nav>
      <div data-swap-container>
        
        <a class="dac-nav-back-button dac-swap-section dac-up dac-no-anim" tabindex=0 data-swap-button>
          
          <i class="dac-sprite dac-nav-back"></i> <span class="dac-nav-back-title">返回</span>
        </a>

        <div class="dac-nav-sub dac-swap-section dac-right dac-active" itemscope
            itemtype="http://schema.org/SiteNavigationElement">
          
          
            
            <ul id="nav">
              <li class="nav-section"><div class="nav-section-header"><a href="../../index0b8e.html?hl=zh-cn" >Introduction</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/fundamentals0b8e.html?hl=zh-cn" >App Fundamentals</a></li><li><a href="../../practices/compatibility0b8e.html?hl=zh-cn" >Device Compatibility</a></li><li class="nav-section"><div class="nav-section-header"><a href="../permissions/index0b8e.html?hl=zh-cn" >System Permissions</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../permissions/requesting0b8e.html?hl=zh-cn" >Requesting Permissions</a></li><li><a href="../permissions/defining0b8e.html?hl=zh-cn" >Defining Permissions</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../platform/index0b8e.html?hl=zh-cn" >Platform Architecture</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../platform/j8-jack0b8e.html?hl=zh-cn"  es-lang="Funciones del lenguaje Java 8" in-lang="Fitur Bahasa Java 8" ja-lang="Java 8 の機能" ko-lang="Java 8 언어 기능" pt-br-lang="Recursos de linguagem do Java 8" ru-lang="Возможности языка Java 8" vi-lang="Tính năng của Ngôn ngữ Java 8" zh-cn-lang="Java 8 语言功能" zh-tw-lang="Java 8 語言功能">Use Java 8 Language Features</a></li><li><a href="../../practices/verifying-apps-art0b8e.html?hl=zh-cn" >Verifying App Behavior on the Android Runtime (ART)</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/index0b8e.html?hl=zh-cn" >App Components</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../../components/intents-filters0b8e.html?hl=zh-cn" >Intents and Intent Filters</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/intents-common0b8e.html?hl=zh-cn" >Common Intents</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/activities/index0b8e.html?hl=zh-cn" >Activities</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/activities/intro-activities0b8e.html?hl=zh-cn" >Introduction to Activities</a></li><li><a href="../../components/activities/activity-lifecycle0b8e.html?hl=zh-cn" >The Activity Lifecycle</a></li><li><a href="../../components/activities/state-changes0b8e.html?hl=zh-cn" >Activity State Changes</a></li><li><a href="../../components/activities/tasks-and-back-stack0b8e.html?hl=zh-cn" >Tasks and Back Stack</a></li><li><a href="../../components/activities/process-lifecycle0b8e.html?hl=zh-cn" >Processes and Application Lifecycle</a></li><li><a href="../../components/activities/parcelables-and-bundles0b8e.html?hl=zh-cn" >Parcelables and Bundles</a></li><li><a href="../../components/activities/recents0b8e.html?hl=zh-cn" >Recents Screen</a></li></ul></li><li><a href="../../components/fragments0b8e.html?hl=zh-cn" >Fragments</a></li><li><a href="../../components/loaders0b8e.html?hl=zh-cn" >Loaders</a></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/services0b8e.html?hl=zh-cn" >Services</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/bound-services0b8e.html?hl=zh-cn" >Bound Services</a></li><li><a href="../../components/aidl0b8e.html?hl=zh-cn" >AIDL</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../providers/content-providers0b8e.html?hl=zh-cn" >Content Providers</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../providers/content-provider-basics0b8e.html?hl=zh-cn" >Content Provider Basics</a></li><li><a href="../providers/content-provider-creating0b8e.html?hl=zh-cn" >Creating a Content Provider</a></li><li><a href="../providers/calendar-provider0b8e.html?hl=zh-cn" >Calendar Provider</a></li><li><a href="../providers/contacts-provider0b8e.html?hl=zh-cn" >Contacts Provider</a></li><li><a href="../providers/document-provider0b8e.html?hl=zh-cn" >Open files using Storage Access Framework</a></li><li><a href="../providers/create-document-provider0b8e.html?hl=zh-cn" >Create a Custom Document Provider</a></li></ul></li><li><a href="../../components/broadcasts0b8e.html?hl=zh-cn" >Broadcasts</a></li><li class="nav-section"><div class="nav-section-header"><a href="../appwidgets/index0b8e.html?hl=zh-cn" >App Widgets</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../appwidgets/host0b8e.html?hl=zh-cn" >App Widget Host</a></li></ul></li><li><a href="../../components/processes-and-threads0b8e.html?hl=zh-cn" >Processes and Threads</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/index0b8e.html?hl=zh-cn" >App Resources</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/overview0b8e.html?hl=zh-cn" >Overview</a></li><li><a href="../resources/providing-resources0b8e.html?hl=zh-cn" >Providing Resources</a></li><li><a href="../resources/accessing-resources0b8e.html?hl=zh-cn" >Accessing Resources</a></li><li><a href="../resources/runtime-changes0b8e.html?hl=zh-cn" >Handling Runtime Changes</a></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/localization0b8e.html?hl=zh-cn" >Localization</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/icu4j-framework0b8e.html?hl=zh-cn" >ICU4J Android Framework APIs</a></li><li><a href="../resources/multilingual-support0b8e.html?hl=zh-cn" >Language and Locale</a></li></ul></li><li><a href="../resources/complex-xml-resources0b8e.html?hl=zh-cn" >Complex XML Resources</a></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/available-resources0b8e.html?hl=zh-cn" >Resource Types</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/animation-resource0b8e.html?hl=zh-cn" >Animation</a></li><li><a href="../resources/color-list-resource0b8e.html?hl=zh-cn" >Color State List</a></li><li><a href="../resources/drawable-resource0b8e.html?hl=zh-cn" >Drawable</a></li><li><a href="../resources/layout-resource0b8e.html?hl=zh-cn" >Layout</a></li><li><a href="../resources/menu-resource0b8e.html?hl=zh-cn" >Menu</a></li><li><a href="../resources/string-resource0b8e.html?hl=zh-cn" >String</a></li><li><a href="../resources/style-resource0b8e.html?hl=zh-cn" >Style</a></li><li><a href="../resources/more-resources0b8e.html?hl=zh-cn" >More Types</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../manifest/manifest-intro0b8e.html?hl=zh-cn" >App Manifest</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../manifest/action-element0b8e.html?hl=zh-cn" >&lt;action&gt;</a></li><li><a href="../manifest/activity-element0b8e.html?hl=zh-cn" >&lt;activity&gt;</a></li><li><a href="../manifest/activity-alias-element0b8e.html?hl=zh-cn" >&lt;activity-alias&gt;</a></li><li><a href="../manifest/application-element0b8e.html?hl=zh-cn" >&lt;application&gt;</a></li><li><a href="../manifest/category-element0b8e.html?hl=zh-cn" >&lt;category&gt;</a></li><li><a href="../manifest/compatible-screens-element0b8e.html?hl=zh-cn" >&lt;compatible-screens&gt;</a></li><li><a href="../manifest/data-element0b8e.html?hl=zh-cn" >&lt;data&gt;</a></li><li><a href="../manifest/grant-uri-permission-element0b8e.html?hl=zh-cn" >&lt;grant-uri-permission&gt;</a></li><li><a href="../manifest/instrumentation-element0b8e.html?hl=zh-cn" >&lt;instrumentation&gt;</a></li><li><a href="../manifest/intent-filter-element0b8e.html?hl=zh-cn" >&lt;intent-filter&gt;</a></li><li><a href="../manifest/manifest-element0b8e.html?hl=zh-cn" >&lt;manifest&gt;</a></li><li><a href="../manifest/meta-data-element0b8e.html?hl=zh-cn" >&lt;meta-data&gt;</a></li><li><a href="../manifest/path-permission-element0b8e.html?hl=zh-cn" >&lt;path-permission&gt;</a></li><li><a href="../manifest/permission-element0b8e.html?hl=zh-cn" >&lt;permission&gt;</a></li><li><a href="../manifest/permission-group-element0b8e.html?hl=zh-cn" >&lt;permission-group&gt;</a></li><li><a href="../manifest/permission-tree-element0b8e.html?hl=zh-cn" >&lt;permission-tree&gt;</a></li><li><a href="../manifest/provider-element0b8e.html?hl=zh-cn" >&lt;provider&gt;</a></li><li><a href="../manifest/receiver-element0b8e.html?hl=zh-cn" >&lt;receiver&gt;</a></li><li><a href="../manifest/service-element0b8e.html?hl=zh-cn" >&lt;service&gt;</a></li><li><a href="../manifest/supports-gl-texture-element0b8e.html?hl=zh-cn" >&lt;supports-gl-texture&gt;</a></li><li><a href="../manifest/supports-screens-element0b8e.html?hl=zh-cn" >&lt;supports-screens&gt;</a></li><li><a href="../manifest/uses-configuration-element0b8e.html?hl=zh-cn" >&lt;uses-configuration&gt;</a></li><li><a href="../manifest/uses-feature-element0b8e.html?hl=zh-cn" >&lt;uses-feature&gt;</a></li><li><a href="../manifest/uses-library-element0b8e.html?hl=zh-cn" >&lt;uses-library&gt;</a></li><li><a href="../manifest/uses-permission-element0b8e.html?hl=zh-cn" >&lt;uses-permission&gt;</a></li><li><a href="../manifest/uses-permission-sdk-23-element0b8e.html?hl=zh-cn" >&lt;uses-permission-sdk-23&gt;</a></li><li><a href="../manifest/uses-sdk-element0b8e.html?hl=zh-cn" >&lt;uses-sdk&gt;</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../ui/index0b8e.html?hl=zh-cn" >User Interface</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../ui/overview0b8e.html?hl=zh-cn" >Overview</a></li><li class="nav-section"><div class="nav-section-header"><a href="../ui/declaring-layout0b8e.html?hl=zh-cn" >Layouts</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../ui/layout/linear0b8e.html?hl=zh-cn" >Linear Layout</a></li><li><a href="../ui/layout/relative0b8e.html?hl=zh-cn" >Relative Layout</a></li><li><a href="../ui/layout/recyclerview0b8e.html?hl=zh-cn" >Recycler View</a></li><li><a href="../ui/layout/listview0b8e.html?hl=zh-cn" >List View</a></li><li><a href="../ui/layout/gridview0b8e.html?hl=zh-cn" >Grid View</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../ui/controls0b8e.html?hl=zh-cn" >Input Controls</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../ui/controls/button0b8e.html?hl=zh-cn" >Buttons</a></li><li><a href="../ui/controls/checkbox0b8e.html?hl=zh-cn" >Checkboxes</a></li><li><a href="../ui/controls/radiobutton0b8e.html?hl=zh-cn" >Radio Buttons</a></li><li><a href="../ui/controls/togglebutton0b8e.html?hl=zh-cn" >Toggle Buttons</a></li><li><a href="../ui/controls/spinner0b8e.html?hl=zh-cn" >Spinners</a></li><li><a href="../ui/controls/pickers0b8e.html?hl=zh-cn" >Pickers</a></li></ul></li><li><a href="../ui/ui-events0b8e.html?hl=zh-cn" >Input Events</a></li><li><a href="../ui/menus0b8e.html?hl=zh-cn" >Menus</a></li><li><a href="../ui/settings0b8e.html?hl=zh-cn" >Settings</a></li><li><a href="../ui/dialogs0b8e.html?hl=zh-cn" >Dialogs</a></li><li><a href="../ui/notifiers/notifications0b8e.html?hl=zh-cn" >Notifications</a></li><li><a href="../ui/notifiers/toasts0b8e.html?hl=zh-cn" >Toasts</a></li><li><a href="../ui/shortcuts0b8e.html?hl=zh-cn" >App Shortcuts</a></li><li class="nav-section"><div class="nav-section-header"><a href="../search/index0b8e.html?hl=zh-cn" >Search</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../search/search-dialog0b8e.html?hl=zh-cn" >Creating a Search Interface</a></li><li><a href="../search/adding-recent-query-suggestions0b8e.html?hl=zh-cn" >Adding Recent Query Suggestions</a></li><li><a href="../search/adding-custom-suggestions0b8e.html?hl=zh-cn" >Adding Custom Suggestions</a></li><li><a href="../search/searchable-config0b8e.html?hl=zh-cn" >Searchable Configuration</a></li></ul></li><li><a href="../ui/multi-window0b8e.html?hl=zh-cn" >Multi-Window Support</a></li><li><a href="../ui/drag-drop0b8e.html?hl=zh-cn" >Drag and Drop</a></li><li class="nav-section"><div class="nav-section-header"><a href="../ui/accessibility/index0b8e.html?hl=zh-cn" >Accessibility</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../ui/accessibility/apps0b8e.html?hl=zh-cn" >Making Apps More Accessible</a></li><li><a href="../ui/accessibility/checklist0b8e.html?hl=zh-cn" >Accessibility Developer Checklist</a></li><li><a href="../ui/accessibility/node-tree-debugging0b8e.html?hl=zh-cn" >Using Node Tree Debugging</a></li><li><a href="../ui/accessibility/services0b8e.html?hl=zh-cn" >Building Accessibility Services</a></li><li><a href="../ui/accessibility/custom-views0b8e.html?hl=zh-cn" >Building Accessible Custom Views</a></li></ul></li><li><a href="../ui/themes0b8e.html?hl=zh-cn" >Styles and Themes</a></li><li><a href="../ui/custom-components0b8e.html?hl=zh-cn" >Custom Components</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../graphics/index0b8e.html?hl=zh-cn" >Animation and Graphics</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../graphics/overview0b8e.html?hl=zh-cn" >Overview</a></li><li><a href="../graphics/prop-animation0b8e.html?hl=zh-cn" >Property Animation</a></li><li><a href="../graphics/view-animation0b8e.html?hl=zh-cn" >View Animation</a></li><li><a href="../graphics/drawable-animation0b8e.html?hl=zh-cn" >Drawable Animation</a></li><li class="nav-section"><div class="nav-section-header"><a href="../graphics/2d-graphics0b8e.html?hl=zh-cn" >Canvas and Drawables</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../graphics/vector-drawable-resources0b8e.html?hl=zh-cn" >Vector Drawable</a></li></ul></li><li><a href="../graphics/opengl0b8e.html?hl=zh-cn" >OpenGL ES</a></li><li><a href="../graphics/hardware-accel0b8e.html?hl=zh-cn" >Hardware Acceleration</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../renderscript/index0b8e.html?hl=zh-cn" >Computation</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../renderscript/compute0b8e.html?hl=zh-cn" >RenderScript</a></li><li><a href="../renderscript/advanced0b8e.html?hl=zh-cn" >Advanced RenderScript</a></li><li class="nav-section"><div class="nav-section-header"><a href="../renderscript/reference/overview0b8e.html?hl=zh-cn" >Runtime API Reference</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../renderscript/reference/rs_value_types0b8e.html?hl=zh-cn" >Numerical Types</a></li><li><a href="../renderscript/reference/rs_object_types0b8e.html?hl=zh-cn" >Object Types</a></li><li><a href="../renderscript/reference/rs_convert0b8e.html?hl=zh-cn" >Conversion Functions</a></li><li><a href="../renderscript/reference/rs_math0b8e.html?hl=zh-cn" >Mathematical Constants and Functions</a></li><li><a href="../renderscript/reference/rs_vector_math0b8e.html?hl=zh-cn" >Vector Math Functions</a></li><li><a href="../renderscript/reference/rs_matrix0b8e.html?hl=zh-cn" >Matrix Functions</a></li><li><a href="../renderscript/reference/rs_quaternion0b8e.html?hl=zh-cn" >Quaternion Functions</a></li><li><a href="../renderscript/reference/rs_atomic0b8e.html?hl=zh-cn" >Atomic Update Functions</a></li><li><a href="../renderscript/reference/rs_time0b8e.html?hl=zh-cn" >Time Functions and Types</a></li><li><a href="../renderscript/reference/rs_allocation_data0b8e.html?hl=zh-cn" >Allocation Data Access Functions</a></li><li><a href="../renderscript/reference/rs_object_info0b8e.html?hl=zh-cn" >Object Characteristics Functions</a></li><li><a href="../renderscript/reference/rs_for_each0b8e.html?hl=zh-cn" >Kernel Invocation Functions and Types</a></li><li><a href="../renderscript/reference/rs_io0b8e.html?hl=zh-cn" >Input/Output Functions</a></li><li><a href="../renderscript/reference/rs_debug0b8e.html?hl=zh-cn" >Debugging Functions</a></li><li><a href="../renderscript/reference/rs_graphics0b8e.html?hl=zh-cn" >Graphics Functions and Types</a></li><li><a href="../renderscript/reference/index0b8e.html?hl=zh-cn" >Index</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../media-apps/index0b8e.html?hl=zh-cn" >Media Apps</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media-apps/media-apps-overview0b8e.html?hl=zh-cn" >Media Apps Overview</a></li><li><a href="../media-apps/working-with-a-media-session0b8e.html?hl=zh-cn" >Working with a Media Session</a></li><li class="nav-section"><div class="nav-section-header"><a href="../media-apps/audio-app/building-an-audio-app0b8e.html?hl=zh-cn" >Building an Audio App</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media-apps/audio-app/building-a-mediabrowserservice0b8e.html?hl=zh-cn" >Building a Media Browser Service</a></li><li><a href="../media-apps/audio-app/building-a-mediabrowser-client0b8e.html?hl=zh-cn" >Building a Media Browser Client</a></li><li><a href="../media-apps/audio-app/mediasession-callbacks0b8e.html?hl=zh-cn" >Media Session Callbacks</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../media-apps/video-app/building-a-video-app0b8e.html?hl=zh-cn" >Building a Video App</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media-apps/video-app/building-a-video-player-activity0b8e.html?hl=zh-cn" >Building a Video Player Activity</a></li><li><a href="../media-apps/video-app/mediasession-callbacks0b8e.html?hl=zh-cn" >Media Session Callbacks</a></li></ul></li><li><a href="../media-apps/mediabuttons0b8e.html?hl=zh-cn" >Responding to Media Buttons</a></li><li><a href="../media-apps/volume-and-earphones0b8e.html?hl=zh-cn" >Handling Changes in Audio Output</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../media/index0b8e.html?hl=zh-cn" >Media and Camera</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media/media-formats0b8e.html?hl=zh-cn" >Supported Media Formats</a></li><li><a href="../media/mediaplayer0b8e.html?hl=zh-cn" >MediaPlayer</a></li><li><a href="../media/mediarecorder0b8e.html?hl=zh-cn" >MediaRecorder</a></li><li><a href="../media/exoplayer0b8e.html?hl=zh-cn" >ExoPlayer</a></li><li class="nav-section"><div class="nav-section-header"><a href="../media/media-routing0b8e.html?hl=zh-cn" >Media Routing</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media/mediarouter0b8e.html?hl=zh-cn" >MediaRouter API</a></li><li><a href="../media/mediarouteprovider0b8e.html?hl=zh-cn" >MediaRouteProvider API</a></li></ul></li><li><a href="../media/camera0b8e.html?hl=zh-cn" >Camera API</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../sensors/index0b8e.html?hl=zh-cn" >Location and Sensors</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../location/index0b8e.html?hl=zh-cn" >Location and Maps</a></li><li><a href="../location/strategies0b8e.html?hl=zh-cn" >Location Strategies</a></li><li><a href="../sensors/sensors_overview0b8e.html?hl=zh-cn" >Sensors Overview</a></li><li><a href="../sensors/sensors_motion0b8e.html?hl=zh-cn" >Motion Sensors</a></li><li><a href="../sensors/sensors_position0b8e.html?hl=zh-cn" >Position Sensors</a></li><li><a href="../sensors/sensors_environment0b8e.html?hl=zh-cn" >Environment Sensors</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/index0b8e.html?hl=zh-cn" >Connectivity</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/bluetooth0b8e.html?hl=zh-cn" >Bluetooth</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/bluetooth-le0b8e.html?hl=zh-cn" >Bluetooth Low Energy</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/nfc/index0b8e.html?hl=zh-cn" >NFC</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/nfc/nfc0b8e.html?hl=zh-cn" >NFC Basics</a></li><li><a href="../connectivity/nfc/advanced-nfc0b8e.html?hl=zh-cn" >Advanced NFC</a></li><li><a href="../connectivity/nfc/hce0b8e.html?hl=zh-cn" >Host-based Card Emulation</a></li></ul></li><li><a href="../connectivity/wifip2p0b8e.html?hl=zh-cn" >Wi-Fi P2P</a></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/usb/index0b8e.html?hl=zh-cn" >USB</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/usb/accessory0b8e.html?hl=zh-cn" >Accessory</a></li><li><a href="../connectivity/usb/host0b8e.html?hl=zh-cn" >Host</a></li></ul></li><li><a href="../connectivity/sip0b8e.html?hl=zh-cn" >SIP</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="index0b8e.html?hl=zh-cn" >Text and Input</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="copy-paste0b8e.html?hl=zh-cn" >Copy and Paste</a></li><li class="nav-section"><div class="nav-section-header"><a href="creating-input-method0b8e.html?hl=zh-cn" >Creating an IME</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="image-keyboard0b8e.html?hl=zh-cn" >Image Keyboard</a></li></ul></li><li><a href="spell-checker-framework0b8e.html?hl=zh-cn" >Spelling Checker</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../data/index0b8e.html?hl=zh-cn" >Data Storage</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../data/data-storage0b8e.html?hl=zh-cn" >Storage Options</a></li><li class="nav-section"><div class="nav-section-header"><a href="../data/backup0b8e.html?hl=zh-cn" >Data Backup</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../data/autobackup0b8e.html?hl=zh-cn" >Auto Backup</a></li><li><a href="../data/keyvaluebackup0b8e.html?hl=zh-cn" >Key/Value Backup</a></li><li><a href="../data/testingbackup0b8e.html?hl=zh-cn" >Testing Backup and Restore</a></li></ul></li><li><a href="../data/install-location0b8e.html?hl=zh-cn" >App Install Location</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../admin/index0b8e.html?hl=zh-cn" >Administration</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../admin/device-admin0b8e.html?hl=zh-cn" >Device Policies</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../webapps/index0b8e.html?hl=zh-cn" >Web Apps</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../webapps/targeting0b8e.html?hl=zh-cn" >Supporting Different Screens in Web Apps</a></li><li><a href="../../webapps/webview0b8e.html?hl=zh-cn" >Building Web Apps in WebView</a></li><li><a href="../../webapps/migrating0b8e.html?hl=zh-cn" >Migrating to WebView in Android 4.4</a></li><li><a href="../../webapps/debugging0b8e.html?hl=zh-cn" >Debugging Web Apps</a></li><li><a href="../../webapps/best-practices0b8e.html?hl=zh-cn" >Best Practices for Web Apps</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../practices/index0b8e.html?hl=zh-cn"  de-lang="Bewährte Verfahren" es-lang="Prácticas recomendadas" fr-lang="Meilleures pratiques" it-lang="Best practice" ja-lang="ベスト プラクティス" zh-cn-lang="最佳实践" zh-tw-lang="最佳實務">Best Practices</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../../practices/screens_support0b8e.html?hl=zh-cn" >Supporting Multiple Screens</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../practices/screens-distribution0b8e.html?hl=zh-cn" >Distributing to Specific Screens</a></li><li><a href="../../practices/screen-compat-mode0b8e.html?hl=zh-cn" >Screen Compatibility Mode</a></li></ul></li><li><a href="../../practices/app-design/seamlessness0b8e.html?hl=zh-cn" >Designing for Seamlessness</a></li><li><a href="../../practices/tablets-and-handsets0b8e.html?hl=zh-cn" >Supporting Tablets and Handsets</a></li></ul></li>
            </ul>
            
          
        </div>
        
        
          



<ul id="dac-main-navigation" class="dac-nav-list dac-swap-section dac-left dac-no-anim" tabindex=0>
  <li class="dac-nav-item home">
    <a class="dac-nav-link" href="https://developer.android.com/index.html?hl=zh-cn">首页</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary about">
      <li class="dac-nav-item versions">
        <a class="dac-nav-link" href="https://developer.android.com/about/versions/nougat/index.html?hl=zh-cn">Android</a>
      </li>
      <li class="dac-nav-item wear">
        <a class="dac-nav-link" href="https://developer.android.com/wear/index.html?hl=zh-cn">Wear</a>
      </li>
      <li class="dac-nav-item tv">
        <a class="dac-nav-link" href="https://developer.android.com/tv/index.html?hl=zh-cn">TV</a>
      </li>
      <li class="dac-nav-item auto">
        <a class="dac-nav-link" href="https://developer.android.com/auto/index.html?hl=zh-cn">Auto</a>
      </li>
      <li class="dac-nav-item things">
        <a class="dac-nav-link" href="https://developer.android.com/things/index.html?hl=zh-cn">Things</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item design">
    <a class="dac-nav-link" href="https://developer.android.com/design/index.html?hl=zh-cn"
       zh-tw-lang="設計"
       zh-cn-lang="设计"
       ru-lang="Проектирование"
       ko-lang="디자인"
       ja-lang="設計"
       es-lang="Diseñar">Design</a>
  </li>
  <li class="dac-nav-item develop">
    <a class="dac-nav-link" href="https://developer.android.com/develop/index.html?hl=zh-cn"
       zh-tw-lang="開發"
       zh-cn-lang="开发"
       ru-lang="Разработка"
       ko-lang="개발"
       ja-lang="開発"
       es-lang="Desarrollar">Develop</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary develop">
      <li class="dac-nav-item training">
        <a class="dac-nav-link" href="https://developer.android.com/training/index.html?hl=zh-cn"
           zh-tw-lang="訓練課程"
           zh-cn-lang="培训"
           ru-lang="Курсы"
           ko-lang="교육"
           ja-lang="トレーニング"
           es-lang="Capacitación">培训</a>
      </li>
      <li class="dac-nav-item guide">
        <a class="dac-nav-link" href="../../index0b8e.html?hl=zh-cn"
           zh-tw-lang="API 指南"
           zh-cn-lang="API 指南"
           ru-lang="Руководства по API"
           ko-lang="API 가이드"
           ja-lang="API ガイド"
           es-lang="Guías de la API">API Guides</a>
      </li>
      <li class="dac-nav-item reference">
        <a class="dac-nav-link" href="https://developer.android.com/reference/packages.html?hl=zh-cn"
           zh-tw-lang="參考資源"
           zh-cn-lang="参考"
           ru-lang="Справочник"
           ko-lang="참조문서"
           ja-lang="リファレンス"
           es-lang="Referencia">参考网页</a>
      </li>
      <li class="dac-nav-item samples">
        <a class="dac-nav-link" href="https://developer.android.com/samples/index.html?hl=zh-cn">示例</a>
      </li>
      <li class="dac-nav-item libraries">
        <a class="dac-nav-link" href="https://developer.android.com/topic/libraries/index.html?hl=zh-cn"
           >库</a></li>
      <li class="dac-nav-item studio">
        <a class="dac-nav-link" href="https://developer.android.com/studio/index.html?hl=zh-cn"
           >Android Studio</a></li>
      <li class="dac-nav-item ndk">
        <a class="dac-nav-link" href="https://developer.android.com/ndk/index.html?hl=zh-cn"
           >Android NDK</a></li>
      <li class="dac-nav-item google">
        <a class="dac-nav-link" href="https://developer.android.com/google/index.html?hl=zh-cn">Google Services</a>
      </li>
      <li class="dac-nav-item quality-guidelines">
        <a class="dac-nav-link" href="https://developer.android.com/develop/quality-guidelines/index.html?hl=zh-cn">Quality Guidelines</a>
      </li>
      <li class="dac-nav-item kotlin">
        <a class="dac-nav-link" href="https://developer.android.com/kotlin/index.html?hl=zh-cn">Kotlin</a>
       </li>
    </ul>
  </li>
  <li class="dac-nav-item distribute">
    <a class="dac-nav-link" href="https://developer.android.com/distribute/index.html?hl=zh-cn"
       zh-tw-lang="發佈"
       zh-cn-lang="分发"
       ru-lang="Распространение"
       ko-lang="배포"
       ja-lang="配布"
       de-lang="Vertrieb"
       es-lang="Distribuir"
       es-419-lang="Distribuye"
       fr-lang="Distribuer"
       id-lang="Distribusikan"
       pt-br-lang="Distribuição"
       th-lang="จัดจำหน่าย"
       tr-lang="Dağıtma"
       vi-lang="Phân phối">Distribute</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary distribute">
      <li class="dac-nav-item google-play">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/google-play/index.html?hl=zh-cn">Google Play</a>
      </li>
      <li class="dac-nav-item console">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/console/index.html?hl=zh-cn">Play 控制台</a>
      </li>
      <li class="dac-nav-item best-practices">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/best-practices/index.html?hl=zh-cn"
          es-419-lang="Recomendaciones"
          fr-lang="Bonnes pratiques"
          id-lang="Praktik terbaik"
          ja-lang="おすすめの方法"
          ko-lang="권장사항"
          pt-br-lang="Práticas recomendadas"
          ru-lang="Рекомендации"
          th-lang="จัดจำหน่าย"
          tr-lang="En iyi uygulamalar"
          vi-lang="Các phương pháp hay nhất"
          zh-cn-lang="最佳做法"
          zh-tw-lang="最佳做法">Best practices</a>
      </li>
      <li class="dac-nav-item marketing-tools">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/marketing-tools/index.html?hl=zh-cn"
          de-lang="Marketing-Tools"
          es-419-lang="Herramientas de marketing"
          fr-lang="Outils marketing"
          id-lang="Fitur pemasaran"
          ja-lang="マーケティング ツール"
          ko-lang="마케팅 도구"
          pt-br-lang="Ferramentas de marketing"
          ru-lang="Маркетинговые инструменты"
          th-lang="เครื่องมือการตลาด"
          tr-lang="Pazarlama araçları"
          vi-lang="Công cụ tiếp thị"
          zh-cn-lang="营销工具"
          zh-tw-lang="行銷工具">Marketing tools</a>
      </li>
      <li class="dac-nav-item policy-center">
        <a class="dac-nav-link" href="https://play.google.com/about/developer-content-policy/" target="_blank">Policy center</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item stories">
    <a class="dac-nav-link" href="https://developer.android.com/stories/index.html?hl=zh-cn">Stories</a>
  </li>
  
  <li class="dac-nav-item preview">
    <a class="dac-nav-link" href="https://developer.android.com/preview/index.html?hl=zh-cn">Preview</a>
  </li>
  
</ul>

        
      </div>
    </div>
  </nav>

  <a name="top" tabindex="0"></a>
  
  <div class="wrap clearfix" id="body-content">
  
    
      
      <div class="content-header">
        <ul class="dac-header-crumbs"></ul>
        <!-- Breadcrumb Setup -->
        <script>$('.dac-nav-list').dacCurrentPage().dacCrumbs();</script>
        <h1 itemprop="name">Creating an Input Method</h1>
      
        
      
      </div>
      
    
    <div class="jd-descr " itemprop="articleBody">
      

<div id="qv-wrapper">
<div id="qv">
<h2>In This Document</h2>
<ol>
    <li><a href="#InputMethodLifecycle">The IME Lifecycle</a></li>
    <li><a href="#DefiningIME">Declaring IME Components in the Manifest</a></li>
    <li><a href="#IMEAPI">The Input Method API</a></li>
    <li><a href="#IMEUI">Designing the Input Method UI</a></li>
    <li><a href="#SendText">Sending Text to the Application</a></li>
    <li><a href="#IMESubTypes">Creating an IME Subtype</a></li>
    <li><a href="#Switching">Switching among IME Subtypes</a></li>
    <li><a href="#GeneralDesign">General IME Considerations</a></li>
</ol>
<h2>See also</h2>
<ol>
    <li>
        <a href="http://android-developers.blogspot.com/2009/04/updating-applications-for-on-screen.html">Onscreen Input Methods</a>
    </li>
</ol>

<h2>Sample</h2>
<ol>
    <li><a href="https://android.googlesource.com/platform/development/+/master/samples/SoftKeyboard/">
    SoftKeyboard</a>
    </li>
</ol>

</div>
</div>
<p>
    An input method editor (IME) is a user control that enables users to enter text. Android
    provides an extensible input-method framework that allows applications to provide users
    alternative input methods, such as on-screen keyboards or even speech input. After installing
    the desired IMEs, a user can select which one to use from the system settings, and use it
    across the entire system; only one IME may be enabled at a time.
</p>
<p>
    To add an IME to the Android system, you create an Android application
    containing a class that extends <code><a href="https://developer.android.com/reference/android/inputmethodservice/InputMethodService.html?hl=zh-cn">InputMethodService</a></code>. In
    addition, you usually create a "settings" activity that passes options to the IME service. You
    can also define a settings UI that's displayed as part of the system settings.
</p>
<p>This guide covers the following:</p>
<ul>
    <li>The IME lifecycle</li>
    <li>Declaring IME components in the application manifest</li>
    <li>The IME API</li>
    <li>Designing an IME UI</li>
    <li>Sending text from an IME to an application</li>
    <li>Working with IME subtypes</li>
</ul>
<p>
    If you haven't worked with IMEs before, you should read the introductory article
    <a href="http://android-developers.blogspot.com/2009/04/updating-applications-for-on-screen.html">Onscreen Input Methods</a>
    first.
    Also, the <a href="https://android.googlesource.com/platform/development/+/master/samples/SoftKeyboard/">
    SoftKeyboard</a> sample app included in the SDK contains sample code that you can modify to
    start building your own IME.
</p>
<h2 id="InputMethodLifecycle">The IME Lifecycle</h2>
<p>
    The following diagram describes the life cycle of an IME:
</p>
<img src="../../../resources/articles/images/inputmethod_lifecycle_image0b8e.png?hl=zh-cn" alt="" height="845" id="figure1" />
<p class="img-caption">
    <strong>Figure 1.</strong> The life cycle of an IME.
</p>
<p>
    The following sections describe how to implement the UI and code associated with an IME that
    follows this lifecycle.
</p>
<h2 id="DefiningIME">Declaring IME Components in the Manifest</h2>
<p>
    In the Android system, an IME is an Android application that contains a special IME service.
    The application's manifest file must declare the service, request the necessary permissions,
    provide an intent filter that matches the action <code>action.view.InputMethod</code>, and
    provide metadata that defines characteristics of the IME. In addition, to provide a settings
    interface that allows the user to modify the behavior of the IME, you can define a "settings"
    activity that can be launched from System Settings.
</p>
<p>
    The following snippet declares an IME service. It requests the permission
    <code><a href="https://developer.android.com/reference/android/Manifest.permission.html?hl=zh-cn#BIND_INPUT_METHOD">BIND_INPUT_METHOD</a></code> to allow the service to connect the IME
    to the system, sets up an intent filter that matches the action
    <code>android.view.InputMethod</code>, and defines metadata for the IME:
</p>
<pre>
&lt;!-- Declares the input method service --&gt;
    &lt;service android:name="FastInputIME"
        android:label="&#64;string/fast_input_label"
        android:permission="android.permission.BIND_INPUT_METHOD"&gt;
        &lt;intent-filter&gt;
            &lt;action android:name="android.view.InputMethod" /&gt;
        &lt;/intent-filter&gt;
        &lt;meta-data android:name="android.view.im"
android:resource="&#64;xml/method" /&gt;
    &lt;/service&gt;
</pre>
<p>
    This next snippet declares the settings activity for the IME. It has an intent filter for
    <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=zh-cn#ACTION_MAIN">ACTION_MAIN</a></code> that indicates this activity is the main entry point
    for the IME application:</p>
<pre>
    &lt;!-- Optional: an activity for controlling the IME settings --&gt;
    &lt;activity android:name="FastInputIMESettings"
        android:label="&#64;string/fast_input_settings"&gt;
        &lt;intent-filter&gt;
            &lt;action android:name="android.intent.action.MAIN"/&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;
</pre>
<p>
    You can also provide access to the IME's settings directly from its UI.
</p>
<h2 id="IMEAPI">The Input Method API</h2>
<p>
    Classes specific to IMEs are found in the <code><a href="https://developer.android.com/reference/android/inputmethodservice/package-summary.html?hl=zh-cn">android.inputmethodservice</a></code> and
    <code><a href="https://developer.android.com/reference/android/view/inputmethod/package-summary.html?hl=zh-cn">android.view.inputmethod</a></code> packages. The <code><a href="https://developer.android.com/reference/android/view/KeyEvent.html?hl=zh-cn">KeyEvent</a></code> class is
    important for handling keyboard characters.
</p>
<p>
    The central part of an IME is a service component, a class that extends
    <code><a href="https://developer.android.com/reference/android/inputmethodservice/InputMethodService.html?hl=zh-cn">InputMethodService</a></code>. In addition to implementing the
    normal service lifecycle, this class has callbacks for providing your IME's UI, handling user
    input, and delivering text to the field that currently has focus. By default, the
    <code><a href="https://developer.android.com/reference/android/inputmethodservice/InputMethodService.html?hl=zh-cn">InputMethodService</a></code> class provides most of the implementation
    for managing the state and visibility of the IME and communicating with the current input
    field.
</p>
<p>
    The following classes are also important:
</p>
<dl>
    <dt><code><a href="https://developer.android.com/reference/android/view/inputmethod/BaseInputConnection.html?hl=zh-cn">BaseInputConnection</a></code></dt>
    <dd>
        Defines the communication channel from an <code><a href="https://developer.android.com/reference/android/view/inputmethod/InputMethod.html?hl=zh-cn">InputMethod</a></code>
        back to the application that is receiving its input. You use it to read text around the
        cursor, commit text to the text box, and send raw key events to the application.
        Applications should extend this class rather than implementing the base interface
        <code><a href="https://developer.android.com/reference/android/view/inputmethod/InputConnection.html?hl=zh-cn">InputConnection</a></code>.
    </dd>
    <dt><code><a href="https://developer.android.com/reference/android/inputmethodservice/KeyboardView.html?hl=zh-cn">KeyboardView</a></code></dt>
    <dd>
        An extension of <code><a href="https://developer.android.com/reference/android/view/View.html?hl=zh-cn">View</a></code> that renders a keyboard and responds to user
        input events. The keyboard layout is specified by an instance of
        <code><a href="https://developer.android.com/reference/android/inputmethodservice/Keyboard.html?hl=zh-cn">Keyboard</a></code>, which you can define in an XML file.
    </dd>
</dl>
<h2 id="IMEUI">Designing the Input Method UI</h2>
<p>
    There are two main visual elements for an IME: the <strong>input</strong> view and the
    <strong>candidates</strong> view. You only have to implement the elements that are relevant to
    the input method you're designing.
</p>
<h3 id="InputView">Input view</h3>
<p>
    The input view is the UI where the user inputs text in the form of keyclicks, handwriting or
    gestures. When the IME is displayed for the first time, the system calls the
    <code><a href="https://developer.android.com/reference/android/inputmethodservice/InputMethodService.html?hl=zh-cn#onCreateInputView()">onCreateInputView()</a></code> callback. In your
    implementation of this method, you create the layout you want to display in the IME
    window and return the layout to the system. This snippet is an example of implementing the
    <code><a href="https://developer.android.com/reference/android/inputmethodservice/InputMethodService.html?hl=zh-cn#onCreateInputView()">onCreateInputView()</a></code> method:
<pre>
&#64;Override
public View onCreateInputView() {
    MyKeyboardView inputView =
        (MyKeyboardView) getLayoutInflater().inflate(R.layout.input, null);

    inputView.setOnKeyboardActionListener(this);
    inputView.setKeyboard(mLatinKeyboard);

    return mInputView;
}
</pre>
<p>
    In this example, <code>MyKeyboardView</code> is an instance of a custom
implementation of
    <code><a href="https://developer.android.com/reference/android/inputmethodservice/KeyboardView.html?hl=zh-cn">KeyboardView</a></code> that renders a
    <code><a href="https://developer.android.com/reference/android/inputmethodservice/Keyboard.html?hl=zh-cn">Keyboard</a></code>. If you’re building a
traditional QWERTY keyboard,
    see the <a href="https://android.googlesource.com/platform/development/+/master/samples/SoftKeyboard/>    SoftKeyboard</a> sample app for an example of how to extend the <code><a href="/reference/android/inputmethodservice/KeyboardView.html">KeyboardView</a></code>
    class.
</p>
<h3 id="CandidateView">Candidates view</h3>
<p>
    The candidates view is the UI where the IME displays potential word corrections or
    suggestions for the user to select. In the IME lifecycle, the system calls
    <code><a href="https://developer.android.com/reference/android/inputmethodservice/InputMethodService.html?hl=zh-cn#onCreateCandidatesView()">onCreateCandidatesView()</a></code> when it's ready
    to display the candidates view. In your implementation of this method, return a layout that
    shows word suggestions, or return null if you don’t want to show anything. A null response is
    the default behavior, so you don’t have to implement this if you don’t provide suggestions.</p>
<p>
    For an example implementation that provides user suggestions, see the
    <a href="https://android.googlesource.com/platform/development/+/master/samples/SoftKeyboard/">
    SoftKeyboard</a> sample app.
</p>
<h3 id="DesignConsiderations">UI design considerations</h3>
<p>
    This section describes some specific UI design considerations for IMEs.
</p>
<h4>Handling multiple screen sizes</h4>
<p>
    The UI for your IME must be able to scale for different screen sizes, and it also
    must handle both landscape and portrait orientations. In non-fullscreen IME mode, leave
    sufficient space for the application to show the text field and any associated context, so that
    no more than half the screen is occupied by the IME. In fullscreen IME mode this is not an
    issue.
</p>
<h4>Handling different input types</h4>
<p>
    Android text fields allow you to set a specific input type, such as free-form text, numbers,
    URLs, email addresses, and search strings. When you implement a new IME, you need to detect
    the input type of each field and provide the appropriate interface for it. However, you
    don't have to set up your IME to check that the user entered valid text for the input type;
    that's the responsibility of the application that owns the text field.
</p>
<p>
    For example, here are screenshots of the interfaces that the Latin IME provided with the
    Android platform provides for text and phone number inputs:
</p>
<img src="../../../resources/articles/images/inputmethod_text_type_screenshot0b8e.png?hl=zh-cn" alt="" height="142" id="figure2" />
<img src="../../../resources/articles/images/inputmethod_numeric_type_screenshot0b8e.png?hl=zh-cn" alt="" height="120" id="figure2a" />
<p class="img-caption">
    <strong>Figure 2.</strong> Latin IME input types.
</p>
<p>
    When an input field receives focus and your IME starts, the system calls
    <code><a href="https://developer.android.com/reference/android/inputmethodservice/InputMethodService.html?hl=zh-cn#onStartInputView(android.view.inputmethod.EditorInfo, boolean)">onStartInputView()</a></code>,
    passing in an <code><a href="https://developer.android.com/reference/android/view/inputmethod/EditorInfo.html?hl=zh-cn">EditorInfo</a></code> object that contains details about
    the input type and other attributes of the text field. In this object, the
    <code><a href="https://developer.android.com/reference/android/view/inputmethod/EditorInfo.html?hl=zh-cn#inputType">inputType</a></code> field contains the text field's input
    type.
</p>
<p>
    The <code><a href="https://developer.android.com/reference/android/view/inputmethod/EditorInfo.html?hl=zh-cn#inputType">inputType</a></code> field is an <code>int</code>
    that contains bit patterns for various input type settings. To test it for the text field's
    input type, mask it with the constant <code><a href="https://developer.android.com/reference/android/text/InputType.html?hl=zh-cn#TYPE_MASK_CLASS">TYPE_MASK_CLASS</a></code>, like
    this:
</p>
<pre>
inputType &amp; InputType.TYPE_MASK_CLASS
</pre>
<p>
The input type bit pattern can have one of several values, including:
</p>
<dl>
    <dt><code><a href="https://developer.android.com/reference/android/text/InputType.html?hl=zh-cn#TYPE_CLASS_NUMBER">TYPE_CLASS_NUMBER</a></code></dt>
    <dd>
        A text field for entering numbers. As illustrated in the previous screen shot, the
        Latin IME displays a number pad for fields of this type.
    </dd>
    <dt><code><a href="https://developer.android.com/reference/android/text/InputType.html?hl=zh-cn#TYPE_CLASS_DATETIME">TYPE_CLASS_DATETIME</a></code></dt>
    <dd>
        A text field for entering a date and time.
    </dd>
    <dt><code><a href="https://developer.android.com/reference/android/text/InputType.html?hl=zh-cn#TYPE_CLASS_PHONE">TYPE_CLASS_PHONE</a></code></dt>
    <dd>
        A text field for entering telephone numbers.
    </dd>
    <dt><code><a href="https://developer.android.com/reference/android/text/InputType.html?hl=zh-cn#TYPE_CLASS_TEXT">TYPE_CLASS_TEXT</a></code></dt>
    <dd>
        A text field for entering all supported characters.
    </dd>
</dl>
<p>
    These constants are described in more detail in the reference documentation for
    <code><a href="https://developer.android.com/reference/android/text/InputType.html?hl=zh-cn">InputType</a></code>.
</p>
<p>
    The <code><a href="https://developer.android.com/reference/android/view/inputmethod/EditorInfo.html?hl=zh-cn#inputType">inputType</a></code> field can contain other bits that
    indicate a variant of the text field type, such as:
</p>
<dl>
    <dt><code><a href="https://developer.android.com/reference/android/text/InputType.html?hl=zh-cn#TYPE_TEXT_VARIATION_PASSWORD">TYPE_TEXT_VARIATION_PASSWORD</a></code></dt>
    <dd>
        A variant of <code><a href="https://developer.android.com/reference/android/text/InputType.html?hl=zh-cn#TYPE_CLASS_TEXT">TYPE_CLASS_TEXT</a></code> for entering passwords. The
        input method will display dingbats instead of the actual text.
    </dd>
    <dt><code><a href="https://developer.android.com/reference/android/text/InputType.html?hl=zh-cn#TYPE_TEXT_VARIATION_URI">TYPE_TEXT_VARIATION_URI</a></code></dt>
    <dd>
        A variant of <code><a href="https://developer.android.com/reference/android/text/InputType.html?hl=zh-cn#TYPE_CLASS_TEXT">TYPE_CLASS_TEXT</a></code> for entering web URLs and
        other Uniform Resource Identifiers (URIs).
    </dd>
    <dt><code><a href="https://developer.android.com/reference/android/text/InputType.html?hl=zh-cn#TYPE_TEXT_FLAG_AUTO_COMPLETE">TYPE_TEXT_FLAG_AUTO_COMPLETE</a></code></dt>
    <dd>
        A variant of <code><a href="https://developer.android.com/reference/android/text/InputType.html?hl=zh-cn#TYPE_CLASS_TEXT">TYPE_CLASS_TEXT</a></code> for entering text that the
        application "auto-completes" from a dictionary, search, or other facility.
    </dd>
</dl>
<p>
    Remember to mask <code><a href="https://developer.android.com/reference/android/view/inputmethod/EditorInfo.html?hl=zh-cn#inputType">inputType</a></code> with the appropriate
    constant when you test for these variants. The available mask constants are listed in the
    reference documentation for <code><a href="https://developer.android.com/reference/android/text/InputType.html?hl=zh-cn">InputType</a></code>.
</p>
<p class="caution">
    <strong>Caution:</strong> In your own IME, make sure you handle text correctly when you send it
    to a password field. Hide the password in your UI both in the input view and in the candidates
    view. Also remember that you shouldn't store passwords on a device. To learn more, see the
    <a href="https://developer.android.com/training/articles/security-tips.html?hl=zh-cn">Designing for Security</a> guide.
</p>
<h2 id="SendText">Sending Text to the Application</h2>
<p>
    As the user inputs text with your IME, you can send text to the application by sending
    individual key events or by editing the text around the cursor in the application's text
    field. In either case, you use an instance of <code><a href="https://developer.android.com/reference/android/view/inputmethod/InputConnection.html?hl=zh-cn">InputConnection</a></code>
    to deliver the text. To get this instance, call
    <code><a href="https://developer.android.com/reference/android/inputmethodservice/InputMethodService.html?hl=zh-cn#getCurrentInputConnection()">InputMethodService.getCurrentInputConnection()</a></code>.
</p>
<h3 id="EditingCursor">Editing the text around the cursor</h3>
<p>
    When you're handling the editing of existing text in a text field, some of the more useful
    methods in <code><a href="https://developer.android.com/reference/android/view/inputmethod/BaseInputConnection.html?hl=zh-cn">BaseInputConnection</a></code> are:
</p>
<dl>
    <dt>
        <code><a href="https://developer.android.com/reference/android/view/inputmethod/BaseInputConnection.html?hl=zh-cn#getTextBeforeCursor(int, int)">getTextBeforeCursor()</a></code></dt>
    <dd>
        Returns a <code><a href="https://developer.android.com/reference/java/lang/CharSequence.html?hl=zh-cn">CharSequence</a></code> containing the number of requested characters
        before the current cursor position.
    </dd>
    <dt>
        <code><a href="https://developer.android.com/reference/android/view/inputmethod/BaseInputConnection.html?hl=zh-cn#getTextAfterCursor(int, int)">getTextAfterCursor()</a></code>
    </dt>
    <dd>
        Returns a <code><a href="https://developer.android.com/reference/java/lang/CharSequence.html?hl=zh-cn">CharSequence</a></code> containing the number of requested characters
        following the current cursor position.
    </dd>
    <dt>
        <code><a href="https://developer.android.com/reference/android/view/inputmethod/BaseInputConnection.html?hl=zh-cn#deleteSurroundingText(int, int)">deleteSurroundingText()</a></code>
    </dt>
    <dd>
        Deletes the specified number of characters before and following the current cursor
        position.
    </dd>
    <dt>
        <code><a href="https://developer.android.com/reference/android/view/inputmethod/BaseInputConnection.html?hl=zh-cn#commitText(java.lang.CharSequence, int)">commitText()</a></code>
    </dt>
    <dd>
        Commit a <code><a href="https://developer.android.com/reference/java/lang/CharSequence.html?hl=zh-cn">CharSequence</a></code> to the text field and set a new cursor
        position.
    </dd>
</dl>
<p>
    For example, the following snippet shows how to replace the four characters to the left of the
    cursor with the text "Hello!":
</p>
<pre>
InputConnection ic = getCurrentInputConnection();
ic.deleteSurroundingText(4, 0);
ic.commitText("Hello", 1);
ic.commitText("!", 1);
</pre>
<h3 id="ComposeThenCommit">Composing text before committing</h3>
<p>
    If your IME does text prediction or requires multiple steps to compose a glyph or
    word, you can show the progress in the text field until the user commits the word, and then you
    can replace the partial composition with the completed text. You may give special treatment to
    the text by adding a "span" to it when you pass it to
<code><a href="https://developer.android.com/reference/android/view/inputmethod/InputConnection.html?hl=zh-cn#setComposingText(java.lang.CharSequence, int)">setComposingText()</a></code>.
</p>
<p>
    The following snippet shows how to show progress in a text field:
</p>
<pre>
InputConnection ic = getCurrentInputConnection();
ic.setComposingText("Composi", 1);
ic.setComposingText("Composin", 1);
ic.commitText("Composing ", 1);
</pre>
<p>
    The following screenshots show how this appears to the user:
</p>
<img src="../../../resources/articles/images/inputmethod_composing_text_10b8e.png?hl=zh-cn"
alt="" height="54"
    id="figure3a" />
<img src="../../../resources/articles/images/inputmethod_composing_text_20b8e.png?hl=zh-cn"
alt="" height="53"
    id="figure3b" />
<img src="../../../resources/articles/images/inputmethod_composing_text_30b8e.png?hl=zh-cn"
alt="" height="31"
    id="figure3c" />
<p class="img-caption">
    <strong>Figure 3.</strong> Composing text before committing.
</p>
<h3 id="HardwareKeyEvents">Intercepting hardware key events</h3>
<p>
    Even though the input method window doesn't have explicit focus, it receives hardware key
    events first and can choose to consume them or forward them along to the application. For
    example, you may want to consume the directional keys to navigate within your UI for candidate
    selection during composition. You may also want to trap the back key to dismiss any popups
    originating from the input method window.</p>
<p>
    To intercept hardware keys, override
    <code><a href="https://developer.android.com/reference/android/inputmethodservice/InputMethodService.html?hl=zh-cn#onKeyDown(int, android.view.KeyEvent)">onKeyDown()</a></code>
    and <code><a href="https://developer.android.com/reference/android/inputmethodservice/InputMethodService.html?hl=zh-cn#onKeyUp(int, android.view.KeyEvent)">onKeyUp()</a></code>.
    See the
    <a href="https://android.googlesource.com/platform/development/+/master/samples/SoftKeyboard/">
    SoftKeyboard</a> sample app for an example.
</p>
<p>
    Remember to call the <code>super()</code> method for keys you don't want to handle yourself.
</p>
<h2 id="IMESubTypes">Creating an IME Subtype</h2>
<p>
    Subtypes allow the IME to expose multiple input modes and languages supported by an IME. A
    subtype can represent:
</p>
<ul>
    <li>A locale such as en_US or fr_FR.</li>
    <li>An input mode such as voice, keyboard, or handwriting.</li>
    <li>
        Other input styles, forms, or properties specific to the IME, such as 10-key or qwerty
        keyboard layouts.
    </li>
</ul>
<p>
    Basically, the mode can be any text such as "keyboard", "voice", and so forth. A subtype can
    also expose a combination of these.
</p>

<p>
    Subtype information is used for an IME switcher dialog that's available from the notification
    bar and also for IME settings. The information also allows the framework to bring up a
    specific subtype of an IME directly. When you build an IME, use the subtype facility, because
    it helps the user identify and switch between different IME languages and modes.
</p>
<p>
    You define subtypes in one of the input method's XML resource files, using the
    <code>&lt;subtype&gt;</code> element. The following snippet defines an IME with two
    subtypes: a keyboard subtype for the US English locale, and another keyboard subtype for the
    French language locale for France:
</p>
<pre>
&lt;input-method xmlns:android="http://schemas.android.com/apk/res/android"
        android:settingsActivity="com.example.softkeyboard.Settings"
        android:icon="&#64;drawable/ime_icon"&gt;
    &lt;subtype android:name="&#64;string/display_name_english_keyboard_ime"
            android:icon="&#64;drawable/subtype_icon_english_keyboard_ime"
            android:imeSubtypeLanguage="en_US"
            android:imeSubtypeMode="keyboard"
            android:imeSubtypeExtraValue="somePrivateOption=true" /&gt;
    &lt;subtype android:name="&#64;string/display_name_french_keyboard_ime"
            android:icon="&#64;drawable/subtype_icon_french_keyboard_ime"
            android:imeSubtypeLanguage="fr_FR"
            android:imeSubtypeMode="keyboard"
            android:imeSubtypeExtraValue="foobar=30,someInternalOption=false" /&gt;
    &lt;subtype android:name="&#64;string/display_name_german_keyboard_ime" ... /&gt;
&lt;/input-method&gt;
</pre>
<p>
    To ensure that your subtypes are labeled correctly in the UI, use %s to get a subtype label
    that is the same as the subtype’s locale label. This is demonstrated in the next two snippets.
    The first snippet shows part of the input method's XML file:
</p>
<pre>
&lt;subtype
    android:label="&#64;string/label_subtype_generic"
    android:imeSubtypeLocale="en_US"
    android:icon="&#64;drawable/icon_en_us"
    android:imeSubtypeMode="keyboard" /&gt;
</pre>
<p>
    The next snippet is part of the IME's <code>strings.xml</code> file. The string
    resource <code>label_subtype_generic</code>, which is used by the input method UI definition to
    set the subtype's label, is defined as:
</p>
<pre>
&lt;string name="label_subtype_generic"&gt;%s&lt;/string&gt;
</pre>
<p>
    This setting causes the subtype’s display name to match the locale setting.
    For example, in any English locale, the display name is “English (United States)”.
</p>
<h3 id="SubtypeProcessing">Choosing IME subtypes from the notification bar</h3>
<p>
    The Android system manages all subtypes exposed by all IMEs. IME subtypes are
    treated as modes of the IME they belong to. In the notification bar, a user can select an
    available subtype for the currently-set IME, as shown in the following screenshot:
</p>
<img
src="../../../resources/articles/images/inputmethod_subtype_notification0b8e.png?hl=zh-cn"
alt=""
    height="85" id="figure4" />
<p class="img-caption">
    <strong>Figure 4.</strong> Choosing an IME subtype from the notification
bar.
</p>
<img
src="../../../resources/articles/images/inputmethod_subtype_preferences0b8e.png?hl=zh-cn"
alt=""
    height="165" id="figure5" />
<p class="img-caption">
    <strong>Figure 5.</strong> Setting subtype preferences in System Settings.
</p>
<h3 id="SubtypeSettings">Choosing IME subtypes from System Settings</h3>
<p>
    A user can control how subtypes are used in the “Language &amp; input” settings panel in the
    System Settings area. In the
    <a href="https://android.googlesource.com/platform/development/+/master/samples/SoftKeyboard/">
    SoftKeyboard</a> sample app, the file <code>InputMethodSettingsFragment.java</code> contains an
    implementation that facilitates a subtype enabler in the IME settings. Refer to the
    <a href="https://android.googlesource.com/platform/development/+/master/samples/SoftKeyboard/">
    SoftKeyboard</a> sample app in the Android SDK for more information about how to support
    Input Method Subtypes in your IME.
</p>
<img src="../../../resources/articles/images/inputmethod_subtype_settings0b8e.png?hl=zh-cn"
alt=""
    height="210" id="figure6" />
<p class="img-caption">
    <strong>Figure 6.</strong> Choosing a language for the IME.
</p>

<h2 id="Switching">Switching among IME Subtypes</h2>

<p>You can allow users to switch easily among multiple IME subtypes by providing a switching key,
such as the globe-shaped language icon, as part of the keyboard. Doing so greatly improves the
keyboard's usability, and can help avoid user frustration.
To enable such switching, perform the following steps:</p>
<p>
<ol>
    <li>Declare <code>supportsSwitchingToNextInputMethod = "true"</code> in the input method's XML
    resource files. Your declaration should look similar to the following snippet:
    <pre>
&lt;input-method xmlns:android="http://schemas.android.com/apk/res/android"
        android:settingsActivity="com.example.softkeyboard.Settings"
        android:icon="&#64;drawable/ime_icon"
        android:supportsSwitchingToNextInputMethod="true"&gt;
</pre></li>
    <li>Call the <code><a href="https://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html?hl=zh-cn#shouldOfferSwitchingToNextInputMethod(android.os.IBinder)">shouldOfferSwitchingToNextInputMethod()</a></code> method.</li>
    <li>If the method returns true, display a switching key.</li>
    <li>When the user taps the switching key, call
    <code><a href="https://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html?hl=zh-cn#switchToNextInputMethod(android.os.IBinder, boolean)">switchToNextInputMethod()</a></code>,
    passing false to the second parameter. A value of false tells the system to treat all subtypes
    equally, regardless of what IME they belong to. Specifying true requires the system to cycle
    through subtypes in the current IME.</li>
</ol>
</p>

<p class="caution">
    <strong>Caution:</strong> Prior to Android 5.0 (API level 21),
<code><a href="https://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html?hl=zh-cn#switchToNextInputMethod(android.os.IBinder, boolean)">switchToNextInputMethod()</a></code>
is not aware of the <code>supportsSwitchingToNextInputMethod</code> attribute. If the user switches
into an IME without a switching key, he or she may get stuck in that IME, unable to switch out of it easily.</p>

<p>

</p>

<h2 id="GeneralDesign">General IME Considerations</h2>
<p>
    Here are some other things to consider as you're implementing your IME:
</p>
<ul>
<li>
    Provide a way for users to set options directly from the IME's UI.
</li>
<li>
    Because multiple IMEs may be installed on the device, provide a way for the user to switch to a
    different IME directly from the input method UI.
</li>
<li>
    Bring up the IME's UI quickly. Preload or load on demand any large resources so that users
    see the IME as soon as they tap on a text field. Cache resources and views for subsequent
    invocations of the input method.
</li>
<li>
    Conversely, you should release large memory allocations soon after the input method window is
    hidden, so that applications can have sufficient memory to run. Consider using a delayed
    message to release resources if the IME is in a hidden state for a few seconds.
</li>
<li>
    Make sure that users can enter as many characters as possible for the language or locale
    associated with the IME. Remember that users may use punctuation in passwords or user
    names, so your IME has to provide many different characters to allow users to enter a
    password and get access to the device.
</li>
</ul>


    </div>

    

  
    
  
    



<div class="wrap">
  <footer class="dac-footer ">
    <div class="cols dac-footer-main">
      <div class="col-1of2">
        <div class="dac-footer-contact">
          <a class="dac-footer-contact-link" href="https://developer.android.com/newsletter/index.html?hl=zh-cn" title="Newsletter">Newsletter</a>
          <a class="dac-footer-contact-link" href="https://android-developers.blogspot.com/" title="博客" target="_blank">博客</a>
          <a class="dac-footer-contact-link" href="https://developer.android.com/support.html?hl=zh-cn" title="支持">支持</a>
        </div>
      </div>
      <div class="col-1of2 dac-footer-reachout">
        <div class="dac-footer-social">
          <a class="dac-button-social dac-youtube dac-footer-social-link" href="https://www.youtube.com/user/androiddevelopers" title="Android Developers on YouTube" target="_blank"><i class="dac-sprite dac-youtube"></i><span class="hide-text">Android Developers on YouTube</span></a>
          <a class="dac-button-social dac-gplus dac-footer-social-link" href="https://plus.google.com/+AndroidDevelopers" title="Android Developers on Google+" target="_blank"><i class="dac-sprite dac-gplus"></i><span class="hide-text">Android Developers on Google+</span></a>
          <a class="dac-button-social dac-twitter dac-footer-social-link" href="https://twitter.com/AndroidDev" title="Android Developers on Twitter" target="_blank"><i class="dac-sprite dac-twitter"></i><span class="hide-text">Android Developers on Twitter</span></a>
        </div>
      </div>
    </div>

    <hr class="dac-footer-separator"/>
      
      <p class="dac-footer-copyright">
        
        Except as noted, this content is licensed under <a href="http://creativecommons.org/licenses/by/2.5/" target="_blank">Creative Commons Attribution 2.5</a>. For details and restrictions, see the <a href="https://developer.android.com/license.html">Content License</a>.
      </p>
    

    <p class="dac-footer-links">
      <a href="https://www.android.com/" title="Android.com" target="_blank">Android.com</a>
      <a href="https://developer.android.com/?hl=zh-cn" title="Android Developers">Android Developers</a>
      <a href="https://developer.android.com/studio/index.html?hl=zh-cn" title="Android Studio">Android Studio</a>
      <a href="https://developer.android.com/distribute/console/index.html?hl=zh-cn" title="Google Play Console">Google Play Console</a>
      <a href="https://developer.android.com/legal.html?hl=zh-cn" title="Legal Notice">Legal Notice</a>
    </p>

    <!-- TODO(akassay) Update all DAC js to use the class instead of the id b/30368561 -->
    <form class="devsite-utility-footer-language" id="setlang" action="https://developer.android.com/i18n/setlang/" method="post">
      <input type="hidden" name="xsrf_token" value="XlwWyGhQOo3Oy-xfLIrPpx4MKnIfJe0KJfNf6UhWd6s6MTQ5NzUxNzA4MTkxMzUxMA" />
      <input type="hidden" name="next" value="/guide/topics/text/creating-input-method.html">
      <span id="language" class="locales">
        <select class="devsite-utility-footer-language-select" name="language">
          
          <option value="id"
            >
            Bahasa Indonesia
          </option>
          
          <option value="de"
            >
            Deutsch
          </option>
          
          <option value="en"
            >
            English
          </option>
          
          <option value="es"
            >
            español
          </option>
          
          <option value="es-419"
            >
            Español (América Latina)
          </option>
          
          <option value="fr"
            >
            français
          </option>
          
          <option value="pt-br"
            >
            Português Brasileiro
          </option>
          
          <option value="vi"
            >
            Tiếng Việt
          </option>
          
          <option value="tr"
            >
            Türkçe
          </option>
          
          <option value="ru"
            >
            Русский
          </option>
          
          <option value="th"
            >
            ภาษาไทย
          </option>
          
          <option value="ja"
            >
            日本語
          </option>
          
          <option value="zh-cn"
             selected="selected" >
            简体中文
          </option>
          
          <option value="zh-tw"
            >
            繁體中文
          </option>
          
          <option value="ko"
            >
            한국어
          </option>
          
        </select>
      </span>
    </form>
  </footer>
</div><!--/.wrap -->

<div class="dac-toast-group">
  <div class="dac-toast" data-toast>
    <div class="dac-toast-wrap">
      This site uses cookies to store your preferences for site-specific language and display options.
    </div>
  </div>
</div>

<div data-modal="newsletter" data-newsletter-fb data-swap class="dac-modal newsletter">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <div class="dac-swap" data-swap-container>
          <section class="dac-swap-section dac-active dac-down">
            <h2 class="norule dac-modal-header-title" data-t="newsletter.title">Get the latest Android developer news and tips that will help you find success on Google Play.</h2>
            <p class="dac-modal-header-subtitle" data-t="newsletter.requiredHint">* Required Fields</p>
          </section>
          <section class="dac-swap-section dac-up">
            
            <h2 class="norule dac-modal-header-title" data-t="newsletter.successTitle">Hooray!</h2>
          </section>
        </div>
      </header>
      <div class="dac-swap" data-swap-container>
        <section class="dac-swap-section dac-active dac-left">
          <form action="https://services.google.com/fb/submissions/android-developer-mailing-list/" class="dac-form" method="post">
            <section class="dac-modal-content">
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-full-name" class="dac-form-floatlabel" data-t="newsletter.name">Full name</label>
                      <input type="text" class="dac-form-input" name="fullname" id="newsletter-full-name" required>
                      <span class="dac-form-required">*</span>
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-email" class="dac-form-floatlabel" data-t="newsletter.email">Email 地址</label>
                      <input type="email" class="dac-form-input" name="emailaddress" id="newsletter-email" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-company" class="dac-form-floatlabel" data-t="newsletter.company">Company / developer name</label>
                      <input type="text" class="dac-form-input" name="companydevelopername" id="newsletter-company">
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-play-store" class="dac-form-floatlabel" data-t="newsletter.appUrl">One of your Play Store app URLs</label>
                      <input type="url" class="dac-form-input" name="playstoreappurls" id="newsletter-play-store">
                    </div>
                  </div>
                </div>
              </fieldset>
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol newsletter-interested" data-validation-message="Please check at least one item.">
                    <legend class="dac-form-legend">What are you interested in?<span class="dac-form-required">*</span></legend>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-whats-new" value="whats-new">
                      <label for="interested-whats-new" class="dac-form-checkbox-button"></label>
                      <label for="interested-whats-new" class="dac-form-label">What's new</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-games-updates" value="games-updates">
                      <label for="interested-games-updates" class="dac-form-checkbox-button"></label>
                      <label for="interested-games-updates" class="dac-form-label">Games updates</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-android-development" value="android-development">
                      <label for="interested-android-development" class="dac-form-checkbox-button"></label>
                      <label for="interested-android-development" class="dac-form-label">Android development</label>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol newsletter-checkboxes">
                    <div class="dac-form-input-group">
                      <label for="newsletter-receive-in">Receive newsletter in</label>
                      <select name="language" class="dac-form-select" id="newsletter-receive-in">
                        <option value="en-US" selected>English</option>
                        <option value="ar">Arabic</option>
                        <option value="zh">Chinese (Simplified)</option>
                        <option value="zh-TW">Chinese (Traditional)</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="id">Indonesian (Bahasa)</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="pt-BR">Portuguese (Brazilian)</option>
                        <option value="ru">Russian</option>
                        <option value="es-419">Spanish (Latin American)</option>
                        <option value="th">Thai</option>
                        <option value="tr">Turkish</option>
                        <option value="vi">Vietnamese</option>
                      </select>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="marketingoptin" id="newsletter-add" required value="Add me to the mailing list.">
                          <label for="newsletter-add" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-add" class="dac-form-label dac-form-aside">
                            Add me to the mailing list.
                            <span class="dac-form-required">*</span>
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="privacystatement" id="newsletter-terms" required value="I acknowledge that the information provided in this form will be subject to Google's privacy policy (https://www.google.com/policies/privacy/).">
                          <label for="newsletter-terms" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-terms" class="dac-form-label dac-form-aside"><span data-t="newsletter.privacyPolicy" data-t-html>
                            
                            I acknowledge that the information provided in this form will be subject to <a href="https://www.google.com/policies/privacy/">Google's privacy policy</a>.
                          </span>
                          <span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fieldset>
            </section>
            <input type="hidden" name="referrer" value="dac">
            <footer class="dac-modal-footer">
              <div class="cols">
                <div class="col-2of5">
                </div>
              </div>
              <button type="submit" value="Submit" class="dac-fab dac-primary dac-large dac-modal-action"><i class="dac-sprite dac-arrow-right"></i></button>
            </footer>
          </form>
        </section>
        <section class="dac-swap-section dac-right">
          <div class="dac-modal-content">
            <p class="newsletter-success-message" data-t="newsletter.successDetails">
              You have successfully signed up for the latest Android developer news and tips.
            </p>
          </div>
        </section>
      </div>
    </div>
  </div>
</div><!--/.dac-modal.newsletter-->


<div data-modal="langform" class="dac-modal" id="langform">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            Browse this site in <span class="span-target-lang"></span>?
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <fieldset class="dac-form-fieldset">
              <div class="cols">
                <div class="col-2of2 langform-leftCol">
                  <p id="resetLangText">
                    You requested a page in <span class="span-target-lang"></span>, but your language preference for this site is <span class="span-current-lang"></span>.
                  </p>
                  <p id="resetLangCta">
                    Would you like to change your language preference and browse this site in <span class="span-target-lang"></span>? If you want to change your language preference later, use the language menu at the bottom of each page.
                  </p>
                </div>
              </div>
            </fieldset>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="yes" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang yes" data-t="newsletter.resetLangButtonYes" data-modal-toggle>
                Change Language
              </button>
            </a>
            <a href="#" class="" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang no" data-t="newsletter.resetLangButtonNo" data-modal-toggle>
                Not Now
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal-->


<div data-modal="api-unavailable" class="dac-modal" id="api-unavailable">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            This class requires API level <span class="api-level"></span> or higher
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <p>
              This doc is hidden because your selected API level for the documentation is <span class="api-level"></span>. You can change the documentation API level with the selector above the left navigation.
            </p>
            
            <p>For more information about specifying the API level your app requires, read <a href="https://developer.android.com/training/basics/supporting-devices/platforms.html">Supporting Different Platform Versions</a>.</p>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="ok" onclick="return false;">
              <button class="button dac-primary dac-modal-action ok"
              data-modal-toggle>
                OK, make this page visible
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal#api-unavailable-->

    
  </div><!--/#body-content-->

  <!-- Nav Setup -->
  <script>$('[data-dac-nav]').dacNav();</script>
  <script type="text/javascript">
    $('.slideshow-container').dacSlideshow({
        btnPrev: '.slideshow-prev',
        btnNext: '.slideshow-next',
        btnPause: '#pauseButton'
    });

    $(".feed").dacTabbedList({
      nav_id: '.feed-nav',
      frame_id: '.feed-frame'
    });
  </script>
  
  <script src="../../../ytblogger_lists_unified414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="../../../android_metadata_en414d.js?hl=zh-cn?v=2017061508" defer></script>
  
  <script src="../../../reference/lists414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="../../../reference/gms_lists414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="../../../reference/android/support/wearable/lists414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="../../../reference/android/support/test/lists414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="../../../reference/android/support/constraint/lists414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="https://developer.android.com/_static2/f304fc21fa/jsi18n/?hl=zh-cn"></script>
  <script>
    // Load localized metadata.
    (function(lang) {
      if (lang === 'en') { return; }
      document.write('<script src="https://developer.android.com/android_metadata_zh-cn.js?hl=zh-cn?v=2017061508" defer></' + 'script>');
    })(getLangPref())

    // Add skip to content for accessibility.
    $('#skip-to-main').click(function() {
      $('a[name=top]').focus();
    });

    $('.devsite-utility-footer-language-select').each(function() {
      $(this).change(function() {
        changeLangPref(this.value, true)
        $('.devsite-utility-footer-language').submit();
      });
    });
  </script>

  <script>
    (function($) {
      devsite.analytics.InitAnalytics();
    })(jQuery);
  </script>

  


<div id="survey-box-wrapper">
  <div class="material-dialog" style="width:270px">
    <div class="material-dialog-title">
      Take a one-minute survey?
    </div>
    <div class="material-dialog-description">
      Help us improve Android tools and documentation.
    </div>
    <div class="material-button-bar">
      <a class="dac-button dac-primary dac-raised" target="_blank"
          href="https://goo.gl/forms/kV7MoyD2dvcWkd5N2">Sure</a>
      <a class="dac-button" href="#">No thanks</a>
    </div>
  </div>
</div>

</body>

<!-- Mirrored from developer.android.com/guide/topics/text/creating-input-method.html?hl=zh-cn by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:15:29 GMT -->
</html>

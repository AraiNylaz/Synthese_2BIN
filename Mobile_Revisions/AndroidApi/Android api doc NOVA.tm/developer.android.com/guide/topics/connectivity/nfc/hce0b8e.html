





<!DOCTYPE html>
<html lang="zh-cn">

<!-- Mirrored from developer.android.com/guide/topics/connectivity/nfc/hce.html?hl=zh-cn by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:15:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

  



<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta content="IE=edge" http-equiv="X-UA-Compatible">





<script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script>

<meta charset="utf-8">



<meta name="xsrf_token" content="O_5XKeI7uETlE7uM3ZgthePFjfu0V-q2usVl8VLMBeg6MTQ5NzUxNzA3NzIwNjQyMA" />

  
    <link rel="canonical" href="hce.html">
  

  
    <link rel="alternate" href="hce.html" hreflang="en">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/connectivity/nfc/hce.html" hreflang="en-cn">
  

  <link rel="alternate" href="hce.html" hreflang="x-default">




<link rel="shortcut icon" href="../../../../_static/f304fc21fa/images/android/favicon0b8e.png?hl=zh-cn">

<link rel="apple-touch-icon" href="../../../../_static/f304fc21fa/images/android/touchicon-1800b8e.png?hl=zh-cn">


<title>

  Host-based Card Emulation | Android Developers

</title>

  <meta name="description" content="Many Android-powered devices that offer NFC functionality already support NFC card emulation. In most cases, the card is emulated by a separate chip in the device, called a secure element . Many SIM cards provided by wireless carriers also contain a secure…">


<!-- STYLESHEETS -->
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto+Condensed">
<link rel="stylesheet"
    href="http://fonts.googleapis.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold"
    title="roboto">







<link href="../../../../static/css/default414d.css?hl=zh-cn?v=2017061508" rel="stylesheet" type="text/css">
<!-- JAVASCRIPT -->
<script src="../../../../_static/f304fc21fa/js/android_3p-bundle0b8e.js?hl=zh-cn" type="text/javascript"></script>
<script src="../../../../_static/f304fc21fa/js/script_foot_closure_android__zh_cn0b8e.js?hl=zh-cn"></script>
<script src="../../../../_static/f304fc21fa/js/script_foot_android0b8e.js?hl=zh-cn"></script>

<script type="text/javascript">
  var toRoot = 'https://developer.android.com/';
  devsite.permissions.init({"039e5d84b87fd75807ffb37b7f1bbf2c": true, "098dafe57affddc137df300142652cfd": false, "cb025a64a50094835616312f4774a53d": true, "51470233c56fc1fde50f00b73c52b216": false, "752953480de00a336d911a46966cc16d": false, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true});

  var replaceBlog = false;
  var replaceYouTube = false;
  var siteDefaultLocale = 'en';

  var ANDROID_LANGUAGES = [
      'id','de','en','es','es-419','fr','pt-br','vi','tr','ru','th','ja','zh-cn','zh-tw','ko'
  ];
</script>
<script src="../../../../static/js/docs414d.js?hl=zh-cn?v=2017061508" type="text/javascript"></script>


</head>

<body class="gc-documentation
            
            
              develop
              guide
            
            "
      itemscope itemtype="http://schema.org/Article">
  


  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;en&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;zh-cn&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-49880327-2&quot;}">
  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;en&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;zh-cn&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-5831155-1&quot;}">
  



  
  
    <script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "userCountry": "BE", "language": {"requested": "zh-cn", "served": "en"}, "projectName": "API Guides", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>
  



  
  <a href="#top" id="skip-to-main">Skip to content</a>
  <header id="header-wrapper">
    <div class="dac-header" id="header">
      <div class="dac-header-inner">
        <a class="dac-nav-toggle" data-dac-toggle-nav href="#" title="Open navigation">
          <span class="dac-nav-hamburger">
            <span class="dac-nav-hamburger-top"></span>
            <span class="dac-nav-hamburger-mid"></span>
            <span class="dac-nav-hamburger-bot"></span>
          </span>
        </a>
        
        <a class="dac-header-logo" href="https://developer.android.com/index.html?hl=zh-cn">
          <img class="dac-header-logo-image" src="../../../../static/images/android_logo0b8e.png?hl=zh-cn"
              srcset="https://developer.android.com/static/images/android_logo_2x.png 2x?hl=zh-cn"
              width="32" height="36" alt="Android"> Developers</a>
        <ul class="dac-header-tabs">
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/design/index.html?hl=zh-cn"
               zh-tw-lang="設計"
               zh-cn-lang="设计"
               ru-lang="Проектирование"
               ko-lang="디자인"
               ja-lang="設計"
               es-lang="Diseñar">Design</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/develop/index.html?hl=zh-cn"
               zh-tw-lang="開發"
               zh-cn-lang="开发"
               ru-lang="Разработка"
               ko-lang="개발"
               ja-lang="開発"
               es-lang="Desarrollar">Develop</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/distribute/index.html?hl=zh-cn"
               zh-tw-lang="發佈"
               zh-cn-lang="分发"
               ru-lang="Распространение"
               ko-lang="배포"
               ja-lang="配布"
               es-lang="Distribuir">Distribute</a>
          </li>
        </ul>


        

        <a class="dac-header-console-btn gc-analytics-event" href="https://play.google.com/apps/publish/"
           data-category="User" data-action="Console" data-label="Clicked">
          <img src="https://developer.android.com/static/images/developer-console-icon.svg?hl=zh-cn" width="18" height="19" alt="Play 控制台">Play Console</a>

        

<form data-search="" class="dac-header-search">
  <button class="dac-header-search-close" data-search-close="">
    <i class="dac-sprite dac-back-arrow"></i>
  </button>

  <div class="dac-header-search-inner">
    <i class="dac-sprite dac-search-white dac-header-search-icon"></i>
    
    <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q" class="dac-header-search-input" placeholder="搜索">
    <button class="dac-header-search-clear dac-hidden" data-search-clear="">
      <i class="dac-sprite dac-close-black"></i>
    </button>
  </div>
</form>

        
      </div><!--/.header-wrap.wrap-->
    </div><!--/.header-->

    

<div id="search-results" class="dac-search-results">
  <div id="dac-search-results-history" class="dac-search-results-history">
    <div class="wrap dac-search-results-history-wrap">
      <div class="cols">
        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Most visited</h2>
          <div class="resource-flow-layout" data-history-query="history:most/visited" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>

        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Recently visited</h2>
          <div class="resource-flow-layout cols" data-history-query="history:recent" data-allow-duplicates="true" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="dac-search-results-content" class="dac-search-results-content">
    <div class="dac-search-results-metadata wrap">
      <div class="dac-search-results-for">
        
          <h2>
          Results for <span id="search-results-for"></span>
          </h2>
      </div>

      <div id="dac-search-results-hero"></div>

      <div class="dac-search-results-hero cols">
        <div id="dac-search-results-reference" class="col-6of6 col-tablet-2of2 col-mobile-1of1">
          <div class="suggest-card reference no-display">
            <ul class="dac-search-results-reference">
            </ul>
          </div>
        </div>
      </div>

      <div class="cols dac-search-results-cse">
        <script src="../../../../../cse.google.com/f4116.txt?cx=000521750095050289010:zpcpi1ea4s8" async></script>
        <gcse:searchresults-only linkTarget="_self"></gcse:searchresults-only>
      </div>
    </div>
  </div>
</div>

  </header>

  <a name="navigation" tabindex=0 class="nav-start-marker">navigation</a>
  <nav class="dac-nav">
    <div class="dac-nav-dimmer" data-dac-toggle-nav></div>
    <div class="dac-nav-sidebar" data-swap data-dynamic="false" data-transition-speed="300" data-dac-nav>
      <div data-swap-container>
        
        <a class="dac-nav-back-button dac-swap-section dac-up dac-no-anim" tabindex=0 data-swap-button>
          
          <i class="dac-sprite dac-nav-back"></i> <span class="dac-nav-back-title">返回</span>
        </a>

        <div class="dac-nav-sub dac-swap-section dac-right dac-active" itemscope
            itemtype="http://schema.org/SiteNavigationElement">
          
          
            
            <ul id="nav">
              <li class="nav-section"><div class="nav-section-header"><a href="../../../index0b8e.html?hl=zh-cn" >Introduction</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../../components/fundamentals0b8e.html?hl=zh-cn" >App Fundamentals</a></li><li><a href="../../../practices/compatibility0b8e.html?hl=zh-cn" >Device Compatibility</a></li><li class="nav-section"><div class="nav-section-header"><a href="../../permissions/index0b8e.html?hl=zh-cn" >System Permissions</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../permissions/requesting0b8e.html?hl=zh-cn" >Requesting Permissions</a></li><li><a href="../../permissions/defining0b8e.html?hl=zh-cn" >Defining Permissions</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../../platform/index0b8e.html?hl=zh-cn" >Platform Architecture</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../../platform/j8-jack0b8e.html?hl=zh-cn"  es-lang="Funciones del lenguaje Java 8" in-lang="Fitur Bahasa Java 8" ja-lang="Java 8 の機能" ko-lang="Java 8 언어 기능" pt-br-lang="Recursos de linguagem do Java 8" ru-lang="Возможности языка Java 8" vi-lang="Tính năng của Ngôn ngữ Java 8" zh-cn-lang="Java 8 语言功能" zh-tw-lang="Java 8 語言功能">Use Java 8 Language Features</a></li><li><a href="../../../practices/verifying-apps-art0b8e.html?hl=zh-cn" >Verifying App Behavior on the Android Runtime (ART)</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../../components/index0b8e.html?hl=zh-cn" >App Components</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../../../components/intents-filters0b8e.html?hl=zh-cn" >Intents and Intent Filters</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../../components/intents-common0b8e.html?hl=zh-cn" >Common Intents</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../../components/activities/index0b8e.html?hl=zh-cn" >Activities</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../../components/activities/intro-activities0b8e.html?hl=zh-cn" >Introduction to Activities</a></li><li><a href="../../../components/activities/activity-lifecycle0b8e.html?hl=zh-cn" >The Activity Lifecycle</a></li><li><a href="../../../components/activities/state-changes0b8e.html?hl=zh-cn" >Activity State Changes</a></li><li><a href="../../../components/activities/tasks-and-back-stack0b8e.html?hl=zh-cn" >Tasks and Back Stack</a></li><li><a href="../../../components/activities/process-lifecycle0b8e.html?hl=zh-cn" >Processes and Application Lifecycle</a></li><li><a href="../../../components/activities/parcelables-and-bundles0b8e.html?hl=zh-cn" >Parcelables and Bundles</a></li><li><a href="../../../components/activities/recents0b8e.html?hl=zh-cn" >Recents Screen</a></li></ul></li><li><a href="../../../components/fragments0b8e.html?hl=zh-cn" >Fragments</a></li><li><a href="../../../components/loaders0b8e.html?hl=zh-cn" >Loaders</a></li><li class="nav-section"><div class="nav-section-header"><a href="../../../components/services0b8e.html?hl=zh-cn" >Services</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../../components/bound-services0b8e.html?hl=zh-cn" >Bound Services</a></li><li><a href="../../../components/aidl0b8e.html?hl=zh-cn" >AIDL</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../providers/content-providers0b8e.html?hl=zh-cn" >Content Providers</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../providers/content-provider-basics0b8e.html?hl=zh-cn" >Content Provider Basics</a></li><li><a href="../../providers/content-provider-creating0b8e.html?hl=zh-cn" >Creating a Content Provider</a></li><li><a href="../../providers/calendar-provider0b8e.html?hl=zh-cn" >Calendar Provider</a></li><li><a href="../../providers/contacts-provider0b8e.html?hl=zh-cn" >Contacts Provider</a></li><li><a href="../../providers/document-provider0b8e.html?hl=zh-cn" >Open files using Storage Access Framework</a></li><li><a href="../../providers/create-document-provider0b8e.html?hl=zh-cn" >Create a Custom Document Provider</a></li></ul></li><li><a href="../../../components/broadcasts0b8e.html?hl=zh-cn" >Broadcasts</a></li><li class="nav-section"><div class="nav-section-header"><a href="../../appwidgets/index0b8e.html?hl=zh-cn" >App Widgets</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../appwidgets/host0b8e.html?hl=zh-cn" >App Widget Host</a></li></ul></li><li><a href="../../../components/processes-and-threads0b8e.html?hl=zh-cn" >Processes and Threads</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../resources/index0b8e.html?hl=zh-cn" >App Resources</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../resources/overview0b8e.html?hl=zh-cn" >Overview</a></li><li><a href="../../resources/providing-resources0b8e.html?hl=zh-cn" >Providing Resources</a></li><li><a href="../../resources/accessing-resources0b8e.html?hl=zh-cn" >Accessing Resources</a></li><li><a href="../../resources/runtime-changes0b8e.html?hl=zh-cn" >Handling Runtime Changes</a></li><li class="nav-section"><div class="nav-section-header"><a href="../../resources/localization0b8e.html?hl=zh-cn" >Localization</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../resources/icu4j-framework0b8e.html?hl=zh-cn" >ICU4J Android Framework APIs</a></li><li><a href="../../resources/multilingual-support0b8e.html?hl=zh-cn" >Language and Locale</a></li></ul></li><li><a href="../../resources/complex-xml-resources0b8e.html?hl=zh-cn" >Complex XML Resources</a></li><li class="nav-section"><div class="nav-section-header"><a href="../../resources/available-resources0b8e.html?hl=zh-cn" >Resource Types</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../resources/animation-resource0b8e.html?hl=zh-cn" >Animation</a></li><li><a href="../../resources/color-list-resource0b8e.html?hl=zh-cn" >Color State List</a></li><li><a href="../../resources/drawable-resource0b8e.html?hl=zh-cn" >Drawable</a></li><li><a href="../../resources/layout-resource0b8e.html?hl=zh-cn" >Layout</a></li><li><a href="../../resources/menu-resource0b8e.html?hl=zh-cn" >Menu</a></li><li><a href="../../resources/string-resource0b8e.html?hl=zh-cn" >String</a></li><li><a href="../../resources/style-resource0b8e.html?hl=zh-cn" >Style</a></li><li><a href="../../resources/more-resources0b8e.html?hl=zh-cn" >More Types</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../manifest/manifest-intro0b8e.html?hl=zh-cn" >App Manifest</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../manifest/action-element0b8e.html?hl=zh-cn" >&lt;action&gt;</a></li><li><a href="../../manifest/activity-element0b8e.html?hl=zh-cn" >&lt;activity&gt;</a></li><li><a href="../../manifest/activity-alias-element0b8e.html?hl=zh-cn" >&lt;activity-alias&gt;</a></li><li><a href="../../manifest/application-element0b8e.html?hl=zh-cn" >&lt;application&gt;</a></li><li><a href="../../manifest/category-element0b8e.html?hl=zh-cn" >&lt;category&gt;</a></li><li><a href="../../manifest/compatible-screens-element0b8e.html?hl=zh-cn" >&lt;compatible-screens&gt;</a></li><li><a href="../../manifest/data-element0b8e.html?hl=zh-cn" >&lt;data&gt;</a></li><li><a href="../../manifest/grant-uri-permission-element0b8e.html?hl=zh-cn" >&lt;grant-uri-permission&gt;</a></li><li><a href="../../manifest/instrumentation-element0b8e.html?hl=zh-cn" >&lt;instrumentation&gt;</a></li><li><a href="../../manifest/intent-filter-element0b8e.html?hl=zh-cn" >&lt;intent-filter&gt;</a></li><li><a href="../../manifest/manifest-element0b8e.html?hl=zh-cn" >&lt;manifest&gt;</a></li><li><a href="../../manifest/meta-data-element0b8e.html?hl=zh-cn" >&lt;meta-data&gt;</a></li><li><a href="../../manifest/path-permission-element0b8e.html?hl=zh-cn" >&lt;path-permission&gt;</a></li><li><a href="../../manifest/permission-element0b8e.html?hl=zh-cn" >&lt;permission&gt;</a></li><li><a href="../../manifest/permission-group-element0b8e.html?hl=zh-cn" >&lt;permission-group&gt;</a></li><li><a href="../../manifest/permission-tree-element0b8e.html?hl=zh-cn" >&lt;permission-tree&gt;</a></li><li><a href="../../manifest/provider-element0b8e.html?hl=zh-cn" >&lt;provider&gt;</a></li><li><a href="../../manifest/receiver-element0b8e.html?hl=zh-cn" >&lt;receiver&gt;</a></li><li><a href="../../manifest/service-element0b8e.html?hl=zh-cn" >&lt;service&gt;</a></li><li><a href="../../manifest/supports-gl-texture-element0b8e.html?hl=zh-cn" >&lt;supports-gl-texture&gt;</a></li><li><a href="../../manifest/supports-screens-element0b8e.html?hl=zh-cn" >&lt;supports-screens&gt;</a></li><li><a href="../../manifest/uses-configuration-element0b8e.html?hl=zh-cn" >&lt;uses-configuration&gt;</a></li><li><a href="../../manifest/uses-feature-element0b8e.html?hl=zh-cn" >&lt;uses-feature&gt;</a></li><li><a href="../../manifest/uses-library-element0b8e.html?hl=zh-cn" >&lt;uses-library&gt;</a></li><li><a href="../../manifest/uses-permission-element0b8e.html?hl=zh-cn" >&lt;uses-permission&gt;</a></li><li><a href="../../manifest/uses-permission-sdk-23-element0b8e.html?hl=zh-cn" >&lt;uses-permission-sdk-23&gt;</a></li><li><a href="../../manifest/uses-sdk-element0b8e.html?hl=zh-cn" >&lt;uses-sdk&gt;</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../ui/index0b8e.html?hl=zh-cn" >User Interface</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../ui/overview0b8e.html?hl=zh-cn" >Overview</a></li><li class="nav-section"><div class="nav-section-header"><a href="../../ui/declaring-layout0b8e.html?hl=zh-cn" >Layouts</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../ui/layout/linear0b8e.html?hl=zh-cn" >Linear Layout</a></li><li><a href="../../ui/layout/relative0b8e.html?hl=zh-cn" >Relative Layout</a></li><li><a href="../../ui/layout/recyclerview0b8e.html?hl=zh-cn" >Recycler View</a></li><li><a href="../../ui/layout/listview0b8e.html?hl=zh-cn" >List View</a></li><li><a href="../../ui/layout/gridview0b8e.html?hl=zh-cn" >Grid View</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../ui/controls0b8e.html?hl=zh-cn" >Input Controls</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../ui/controls/button0b8e.html?hl=zh-cn" >Buttons</a></li><li><a href="../../ui/controls/checkbox0b8e.html?hl=zh-cn" >Checkboxes</a></li><li><a href="../../ui/controls/radiobutton0b8e.html?hl=zh-cn" >Radio Buttons</a></li><li><a href="../../ui/controls/togglebutton0b8e.html?hl=zh-cn" >Toggle Buttons</a></li><li><a href="../../ui/controls/spinner0b8e.html?hl=zh-cn" >Spinners</a></li><li><a href="../../ui/controls/pickers0b8e.html?hl=zh-cn" >Pickers</a></li></ul></li><li><a href="../../ui/ui-events0b8e.html?hl=zh-cn" >Input Events</a></li><li><a href="../../ui/menus0b8e.html?hl=zh-cn" >Menus</a></li><li><a href="../../ui/settings0b8e.html?hl=zh-cn" >Settings</a></li><li><a href="../../ui/dialogs0b8e.html?hl=zh-cn" >Dialogs</a></li><li><a href="../../ui/notifiers/notifications0b8e.html?hl=zh-cn" >Notifications</a></li><li><a href="../../ui/notifiers/toasts0b8e.html?hl=zh-cn" >Toasts</a></li><li><a href="../../ui/shortcuts0b8e.html?hl=zh-cn" >App Shortcuts</a></li><li class="nav-section"><div class="nav-section-header"><a href="../../search/index0b8e.html?hl=zh-cn" >Search</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../search/search-dialog0b8e.html?hl=zh-cn" >Creating a Search Interface</a></li><li><a href="../../search/adding-recent-query-suggestions0b8e.html?hl=zh-cn" >Adding Recent Query Suggestions</a></li><li><a href="../../search/adding-custom-suggestions0b8e.html?hl=zh-cn" >Adding Custom Suggestions</a></li><li><a href="../../search/searchable-config0b8e.html?hl=zh-cn" >Searchable Configuration</a></li></ul></li><li><a href="../../ui/multi-window0b8e.html?hl=zh-cn" >Multi-Window Support</a></li><li><a href="../../ui/drag-drop0b8e.html?hl=zh-cn" >Drag and Drop</a></li><li class="nav-section"><div class="nav-section-header"><a href="../../ui/accessibility/index0b8e.html?hl=zh-cn" >Accessibility</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../ui/accessibility/apps0b8e.html?hl=zh-cn" >Making Apps More Accessible</a></li><li><a href="../../ui/accessibility/checklist0b8e.html?hl=zh-cn" >Accessibility Developer Checklist</a></li><li><a href="../../ui/accessibility/node-tree-debugging0b8e.html?hl=zh-cn" >Using Node Tree Debugging</a></li><li><a href="../../ui/accessibility/services0b8e.html?hl=zh-cn" >Building Accessibility Services</a></li><li><a href="../../ui/accessibility/custom-views0b8e.html?hl=zh-cn" >Building Accessible Custom Views</a></li></ul></li><li><a href="../../ui/themes0b8e.html?hl=zh-cn" >Styles and Themes</a></li><li><a href="../../ui/custom-components0b8e.html?hl=zh-cn" >Custom Components</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../graphics/index0b8e.html?hl=zh-cn" >Animation and Graphics</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../graphics/overview0b8e.html?hl=zh-cn" >Overview</a></li><li><a href="../../graphics/prop-animation0b8e.html?hl=zh-cn" >Property Animation</a></li><li><a href="../../graphics/view-animation0b8e.html?hl=zh-cn" >View Animation</a></li><li><a href="../../graphics/drawable-animation0b8e.html?hl=zh-cn" >Drawable Animation</a></li><li class="nav-section"><div class="nav-section-header"><a href="../../graphics/2d-graphics0b8e.html?hl=zh-cn" >Canvas and Drawables</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../graphics/vector-drawable-resources0b8e.html?hl=zh-cn" >Vector Drawable</a></li></ul></li><li><a href="../../graphics/opengl0b8e.html?hl=zh-cn" >OpenGL ES</a></li><li><a href="../../graphics/hardware-accel0b8e.html?hl=zh-cn" >Hardware Acceleration</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../renderscript/index0b8e.html?hl=zh-cn" >Computation</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../renderscript/compute0b8e.html?hl=zh-cn" >RenderScript</a></li><li><a href="../../renderscript/advanced0b8e.html?hl=zh-cn" >Advanced RenderScript</a></li><li class="nav-section"><div class="nav-section-header"><a href="../../renderscript/reference/overview0b8e.html?hl=zh-cn" >Runtime API Reference</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../renderscript/reference/rs_value_types0b8e.html?hl=zh-cn" >Numerical Types</a></li><li><a href="../../renderscript/reference/rs_object_types0b8e.html?hl=zh-cn" >Object Types</a></li><li><a href="../../renderscript/reference/rs_convert0b8e.html?hl=zh-cn" >Conversion Functions</a></li><li><a href="../../renderscript/reference/rs_math0b8e.html?hl=zh-cn" >Mathematical Constants and Functions</a></li><li><a href="../../renderscript/reference/rs_vector_math0b8e.html?hl=zh-cn" >Vector Math Functions</a></li><li><a href="../../renderscript/reference/rs_matrix0b8e.html?hl=zh-cn" >Matrix Functions</a></li><li><a href="../../renderscript/reference/rs_quaternion0b8e.html?hl=zh-cn" >Quaternion Functions</a></li><li><a href="../../renderscript/reference/rs_atomic0b8e.html?hl=zh-cn" >Atomic Update Functions</a></li><li><a href="../../renderscript/reference/rs_time0b8e.html?hl=zh-cn" >Time Functions and Types</a></li><li><a href="../../renderscript/reference/rs_allocation_data0b8e.html?hl=zh-cn" >Allocation Data Access Functions</a></li><li><a href="../../renderscript/reference/rs_object_info0b8e.html?hl=zh-cn" >Object Characteristics Functions</a></li><li><a href="../../renderscript/reference/rs_for_each0b8e.html?hl=zh-cn" >Kernel Invocation Functions and Types</a></li><li><a href="../../renderscript/reference/rs_io0b8e.html?hl=zh-cn" >Input/Output Functions</a></li><li><a href="../../renderscript/reference/rs_debug0b8e.html?hl=zh-cn" >Debugging Functions</a></li><li><a href="../../renderscript/reference/rs_graphics0b8e.html?hl=zh-cn" >Graphics Functions and Types</a></li><li><a href="../../renderscript/reference/index0b8e.html?hl=zh-cn" >Index</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../media-apps/index0b8e.html?hl=zh-cn" >Media Apps</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../media-apps/media-apps-overview0b8e.html?hl=zh-cn" >Media Apps Overview</a></li><li><a href="../../media-apps/working-with-a-media-session0b8e.html?hl=zh-cn" >Working with a Media Session</a></li><li class="nav-section"><div class="nav-section-header"><a href="../../media-apps/audio-app/building-an-audio-app0b8e.html?hl=zh-cn" >Building an Audio App</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../media-apps/audio-app/building-a-mediabrowserservice0b8e.html?hl=zh-cn" >Building a Media Browser Service</a></li><li><a href="../../media-apps/audio-app/building-a-mediabrowser-client0b8e.html?hl=zh-cn" >Building a Media Browser Client</a></li><li><a href="../../media-apps/audio-app/mediasession-callbacks0b8e.html?hl=zh-cn" >Media Session Callbacks</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../media-apps/video-app/building-a-video-app0b8e.html?hl=zh-cn" >Building a Video App</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../media-apps/video-app/building-a-video-player-activity0b8e.html?hl=zh-cn" >Building a Video Player Activity</a></li><li><a href="../../media-apps/video-app/mediasession-callbacks0b8e.html?hl=zh-cn" >Media Session Callbacks</a></li></ul></li><li><a href="../../media-apps/mediabuttons0b8e.html?hl=zh-cn" >Responding to Media Buttons</a></li><li><a href="../../media-apps/volume-and-earphones0b8e.html?hl=zh-cn" >Handling Changes in Audio Output</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../media/index0b8e.html?hl=zh-cn" >Media and Camera</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../media/media-formats0b8e.html?hl=zh-cn" >Supported Media Formats</a></li><li><a href="../../media/mediaplayer0b8e.html?hl=zh-cn" >MediaPlayer</a></li><li><a href="../../media/mediarecorder0b8e.html?hl=zh-cn" >MediaRecorder</a></li><li><a href="../../media/exoplayer0b8e.html?hl=zh-cn" >ExoPlayer</a></li><li class="nav-section"><div class="nav-section-header"><a href="../../media/media-routing0b8e.html?hl=zh-cn" >Media Routing</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../media/mediarouter0b8e.html?hl=zh-cn" >MediaRouter API</a></li><li><a href="../../media/mediarouteprovider0b8e.html?hl=zh-cn" >MediaRouteProvider API</a></li></ul></li><li><a href="../../media/camera0b8e.html?hl=zh-cn" >Camera API</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../sensors/index0b8e.html?hl=zh-cn" >Location and Sensors</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../location/index0b8e.html?hl=zh-cn" >Location and Maps</a></li><li><a href="../../location/strategies0b8e.html?hl=zh-cn" >Location Strategies</a></li><li><a href="../../sensors/sensors_overview0b8e.html?hl=zh-cn" >Sensors Overview</a></li><li><a href="../../sensors/sensors_motion0b8e.html?hl=zh-cn" >Motion Sensors</a></li><li><a href="../../sensors/sensors_position0b8e.html?hl=zh-cn" >Position Sensors</a></li><li><a href="../../sensors/sensors_environment0b8e.html?hl=zh-cn" >Environment Sensors</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../index0b8e.html?hl=zh-cn" >Connectivity</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../bluetooth0b8e.html?hl=zh-cn" >Bluetooth</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../bluetooth-le0b8e.html?hl=zh-cn" >Bluetooth Low Energy</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="index0b8e.html?hl=zh-cn" >NFC</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="nfc0b8e.html?hl=zh-cn" >NFC Basics</a></li><li><a href="advanced-nfc0b8e.html?hl=zh-cn" >Advanced NFC</a></li><li><a href="hce0b8e.html?hl=zh-cn" >Host-based Card Emulation</a></li></ul></li><li><a href="../wifip2p0b8e.html?hl=zh-cn" >Wi-Fi P2P</a></li><li class="nav-section"><div class="nav-section-header"><a href="../usb/index0b8e.html?hl=zh-cn" >USB</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../usb/accessory0b8e.html?hl=zh-cn" >Accessory</a></li><li><a href="../usb/host0b8e.html?hl=zh-cn" >Host</a></li></ul></li><li><a href="../sip0b8e.html?hl=zh-cn" >SIP</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../text/index0b8e.html?hl=zh-cn" >Text and Input</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../text/copy-paste0b8e.html?hl=zh-cn" >Copy and Paste</a></li><li class="nav-section"><div class="nav-section-header"><a href="../../text/creating-input-method0b8e.html?hl=zh-cn" >Creating an IME</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../text/image-keyboard0b8e.html?hl=zh-cn" >Image Keyboard</a></li></ul></li><li><a href="../../text/spell-checker-framework0b8e.html?hl=zh-cn" >Spelling Checker</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../data/index0b8e.html?hl=zh-cn" >Data Storage</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../data/data-storage0b8e.html?hl=zh-cn" >Storage Options</a></li><li class="nav-section"><div class="nav-section-header"><a href="../../data/backup0b8e.html?hl=zh-cn" >Data Backup</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../data/autobackup0b8e.html?hl=zh-cn" >Auto Backup</a></li><li><a href="../../data/keyvaluebackup0b8e.html?hl=zh-cn" >Key/Value Backup</a></li><li><a href="../../data/testingbackup0b8e.html?hl=zh-cn" >Testing Backup and Restore</a></li></ul></li><li><a href="../../data/install-location0b8e.html?hl=zh-cn" >App Install Location</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../admin/index0b8e.html?hl=zh-cn" >Administration</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../admin/device-admin0b8e.html?hl=zh-cn" >Device Policies</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../../webapps/index0b8e.html?hl=zh-cn" >Web Apps</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../../webapps/targeting0b8e.html?hl=zh-cn" >Supporting Different Screens in Web Apps</a></li><li><a href="../../../webapps/webview0b8e.html?hl=zh-cn" >Building Web Apps in WebView</a></li><li><a href="../../../webapps/migrating0b8e.html?hl=zh-cn" >Migrating to WebView in Android 4.4</a></li><li><a href="../../../webapps/debugging0b8e.html?hl=zh-cn" >Debugging Web Apps</a></li><li><a href="../../../webapps/best-practices0b8e.html?hl=zh-cn" >Best Practices for Web Apps</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../../practices/index0b8e.html?hl=zh-cn"  de-lang="Bewährte Verfahren" es-lang="Prácticas recomendadas" fr-lang="Meilleures pratiques" it-lang="Best practice" ja-lang="ベスト プラクティス" zh-cn-lang="最佳实践" zh-tw-lang="最佳實務">Best Practices</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../../../practices/screens_support0b8e.html?hl=zh-cn" >Supporting Multiple Screens</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../../practices/screens-distribution0b8e.html?hl=zh-cn" >Distributing to Specific Screens</a></li><li><a href="../../../practices/screen-compat-mode0b8e.html?hl=zh-cn" >Screen Compatibility Mode</a></li></ul></li><li><a href="../../../practices/app-design/seamlessness0b8e.html?hl=zh-cn" >Designing for Seamlessness</a></li><li><a href="../../../practices/tablets-and-handsets0b8e.html?hl=zh-cn" >Supporting Tablets and Handsets</a></li></ul></li>
            </ul>
            
          
        </div>
        
        
          



<ul id="dac-main-navigation" class="dac-nav-list dac-swap-section dac-left dac-no-anim" tabindex=0>
  <li class="dac-nav-item home">
    <a class="dac-nav-link" href="https://developer.android.com/index.html?hl=zh-cn">首页</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary about">
      <li class="dac-nav-item versions">
        <a class="dac-nav-link" href="https://developer.android.com/about/versions/nougat/index.html?hl=zh-cn">Android</a>
      </li>
      <li class="dac-nav-item wear">
        <a class="dac-nav-link" href="https://developer.android.com/wear/index.html?hl=zh-cn">Wear</a>
      </li>
      <li class="dac-nav-item tv">
        <a class="dac-nav-link" href="https://developer.android.com/tv/index.html?hl=zh-cn">TV</a>
      </li>
      <li class="dac-nav-item auto">
        <a class="dac-nav-link" href="https://developer.android.com/auto/index.html?hl=zh-cn">Auto</a>
      </li>
      <li class="dac-nav-item things">
        <a class="dac-nav-link" href="https://developer.android.com/things/index.html?hl=zh-cn">Things</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item design">
    <a class="dac-nav-link" href="https://developer.android.com/design/index.html?hl=zh-cn"
       zh-tw-lang="設計"
       zh-cn-lang="设计"
       ru-lang="Проектирование"
       ko-lang="디자인"
       ja-lang="設計"
       es-lang="Diseñar">Design</a>
  </li>
  <li class="dac-nav-item develop">
    <a class="dac-nav-link" href="https://developer.android.com/develop/index.html?hl=zh-cn"
       zh-tw-lang="開發"
       zh-cn-lang="开发"
       ru-lang="Разработка"
       ko-lang="개발"
       ja-lang="開発"
       es-lang="Desarrollar">Develop</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary develop">
      <li class="dac-nav-item training">
        <a class="dac-nav-link" href="https://developer.android.com/training/index.html?hl=zh-cn"
           zh-tw-lang="訓練課程"
           zh-cn-lang="培训"
           ru-lang="Курсы"
           ko-lang="교육"
           ja-lang="トレーニング"
           es-lang="Capacitación">培训</a>
      </li>
      <li class="dac-nav-item guide">
        <a class="dac-nav-link" href="../../../index0b8e.html?hl=zh-cn"
           zh-tw-lang="API 指南"
           zh-cn-lang="API 指南"
           ru-lang="Руководства по API"
           ko-lang="API 가이드"
           ja-lang="API ガイド"
           es-lang="Guías de la API">API Guides</a>
      </li>
      <li class="dac-nav-item reference">
        <a class="dac-nav-link" href="https://developer.android.com/reference/packages.html?hl=zh-cn"
           zh-tw-lang="參考資源"
           zh-cn-lang="参考"
           ru-lang="Справочник"
           ko-lang="참조문서"
           ja-lang="リファレンス"
           es-lang="Referencia">参考网页</a>
      </li>
      <li class="dac-nav-item samples">
        <a class="dac-nav-link" href="https://developer.android.com/samples/index.html?hl=zh-cn">示例</a>
      </li>
      <li class="dac-nav-item libraries">
        <a class="dac-nav-link" href="https://developer.android.com/topic/libraries/index.html?hl=zh-cn"
           >库</a></li>
      <li class="dac-nav-item studio">
        <a class="dac-nav-link" href="https://developer.android.com/studio/index.html?hl=zh-cn"
           >Android Studio</a></li>
      <li class="dac-nav-item ndk">
        <a class="dac-nav-link" href="https://developer.android.com/ndk/index.html?hl=zh-cn"
           >Android NDK</a></li>
      <li class="dac-nav-item google">
        <a class="dac-nav-link" href="https://developer.android.com/google/index.html?hl=zh-cn">Google Services</a>
      </li>
      <li class="dac-nav-item quality-guidelines">
        <a class="dac-nav-link" href="https://developer.android.com/develop/quality-guidelines/index.html?hl=zh-cn">Quality Guidelines</a>
      </li>
      <li class="dac-nav-item kotlin">
        <a class="dac-nav-link" href="https://developer.android.com/kotlin/index.html?hl=zh-cn">Kotlin</a>
       </li>
    </ul>
  </li>
  <li class="dac-nav-item distribute">
    <a class="dac-nav-link" href="https://developer.android.com/distribute/index.html?hl=zh-cn"
       zh-tw-lang="發佈"
       zh-cn-lang="分发"
       ru-lang="Распространение"
       ko-lang="배포"
       ja-lang="配布"
       de-lang="Vertrieb"
       es-lang="Distribuir"
       es-419-lang="Distribuye"
       fr-lang="Distribuer"
       id-lang="Distribusikan"
       pt-br-lang="Distribuição"
       th-lang="จัดจำหน่าย"
       tr-lang="Dağıtma"
       vi-lang="Phân phối">Distribute</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary distribute">
      <li class="dac-nav-item google-play">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/google-play/index.html?hl=zh-cn">Google Play</a>
      </li>
      <li class="dac-nav-item console">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/console/index.html?hl=zh-cn">Play 控制台</a>
      </li>
      <li class="dac-nav-item best-practices">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/best-practices/index.html?hl=zh-cn"
          es-419-lang="Recomendaciones"
          fr-lang="Bonnes pratiques"
          id-lang="Praktik terbaik"
          ja-lang="おすすめの方法"
          ko-lang="권장사항"
          pt-br-lang="Práticas recomendadas"
          ru-lang="Рекомендации"
          th-lang="จัดจำหน่าย"
          tr-lang="En iyi uygulamalar"
          vi-lang="Các phương pháp hay nhất"
          zh-cn-lang="最佳做法"
          zh-tw-lang="最佳做法">Best practices</a>
      </li>
      <li class="dac-nav-item marketing-tools">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/marketing-tools/index.html?hl=zh-cn"
          de-lang="Marketing-Tools"
          es-419-lang="Herramientas de marketing"
          fr-lang="Outils marketing"
          id-lang="Fitur pemasaran"
          ja-lang="マーケティング ツール"
          ko-lang="마케팅 도구"
          pt-br-lang="Ferramentas de marketing"
          ru-lang="Маркетинговые инструменты"
          th-lang="เครื่องมือการตลาด"
          tr-lang="Pazarlama araçları"
          vi-lang="Công cụ tiếp thị"
          zh-cn-lang="营销工具"
          zh-tw-lang="行銷工具">Marketing tools</a>
      </li>
      <li class="dac-nav-item policy-center">
        <a class="dac-nav-link" href="https://play.google.com/about/developer-content-policy/" target="_blank">Policy center</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item stories">
    <a class="dac-nav-link" href="https://developer.android.com/stories/index.html?hl=zh-cn">Stories</a>
  </li>
  
  <li class="dac-nav-item preview">
    <a class="dac-nav-link" href="https://developer.android.com/preview/index.html?hl=zh-cn">Preview</a>
  </li>
  
</ul>

        
      </div>
    </div>
  </nav>

  <a name="top" tabindex="0"></a>
  
  <div class="wrap clearfix" id="body-content">
  
    
      
      <div class="content-header">
        <ul class="dac-header-crumbs"></ul>
        <!-- Breadcrumb Setup -->
        <script>$('.dac-nav-list').dacCurrentPage().dacCrumbs();</script>
        <h1 itemprop="name">Host-based Card Emulation</h1>
      
        
      
      </div>
      
    
    <div class="jd-descr " itemprop="articleBody">
      

<div id="qv-wrapper">
<div id="qv">

<h2>In this document</h2>
<ol>
  <li><a href="#SecureElement">Card Emulation with a Secure Element</a></li>
  <li><a href="#HCE">Host-based Card Emulation</a></li>
  <li><a href="#SupportedProtocols">Supported NFC Cards and Protocols</a></li>
  <li><a href="#HceServices">HCE Services</a>
  </li>
  <li><a href="#ImplementingService">Implementing an HCE Service</a>
  </li>
  <li><a href="#AidConflicts">AID Conflict Resolution</a>
  </li>
  <li><a href="#PaymentApps">Payment Applications</a>
  </li>
  <li><a href="#ScreenOffBehavior">Screen Off and Lock-screen Behavior</a></li>
  <li><a href="#Coexistence">Coexistence with Secure Element Cards</a>
  </li>
  <li><a href="#HceSecurity">HCE and Security</a></li>
  <li><a href="#ProtocolParams">Protocol parameters and details</a>
  </li>
</ol>

</div>
</div>



<p>Many Android-powered devices that offer NFC functionality already support NFC card
emulation. In most cases, the card is emulated by a separate
chip in the device, called a <em>secure element</em>. Many SIM cards provided by
wireless carriers also contain a secure element.</p>

<p>Android 4.4 introduces an additional method of card emulation that does not
involve a secure element, called <em>host-based card emulation</em>. This allows any
Android application to emulate a card and talk directly to the NFC reader. This
document describes how host-based card emulation (HCE) works on Android and how you
can develop an app that emulates an NFC card using this technique.</p>


<h2 id="SecureElement">Card Emulation with a Secure Element</h2>

<p>When NFC card emulation is provided using a secure element, the card to be emulated
is provisioned into the secure element on
the device through an Android application. Then, when the user holds the
device over an NFC terminal, the NFC controller in the device routes all data
from the reader directly to the secure element. Figure 1 illustrates this concept.</p>

<img src="../../../../images/nfc/secure-element0b8e.png?hl=zh-cn" />
<p class="img-caption"><strong>Figure 1.</strong> NFC card emulation with a secure element.</p>

<p>The secure element itself performs the communication with the NFC terminal,
and no Android application is involved in the transaction at all. After the
transaction is complete, an Android application can query the secure element
directly for the transaction status and notify the user.</p>


<h2 id="HCE">Host-based Card Emulation</h2>

<p>When an NFC card is emulated using host-based card emulation, the data is routed to
the host CPU on which Android applications are running directly, instead of routing the NFC
protocol frames to a secure element. Figure 2 illustrates how host-based card emulation
works.</p>

<img src="../../../../images/nfc/host-based-card0b8e.png?hl=zh-cn" />
<p class="img-caption"><strong>Figure 2.</strong> NFC card emulation without a secure element.</p>


<h2 id="SupportedProtocols">Supported NFC Cards and Protocols</h2>

<div class="figure" style="width:147px">
<img src="../../../../images/nfc/protocol-stack0b8e.png?hl=zh-cn"/>
<p class="img-caption"><strong>Figure 3.</strong> Android's HCE protocol stack.</p>
</div>

<p>The NFC standards offer support for many different protocols, and there are
different types of cards that can be emulated.</p>

<p>Android 4.4 supports several protocols that are common in the
market today. Many existing contactless cards are already based on these
protocols, such as contactless payment cards. These protocols are also
supported by many NFC readers in the market today, including Android NFC
devices functioning as readers themselves (see the <code><a href="https://developer.android.com/reference/android/nfc/tech/IsoDep.html?hl=zh-cn">IsoDep</a></code> class).
This allows you to build and deploy an end-to-end NFC solution
around HCE using only Android-powered devices.</p>

<p>Specifically, Android 4.4 supports emulating cards that are based on the
NFC-Forum ISO-DEP specification (based on ISO/IEC 14443-4) and process
Application Protocol Data Units (APDUs) as defined in the ISO/IEC 7816-4
specification. Android mandates emulating ISO-DEP only on top of the
Nfc-A (ISO/IEC 14443-3 Type A) technology. Support for Nfc-B (ISO/IEC 14443-4
Type B) technology is optional. The layering of all these specifications is
shown in the figure 3.</p>



<h2 id="HceServices">HCE Services</h2>

<p>The HCE architecture in Android is based around Android <code><a href="https://developer.android.com/reference/android/app/Service.html?hl=zh-cn">Service</a></code> components
(known as "HCE services").
One of the key advantages of a service is that it can run in the background without
any user interface. This is a natural fit for many HCE applications like loyalty or transit cards,
with which the user shouldn't need to launch the app to use it.
Instead, tapping the device against the NFC reader starts the correct service (if not already
running) and executes the transaction in the background. Of course, you are free
to launch additional UI (such as user notifications) from your service if that makes
sense.</p>



<h3 id="ServiceSelection">Service selection</h3>

<p>When the user taps a device to an NFC reader, the Android system needs to
know which HCE service the NFC reader actually wants to talk to.
This is where the ISO/IEC 7816-4 specification comes in: it defines a way to
select applications, centered around an Application ID (AID). An AID
consists of up to 16 bytes. If you are emulating cards for an existing NFC reader
infrastructure, the AIDs that those readers are looking for are typically
well-known and publicly registered (for example, the AIDs of payment networks
such as Visa and MasterCard).</p>

<p>If you want to deploy new reader infrastructure for your own application, you
will need to register your own AID(s). The registration procedure for AIDs is
defined in the ISO/IEC 7816-5 specification. Google recommends registering an
AID as per 7816-5 if you are deploying a HCE application for Android, as it will avoid
collisions with other applications.</p>


<h3 id="AidGroups">AID groups</h3>

<p>In some cases, an HCE service may need to register multiple AIDs to implement a
certain application, and it needs to be sure that it is the default handler for
all of these AIDs (as opposed to some AIDs in the group going to another
service).</p>

<p>An AID group is a list of AIDs that should be considered as belonging together
by the OS. For all AIDs in an AID group, Android guarantees one of the
following:</p>

<ul>
<li>All AIDs in the group are routed to this HCE service</li>
<li>No AIDs in the group are routed to this HCE service (for example, because the user
preferred another service which requested one or more AIDs in your group as
well)</li>
</ul>

<p>In other words, there is no in-between state, where some AIDs in the group can
be routed to one HCE service, and some to another.</p>

<h3 id="GroupsCategories">AID groups and categories</h3>

<p>Each AID group can be associated with a category. This allows Android to group
HCE services together by category, and that in turn allows the user to set
defaults at the category level instead of the AID level. In general, avoid
mentioning AIDs in any user-facing parts of your application: they do not mean
anything to the average user.</p>

<p>Android 4.4 supports two categories: <code><a href="https://developer.android.com/reference/android/nfc/cardemulation/CardEmulation.html?hl=zh-cn#CATEGORY_PAYMENT">CATEGORY_PAYMENT</a></code> (covering industry-standard payment
apps) and <code><a href="https://developer.android.com/reference/android/nfc/cardemulation/CardEmulation.html?hl=zh-cn#CATEGORY_OTHER">CATEGORY_OTHER</a></code>
(for all other HCE apps).</p>

<div class="note">
  <p><strong>Note:</strong>
  Only one AID group in the <code><a href="https://developer.android.com/reference/android/nfc/cardemulation/CardEmulation.html?hl=zh-cn#CATEGORY_PAYMENT">CATEGORY_PAYMENT</a></code> category may be enabled in the system at any given time. Typically, this will be an app that understands major credit card payment protocols and which can work at any merchant.</p>
  <p>For <em>closed-loop</em> payment apps that only work at one merchant (such as stored-value cards), you should use <code><a href="https://developer.android.com/reference/android/nfc/cardemulation/CardEmulation.html?hl=zh-cn#CATEGORY_OTHER">CATEGORY_OTHER</a></code>. AID groups in this category can be always active, and can be given priority by NFC readers during AID selection if necessary.</p>
</div>

<h2 id="ImplementingService">Implementing an HCE Service</h2>

<p>To emulate an NFC card using host-based card emulation, you need to create
  a <code><a href="https://developer.android.com/reference/android/app/Service.html?hl=zh-cn">Service</a></code> component that handles the NFC transactions.

<h3 id="CheckingforSupport">Checking for HCE support</h3>

<p>Your application can check whether a device supports HCE by checking for the
<code><a href="https://developer.android.com/reference/android/content/pm/PackageManager.html?hl=zh-cn#FEATURE_NFC_HOST_CARD_EMULATION">FEATURE_NFC_HOST_CARD_EMULATION</a></code> feature. You should use the
<a href="../../manifest/uses-feature-element0b8e.html?hl=zh-cn"><code>&lt;uses-feature&gt;</code></a> tag in the manifest of your application to declare that your app
uses the HCE feature, and whether it is required for the app to function or not.</p>

<h3 id="ServiceImplementation">Service implementation</h3>

<p>Android 4.4 comes with a convenience <code><a href="https://developer.android.com/reference/android/app/Service.html?hl=zh-cn">Service</a></code> class that can be used as a
basis for implementing a HCE service: the <code><a href="https://developer.android.com/reference/android/nfc/cardemulation/HostApduService.html?hl=zh-cn">HostApduService</a></code> class.</p>

<p>The first step is therefore to extend <code><a href="https://developer.android.com/reference/android/nfc/cardemulation/HostApduService.html?hl=zh-cn">HostApduService</a></code>.</p>

<pre>
public class MyHostApduService extends HostApduService {
    &#64;Override
    public byte[] processCommandApdu(byte[] apdu, Bundle extras) {
       ...
    }
    &#64;Override
    public void onDeactivated(int reason) {
       ...
    }
}
</pre>

<p><code><a href="https://developer.android.com/reference/android/nfc/cardemulation/HostApduService.html?hl=zh-cn">HostApduService</a></code>
declares two abstract methods that need to be overridden and implemented.</p>

<p><code><a href="https://developer.android.com/reference/android/nfc/cardemulation/HostApduService.html?hl=zh-cn#processCommandApdu(byte[], android.os.Bundle)">processCommandApdu()</a></code>
is called whenever a NFC reader sends an Application
Protocol Data Unit (APDU) to your service. APDUs are defined in the ISO/IEC
7816-4 specification as well. APDUs are the application-level packets being
exchanged between the NFC reader and your HCE service. That application-level
protocol is half-duplex: the NFC reader will send you a command APDU, and it
will wait for you to send a response APDU in return.</p>

<p class="note"><strong>Note:</strong>
  The ISO/IEC 7816-4 specification also defines the concept of multiple logical channels,
  where you can have multiple parallel APDU exchanges on separate logical channels. Android’s
   HCE implementation however only supports a single logical channel, so there’s only a
  single-threaded exchange of APDUs.</p>


<p>As mentioned previously, Android uses the AID to determine which HCE service the
reader wants to talk to. Typically, the first APDU an NFC reader sends to your
device is a "SELECT AID" APDU; this APDU contains the AID that the reader wants
to talk to. Android extracts that AID from the APDU, resolves it to an HCE service,
then forwards that APDU to the resolved service.</p>

<p>You can send a response APDU by returning the bytes of the response APDU from
<code><a href="https://developer.android.com/reference/android/nfc/cardemulation/HostApduService.html?hl=zh-cn#processCommandApdu(byte[], android.os.Bundle)">processCommandApdu()</a></code>.
 Note that this method will be called on the main thread of
your application, which shouldn't be blocked. So if you can't compute and return
a response APDU immediately, return null. You can then do the necessary work on
another thread, and use the <code><a href="https://developer.android.com/reference/android/nfc/cardemulation/HostApduService.html?hl=zh-cn#sendResponseApdu(byte[])">sendResponseApdu()</a></code> method defined
in the <code><a href="https://developer.android.com/reference/android/nfc/cardemulation/HostApduService.html?hl=zh-cn">HostApduService</a></code> class to send the response when you are done.</p>

<p>Android will keep forwarding new APDUs from the reader to your service, until
either:</p>

<ol>
<li>The NFC reader sends another "SELECT AID" APDU, which the OS resolves to a
different service;</li>
<li>The NFC link between the NFC reader and your device is broken.</li>
</ol>

<p>In both of these cases, your class's
<code><a href="https://developer.android.com/reference/android/nfc/cardemulation/HostApduService.html?hl=zh-cn#onDeactivated(int)">onDeactivated()</a></code>
implementation is
called with an argument indicating which of the two happened.</p>

<p>If you are working with existing reader infrastructure, you need to
implement the existing application-level protocol that the readers expect in
your HCE service.</p>

<p>If you are deploying new reader infrastructure which you control as well, you
can define your own protocol and APDU sequence. In general try to limit the
amount of APDUs and the size of the data that needs to be exchanged: this makes
sure that your users will only have to hold their device over the NFC reader for
a short amount of time. A sane upper bound is about 1KB of data, which can
usually be exchanged within 300ms.</p>



<h3 id="ManifestDeclaration">Service manifest declaration and AID registration</h3>

<p>Your service must be declared in the manifest as usual, but some additional
pieces must be added to the service declaration as well.</p>

<p>First, to tell the platform that it is a HCE service implementing a
<code><a href="https://developer.android.com/reference/android/nfc/cardemulation/HostApduService.html?hl=zh-cn">HostApduService</a></code> interface, your service declaration must contain an
intent filter for the <code><a href="https://developer.android.com/reference/android/nfc/cardemulation/HostApduService.html?hl=zh-cn#SERVICE_INTERFACE">SERVICE_INTERFACE</a></code> action.</p>

<p>Additionally, to tell the platform which AIDs groups are requested by this
service, a <code><a href="https://developer.android.com/reference/android/nfc/cardemulation/HostApduService.html?hl=zh-cn#SERVICE_META_DATA">SERVICE_META_DATA</a></code>
<code>&lt;meta-data&gt;</code> tag must be included in
the declaration of the service, pointing to an XML resource with additional
information about the HCE service.</p>

<p>Finally, you must set the <code>android:exported</code> attribute to true, and require the
<code>"android.permission.BIND_NFC_SERVICE"</code> permission in your service declaration.
The former ensures that the service can be bound to by external applications.
The latter then enforces that only external applications that hold the
<code>"android.permission.BIND_NFC_SERVICE"</code> permission can bind to your service. Since
<code>"android.permission.BIND_NFC_SERVICE"</code> is a system permission, this effectively
enforces that only the Android OS can bind to your service. </p>

<p>Here's an example of a <code><a href="https://developer.android.com/reference/android/nfc/cardemulation/HostApduService.html?hl=zh-cn">HostApduService</a></code> manifest declaration:</p>

<pre>
&lt;service android:name=".MyHostApduService" android:exported="true"
         android:permission="android.permission.BIND_NFC_SERVICE"&gt;
    &lt;intent-filter&gt;
        &lt;action android:name="android.nfc.cardemulation.action.HOST_APDU_SERVICE"/&gt;
    &lt;/intent-filter&gt;
    &lt;meta-data android:name="android.nfc.cardemulation.host_apdu_service"
               android:resource="@xml/apduservice"/&gt;
&lt;/service&gt;
</pre>

<p>This meta-data tag points to an <code>apduservice.xml</code> file. An example of such a file
with a single AID group declaration containing two proprietary AIDs is shown
below:</p>

<pre>
&lt;host-apdu-service xmlns:android="http://schemas.android.com/apk/res/android"
           android:description="@string/servicedesc"
           android:requireDeviceUnlock="false"&gt;
    &lt;aid-group android:description="@string/aiddescription"
               android:category="other"&gt;
        &lt;aid-filter android:name="F0010203040506"/&gt;
        &lt;aid-filter android:name="F0394148148100"/&gt;
    &lt;/aid-group&gt;
&lt;/host-apdu-service&gt;
</pre>

<p>The <code>&lt;host-apdu-service&gt;</code> tag is required to contain a <code>&lt;android:description&gt;</code>
attribute that contains a user-friendly description of the service that may be
shown in UI. The <code>requireDeviceUnlock</code> attribute can be used to specify that the
device must be unlocked before this service can be invoked to handle APDUs.</p>

<p>The <code>&lt;host-apdu-service&gt;</code> must contain one or more <code>&lt;aid-group&gt;</code> tags. Each
<code>&lt;aid-group&gt;</code> tag is required to:</p>

<ul>
<li>Contain an <code>android:description</code> attribute that
contains a user-friendly description of the AID group, suitable for display in UI.</li>
<li>Have its <code>android:category</code> attribute set to
indicate the category the AID group belongs to, e.g. the string constants
defined by <code><a href="https://developer.android.com/reference/android/nfc/cardemulation/CardEmulation.html?hl=zh-cn#CATEGORY_PAYMENT">CATEGORY_PAYMENT</a></code>
or <code><a href="https://developer.android.com/reference/android/nfc/cardemulation/CardEmulation.html?hl=zh-cn#CATEGORY_OTHER">CATEGORY_OTHER</a></code>.</li>
<li>Each <code>&lt;aid-group&gt;</code> must contain one or more
<code>&lt;aid-filter&gt;</code> tags, each of which contains a single AID. The AID
must be specified in hexadecimal format, and contain an even number of characters.</li>
</ul>

<p>As a final note, your application also needs to hold the
<code><a href="https://developer.android.com/reference/android/Manifest.permission.html?hl=zh-cn#NFC">NFC</a></code> permission to be able to register as a HCE service.</p>

<h2 id="AidConflicts">AID Conflict Resolution</h2>

<p>Multiple <code><a href="https://developer.android.com/reference/android/nfc/cardemulation/HostApduService.html?hl=zh-cn">HostApduService</a></code> components
may be installed on a single device, and the same AID
can be registered by more than one service. The Android platform resolves AID
conflicts depending on which category an AID belongs to. Each category may have
a different conflict resolution policy.</p>

<p>For example, for some categories (like payment) the user may be able to select a
default service in the Android settings UI. For other categories, the policy may
be to always ask the user which service is to be invoked in case of conflict. To
query the conflict resolution policy for a certain category, see
<code><a href="https://developer.android.com/reference/android/nfc/cardemulation/CardEmulation.html?hl=zh-cn#getSelectionModeForCategory(java.lang.String)">getSelectionModeForCategory()</a></code>.</p>

<h3 id="CheckingIfDefault">Checking if your service is the default</h3>

<p>Applications can check whether their HCE service is the default service for a
certain category by using the
<code><a href="https://developer.android.com/reference/android/nfc/cardemulation/CardEmulation.html?hl=zh-cn#isDefaultServiceForCategory(android.content.ComponentName, java.lang.String)">isDefaultServiceForCategory(ComponentName, String)</a></code> API.</p>

<p>If your service is not the default, you can request it to be made the default.
See <code><a href="https://developer.android.com/reference/android/nfc/cardemulation/CardEmulation.html?hl=zh-cn#ACTION_CHANGE_DEFAULT">ACTION_CHANGE_DEFAULT</a></code>.</p>

<h2 id="PaymentApps">Payment Applications</h2>

<p>Android considers HCE services that have declared an AID group with the
"payment" category as payment applications. The Android 4.4 release contains a
top-level Settings menu entry called "tap &amp; pay", which enumerates all such
payment applications. In this settings menu, the user can select the default
payment application that will be invoked when a payment terminal is tapped.</p>

<h3 id="RequiredAssets">Required assets for payment applications</h3>

<p>To provide a more visually attractive user experience, HCE payment applications
are required to provide an additional asset for their service: a so-called
service banner.</p>

<p>This asset should be sized 260x96 dp, and can be specified in your meta-data XML
file by adding the <code>android:apduServiceBanner</code> attribute to the
<code>&lt;host-apdu-service&gt;</code> tag, which points to the drawable resource. An example is
shown below:</p>

<pre>
&lt;host-apdu-service xmlns:android="http://schemas.android.com/apk/res/android"
        android:description="@string/servicedesc"
        android:requireDeviceUnlock="false"
        android:apduServiceBanner="@drawable/my_banner"&gt;
    &lt;aid-group android:description="@string/aiddescription"
               android:category="payment"&gt;
        &lt;aid-filter android:name="F0010203040506"/&gt;
        &lt;aid-filter android:name="F0394148148100"/&gt;
    &lt;/aid-group&gt;
&lt;/host-apdu-service&gt;
</pre>



<h2 id="ScreenOffBehavior">Screen Off and Lock-screen Behavior</h2>

<p>Current Android implementations turn the NFC controller and the application
processor off completely when the screen of the device is turned off. HCE
services will therefore not work when the screen is off.</p>

<p>HCE services can function from the lock-screen however: this is controlled by
the <code>android:requireDeviceUnlock</code> attribute in the <code>&lt;host-apdu-service&gt;</code> tag of your
HCE service. By default, device unlock is not required, and your service will be
invoked even if the device is locked.</p>

<p>If you set the <code>android:requireDeviceUnlock</code> attribute to "true" for your HCE
service, Android will prompt the user to unlock the device when you tap an NFC
reader that selects an AID that is resolved to your service. After unlocking,
Android will show a dialog prompting the user to tap again to complete the
transaction. This is necessary because the user may have moved the device away
from the NFC reader in order to unlock it.</p>


<h2 id="Coexistence">Coexistence with Secure Element Cards</h2>

<p>This section is of interest for developers that have deployed an application
that relies on a secure element for card emulation. Android's HCE implementation
is designed to work in parallel with other methods of implementing card
emulation, including the use of secure elements.</p>

<p class="note"><strong>Note:</strong> Android does not offer APIs for directly communicating with a secure element itself.</p>

<p>This coexistence is based on a principle called "AID routing": the NFC
controller keeps a routing table that consists of a (finite) list of routing
rules. Each routing rule contains an AID and a destination. The destination can
either be the host CPU (where Android apps are running), or a connected secure
element.</p>

<p>When the NFC reader sends an APDU with a "SELECT AID", the NFC controller parses
it and checks whether the AIDs matches with any AID in its routing table. If it
matches, that APDU and all APDUs following it will be sent to the destination
associated with the AID, until another "SELECT AID" APDU is received or the NFC
link is broken.</p>

<p class="note"><strong>Note:</strong>
While ISO/IEC 7816-4 defines the concept of “partial matches” as well, this is currently not supported by Android HCE devices.</p>

<p>This architecture is illustrated in figure 4.</p>


<img src="../../../../images/nfc/dual-mode0b8e.png?hl=zh-cn" />
<p class="img-caption"><strong>Figure 4.</strong> Android operating with both secure element
and host-card emulation.</p>

<p>The NFC controller typically also contains a default route for APDUs. When an
AID is not found in the routing table, the default route is used. While this setting
might different from device to device, Android devices are required to ensure that
the AIDs being registered by your app are properly routed to the host.</p>

<p>Android applications that implement a HCE service or that use a secure element
don't have to worry about configuring the routing table - that is taking care of
by Android automatically. Android merely needs to know which AIDs can be handled
by HCE services and which ones can be handled by the secure element. Based on
which services are installed and which the user has configured as preferred, the
routing table is configured automatically.</p>

<p>We've already described how to declare AIDs for HCE services. The following
section explains how to declare AIDs for applications that use a secure element
for card emulation.</p>


<h3 id="SecureElementReg">Secure element AID registration</h3>

<p>Applications using a secure element for card emulation can declare a so-called
"off host service" in their manifest. The declaration of such a service is
almost identical to the declaration of a HCE service. The exceptions are:</p>

<ul>
<li>The action used in the intent-filter must be set to
<code><a href="https://developer.android.com/reference/android/nfc/cardemulation/OffHostApduService.html?hl=zh-cn#SERVICE_INTERFACE">SERVICE_INTERFACE</a></code>.</li>
<li>The meta-data name attribute must be set to
<code><a href="https://developer.android.com/reference/android/nfc/cardemulation/OffHostApduService.html?hl=zh-cn#SERVICE_META_DATA">SERVICE_META_DATA</a></code>.</li>
<li><p>The meta-data XML file must use the <code>&lt;offhost-apdu-service&gt;</code> root tag.</p>

<pre>
&lt;service android:name=".MyOffHostApduService" android:exported="true"
         android:permission="android.permission.BIND_NFC_SERVICE"&gt;
    &lt;intent-filter&gt;
        &lt;action android:name="android.nfc.cardemulation.action.OFF_HOST_APDU_SERVICE"/&gt;
    &lt;/intent-filter&gt;
    &lt;meta-data android:name="android.nfc.cardemulation.off_host_apdu_service"
               android:resource="@xml/apduservice"/&gt;
&lt;/service&gt;
</pre>
</li>
</ul>

<p>An example of the corresponding <code>apduservice.xml</code> file registering two AIDs:</p>

<pre>
&lt;offhost-apdu-service xmlns:android="http://schemas.android.com/apk/res/android"
           android:description="@string/servicedesc"&gt;
    &lt;aid-group android:description="@string/subscription" android:category="other"&gt;
        &lt;aid-filter android:name="F0010203040506"/&gt;
        &lt;aid-filter android:name="F0394148148100"/&gt;
    &lt;/aid-group&gt;
&lt;/offhost-apdu-service&gt;
</pre>

<p>The <code>android:requireDeviceUnlock</code> attribute does not apply to off host services,
because the host CPU is not involved in the transaction and therefore cannot
prevent the secure element from executing transactions when the device is
locked.</p>

<p>The <code>android:apduServiceBanner</code> attribute must be used for off host services that
are payment applications as well in order to be selectable as a default payment
application.</p>

<h3 id="OffHostInvocation">Off host service invocation</h3>

<p>Android itself will never start or bind to a service that is declared as "off
host". This is because the actual transactions are executed by the secure
element and not by the Android service itself. The service declaration merely
allows applications to register AIDs present on the secure element.</p>

<h2 id="HceSecurity">HCE and Security</h2>

<p>The HCE architecture itself provides one core piece of security: because your
service is protected by the <code><a href="https://developer.android.com/reference/android/Manifest.permission.html?hl=zh-cn#BIND_NFC_SERVICE">BIND_NFC_SERVICE</a></code>
 system permission, only the OS can
bind to and communicate with your service. This ensures that any APDU you
receive is actually an APDU that was received by the OS from the NFC controller,
and that any APDU you send back will only go to the OS, which in turn directly
forwards the APDUs to the NFC controller.</p>

<p>The core remaining piece is where you get your data that your app sends
to the NFC reader. This is intentionally decoupled in the HCE design: it does
not care where the data comes from, it just makes sure that it is safely
transported to the NFC controller and out to the NFC reader.</p>

<p>For securely storing and retrieving the data that you want to send from your HCE
service, you can, for example, rely on the Android Application Sandbox, which
isolates your app's data from other apps. For more details on Android security,
read
<a href="https://developer.android.com/training/articles/security-tips.html?hl=zh-cn">Security Tips</a>.</p>

<h2 id="ProtocolParams">Protocol parameters and details</h2>

<p>This section is of interest for developers that want to understand what protocol
parameters HCE devices use during the anti-collision and activation phases of
the NFC protocols. This allows building a reader infrastructure that is
compatible with Android HCE devices.</p>

<h3 id="AntiCollisionAct">Nfc-A (ISO/IEC 14443 type A) protocol anti-collision and activation</h3>

<p>As part of the Nfc-A protocol activation, multiple frames are exchanged.</p>

<p>In the first part of the exchange the HCE device will present its UID; HCE
devices should be assumed to have a random UID. This means that on every tap,
the UID that is presented to the reader will be a randomly generated UID.
Because of this, NFC readers should not depend on the UID of HCE devices as a
form of authentication or identification.</p>

<p>The NFC reader can subsequently select the HCE device by sending a SEL_REQ
command. The SEL_RES response of the HCE device will at least have the 6th bit
(0x20) set, indicating that the device supports ISO-DEP. Note that other bits in
the SEL_RES may be set as well, indicating for example support for the NFC-DEP
(p2p) protocol. Since other bits may be set, readers wanting to interact with
HCE devices should explicitly check for the 6th bit only, and <stront>not</strong> compare the
complete SEL_RES with a value of 0x20.</p>

<h3 id="IsoDepAct">ISO-DEP activation</h3>

<p>After the Nfc-A protocol is activated, the ISO-DEP protocol activation is
initiated by the NFC reader. It sends a "RATS" (Request for Answer To Select)
command. The RATS response, the ATS, is completely generated by the NFC
controller and not configurable by HCE services. However, HCE implementations
are required to meet NFC Forum requirements for the ATS response, so NFC readers
can count on these parameters being set in accordance with NFC Forum
requirements for any HCE device.</p>

<p>The section below provides more details on the individual bytes of the ATS
response provided by the NFC controller on a HCE device:</p>

<ul>
<li>TL: length of the ATS response. Must not indicate a length greater than 20
bytes.</li>
<li>T0: bits 5, 6 and 7 must be set on all HCE devices, indicating TA(1), TB(1)
and TC(1) are included in the ATS response. Bits 1 to 4 indicate the FSCI,
coding the maximum frame size. On HCE devices the value of FSCI must be
between 0h and 8h.</li>
<li>T(A)1: defines bitrates between reader and emulator, and whether they can be
asymmetric. There are no bitrate requirements or guarantees for HCE devices.</li>
<li>T(B)1: bits 1 to 4 indicate the Start-up Frame Guard time Integer (SFGI). On
HCE devices, SFGI must be &lt;= 8h. Bits 5 to 8 indicate the Frame Waiting time
Integer (FWI) and codes the Frame Waiting Time (FWT). On HCE devices, FWI must
be &lt;= 8h.</li>
<li>T(C)1: bit 5 indicates support for "Advanced Protocol features". HCE devices
may or may not support "Advanced Protocol features". Bit 2 indicates support
for DID. HCE devices may or may not support DID. Bit 1 indicates support for
NAD. HCE devices must not support NAD and set bit 1 to zero.</li>
<li>Historical bytes: HCE devices may return up to 15 historical bytes. NFC
readers willing to interact with HCE services should make no assumptions about
the contents of the historical bytes or their presence.</li>
</ul>

<p>Note that many HCE devices are likely made compliant with protocol requirements
that the payment networks united in EMVCo have specified in their "Contactless
Communication Protocol" specification. In particular:</p>

<ul>
<li>FSCI in T0 must be between 2h and 8h.</li>
<li>T(A)1 must be set to 0x80, indicating only the 106 kbit/s bitrate is
supported, and asymmetric bitrates between reader and emulator are not
supported.</li>
<li>FWI in T(B)1 must be &lt;= 7h.</li>
</ul>

<h3 id="ApduExchange">APDU data exchange</h3>

<p>As noted earlier, HCE implementations only support a single logical channel.
Attempting to select applications on different logical channels will not work on
a HCE device.</p>



    </div>

    

  
    
  
    



<div class="wrap">
  <footer class="dac-footer ">
    <div class="cols dac-footer-main">
      <div class="col-1of2">
        <div class="dac-footer-contact">
          <a class="dac-footer-contact-link" href="https://developer.android.com/newsletter/index.html?hl=zh-cn" title="Newsletter">Newsletter</a>
          <a class="dac-footer-contact-link" href="https://android-developers.blogspot.com/" title="博客" target="_blank">博客</a>
          <a class="dac-footer-contact-link" href="https://developer.android.com/support.html?hl=zh-cn" title="支持">支持</a>
        </div>
      </div>
      <div class="col-1of2 dac-footer-reachout">
        <div class="dac-footer-social">
          <a class="dac-button-social dac-youtube dac-footer-social-link" href="https://www.youtube.com/user/androiddevelopers" title="Android Developers on YouTube" target="_blank"><i class="dac-sprite dac-youtube"></i><span class="hide-text">Android Developers on YouTube</span></a>
          <a class="dac-button-social dac-gplus dac-footer-social-link" href="https://plus.google.com/+AndroidDevelopers" title="Android Developers on Google+" target="_blank"><i class="dac-sprite dac-gplus"></i><span class="hide-text">Android Developers on Google+</span></a>
          <a class="dac-button-social dac-twitter dac-footer-social-link" href="https://twitter.com/AndroidDev" title="Android Developers on Twitter" target="_blank"><i class="dac-sprite dac-twitter"></i><span class="hide-text">Android Developers on Twitter</span></a>
        </div>
      </div>
    </div>

    <hr class="dac-footer-separator"/>
      
      <p class="dac-footer-copyright">
        
        Except as noted, this content is licensed under <a href="http://creativecommons.org/licenses/by/2.5/" target="_blank">Creative Commons Attribution 2.5</a>. For details and restrictions, see the <a href="https://developer.android.com/license.html">Content License</a>.
      </p>
    

    <p class="dac-footer-links">
      <a href="https://www.android.com/" title="Android.com" target="_blank">Android.com</a>
      <a href="https://developer.android.com/?hl=zh-cn" title="Android Developers">Android Developers</a>
      <a href="https://developer.android.com/studio/index.html?hl=zh-cn" title="Android Studio">Android Studio</a>
      <a href="https://developer.android.com/distribute/console/index.html?hl=zh-cn" title="Google Play Console">Google Play Console</a>
      <a href="https://developer.android.com/legal.html?hl=zh-cn" title="Legal Notice">Legal Notice</a>
    </p>

    <!-- TODO(akassay) Update all DAC js to use the class instead of the id b/30368561 -->
    <form class="devsite-utility-footer-language" id="setlang" action="https://developer.android.com/i18n/setlang/" method="post">
      <input type="hidden" name="xsrf_token" value="O_5XKeI7uETlE7uM3ZgthePFjfu0V-q2usVl8VLMBeg6MTQ5NzUxNzA3NzIwNjQyMA" />
      <input type="hidden" name="next" value="hce.html">
      <span id="language" class="locales">
        <select class="devsite-utility-footer-language-select" name="language">
          
          <option value="id"
            >
            Bahasa Indonesia
          </option>
          
          <option value="de"
            >
            Deutsch
          </option>
          
          <option value="en"
            >
            English
          </option>
          
          <option value="es"
            >
            español
          </option>
          
          <option value="es-419"
            >
            Español (América Latina)
          </option>
          
          <option value="fr"
            >
            français
          </option>
          
          <option value="pt-br"
            >
            Português Brasileiro
          </option>
          
          <option value="vi"
            >
            Tiếng Việt
          </option>
          
          <option value="tr"
            >
            Türkçe
          </option>
          
          <option value="ru"
            >
            Русский
          </option>
          
          <option value="th"
            >
            ภาษาไทย
          </option>
          
          <option value="ja"
            >
            日本語
          </option>
          
          <option value="zh-cn"
             selected="selected" >
            简体中文
          </option>
          
          <option value="zh-tw"
            >
            繁體中文
          </option>
          
          <option value="ko"
            >
            한국어
          </option>
          
        </select>
      </span>
    </form>
  </footer>
</div><!--/.wrap -->

<div class="dac-toast-group">
  <div class="dac-toast" data-toast>
    <div class="dac-toast-wrap">
      This site uses cookies to store your preferences for site-specific language and display options.
    </div>
  </div>
</div>

<div data-modal="newsletter" data-newsletter-fb data-swap class="dac-modal newsletter">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <div class="dac-swap" data-swap-container>
          <section class="dac-swap-section dac-active dac-down">
            <h2 class="norule dac-modal-header-title" data-t="newsletter.title">Get the latest Android developer news and tips that will help you find success on Google Play.</h2>
            <p class="dac-modal-header-subtitle" data-t="newsletter.requiredHint">* Required Fields</p>
          </section>
          <section class="dac-swap-section dac-up">
            
            <h2 class="norule dac-modal-header-title" data-t="newsletter.successTitle">Hooray!</h2>
          </section>
        </div>
      </header>
      <div class="dac-swap" data-swap-container>
        <section class="dac-swap-section dac-active dac-left">
          <form action="https://services.google.com/fb/submissions/android-developer-mailing-list/" class="dac-form" method="post">
            <section class="dac-modal-content">
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-full-name" class="dac-form-floatlabel" data-t="newsletter.name">Full name</label>
                      <input type="text" class="dac-form-input" name="fullname" id="newsletter-full-name" required>
                      <span class="dac-form-required">*</span>
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-email" class="dac-form-floatlabel" data-t="newsletter.email">Email 地址</label>
                      <input type="email" class="dac-form-input" name="emailaddress" id="newsletter-email" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-company" class="dac-form-floatlabel" data-t="newsletter.company">Company / developer name</label>
                      <input type="text" class="dac-form-input" name="companydevelopername" id="newsletter-company">
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-play-store" class="dac-form-floatlabel" data-t="newsletter.appUrl">One of your Play Store app URLs</label>
                      <input type="url" class="dac-form-input" name="playstoreappurls" id="newsletter-play-store">
                    </div>
                  </div>
                </div>
              </fieldset>
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol newsletter-interested" data-validation-message="Please check at least one item.">
                    <legend class="dac-form-legend">What are you interested in?<span class="dac-form-required">*</span></legend>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-whats-new" value="whats-new">
                      <label for="interested-whats-new" class="dac-form-checkbox-button"></label>
                      <label for="interested-whats-new" class="dac-form-label">What's new</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-games-updates" value="games-updates">
                      <label for="interested-games-updates" class="dac-form-checkbox-button"></label>
                      <label for="interested-games-updates" class="dac-form-label">Games updates</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-android-development" value="android-development">
                      <label for="interested-android-development" class="dac-form-checkbox-button"></label>
                      <label for="interested-android-development" class="dac-form-label">Android development</label>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol newsletter-checkboxes">
                    <div class="dac-form-input-group">
                      <label for="newsletter-receive-in">Receive newsletter in</label>
                      <select name="language" class="dac-form-select" id="newsletter-receive-in">
                        <option value="en-US" selected>English</option>
                        <option value="ar">Arabic</option>
                        <option value="zh">Chinese (Simplified)</option>
                        <option value="zh-TW">Chinese (Traditional)</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="id">Indonesian (Bahasa)</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="pt-BR">Portuguese (Brazilian)</option>
                        <option value="ru">Russian</option>
                        <option value="es-419">Spanish (Latin American)</option>
                        <option value="th">Thai</option>
                        <option value="tr">Turkish</option>
                        <option value="vi">Vietnamese</option>
                      </select>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="marketingoptin" id="newsletter-add" required value="Add me to the mailing list.">
                          <label for="newsletter-add" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-add" class="dac-form-label dac-form-aside">
                            Add me to the mailing list.
                            <span class="dac-form-required">*</span>
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="privacystatement" id="newsletter-terms" required value="I acknowledge that the information provided in this form will be subject to Google's privacy policy (https://www.google.com/policies/privacy/).">
                          <label for="newsletter-terms" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-terms" class="dac-form-label dac-form-aside"><span data-t="newsletter.privacyPolicy" data-t-html>
                            
                            I acknowledge that the information provided in this form will be subject to <a href="https://www.google.com/policies/privacy/">Google's privacy policy</a>.
                          </span>
                          <span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fieldset>
            </section>
            <input type="hidden" name="referrer" value="dac">
            <footer class="dac-modal-footer">
              <div class="cols">
                <div class="col-2of5">
                </div>
              </div>
              <button type="submit" value="Submit" class="dac-fab dac-primary dac-large dac-modal-action"><i class="dac-sprite dac-arrow-right"></i></button>
            </footer>
          </form>
        </section>
        <section class="dac-swap-section dac-right">
          <div class="dac-modal-content">
            <p class="newsletter-success-message" data-t="newsletter.successDetails">
              You have successfully signed up for the latest Android developer news and tips.
            </p>
          </div>
        </section>
      </div>
    </div>
  </div>
</div><!--/.dac-modal.newsletter-->


<div data-modal="langform" class="dac-modal" id="langform">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            Browse this site in <span class="span-target-lang"></span>?
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <fieldset class="dac-form-fieldset">
              <div class="cols">
                <div class="col-2of2 langform-leftCol">
                  <p id="resetLangText">
                    You requested a page in <span class="span-target-lang"></span>, but your language preference for this site is <span class="span-current-lang"></span>.
                  </p>
                  <p id="resetLangCta">
                    Would you like to change your language preference and browse this site in <span class="span-target-lang"></span>? If you want to change your language preference later, use the language menu at the bottom of each page.
                  </p>
                </div>
              </div>
            </fieldset>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="yes" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang yes" data-t="newsletter.resetLangButtonYes" data-modal-toggle>
                Change Language
              </button>
            </a>
            <a href="#" class="" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang no" data-t="newsletter.resetLangButtonNo" data-modal-toggle>
                Not Now
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal-->


<div data-modal="api-unavailable" class="dac-modal" id="api-unavailable">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            This class requires API level <span class="api-level"></span> or higher
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <p>
              This doc is hidden because your selected API level for the documentation is <span class="api-level"></span>. You can change the documentation API level with the selector above the left navigation.
            </p>
            
            <p>For more information about specifying the API level your app requires, read <a href="https://developer.android.com/training/basics/supporting-devices/platforms.html">Supporting Different Platform Versions</a>.</p>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="ok" onclick="return false;">
              <button class="button dac-primary dac-modal-action ok"
              data-modal-toggle>
                OK, make this page visible
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal#api-unavailable-->

    
  </div><!--/#body-content-->

  <!-- Nav Setup -->
  <script>$('[data-dac-nav]').dacNav();</script>
  <script type="text/javascript">
    $('.slideshow-container').dacSlideshow({
        btnPrev: '.slideshow-prev',
        btnNext: '.slideshow-next',
        btnPause: '#pauseButton'
    });

    $(".feed").dacTabbedList({
      nav_id: '.feed-nav',
      frame_id: '.feed-frame'
    });
  </script>
  
  <script src="../../../../ytblogger_lists_unified414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="../../../../android_metadata_en414d.js?hl=zh-cn?v=2017061508" defer></script>
  
  <script src="../../../../reference/lists414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="../../../../reference/gms_lists414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="../../../../reference/android/support/wearable/lists414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="../../../../reference/android/support/test/lists414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="../../../../reference/android/support/constraint/lists414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="https://developer.android.com/_static2/f304fc21fa/jsi18n/?hl=zh-cn"></script>
  <script>
    // Load localized metadata.
    (function(lang) {
      if (lang === 'en') { return; }
      document.write('<script src="https://developer.android.com/android_metadata_zh-cn.js?hl=zh-cn?v=2017061508" defer></' + 'script>');
    })(getLangPref())

    // Add skip to content for accessibility.
    $('#skip-to-main').click(function() {
      $('a[name=top]').focus();
    });

    $('.devsite-utility-footer-language-select').each(function() {
      $(this).change(function() {
        changeLangPref(this.value, true)
        $('.devsite-utility-footer-language').submit();
      });
    });
  </script>

  <script>
    (function($) {
      devsite.analytics.InitAnalytics();
    })(jQuery);
  </script>

  


<div id="survey-box-wrapper">
  <div class="material-dialog" style="width:270px">
    <div class="material-dialog-title">
      Take a one-minute survey?
    </div>
    <div class="material-dialog-description">
      Help us improve Android tools and documentation.
    </div>
    <div class="material-button-bar">
      <a class="dac-button dac-primary dac-raised" target="_blank"
          href="https://goo.gl/forms/kV7MoyD2dvcWkd5N2">Sure</a>
      <a class="dac-button" href="#">No thanks</a>
    </div>
  </div>
</div>

</body>

<!-- Mirrored from developer.android.com/guide/topics/connectivity/nfc/hce.html?hl=zh-cn by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:15:24 GMT -->
</html>

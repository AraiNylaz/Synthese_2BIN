





<!DOCTYPE html>
<html lang="pt-br">

<!-- Mirrored from developer.android.com/guide/topics/providers/document-provider.html?hl=pt-br by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:04:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

  



<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta content="IE=edge" http-equiv="X-UA-Compatible">





<script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script>

<meta charset="utf-8">



<meta name="xsrf_token" content="lbaN9RhB5DWqIF7koZkBJpoPn2VMTx5oyJXjwpOw25I6MTQ5NzUxNjA4MzE0Njg5MA" />

  
    <link rel="canonical" href="document-provider6dd3.html?hl=pt-br">
  

  
    <link rel="alternate" href="document-provider7554.html?hl=es-419" hreflang="es-419">
  
    <link rel="alternate" href="document-provider.html" hreflang="en">
  
    <link rel="alternate" href="document-provider9e29.html?hl=ja" hreflang="ja">
  
    <link rel="alternate" href="document-provider9201.html?hl=ru" hreflang="ru">
  
    <link rel="alternate" href="document-provider327f.html?hl=vi" hreflang="vi">
  
    <link rel="alternate" href="document-provider0b8e.html?hl=zh-cn" hreflang="zh-Hans">
  
    <link rel="alternate" href="document-providerde3a.html?hl=es" hreflang="es">
  
    <link rel="alternate" href="document-providerf854.html?hl=zh-tw" hreflang="zh-Hant">
  
    <link rel="alternate" href="document-provider6dd3.html?hl=pt-br" hreflang="pt-br">
  
    <link rel="alternate" href="document-provider0cf2.html?hl=id" hreflang="id">
  
    <link rel="alternate" href="document-provider232e.html?hl=ko" hreflang="ko">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=es-419" hreflang="es-419-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html" hreflang="en-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=ja" hreflang="ja-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=ru" hreflang="ru-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=vi" hreflang="vi-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=zh-cn" hreflang="zh-Hans-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=es" hreflang="es-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=zh-tw" hreflang="zh-Hant-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=pt-br" hreflang="pt-br-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=id" hreflang="id-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=ko" hreflang="ko-cn">
  

  <link rel="alternate" href="document-provider.html" hreflang="x-default">




<link rel="shortcut icon" href="../../../_static/f304fc21fa/images/android/favicon6dd3.png?hl=pt-br">

<link rel="apple-touch-icon" href="../../../_static/f304fc21fa/images/android/touchicon-1806dd3.png?hl=pt-br">


<title>

  Estrutura de acesso ao armazenamento | Android Developers

</title>

  <meta name="description" content="Android 4.4 (API level 19) introduces the Storage Access Framework (SAF). The SAF makes it simple for users to browse and open documents, images, and other files across all of their their preferred document storage providers. A standard, easy-to-use UI…">


<!-- STYLESHEETS -->
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto+Condensed">
<link rel="stylesheet"
    href="http://fonts.googleapis.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold"
    title="roboto">







<link href="../../../static/css/default9fbc.css?hl=pt-br?v=2017061508" rel="stylesheet" type="text/css">
<!-- JAVASCRIPT -->
<script src="../../../_static/f304fc21fa/js/android_3p-bundle6dd3.js?hl=pt-br" type="text/javascript"></script>
<script src="../../../_static/f304fc21fa/js/script_foot_closure_android__pt_br6dd3.js?hl=pt-br"></script>
<script src="../../../_static/f304fc21fa/js/script_foot_android6dd3.js?hl=pt-br"></script>

<script type="text/javascript">
  var toRoot = 'https://developer.android.com/';
  devsite.permissions.init({"039e5d84b87fd75807ffb37b7f1bbf2c": true, "098dafe57affddc137df300142652cfd": false, "cb025a64a50094835616312f4774a53d": true, "51470233c56fc1fde50f00b73c52b216": false, "752953480de00a336d911a46966cc16d": false, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true});

  var replaceBlog = false;
  var replaceYouTube = false;
  var siteDefaultLocale = 'en';

  var ANDROID_LANGUAGES = [
      'id','de','en','es','es-419','fr','pt-br','vi','tr','ru','th','ja','zh-cn','zh-tw','ko'
  ];
</script>
<script src="../../../static/js/docs9fbc.js?hl=pt-br?v=2017061508" type="text/javascript"></script>


</head>

<body class="gc-documentation
            
            
              develop
              guide
            
            "
      itemscope itemtype="http://schema.org/Article">
  


  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;pt-br&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;pt-br&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-49880327-2&quot;}">
  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;pt-br&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;pt-br&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-5831155-1&quot;}">
  



  
  
    <script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "userCountry": "BE", "language": {"requested": "pt-br", "served": "pt-br"}, "projectName": "API Guides", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>
  



  
  <a href="#top" id="skip-to-main">Skip to content</a>
  <header id="header-wrapper">
    <div class="dac-header" id="header">
      <div class="dac-header-inner">
        <a class="dac-nav-toggle" data-dac-toggle-nav href="#" title="Open navigation">
          <span class="dac-nav-hamburger">
            <span class="dac-nav-hamburger-top"></span>
            <span class="dac-nav-hamburger-mid"></span>
            <span class="dac-nav-hamburger-bot"></span>
          </span>
        </a>
        
        <a class="dac-header-logo" href="https://developer.android.com/index.html?hl=pt-br">
          <img class="dac-header-logo-image" src="../../../static/images/android_logo6dd3.png?hl=pt-br"
              srcset="https://developer.android.com/static/images/android_logo_2x.png 2x?hl=pt-br"
              width="32" height="36" alt="Android"> Developers</a>
        <ul class="dac-header-tabs">
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/design/index.html?hl=pt-br"
               zh-tw-lang="設計"
               zh-cn-lang="设计"
               ru-lang="Проектирование"
               ko-lang="디자인"
               ja-lang="設計"
               es-lang="Diseñar">Design</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/develop/index.html?hl=pt-br"
               zh-tw-lang="開發"
               zh-cn-lang="开发"
               ru-lang="Разработка"
               ko-lang="개발"
               ja-lang="開発"
               es-lang="Desarrollar">Develop</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/distribute/index.html?hl=pt-br"
               zh-tw-lang="發佈"
               zh-cn-lang="分发"
               ru-lang="Распространение"
               ko-lang="배포"
               ja-lang="配布"
               es-lang="Distribuir">Distribute</a>
          </li>
        </ul>


        

        <a class="dac-header-console-btn gc-analytics-event" href="https://play.google.com/apps/publish/"
           data-category="User" data-action="Console" data-label="Clicked">
          <img src="https://developer.android.com/static/images/developer-console-icon.svg?hl=pt-br" width="18" height="19" alt="Play Console">Play Console</a>

        

<form data-search="" class="dac-header-search">
  <button class="dac-header-search-close" data-search-close="">
    <i class="dac-sprite dac-back-arrow"></i>
  </button>

  <div class="dac-header-search-inner">
    <i class="dac-sprite dac-search-white dac-header-search-icon"></i>
    
    <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q" class="dac-header-search-input" placeholder="Pesquisa">
    <button class="dac-header-search-clear dac-hidden" data-search-clear="">
      <i class="dac-sprite dac-close-black"></i>
    </button>
  </div>
</form>

        
      </div><!--/.header-wrap.wrap-->
    </div><!--/.header-->

    

<div id="search-results" class="dac-search-results">
  <div id="dac-search-results-history" class="dac-search-results-history">
    <div class="wrap dac-search-results-history-wrap">
      <div class="cols">
        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Most visited</h2>
          <div class="resource-flow-layout" data-history-query="history:most/visited" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>

        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Recently visited</h2>
          <div class="resource-flow-layout cols" data-history-query="history:recent" data-allow-duplicates="true" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="dac-search-results-content" class="dac-search-results-content">
    <div class="dac-search-results-metadata wrap">
      <div class="dac-search-results-for">
        
          <h2>
          Results for <span id="search-results-for"></span>
          </h2>
      </div>

      <div id="dac-search-results-hero"></div>

      <div class="dac-search-results-hero cols">
        <div id="dac-search-results-reference" class="col-6of6 col-tablet-2of2 col-mobile-1of1">
          <div class="suggest-card reference no-display">
            <ul class="dac-search-results-reference">
            </ul>
          </div>
        </div>
      </div>

      <div class="cols dac-search-results-cse">
        <script src="../../../../cse.google.com/f4116.txt?cx=000521750095050289010:zpcpi1ea4s8" async></script>
        <gcse:searchresults-only linkTarget="_self"></gcse:searchresults-only>
      </div>
    </div>
  </div>
</div>

  </header>

  <a name="navigation" tabindex=0 class="nav-start-marker">navigation</a>
  <nav class="dac-nav">
    <div class="dac-nav-dimmer" data-dac-toggle-nav></div>
    <div class="dac-nav-sidebar" data-swap data-dynamic="false" data-transition-speed="300" data-dac-nav>
      <div data-swap-container>
        
        <a class="dac-nav-back-button dac-swap-section dac-up dac-no-anim" tabindex=0 data-swap-button>
          
          <i class="dac-sprite dac-nav-back"></i> <span class="dac-nav-back-title">Voltar</span>
        </a>

        <div class="dac-nav-sub dac-swap-section dac-right dac-active" itemscope
            itemtype="http://schema.org/SiteNavigationElement">
          
          
            
            <ul id="nav">
              <li class="nav-section"><div class="nav-section-header"><a href="../../index6dd3.html?hl=pt-br" >Introdução</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/fundamentals6dd3.html?hl=pt-br" >Fundamentos de aplicativos</a></li><li><a href="../../practices/compatibility6dd3.html?hl=pt-br" >Compatibilidade do dispositivo</a></li><li><a href="../security/permissions6dd3.html?hl=pt-br" >Permissões do sistema</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../platform/index6dd3.html?hl=pt-br" >Arquitetura da plataforma</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../platform/j8-jack6dd3.html?hl=pt-br"  es-lang="Funciones del lenguaje Java 8" in-lang="Fitur Bahasa Java 8" ja-lang="Java 8 の機能" ko-lang="Java 8 언어 기능" pt-br-lang="Recursos de linguagem do Java 8" ru-lang="Возможности языка Java 8" vi-lang="Tính năng của Ngôn ngữ Java 8" zh-cn-lang="Java 8 语言功能" zh-tw-lang="Java 8 語言功能">Use recursos de linguagem do Java 8</a></li><li><a href="../../practices/verifying-apps-art6dd3.html?hl=pt-br" >Verificação do comportamento do aplicativo no Android Runtime (ART)</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/index6dd3.html?hl=pt-br" >Componentes de aplicativo</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../../components/intents-filters6dd3.html?hl=pt-br" >Intents e filtros de intent</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/intents-common6dd3.html?hl=pt-br" >Intents comuns</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/activities6dd3.html?hl=pt-br" >Atividades</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/fragments6dd3.html?hl=pt-br" >Fragmentos</a></li><li><a href="../../components/loaders6dd3.html?hl=pt-br" >Carregadores</a></li><li><a href="../../components/tasks-and-back-stack6dd3.html?hl=pt-br" >Tarefas e pilha de retorno</a></li><li><a href="../../components/recents6dd3.html?hl=pt-br" >Tela de visão geral</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/services6dd3.html?hl=pt-br" >Serviços</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/bound-services6dd3.html?hl=pt-br" >Serviços vinculados</a></li><li><a href="../../components/aidl6dd3.html?hl=pt-br" >AIDL</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="content-providers6dd3.html?hl=pt-br" >Provedores de conteúdo</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="content-provider-basics6dd3.html?hl=pt-br" >Fundamentos do provedor de conteúdo</a></li><li><a href="content-provider-creating6dd3.html?hl=pt-br" >Criação de um provedor de conteúdo</a></li><li><a href="calendar-provider6dd3.html?hl=pt-br" >Provedor de agenda</a></li><li><a href="contacts-provider6dd3.html?hl=pt-br" >Provedor de contatos</a></li><li><a href="document-provider6dd3.html?hl=pt-br" >Estrutura de acesso ao armazenamento</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../appwidgets/index6dd3.html?hl=pt-br" >Widgets do aplicativo</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../appwidgets/host6dd3.html?hl=pt-br" >Host de widgets do aplicativo</a></li></ul></li><li><a href="../../components/processes-and-threads6dd3.html?hl=pt-br" >Processos e encadeamentos</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/index6dd3.html?hl=pt-br" >Recursos do aplicativo</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/overview6dd3.html?hl=pt-br" >Visão geral</a></li><li><a href="../resources/providing-resources6dd3.html?hl=pt-br" >Fornecimento de recursos</a></li><li><a href="../resources/accessing-resources6dd3.html?hl=pt-br" >Acesso aos recursos</a></li><li><a href="../resources/runtime-changes6dd3.html?hl=pt-br" >Processamento de alterações em tempo de execução</a></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/localization6dd3.html?hl=pt-br" >Localização</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/icu4j-framework6dd3.html?hl=pt-br" >APIs de estrutura do Android para ICU4J</a></li><li><a href="../resources/multilingual-support6dd3.html?hl=pt-br" >Idioma e localidade</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/available-resources6dd3.html?hl=pt-br" >Tipos de recursos</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/animation-resource6dd3.html?hl=pt-br" >Animação</a></li><li><a href="../resources/color-list-resource6dd3.html?hl=pt-br" >Lista de estados de cores</a></li><li><a href="../resources/drawable-resource6dd3.html?hl=pt-br" >Desenhável</a></li><li><a href="../resources/layout-resource6dd3.html?hl=pt-br" >Layout</a></li><li><a href="../resources/menu-resource6dd3.html?hl=pt-br" >Menu</a></li><li><a href="../resources/string-resource6dd3.html?hl=pt-br" >Cadeia de caracteres</a></li><li><a href="../resources/style-resource6dd3.html?hl=pt-br" >Estilo</a></li><li><a href="../resources/more-resources6dd3.html?hl=pt-br" >Mais tipos</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../manifest/manifest-intro6dd3.html?hl=pt-br" >Manifesto do aplicativo</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../manifest/action-element6dd3.html?hl=pt-br" >&lt;action&gt;</a></li><li><a href="../manifest/activity-element6dd3.html?hl=pt-br" >&lt;activity&gt;</a></li><li><a href="../manifest/activity-alias-element6dd3.html?hl=pt-br" >&lt;activity-alias&gt;</a></li><li><a href="../manifest/application-element6dd3.html?hl=pt-br" >&lt;application&gt;</a></li><li><a href="../manifest/category-element6dd3.html?hl=pt-br" >&lt;category&gt;</a></li><li><a href="../manifest/compatible-screens-element6dd3.html?hl=pt-br" >&lt;compatible-screens&gt;</a></li><li><a href="../manifest/data-element6dd3.html?hl=pt-br" >&lt;data&gt;</a></li><li><a href="../manifest/grant-uri-permission-element6dd3.html?hl=pt-br" >&lt;grant-uri-permission&gt;</a></li><li><a href="../manifest/instrumentation-element6dd3.html?hl=pt-br" >&lt;instrumentation&gt;</a></li><li><a href="../manifest/intent-filter-element6dd3.html?hl=pt-br" >&lt;intent-filter&gt;</a></li><li><a href="../manifest/manifest-element6dd3.html?hl=pt-br" >&lt;manifest&gt;</a></li><li><a href="../manifest/meta-data-element6dd3.html?hl=pt-br" >&lt;meta-data&gt;</a></li><li><a href="../manifest/path-permission-element6dd3.html?hl=pt-br" >&lt;path-permission&gt;</a></li><li><a href="../manifest/permission-element6dd3.html?hl=pt-br" >&lt;permission&gt;</a></li><li><a href="../manifest/permission-group-element6dd3.html?hl=pt-br" >&lt;permission-group&gt;</a></li><li><a href="../manifest/permission-tree-element6dd3.html?hl=pt-br" >&lt;permission-tree&gt;</a></li><li><a href="../manifest/provider-element6dd3.html?hl=pt-br" >&lt;provider&gt;</a></li><li><a href="../manifest/receiver-element6dd3.html?hl=pt-br" >&lt;receiver&gt;</a></li><li><a href="../manifest/service-element6dd3.html?hl=pt-br" >&lt;service&gt;</a></li><li><a href="../manifest/supports-gl-texture-element6dd3.html?hl=pt-br" >&lt;supports-gl-texture&gt;</a></li><li><a href="../manifest/supports-screens-element6dd3.html?hl=pt-br" >&lt;supports-screens&gt;</a></li><li><a href="../manifest/uses-configuration-element6dd3.html?hl=pt-br" >&lt;uses-configuration&gt;</a></li><li><a href="../manifest/uses-feature-element6dd3.html?hl=pt-br" >&lt;uses-feature&gt;</a></li><li><a href="../manifest/uses-library-element6dd3.html?hl=pt-br" >&lt;uses-library&gt;</a></li><li><a href="../manifest/uses-permission-element6dd3.html?hl=pt-br" >&lt;uses-permission&gt;</a></li><li><a href="../manifest/uses-permission-sdk-23-element6dd3.html?hl=pt-br" >&lt;uses-permission-sdk-23&gt;</a></li><li><a href="../manifest/uses-sdk-element6dd3.html?hl=pt-br" >&lt;uses-sdk&gt;</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../ui/index6dd3.html?hl=pt-br" >Interface do usuário</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../ui/overview6dd3.html?hl=pt-br" >Visão geral</a></li><li class="nav-section"><div class="nav-section-header"><a href="../ui/declaring-layout6dd3.html?hl=pt-br" >Layouts</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../ui/layout/linear6dd3.html?hl=pt-br" >Layout linear</a></li><li><a href="../ui/layout/relative6dd3.html?hl=pt-br" >Layout relativo</a></li><li><a href="../ui/layout/listview6dd3.html?hl=pt-br" >Exibição em lista</a></li><li><a href="../ui/layout/gridview6dd3.html?hl=pt-br" >Exibição em grade</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../ui/controls6dd3.html?hl=pt-br" >Controles de entrada</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../ui/controls/button6dd3.html?hl=pt-br" >Botões</a></li><li><a href="https://developer.android.com/training/keyboard-input/style.html?hl=pt-br" >Campos de texto</a></li><li><a href="../ui/controls/checkbox6dd3.html?hl=pt-br" >Caixas de seleção</a></li><li><a href="../ui/controls/radiobutton6dd3.html?hl=pt-br" >Botões de opção</a></li><li><a href="../ui/controls/togglebutton6dd3.html?hl=pt-br" >Botões de alternância</a></li><li><a href="../ui/controls/spinner6dd3.html?hl=pt-br" >Controles giratórios</a></li><li><a href="../ui/controls/pickers6dd3.html?hl=pt-br" >Seletores</a></li></ul></li><li><a href="../ui/ui-events6dd3.html?hl=pt-br" >Eventos de entrada</a></li><li><a href="../ui/menus6dd3.html?hl=pt-br" >Menus</a></li><li><a href="../ui/settings6dd3.html?hl=pt-br" >Configurações</a></li><li><a href="../ui/dialogs6dd3.html?hl=pt-br" >Caixas de diálogo</a></li><li><a href="../ui/notifiers/notifications6dd3.html?hl=pt-br" >Notificações</a></li><li><a href="../ui/notifiers/toasts6dd3.html?hl=pt-br" >Avisos</a></li><li class="nav-section"><div class="nav-section-header"><a href="../search/index6dd3.html?hl=pt-br" >Busca</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../search/search-dialog6dd3.html?hl=pt-br" >Criação de uma interface de pesquisa</a></li><li><a href="../search/adding-recent-query-suggestions6dd3.html?hl=pt-br" >Adição de sugestões recentes de consulta</a></li><li><a href="../search/adding-custom-suggestions6dd3.html?hl=pt-br" >Adição de sugestões personalizadas</a></li><li><a href="../search/searchable-config6dd3.html?hl=pt-br" >Configuração pesquisável</a></li></ul></li><li><a href="../ui/multi-window6dd3.html?hl=pt-br" >Compatibilidade com várias janelas</a></li><li><a href="../ui/drag-drop6dd3.html?hl=pt-br" >Arrastar e soltar</a></li><li class="nav-section"><div class="nav-section-header"><a href="../ui/accessibility/index6dd3.html?hl=pt-br" >Acessibilidade</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../ui/accessibility/apps6dd3.html?hl=pt-br" >Para tornar os aplicativos acessíveis</a></li><li><a href="../ui/accessibility/checklist6dd3.html?hl=pt-br" >Lista de verificação de acessibilidade do desenvolvedor</a></li><li><a href="../ui/accessibility/services6dd3.html?hl=pt-br" >Criação de serviços de acessibilidade</a></li></ul></li><li><a href="../ui/themes6dd3.html?hl=pt-br" >Estilos e temas</a></li><li><a href="../ui/custom-components6dd3.html?hl=pt-br" >Componentes personalizados</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../graphics/index6dd3.html?hl=pt-br" >Animação e gráficos</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../graphics/overview6dd3.html?hl=pt-br" >Visão geral</a></li><li><a href="../graphics/prop-animation6dd3.html?hl=pt-br" >Animação de propriedade</a></li><li><a href="../graphics/view-animation6dd3.html?hl=pt-br" >Exibição de animação</a></li><li><a href="../graphics/drawable-animation6dd3.html?hl=pt-br" >Animação de desenhável</a></li><li><a href="../graphics/2d-graphics6dd3.html?hl=pt-br" >Tela e desenháveis</a></li><li><a href="../graphics/opengl6dd3.html?hl=pt-br" >OpenGL ES</a></li><li><a href="../graphics/hardware-accel6dd3.html?hl=pt-br" >Aceleração de hardware</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../renderscript/index6dd3.html?hl=pt-br" >Computação</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../renderscript/compute6dd3.html?hl=pt-br" >RenderScript</a></li><li><a href="../renderscript/advanced6dd3.html?hl=pt-br" >RenderScript avançado</a></li><li class="nav-section"><div class="nav-section-header"><a href="../renderscript/reference/overview6dd3.html?hl=pt-br" >Referência da API de tempo de execução</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../renderscript/reference/rs_value_types6dd3.html?hl=pt-br" >Tipos numéricos</a></li><li><a href="../renderscript/reference/rs_object_types6dd3.html?hl=pt-br" >Tipos de objeto</a></li><li><a href="../renderscript/reference/rs_convert6dd3.html?hl=pt-br" >Funções de conversão</a></li><li><a href="../renderscript/reference/rs_math6dd3.html?hl=pt-br" >Constantes e funções matemáticas</a></li><li><a href="../renderscript/reference/rs_vector_math6dd3.html?hl=pt-br" >Funções matemáticas de vetores</a></li><li><a href="../renderscript/reference/rs_matrix6dd3.html?hl=pt-br" >Funções de matriz</a></li><li><a href="../renderscript/reference/rs_quaternion6dd3.html?hl=pt-br" >Funções de quaternion</a></li><li><a href="../renderscript/reference/rs_atomic6dd3.html?hl=pt-br" >Funções de atualização atômicas</a></li><li><a href="../renderscript/reference/rs_time6dd3.html?hl=pt-br" >Funções e tipos de tempo</a></li><li><a href="../renderscript/reference/rs_allocation_data6dd3.html?hl=pt-br" >Funções de acesso a dados de alocação</a></li><li><a href="../renderscript/reference/rs_object_info6dd3.html?hl=pt-br" >Funções de características de objetos</a></li><li><a href="../renderscript/reference/rs_for_each6dd3.html?hl=pt-br" >Funções e tipos de invocação de kernel</a></li><li><a href="../renderscript/reference/rs_io6dd3.html?hl=pt-br" >Funções de entrada/saída</a></li><li><a href="../renderscript/reference/rs_debug6dd3.html?hl=pt-br" >Funções de deputação</a></li><li><a href="../renderscript/reference/rs_graphics6dd3.html?hl=pt-br" >Funções e tipos de gráfico</a></li><li><a href="../renderscript/reference/index6dd3.html?hl=pt-br" >Índice</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../media/index6dd3.html?hl=pt-br" >Mídia e câmera</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media/mediaplayer6dd3.html?hl=pt-br" >Reprodução de mídia</a></li><li><a href="../media/mediarouter6dd3.html?hl=pt-br" >Roteador de mídia</a></li><li><a href="../media/mediarouteprovider6dd3.html?hl=pt-br" >Provedor de roteamento de mídia</a></li><li><a href="../media/exoplayer6dd3.html?hl=pt-br" >ExoPlayer</a></li><li><a href="../media/media-formats6dd3.html?hl=pt-br" >Formatos de mídia suportados</a></li><li><a href="../media/mediarecorder6dd3.html?hl=pt-br" >Captura de áudio</a></li><li><a href="../media/jetplayer6dd3.html?hl=pt-br" >JetPlayer</a></li><li><a href="../media/camera6dd3.html?hl=pt-br" >Câmera</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../sensors/index6dd3.html?hl=pt-br" >Localização e sensores</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../location/index6dd3.html?hl=pt-br" >Localização e mapas</a></li><li><a href="../location/strategies6dd3.html?hl=pt-br" >Estratégias de localização</a></li><li><a href="../sensors/sensors_overview6dd3.html?hl=pt-br" >Visão geral de sensores</a></li><li><a href="../sensors/sensors_motion6dd3.html?hl=pt-br" >Sensores de movimento</a></li><li><a href="../sensors/sensors_position6dd3.html?hl=pt-br" >Sensores de posição</a></li><li><a href="../sensors/sensors_environment6dd3.html?hl=pt-br" >Sensores de ambiente</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/index6dd3.html?hl=pt-br" >Conectividade</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/bluetooth6dd3.html?hl=pt-br" >Bluetooth</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/bluetooth-le6dd3.html?hl=pt-br" >Bluetooth Low Energy</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/nfc/index6dd3.html?hl=pt-br" >NFC</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/nfc/nfc6dd3.html?hl=pt-br" >Fundamentos de NFC</a></li><li><a href="../connectivity/nfc/advanced-nfc6dd3.html?hl=pt-br" >NFC avançado</a></li><li><a href="../connectivity/nfc/hce6dd3.html?hl=pt-br" >Emulação de cartão com base em host</a></li></ul></li><li><a href="../connectivity/wifip2p6dd3.html?hl=pt-br" >Wi-Fi P2P</a></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/usb/index6dd3.html?hl=pt-br" >USB</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/usb/accessory6dd3.html?hl=pt-br" >Acessório</a></li><li><a href="../connectivity/usb/host6dd3.html?hl=pt-br" >Host</a></li></ul></li><li><a href="../connectivity/sip6dd3.html?hl=pt-br" >SIP</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../text/index6dd3.html?hl=pt-br" >Texto e entrada</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../text/copy-paste6dd3.html?hl=pt-br" >Copiar e colar</a></li><li><a href="../text/creating-input-method6dd3.html?hl=pt-br" >Criação de um IME</a></li><li><a href="../text/spell-checker-framework6dd3.html?hl=pt-br" >Verificador ortográfico</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../data/index6dd3.html?hl=pt-br" >Armazenamento de dados</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../data/data-storage6dd3.html?hl=pt-br" >Opções de armazenamento</a></li><li><a href="../data/backup6dd3.html?hl=pt-br" >Backup de dados</a></li><li><a href="../data/install-location6dd3.html?hl=pt-br" >Local da instalação do aplicativo</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/topic/libraries/index.html?hl=pt-br" >Bibliotecas</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/topic/libraries/support-library/index.html?hl=pt-br" >Biblioteca de suporte</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="https://developer.android.com/topic/libraries/support-library/features.html?hl=pt-br" >Recursos</a></li><li><a href="https://developer.android.com/topic/libraries/support-library/setup.html?hl=pt-br" >Configuração</a></li><li><a href="https://developer.android.com/topic/libraries/support-library/revisions.html?hl=pt-br" >Histórico de revisão</a></li></ul></li><li><a href="https://developer.android.com/topic/libraries/data-binding/index.html?hl=pt-br" >Data Binding Library</a></li><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/topic/libraries/testing-support-library/index.html?hl=pt-br" >Testing Support Library</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="https://developer.android.com/reference/android/support/test/package-summary.html?hl=pt-br" >Referência da API</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../admin/index6dd3.html?hl=pt-br" >Administração</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../admin/device-admin6dd3.html?hl=pt-br" >Políticas do dispositivo</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../webapps/index6dd3.html?hl=pt-br" >Aplicativos Web</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../webapps/targeting6dd3.html?hl=pt-br" >Suporte a diferentes telas em aplicativos Web</a></li><li><a href="../../webapps/webview6dd3.html?hl=pt-br" >Criação de aplicativos Web no WebView</a></li><li><a href="../../webapps/migrating6dd3.html?hl=pt-br" >Migração do WebView para o Android 4.4</a></li><li><a href="../../webapps/debugging6dd3.html?hl=pt-br" >Depuração de aplicativos Web</a></li><li><a href="../../webapps/best-practices6dd3.html?hl=pt-br" >Práticas recomendadas para aplicativos Web</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../practices/index6dd3.html?hl=pt-br"  de-lang="Bewährte Verfahren" es-lang="Prácticas recomendadas" fr-lang="Meilleures pratiques" it-lang="Prática recomendada" ja-lang="ベスト プラクティス" zh-cn-lang="最佳实践" zh-tw-lang="最佳實務">Práticas recomendadas</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../../practices/screens_support6dd3.html?hl=pt-br" >Compatibilidade com várias telas</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../practices/screens-distribution6dd3.html?hl=pt-br" >Distribuição para telas específicas</a></li><li><a href="../../practices/screen-compat-mode6dd3.html?hl=pt-br" >Modo de compatibilidade da tela</a></li></ul></li><li><a href="../../practices/tablets-and-handsets6dd3.html?hl=pt-br" >Compatibilidade com tablets e celulares</a></li></ul></li>
            </ul>
            
          
        </div>
        
        
          



<ul id="dac-main-navigation" class="dac-nav-list dac-swap-section dac-left dac-no-anim" tabindex=0>
  <li class="dac-nav-item home">
    <a class="dac-nav-link" href="https://developer.android.com/index.html?hl=pt-br">Início</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary about">
      <li class="dac-nav-item versions">
        <a class="dac-nav-link" href="https://developer.android.com/about/versions/nougat/index.html?hl=pt-br">Android</a>
      </li>
      <li class="dac-nav-item wear">
        <a class="dac-nav-link" href="https://developer.android.com/wear/index.html?hl=pt-br">Wear</a>
      </li>
      <li class="dac-nav-item tv">
        <a class="dac-nav-link" href="https://developer.android.com/tv/index.html?hl=pt-br">TV</a>
      </li>
      <li class="dac-nav-item auto">
        <a class="dac-nav-link" href="https://developer.android.com/auto/index.html?hl=pt-br">Auto</a>
      </li>
      <li class="dac-nav-item things">
        <a class="dac-nav-link" href="https://developer.android.com/things/index.html?hl=pt-br">Things</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item design">
    <a class="dac-nav-link" href="https://developer.android.com/design/index.html?hl=pt-br"
       zh-tw-lang="設計"
       zh-cn-lang="设计"
       ru-lang="Проектирование"
       ko-lang="디자인"
       ja-lang="設計"
       es-lang="Diseñar">Design</a>
  </li>
  <li class="dac-nav-item develop">
    <a class="dac-nav-link" href="https://developer.android.com/develop/index.html?hl=pt-br"
       zh-tw-lang="開發"
       zh-cn-lang="开发"
       ru-lang="Разработка"
       ko-lang="개발"
       ja-lang="開発"
       es-lang="Desarrollar">Develop</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary develop">
      <li class="dac-nav-item training">
        <a class="dac-nav-link" href="https://developer.android.com/training/index.html?hl=pt-br"
           zh-tw-lang="訓練課程"
           zh-cn-lang="培训"
           ru-lang="Курсы"
           ko-lang="교육"
           ja-lang="トレーニング"
           es-lang="Capacitación">Treinamento</a>
      </li>
      <li class="dac-nav-item guide">
        <a class="dac-nav-link" href="../../index6dd3.html?hl=pt-br"
           zh-tw-lang="API 指南"
           zh-cn-lang="API 指南"
           ru-lang="Руководства по API"
           ko-lang="API 가이드"
           ja-lang="API ガイド"
           es-lang="Guías de la API">API Guides</a>
      </li>
      <li class="dac-nav-item reference">
        <a class="dac-nav-link" href="https://developer.android.com/reference/packages.html?hl=pt-br"
           zh-tw-lang="參考資源"
           zh-cn-lang="参考"
           ru-lang="Справочник"
           ko-lang="참조문서"
           ja-lang="リファレンス"
           es-lang="Referencia">Referência</a>
      </li>
      <li class="dac-nav-item samples">
        <a class="dac-nav-link" href="https://developer.android.com/samples/index.html?hl=pt-br">Amostras</a>
      </li>
      <li class="dac-nav-item libraries">
        <a class="dac-nav-link" href="https://developer.android.com/topic/libraries/index.html?hl=pt-br"
           >Bibliotecas</a></li>
      <li class="dac-nav-item studio">
        <a class="dac-nav-link" href="https://developer.android.com/studio/index.html?hl=pt-br"
           >Android Studio</a></li>
      <li class="dac-nav-item ndk">
        <a class="dac-nav-link" href="https://developer.android.com/ndk/index.html?hl=pt-br"
           >Android NDK</a></li>
      <li class="dac-nav-item google">
        <a class="dac-nav-link" href="https://developer.android.com/google/index.html?hl=pt-br">Google Services</a>
      </li>
      <li class="dac-nav-item quality-guidelines">
        <a class="dac-nav-link" href="https://developer.android.com/develop/quality-guidelines/index.html?hl=pt-br">Quality Guidelines</a>
      </li>
      <li class="dac-nav-item kotlin">
        <a class="dac-nav-link" href="https://developer.android.com/kotlin/index.html?hl=pt-br">Kotlin</a>
       </li>
    </ul>
  </li>
  <li class="dac-nav-item distribute">
    <a class="dac-nav-link" href="https://developer.android.com/distribute/index.html?hl=pt-br"
       zh-tw-lang="發佈"
       zh-cn-lang="分发"
       ru-lang="Распространение"
       ko-lang="배포"
       ja-lang="配布"
       de-lang="Vertrieb"
       es-lang="Distribuir"
       es-419-lang="Distribuye"
       fr-lang="Distribuer"
       id-lang="Distribusikan"
       pt-br-lang="Distribuição"
       th-lang="จัดจำหน่าย"
       tr-lang="Dağıtma"
       vi-lang="Phân phối">Distribute</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary distribute">
      <li class="dac-nav-item google-play">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/google-play/index.html?hl=pt-br">Google Play</a>
      </li>
      <li class="dac-nav-item console">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/console/index.html?hl=pt-br">Play Console</a>
      </li>
      <li class="dac-nav-item best-practices">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/best-practices/index.html?hl=pt-br"
          es-419-lang="Recomendaciones"
          fr-lang="Bonnes pratiques"
          id-lang="Praktik terbaik"
          ja-lang="おすすめの方法"
          ko-lang="권장사항"
          pt-br-lang="Práticas recomendadas"
          ru-lang="Рекомендации"
          th-lang="จัดจำหน่าย"
          tr-lang="En iyi uygulamalar"
          vi-lang="Các phương pháp hay nhất"
          zh-cn-lang="最佳做法"
          zh-tw-lang="最佳做法">Best practices</a>
      </li>
      <li class="dac-nav-item marketing-tools">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/marketing-tools/index.html?hl=pt-br"
          de-lang="Marketing-Tools"
          es-419-lang="Herramientas de marketing"
          fr-lang="Outils marketing"
          id-lang="Fitur pemasaran"
          ja-lang="マーケティング ツール"
          ko-lang="마케팅 도구"
          pt-br-lang="Ferramentas de marketing"
          ru-lang="Маркетинговые инструменты"
          th-lang="เครื่องมือการตลาด"
          tr-lang="Pazarlama araçları"
          vi-lang="Công cụ tiếp thị"
          zh-cn-lang="营销工具"
          zh-tw-lang="行銷工具">Marketing tools</a>
      </li>
      <li class="dac-nav-item policy-center">
        <a class="dac-nav-link" href="https://play.google.com/about/developer-content-policy/" target="_blank">Policy center</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item stories">
    <a class="dac-nav-link" href="https://developer.android.com/stories/index.html?hl=pt-br">Stories</a>
  </li>
  
  <li class="dac-nav-item preview">
    <a class="dac-nav-link" href="https://developer.android.com/preview/index.html?hl=pt-br">Preview</a>
  </li>
  
</ul>

        
      </div>
    </div>
  </nav>

  <a name="top" tabindex="0"></a>
  
  <div class="wrap clearfix" id="body-content">
  
    
      
      <div class="content-header">
        <ul class="dac-header-crumbs"></ul>
        <!-- Breadcrumb Setup -->
        <script>$('.dac-nav-list').dacCurrentPage().dacCrumbs();</script>
        <h1 itemprop="name">Estrutura de acesso ao armazenamento</h1>
      
        
      
      </div>
      
    
    <div class="jd-descr " itemprop="articleBody">
      

<div id="qv-wrapper">
<div id="qv">

<h2>Neste documento
 <a href="#" onclick="hideNestedItems('#toc44',this);return false;" class="header-toggle">
        <span class="more">mostrar mais</span>
        <span class="less" style="display:none">mostrar menos</span></a></h2>
<ol id="toc44" class="hide-nested">
    <li>
        <a href="#overview">Visão geral</a>
    </li>
    <li>
        <a href="#flow">Controlar fluxo</a>
    </li>
    <li>
        <a href="#client">Programação de um aplicativo cliente</a>
        <ol>
        <li><a href="#search">Pesquisa de documentos</a></li>
        <li><a href="#process">Processamento de resultados</a></li>
        <li><a href="#metadata">Verificação de metadados de documentos</a></li>
        <li><a href="#open">Abertura de um documento</a></li>
        <li><a href="#create">Criação de um novo documento</a></li>
        <li><a href="#delete">Exclusão de um documento</a></li>
        <li><a href="#edit">Edição de um documento</a></li>
        <li><a href="#permissions">Manutenção de permissões</a></li>
        </ol>
    </li>
    <li><a href="#custom">Criação de um provedor de documentos personalizado</a>
        <ol>
        <li><a href="#manifest">Manifesto</a></li>
        <li><a href="#contract">Contratos</a></li>
        <li><a href="#subclass">Subclasse DocumentsProvider</a></li>
        <li><a href="#security">Segurança</a></li>
        </ol>
    </li>

</ol>
<h2>Classes principais</h2>
<ol>
    <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br">DocumentsProvider</a></code></li>
    <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.html?hl=pt-br">DocumentsContract</a></code></li>
</ol>

<h2>Vídeos</h2>

<ol>
    <li><a href="http://www.youtube.com/watch?v=zxHVeXbK1P4&amp;hl=pt-br">
DevBytes: Estrutura de acesso ao armazenamento do Android 4.4: Provedor</a></li>
     <li><a href="http://www.youtube.com/watch?v=UFj9AEz0DHQ&amp;hl=pt-br">
DevBytes: Estrutura de acesso ao armazenamento do Android 4.4: Cliente</a></li>
</ol>


<h2>Exemplos de código</h2>

<ol>
    <li><a href="https://developer.android.com/samples/StorageProvider/index.html?hl=pt-br">
Provedor de armazenamento</a></li>
     <li><a href="https://developer.android.com/samples/StorageClient/index.html?hl=pt-br">
StorageClient</a></li>
</ol>

<h2>Veja também</h2>
<ol>
    <li>
        <a href="content-provider-basics6dd3.html?hl=pt-br">
        Fundamentos do provedor de conteúdo
        </a>
    </li>
</ol>

</div>
</div>


<p>O Android 4.4 (API de nível 19) introduz a Estrutura de Acesso ao Armazenamento (SAF). A SAF
 simplifica para os usuários a busca e a abertura de documentos, imagens e outros arquivos
dentre todos os provedores de armazenamento de documentos de preferência. A interface gráfica padrão é fácil de usar
e permite aos usuários buscar arquivos e acessar arquivos recentes de modo coerente em todos os aplicativos e provedores.</p>

<p>Serviços de armazenamento local ou em nuvem podem participar desse ecossistema por meio da implementação
de um <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br">DocumentsProvider</a></code> que encapsula os serviços. Aplicativos
clientes que precisam acessar documentos de um provedor podem fazer a integração com a SAF com apenas algumas
linhas de código.</p>

<p>A SAF contém:</p>

<ul>
<li><strong>Provedor de documentos</strong> &mdash; Provedor de conteúdo que oferece
um serviço de armazenamento (como o Google Drive) para exibir os arquivos que gerencia. O provedor de documentos
é implementado como uma subclasse da classe <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br">DocumentsProvider</a></code>.
O esquema do provedor de documento se baseia em uma hierarquia de arquivo tradicional,
embora o modo de armazenamento físico de dados do provedor de documentos seja definido pelo programador.
A plataforma do Android contém diversos provedores de documento embutidos, como
Downloads, Imagens e Vídeos.</li>

<li><strong>Aplicativo cliente</strong> &mdash; Aplicativo personalizado que chama o intent
<code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code>
e/ou <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_CREATE_DOCUMENT">ACTION_CREATE_DOCUMENT</a></code> e recebe
os arquivos retornados pelos provedores de documentos.</li>

<li><strong>Seletor</strong> &mdash; IU de sistema que permite aos usuários acessar documentos de todos
os provedores de documentos que satisfazem os critérios de pesquisa do aplicativo cliente.</li>
</ul>

<p>Estes são alguns dos recursos oferecidos pela SAF:</p>
<ul>
<li>Permitir que usuários busquem conteúdo de todos os provedores de documentos, não somente de um único aplicativo.</li>
<li>Possibilitar ao aplicativo a obtenção de acesso persistente e de longo prazo
a documentos de propriedade de um provedor de documentos. Por meio desse acesso, os usuários podem adicionar, editar,
 salvar e excluir arquivos no provedor.</li>
<li>É compatível com diversas contas de usuário e raízes transitórias como provedores
de armazenamento USB, que só aparecem se o dispositivo estiver conectado. </li>
</ul>

<h2 id ="overview">Visão geral</h2>

<p>A SAF consiste em um provedor de conteúdo que é uma
subclasse da classe <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br">DocumentsProvider</a></code>. Dentro de um <em>provedor de documentos</em>, os dados
são estruturados como uma hierarquia de arquivo tradicional:</p>
<p><img src="../../../images/providers/storage_datamodel6dd3.png?hl=pt-br" alt="modelo de dados" /></p>
<p class="img-caption"><strong>Imagem 1.</strong> Modelo de dados do provedor de documentos. Uma Raiz aponta para um único Documento,
que então inicia o percurso em toda a árvore.</p>

<p>Observe o seguinte:</p>
<ul>

<li>Cada provedor de documentos relata uma ou mais
"raízes", que são pontos de partida na exploração de uma árvore de documentos.
Cada raiz tem um <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Root.html?hl=pt-br#COLUMN_ROOT_ID">COLUMN_ROOT_ID</a></code> exclusivo
e ele aponta para um documento (um diretório)
representando o conteúdo sob essa raiz.
As raízes têm um projeto dinâmico para oferecer compatibilidade a casos de uso como diversas contas,
dispositivos de armazenamento USB transitórios ou login/logout do usuário.</li>

<li>Sob cada raiz há um documento único. Esse documento indica 1 a <em>N</em> documentos,
cada um dos quais, por sua vez, podem indicar 1 a <em>N</em> documentos. </li>

<li>Cada back-end de armazenamento apresenta
arquivos e diretórios individuais referenciando-os com um 
<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=pt-br#COLUMN_DOCUMENT_ID">COLUMN_DOCUMENT_ID</a></code> exclusivo.
IDs de documentos devem ser exclusivos e não podem mudar depois de emitidos, pois são usados para concessões persistentes
da URI em reinicializações do dispositivo.</li>


<li>Documentos podem ser um arquivo ou um diretório que pode ser aberto (com um tipo MIME específico)
 contendo documentos adicionais (com
o tipo MIME<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=pt-br#MIME_TYPE_DIR">MIME_TYPE_DIR</a></code>).</li>

<li>Cada documento tem diferentes recursos, como descrito por
<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=pt-br#COLUMN_FLAGS">COLUMN_FLAGS</a></code>.
Por exemplo, <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=pt-br#FLAG_SUPPORTS_WRITE">FLAG_SUPPORTS_WRITE</a></code>,
<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=pt-br#FLAG_SUPPORTS_DELETE">FLAG_SUPPORTS_DELETE</a></code>
e <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=pt-br#FLAG_SUPPORTS_THUMBNAIL">FLAG_SUPPORTS_THUMBNAIL</a></code>.
O mesmo <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=pt-br#COLUMN_DOCUMENT_ID">COLUMN_DOCUMENT_ID</a></code> pode ser
incluído em diversos diretórios.</li>
</ul>

<h2 id="flow">Controle de fluxo</h2>
<p>Como indicado anteriormente, o modelo de dados do provedor de documentos se baseia
em uma hierarquia de arquivo tradicional. Contudo, é possível armazenar os dados fisicamente como quiser, desde
que eles possam ser acessados usando a API <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br">DocumentsProvider</a></code>. Por exemplo, seria
possível usar armazenamento em nuvem com base em tag para os dados.</p>

<p>A figura 2 ilustra um exemplo de um aplicativo de fotos que usa a SAF
para acessar dados armazenados:</p>
<p><img src="../../../images/providers/storage_dataflow6dd3.png?hl=pt-br" alt="aplicativo" /></p>

<p class="img-caption"><strong>Imagem 2.</strong> Fluxo da estrutura de acesso ao armazenamento</p>

<p>Observe o seguinte:</p>
<ul>

<li>Na SAF, provedores e clientes não interagem
diretamente. O cliente solicita permissão para interagir
com arquivos (ou seja, para ler, editar, criar ou excluir arquivos).</li>

<li>A interação começa quando um aplicativo (neste exemplo, um aplicativo de foto) dispara o intent
<code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code> ou <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_CREATE_DOCUMENT">ACTION_CREATE_DOCUMENT</a></code>. O intent pode conter filtros
para refinar ainda mais os critérios &mdash; por exemplo, "quero todos os arquivos que podem ser abertos
e que tenham o tipo MIME de tal imagem".</li>

<li>Ao disparar o intent, o seletor do sistema contata cada provedor registrado
e exibe as raízes de conteúdo correspondentes ao usuário.</li>

<li>O seletor fornece aos usuários uma interface padrão para acessar documentos,
embora os provedores de documentos subjacentes possam ser bem diferentes. Por exemplo, a figura 2
exibe um provedor do Google Drive, um provedor USB e um provedor de nuvem.</li>
</ul>

<p>A figura 3 exibe um seletor em que um usuário em pesquisa de imagens selecionou
uma conta do Google Drive:</p>

<p><img src="../../../images/providers/storage_picker6dd3.png?hl=pt-br" width="340"
alt="seletor" style="border:2px solid #ddd"/></p>

<p class="img-caption"><strong>Imagem 3.</strong> Seletor</p>

<p>Quando o usuário seleciona o Google Drive, as imagens são exibidas como ilustrado
na imagem 4. Desse momento em diante, o usuário pode interagir com eles de todas as formas
compatíveis com o provedor e o aplicativo cliente.

<p><img src="../../../images/providers/storage_photos6dd3.png?hl=pt-br" width="340"
alt="seletor" style="border:2px solid #ddd"/></p>

<p class="img-caption"><strong>Imagem 4.</strong> Imagens</p>

<h2 id="client">Programação de um aplicativo cliente</h2>

<p>No Android 4.3 e em versões anteriores, para o aplicativo recuperar um arquivo de outro
aplicativo, ele precisa chamar um intent como <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_PICK">ACTION_PICK</a></code>
ou <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code>. Em seguida, o usuário deve selecionar
um único aplicativo do qual deseja retirar um arquivo e o aplicativo selecionado deve fornecer uma interface
do usuário para a busca e a seleção dos arquivos disponíveis. </p>

<p>No Android 4.4 e em versões posteriores, existe a opção adicional de usar
o intent <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code>,
que exibe uma IU do seletor controlada pelo sistema que permite ao usuário
buscar todos os arquivos que outros aplicativos disponibilizaram. Nessa IU exclusiva,
o usuário pode selecionar um arquivo de qualquer aplicativo compatível.</p>

<p><code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code>
não substitui <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code>.
O uso de cada um deles depende da necessidade do aplicativo:</p>

<ul>
<li>Use <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code> se deseja que o aplicativo
simplesmente leia ou importe dados. Nessa abordagem, o aplicativo importa uma cópia dos dados,
assim como um arquivo de imagem.</li>

<li>Use <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code> se deseja que o aplicativo
tenha acesso persistente e de longo prazo a documentos de propriedade de um provedor
de documentos. Um exemplo seria um aplicativo de edição de fotos que permite aos usuários editar
imagens armazenadas em um provedor de documentos. </li>

</ul>


<p>Esta seção descreve como programar aplicativos clientes com base nos intents 
<code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code>
e <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_CREATE_DOCUMENT">ACTION_CREATE_DOCUMENT</a></code>.</p>


<h3 id="search">Pesquisa de documentos</h3>

<p>
O snippet a seguir usa <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code>
para pesquisar provedores de documentos
que contenham arquivos de imagem:</p>

<pre>private static final int READ_REQUEST_CODE = 42;
...
/**
 * Fires an intent to spin up the &quot;file chooser&quot; UI and select an image.
 */
public void performFileSearch() {

    // ACTION_OPEN_DOCUMENT is the intent to choose a file via the system's file
    // browser.
    Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);

    // Filter to only show results that can be &quot;opened&quot;, such as a
    // file (as opposed to a list of contacts or timezones)
    intent.addCategory(Intent.CATEGORY_OPENABLE);

    // Filter to show only images, using the image MIME data type.
    // If one wanted to search for ogg vorbis files, the type would be &quot;audio/ogg&quot;.
    // To search for all documents available via installed storage providers,
    // it would be &quot;*/*&quot;.
    intent.setType(&quot;image/*&quot;);

    startActivityForResult(intent, READ_REQUEST_CODE);
}</pre>

<p>Observe o seguinte:</p>
<ul>
<li>Quando o aplicativo dispara o intent
<code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code>, ele aciona um seletor que exibe todos os provedores de documentos compatíveis.</li>

<li>A adição da categoria <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#CATEGORY_OPENABLE">CATEGORY_OPENABLE</a></code>
ao intent filtra os resultados, que exibem somente documentos que podem ser abertos, como os arquivos de imagem.</li>

<li>A declaração <code>intent.setType(&quot;image/*&quot;)</code> filtra ainda mais
para exibir somente documentos que tenham o tipo de dados MIME da imagem.</li>
</ul>

<h3 id="results">Processamento de resultados</h3>

<p>Quando o usuário seleciona um documento no seletor,
<code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=pt-br#onActivityResult(int, int, android.content.Intent)">onActivityResult()</a></code> é chamado.
O URI direcionada ao documento selecionado está presente no parâmetro
<code>resultData</code>. Extraia a URI usando <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#getData()">getData()</a></code>.
Depois, será possível usá-la para recuperar o documento que o usuário deseja. Por
exemplo:</p>

<pre>&#64;Override
public void onActivityResult(int requestCode, int resultCode,
        Intent resultData) {

    // The ACTION_OPEN_DOCUMENT intent was sent with the request code
    // READ_REQUEST_CODE. If the request code seen here doesn't match, it's the
    // response to some other intent, and the code below shouldn't run at all.

    if (requestCode == READ_REQUEST_CODE && resultCode == Activity.RESULT_OK) {
        // The document selected by the user won't be returned in the intent.
        // Instead, a URI to that document will be contained in the return intent
        // provided to this method as a parameter.
        // Pull that URI using resultData.getData().
        Uri uri = null;
        if (resultData != null) {
            uri = resultData.getData();
            Log.i(TAG, "Uri: " + uri.toString());
            showImage(uri);
        }
    }
}
</pre>

<h3 id="metadata">Examinação de metadados de documentos</h3>

<p>Quando tiver a URI de um documento, você terá acesso aos seus metadados. Esse
snippet apanha os metadados de um documento especificado pela URI e registra-os:</p>

<pre>public void dumpImageMetaData(Uri uri) {

    // The query, since it only applies to a single document, will only return
    // one row. There's no need to filter, sort, or select fields, since we want
    // all fields for one document.
    Cursor cursor = getActivity().getContentResolver()
            .query(uri, null, null, null, null, null);

    try {
    // moveToFirst() returns false if the cursor has 0 rows.  Very handy for
    // &quot;if there's anything to look at, look at it&quot; conditionals.
        if (cursor != null &amp;&amp; cursor.moveToFirst()) {

            // Note it's called &quot;Display Name&quot;.  This is
            // provider-specific, and might not necessarily be the file name.
            String displayName = cursor.getString(
                    cursor.getColumnIndex(OpenableColumns.DISPLAY_NAME));
            Log.i(TAG, &quot;Display Name: &quot; + displayName);

            int sizeIndex = cursor.getColumnIndex(OpenableColumns.SIZE);
            // If the size is unknown, the value stored is null.  But since an
            // int can't be null in Java, the behavior is implementation-specific,
            // which is just a fancy term for &quot;unpredictable&quot;.  So as
            // a rule, check if it's null before assigning to an int.  This will
            // happen often:  The storage API allows for remote files, whose
            // size might not be locally known.
            String size = null;
            if (!cursor.isNull(sizeIndex)) {
                // Technically the column stores an int, but cursor.getString()
                // will do the conversion automatically.
                size = cursor.getString(sizeIndex);
            } else {
                size = &quot;Unknown&quot;;
            }
            Log.i(TAG, &quot;Size: &quot; + size);
        }
    } finally {
        cursor.close();
    }
}
</pre>

<h3 id="open-client">Abertura de um documento</h3>

<p>Assim que tiver a URI de um documento, você poderá abri-lo ou fazer o que
quiser com ele.</p>

<h4>Bitmap</h4>

<p>Eis um exemplo de como abrir um <code><a href="https://developer.android.com/reference/android/graphics/Bitmap.html?hl=pt-br">Bitmap</a></code>:</p>

<pre>private Bitmap getBitmapFromUri(Uri uri) throws IOException {
    ParcelFileDescriptor parcelFileDescriptor =
            getContentResolver().openFileDescriptor(uri, "r");
    FileDescriptor fileDescriptor = parcelFileDescriptor.getFileDescriptor();
    Bitmap image = BitmapFactory.decodeFileDescriptor(fileDescriptor);
    parcelFileDescriptor.close();
    return image;
}
</pre>

<p>Observe que não se deve realizar essa operação no encadeamento da IU. Faça isso
em segundo plano usando <code><a href="https://developer.android.com/reference/android/os/AsyncTask.html?hl=pt-br">AsyncTask</a></code>. Assim que abrir o bitmap, você
poderá exibi-lo em uma <code><a href="https://developer.android.com/reference/android/widget/ImageView.html?hl=pt-br">ImageView</a></code>.
</p>

<h4>Obtenção de uma InputStream</h4>

<p>Abaixo há um exemplo de como obter uma <code><a href="https://developer.android.com/reference/java/io/InputStream.html?hl=pt-br">InputStream</a></code> dessa URI. Neste 
snippet, as linhas do arquivo estão sendo lidas em uma string:</p>

<pre>private String readTextFromUri(Uri uri) throws IOException {
    InputStream inputStream = getContentResolver().openInputStream(uri);
    BufferedReader reader = new BufferedReader(new InputStreamReader(
            inputStream));
    StringBuilder stringBuilder = new StringBuilder();
    String line;
    while ((line = reader.readLine()) != null) {
        stringBuilder.append(line);
    }
    fileInputStream.close();
    parcelFileDescriptor.close();
    return stringBuilder.toString();
}
</pre>

<h3 id="create">Criação de um novo documento</h3>

<p>O aplicativo pode criar um novo documento em um provedor de documentos usando
o intent
<code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_CREATE_DOCUMENT">ACTION_CREATE_DOCUMENT</a></code>. Para criar um arquivo, deve-se fornecer um tipo MIME e um nome para o arquivo ao intent
e ativá-la com um código de solicitação exclusivo. O resto você não precisa fazer:</p>


<pre>
// Here are some examples of how you might call this method.
// The first parameter is the MIME type, and the second parameter is the name
// of the file you are creating:
//
// createFile("text/plain", "foobar.txt");
// createFile("image/png", "mypicture.png");

// Unique request code.
private static final int WRITE_REQUEST_CODE = 43;
...
private void createFile(String mimeType, String fileName) {
    Intent intent = new Intent(Intent.ACTION_CREATE_DOCUMENT);

    // Filter to only show results that can be &quot;opened&quot;, such as
    // a file (as opposed to a list of contacts or timezones).
    intent.addCategory(Intent.CATEGORY_OPENABLE);

    // Create a file with the requested MIME type.
    intent.setType(mimeType);
    intent.putExtra(Intent.EXTRA_TITLE, fileName);
    startActivityForResult(intent, WRITE_REQUEST_CODE);
}
</pre>

<p>Ao criar um novo documento, é possível obter a URI
em <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=pt-br#onActivityResult(int, int, android.content.Intent)">onActivityResult()</a></code> para que
seja possível continuar a gravar nele.</p>

<h3 id="delete">Exclusão de um documento</h3>

<p>Se você tem uma URI de um documento
e os <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=pt-br#COLUMN_FLAGS">Document.COLUMN_FLAGS</a></code> do documento
 contêm
<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=pt-br#FLAG_SUPPORTS_DELETE">SUPPORTS_DELETE</a></code>,
você pode excluir o documento. Por exemplo:</p>

<pre>
DocumentsContract.deleteDocument(getContentResolver(), uri);
</pre>

<h3 id="edit">Edição de um documento</h3>

<p>Você pode usar a SAF para editar o documento de texto no local em que está armazenado.
Esse snippet dispara
o intent <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code> e usa
a categoria <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#CATEGORY_OPENABLE">CATEGORY_OPENABLE</a></code> para exibir somente
documentos que possam ser abertos. Ela filtra ainda mais para exibir somente arquivos de texto:</p>

<pre>
private static final int EDIT_REQUEST_CODE = 44;
/**
 * Open a file for writing and append some text to it.
 */
 private void editDocument() {
    // ACTION_OPEN_DOCUMENT is the intent to choose a file via the system's
    // file browser.
    Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);

    // Filter to only show results that can be &quot;opened&quot;, such as a
    // file (as opposed to a list of contacts or timezones).
    intent.addCategory(Intent.CATEGORY_OPENABLE);

    // Filter to show only text files.
    intent.setType(&quot;text/plain&quot;);

    startActivityForResult(intent, EDIT_REQUEST_CODE);
}
</pre>

<p>Em seguida, de <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=pt-br#onActivityResult(int, int, android.content.Intent)">onActivityResult()</a></code>
(consulte <a href="#results">Processamento de resultados</a>), você pode chamar o código para realizar a edição.
O snippet a seguir obtém um <code><a href="https://developer.android.com/reference/java/io/FileOutputStream.html?hl=pt-br">FileOutputStream</a></code>
do <code><a href="https://developer.android.com/reference/android/content/ContentResolver.html?hl=pt-br">ContentResolver</a></code>. Por padrão, ele usa o modo de "gravação".
Recomenda-se solicitar a menor quantidade de acesso necessária, portanto, não solicite
acesso de leitura e programação se só for necessária a programação:</p>

<pre>private void alterDocument(Uri uri) {
    try {
        ParcelFileDescriptor pfd = getActivity().getContentResolver().
                openFileDescriptor(uri, "w");
        FileOutputStream fileOutputStream =
                new FileOutputStream(pfd.getFileDescriptor());
        fileOutputStream.write(("Overwritten by MyCloud at " +
                System.currentTimeMillis() + "\n").getBytes());
        // Let the document provider know you're done by closing the stream.
        fileOutputStream.close();
        pfd.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}</pre>

<h3 id="permissions">Persistência de permissões</h3>

<p>Quando o aplicativo abre um arquivo para leitura ou gravação, o sistema fornece
ao seu aplicativo uma concessão de permissão da URI para aquele arquivo. Ela vigora até a reinicialização do dispositivo do usuário.
Contudo, suponhamos que seu aplicativo seja de edição de imagens e você queira que os usuários
acessem as últimas 5 imagens que editaram diretamente do aplicativo. Se o dispositivo do usuário
foi reiniciado, você teria que enviar o usuário de volta ao seletor do sistema para encontrar
os arquivos, o que, obviamente, não é o ideal.</p>

<p>Para evitar que isso aconteça, você pode manter as permissões que o sistema
dá ao aplicativo. Efetivamente, o aplicativo "toma" a concessão de permissão da URI persistente
que o sistema está oferecendo. Isso concede ao usuário um acesso contínuo aos arquivos 
por meio do aplicativo, mesmo se o dispositivo for reiniciado:</p>


<pre>final int takeFlags = intent.getFlags()
            &amp; (Intent.FLAG_GRANT_READ_URI_PERMISSION
            | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);
// Check for the freshest data.
getContentResolver().takePersistableUriPermission(uri, takeFlags);</pre>

<p>Há um último passo. Você pode ter salvo as URIs
mais recentes acessadas pelo seu aplicativo, mas elas não serão mais válidas &mdash; outro aplicativo
pode ter excluído ou modificado um documento. Portanto, deve-se sempre chamar
<code>getContentResolver().takePersistableUriPermission()</code> para verificar
se há dados mais recentes.</p>

<h2 id="custom">Criação de um provedor de documentos personalizado</h2>

<p>
Se você está desenvolvimento um aplicativo que fornece serviços de armazenamento para arquivos (como
um serviço de armazenamento em nuvem), é possível disponibilizar os arquivos
pela SAF criando um provedor de documentos personalizado.  Esta seção mostra
como fazê-lo.</p>


<h3 id="manifest">Manifesto</h3>

<p>Para implementar um provedor de documentos personalizado, adicione ao manifesto
do aplicativo:</p>
<ul>

<li>Um alvo de API de nível 19 ou posterior.</li>

<li>Um elemento <code>&lt;provider&gt;</code> que declare o provedor de armazenamento
personalizado. </li>

<li>O nome do provedor, que é o nome da classe, inclusive o nome do pacote.
Por exemplo, <code>com.example.android.storageprovider.MyCloudProvider</code>.</li>

<li>O nome da autoridade, que é o nome do pacote (nesse exemplo,
<code>com.example.android.storageprovider</code>) e o tipo de provedor de conteúdo
(<code>documents</code>). Por exemplo, <code>com.example.android.storageprovider.documents</code>.</li>

<li>O atributo <code>android:exported</code> definido como <code>&quot;true&quot;</code>.
É necessário exportar o provedor para que outros aplicativos possam vê-lo.</li>

<li>O atributo <code>android:grantUriPermissions</code> definido como
<code>&quot;true&quot;</code>. Essa configuração permite ao sistema conceder acesso ao conteúdo
no provedor a outros aplicativos. Para ver como manter uma concessão
para determinado documento, consulte <a href="#permissions">Manutenção de permissões</a>.</li>

<li>A permissão <code>MANAGE_DOCUMENTS</code>. Por padrão, um provedor está disponível
para todos. A adição dessa permissão restringirá o provedor em relação ao sistema.
Essa restrição é importante em termos de segurança.</li>

<li>O atributo <code>android:enabled</code> definido como um valor booleano estabelecido em um arquivo
de recursos. Esse atributo visa desativar o provedor em dispositivos com Android 4.3 ou versões anteriores.
Por exemplo: <code>android:enabled=&quot;&#64;bool/atLeastKitKat&quot;</code>. Além
disso, para incluir esse atributo no manifesto, deve-se fazer o seguinte:
<ul>
<li>No arquivo de recursos <code>bool.xml</code> em <code>res/values/</code>, adicione
esta linha: <pre>&lt;bool name=&quot;atLeastKitKat&quot;&gt;false&lt;/bool&gt;</pre></li>

<li>No arquivo de recursos <code>bool.xml</code> em <code>res/values-v19/</code>, adicione
esta linha: <pre>&lt;bool name=&quot;atLeastKitKat&quot;&gt;true&lt;/bool&gt;</pre></li>
</ul></li>

<li>Um filtro de intents que contenha
a ação <code>android.content.action.DOCUMENTS_PROVIDER</code> para que o provedor
apareça no seletor quando o sistema procurar provedores.</li>

</ul>
<p>Eis alguns excertos de amostra de um manifesto que contém um provedor:</p>

<pre>&lt;manifest... &gt;
    ...
    &lt;uses-sdk
        android:minSdkVersion=&quot;19&quot;
        android:targetSdkVersion=&quot;19&quot; /&gt;
        ....
        &lt;provider
            android:name=&quot;com.example.android.storageprovider.MyCloudProvider&quot;
            android:authorities=&quot;com.example.android.storageprovider.documents&quot;
            android:grantUriPermissions=&quot;true&quot;
            android:exported=&quot;true&quot;
            android:permission=&quot;android.permission.MANAGE_DOCUMENTS&quot;
            android:enabled=&quot;&#64;bool/atLeastKitKat&quot;&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.content.action.DOCUMENTS_PROVIDER&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/provider&gt;
    &lt;/application&gt;

&lt;/manifest&gt;</pre>

<h4 id="43">Compatibilidade com dispositivos que executam Android 4.3 ou anterior</h4>

<p>
O intent <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code> está disponível somente
em dispositivos que executam o Android 4.4 ou posteriores.
Se você deseja que o aplicativo seja compatível com <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code>
para se adaptar a dispositivos que executam o Android 4.3 ou versões anteriores, é necessário
desativar o filtro de intent <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code>
no manifesto para dispositivos que executam Android 4.4 ou versões posteriores. 
Um provedor de documentos e <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code> devem ser considerados
de forma mutuamente exclusiva. Se houver compatibilidade com ambos simultaneamente, o aplicativo
aparecerá duas vezes na IU do seletor do sistema, oferecendo dois meios de acesso
diferentes aos dados armazenados. Isso pode confundir os usuários.</p>

<p>Eis a forma recomendada de desativar
o filtro de intents <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code> para dispositivos
que executam o Android 4.4 ou versões posteriores:</p>

<ol>
<li>No arquivo de recursos <code>bool.xml</code> em <code>res/values/</code>, adicione
esta linha: <pre>&lt;bool name=&quot;atMostJellyBeanMR2&quot;&gt;true&lt;/bool&gt;</pre></li>

<li>No arquivo de recursos <code>bool.xml</code> em <code>res/values-v19/</code>, adicione
esta linha: <pre>&lt;bool name=&quot;atMostJellyBeanMR2&quot;&gt;false&lt;/bool&gt;</pre></li>

<li>Adicione
um <a href="../manifest/activity-alias-element6dd3.html?hl=pt-br">alias
de atividade</a> para desativar o filtro de intents
<code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=pt-br#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code> para versões 4.4 (API de nível 19) e posteriores. Por exemplo:

<pre>
&lt;!-- This activity alias is added so that GET_CONTENT intent-filter
     can be disabled for builds on API level 19 and higher. --&gt;
&lt;activity-alias android:name=&quot;com.android.example.app.MyPicker&quot;
        android:targetActivity=&quot;com.android.example.app.MyActivity&quot;
        ...
        android:enabled=&quot;@bool/atMostJellyBeanMR2&quot;&gt;
    &lt;intent-filter&gt;
        &lt;action android:name=&quot;android.intent.action.GET_CONTENT&quot; /&gt;
        &lt;category android:name=&quot;android.intent.category.OPENABLE&quot; /&gt;
        &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;
        &lt;data android:mimeType=&quot;image/*&quot; /&gt;
        &lt;data android:mimeType=&quot;video/*&quot; /&gt;
    &lt;/intent-filter&gt;
&lt;/activity-alias&gt;
</pre>
</li>
</ol>
<h3 id="contract">Contratos</h3>

<p>Normalmente, ao criar um provedor de conteúdo personalizado, uma das tarefas
é implementar classes de contrato, como descrito
no guia dos desenvolvedores de<a href="content-provider-creating6dd3.html?hl=pt-br#ContractClass">
Provedores de conteúdo</a>. Classe de contrato é uma classe <code>public final</code>
que contém definições de constante para os URIs, nomes de coluna, tipos MIME
e outros metadados que pertencem ao provedor. A SAF
fornece essas classes de contrato, portanto, não é necessário
programá-las:</p>

<ul>
   <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=pt-br">DocumentsContract.Document</a></code></li>
   <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Root.html?hl=pt-br">DocumentsContract.Root</a></code></li>
</ul>

<p>Por exemplo, eis as colunas que podem retornar em um cursor
ao consultar documentos ou a raiz do provedor de documentos:</p>

<pre>private static final String[] DEFAULT_ROOT_PROJECTION =
        new String[]{Root.COLUMN_ROOT_ID, Root.COLUMN_MIME_TYPES,
        Root.COLUMN_FLAGS, Root.COLUMN_ICON, Root.COLUMN_TITLE,
        Root.COLUMN_SUMMARY, Root.COLUMN_DOCUMENT_ID,
        Root.COLUMN_AVAILABLE_BYTES,};
private static final String[] DEFAULT_DOCUMENT_PROJECTION = new
        String[]{Document.COLUMN_DOCUMENT_ID, Document.COLUMN_MIME_TYPE,
        Document.COLUMN_DISPLAY_NAME, Document.COLUMN_LAST_MODIFIED,
        Document.COLUMN_FLAGS, Document.COLUMN_SIZE,};
</pre>

<h3 id="subclass">Subclasse DocumentsProvider</h3>

<p>A próxima etapa na criação de um provedor de documentos personalizado é atribuir uma subclasse à
classe <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br">DocumentsProvider</a></code> abstrata. No mínimo, é necessário
implementar os seguintes métodos:</p>

<ul>
<li><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br#queryRoots(java.lang.String[])">queryRoots()</a></code></li>

<li><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br#queryChildDocuments(java.lang.String, java.lang.String[], android.os.Bundle)">queryChildDocuments()</a></code></li>

<li><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br#queryDocument(java.lang.String, java.lang.String[])">queryDocument()</a></code></li>

<li><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br#openDocument(java.lang.String, java.lang.String, android.os.CancellationSignal)">openDocument()</a></code></li>
</ul>

<p>Esses são os únicos métodos que obrigatoriamente devem ser implementados, mas há
muitos outros que podem ser usados. Consulte <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br">DocumentsProvider</a></code>
para ver mais detalhes.</p>

<h4 id="queryRoots">Implementação de queryRoots</h4>

<p>A implementação de <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br#queryRoots(java.lang.String[])">queryRoots()</a></code> deve retornar um <code><a href="https://developer.android.com/reference/android/database/Cursor.html?hl=pt-br">Cursor</a></code> que aponta para todos
os diretórios raiz dos provedores de documentos, usando colunas definidas
em <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Root.html?hl=pt-br">DocumentsContract.Root</a></code>.</p>

<p>No snippet a seguir, o parâmetro <code>projection</code> representa
os campos específicos que o autor da chamada quer recuperar. O snippet cria um novo cursor
e adiciona uma linha a ele &mdash; uma raiz, um diretório de nível superior, como
Downloads ou Imagens.  A maioria dos provedores tem somente uma raiz. É possível ter mais de uma,
por exemplo, no caso de diversas contas de usuário. Nesse caso, basta adicionar
uma segunda linha ao cursor.</p>

<pre>
&#64;Override
public Cursor queryRoots(String[] projection) throws FileNotFoundException {

    // Create a cursor with either the requested fields, or the default
    // projection if "projection" is null.
    final MatrixCursor result =
            new MatrixCursor(resolveRootProjection(projection));

    // If user is not logged in, return an empty root cursor.  This removes our
    // provider from the list entirely.
    if (!isUserLoggedIn()) {
        return result;
    }

    // It's possible to have multiple roots (e.g. for multiple accounts in the
    // same app) -- just add multiple cursor rows.
    // Construct one row for a root called &quot;MyCloud&quot;.
    final MatrixCursor.RowBuilder row = result.newRow();
    row.add(Root.COLUMN_ROOT_ID, ROOT);
    row.add(Root.COLUMN_SUMMARY, getContext().getString(R.string.root_summary));

    // FLAG_SUPPORTS_CREATE means at least one directory under the root supports
    // creating documents. FLAG_SUPPORTS_RECENTS means your application's most
    // recently used documents will show up in the &quot;Recents&quot; category.
    // FLAG_SUPPORTS_SEARCH allows users to search all documents the application
    // shares.
    row.add(Root.COLUMN_FLAGS, Root.FLAG_SUPPORTS_CREATE |
            Root.FLAG_SUPPORTS_RECENTS |
            Root.FLAG_SUPPORTS_SEARCH);

    // COLUMN_TITLE is the root title (e.g. Gallery, Drive).
    row.add(Root.COLUMN_TITLE, getContext().getString(R.string.title));

    // This document id cannot change once it's shared.
    row.add(Root.COLUMN_DOCUMENT_ID, getDocIdForFile(mBaseDir));

    // The child MIME types are used to filter the roots and only present to the
    //  user roots that contain the desired type somewhere in their file hierarchy.
    row.add(Root.COLUMN_MIME_TYPES, getChildMimeTypes(mBaseDir));
    row.add(Root.COLUMN_AVAILABLE_BYTES, mBaseDir.getFreeSpace());
    row.add(Root.COLUMN_ICON, R.drawable.ic_launcher);

    return result;
}</pre>

<h4 id="queryChildDocuments">Implementação de queryChildDocuments</h4>

<p>A implementação de
<code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br#queryChildDocuments(java.lang.String, java.lang.String[], android.os.Bundle)">queryChildDocuments()</a></code>
 deve retornar um <code><a href="https://developer.android.com/reference/android/database/Cursor.html?hl=pt-br">Cursor</a></code> que aponta para todos os arquivos no
diretório especificado, usando colunas definidas em
<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=pt-br">DocumentsContract.Document</a></code>.</p>

<p>Esse método é chamado quando uma raiz do aplicativo é escolhida na IU do seletor.
Ele coleta os documentos filhos de um diretório abaixo da raiz.  Ele pode ser chamado em qualquer nível
na hierarquia de arquivos, não somente na raiz. Esse snippet
cria um novo cursor com as colunas solicitadas e, em seguida, adiciona informações ao cursor
sobre cada filho imediato no diretório pai.
O filho pode ser uma imagem, outro diretório &mdash; qualquer arquivo:</p>

<pre>&#64;Override
public Cursor queryChildDocuments(String parentDocumentId, String[] projection,
                              String sortOrder) throws FileNotFoundException {

    final MatrixCursor result = new
            MatrixCursor(resolveDocumentProjection(projection));
    final File parent = getFileForDocId(parentDocumentId);
    for (File file : parent.listFiles()) {
        // Adds the file's display name, MIME type, size, and so on.
        includeFile(result, null, file);
    }
    return result;
}
</pre>

<h4 id="queryDocument">Implementação de queryDocument</h4>

<p>A implementação de
<code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br#queryDocument(java.lang.String, java.lang.String[])">queryDocument()</a></code>
deve retornar um <code><a href="https://developer.android.com/reference/android/database/Cursor.html?hl=pt-br">Cursor</a></code> que aponta para o arquivo especificado
com colunas definidas em <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=pt-br">DocumentsContract.Document</a></code>.
</p>

<p>O método <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br#queryDocument(java.lang.String, java.lang.String[])">queryDocument()</a></code>
retorna as mesmas informações passadas em
<code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br#queryChildDocuments(java.lang.String, java.lang.String[], android.os.Bundle)">queryChildDocuments()</a></code>,
mas para um arquivo específico.</p>


<pre>&#64;Override
public Cursor queryDocument(String documentId, String[] projection) throws
        FileNotFoundException {

    // Create a cursor with the requested projection, or the default projection.
    final MatrixCursor result = new
            MatrixCursor(resolveDocumentProjection(projection));
    includeFile(result, documentId, null);
    return result;
}
</pre>

<h4 id="openDocument">Implementação de openDocument</h4>

<p>Deve-se implementar <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br#openDocument(java.lang.String, java.lang.String, android.os.CancellationSignal)">openDocument()</a></code> para retornar um <code><a href="https://developer.android.com/reference/android/os/ParcelFileDescriptor.html?hl=pt-br">ParcelFileDescriptor</a></code> que represente
o arquivo especificado. Outros aplicativos podem usar o <code><a href="https://developer.android.com/reference/android/os/ParcelFileDescriptor.html?hl=pt-br">ParcelFileDescriptor</a></code> retornado
para transmitir dados. O sistema chama esse método quando o usuário seleciona um arquivo
e o aplicativo cliente solicita acesso a ele chamando
<code><a href="https://developer.android.com/reference/android/content/ContentResolver.html?hl=pt-br#openFileDescriptor(android.net.Uri, java.lang.String)">openFileDescriptor()</a></code>.
Por exemplo:</p>

<pre>&#64;Override
public ParcelFileDescriptor openDocument(final String documentId,
                                         final String mode,
                                         CancellationSignal signal) throws
        FileNotFoundException {
    Log.v(TAG, &quot;openDocument, mode: &quot; + mode);
    // It's OK to do network operations in this method to download the document,
    // as long as you periodically check the CancellationSignal. If you have an
    // extremely large file to transfer from the network, a better solution may
    // be pipes or sockets (see ParcelFileDescriptor for helper methods).

    final File file = getFileForDocId(documentId);

    final boolean isWrite = (mode.indexOf('w') != -1);
    if(isWrite) {
        // Attach a close listener if the document is opened in write mode.
        try {
            Handler handler = new Handler(getContext().getMainLooper());
            return ParcelFileDescriptor.open(file, accessMode, handler,
                        new ParcelFileDescriptor.OnCloseListener() {
                &#64;Override
                public void onClose(IOException e) {

                    // Update the file with the cloud server. The client is done
                    // writing.
                    Log.i(TAG, &quot;A file with id &quot; +
                    documentId + &quot; has been closed!
                    Time to &quot; +
                    &quot;update the server.&quot;);
                }

            });
        } catch (IOException e) {
            throw new FileNotFoundException(&quot;Failed to open document with id &quot;
            + documentId + &quot; and mode &quot; + mode);
        }
    } else {
        return ParcelFileDescriptor.open(file, accessMode);
    }
}
</pre>

<h3 id="security">Segurança</h3>

<p>Suponha que o provedor de documentos seja um serviço de armazenamento em nuvem protegido por senha
e que você queira se certificar de que os usuários estejam conectados antes de iniciar o compartilhamento dos arquivos.
O que o aplicativo deve fazer se o usuário não estiver conectado?  A solução é retornar
zero raiz na implementação de <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br#queryRoots(java.lang.String[])">queryRoots()</a></code>, ou seja, um cursor de raiz vazio:</p>

<pre>
public Cursor queryRoots(String[] projection) throws FileNotFoundException {
...
    // If user is not logged in, return an empty root cursor.  This removes our
    // provider from the list entirely.
    if (!isUserLoggedIn()) {
        return result;
}
</pre>

<p>A outra etapa é chamar <code>getContentResolver().notifyChange()</code>.
Lembra do <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.html?hl=pt-br">DocumentsContract</a></code>?  Nós o usamos para fazer
essa URI. O snippet a seguir pede ao sistema que consulte as raízes
do provedor de documentos sempre que o status de login do usuário mudar. Se o usuário não estiver
conectado, uma chamada de <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=pt-br#queryRoots(java.lang.String[])">queryRoots()</a></code> retornará um
cursor vazio, como mostrado acima. Isso garante que os documentos do provedor estejam
disponíveis somente se o usuário tiver acesso ao provedor.</p>

<pre>private void onLoginButtonClick() {
    loginOrLogout();
    getContentResolver().notifyChange(DocumentsContract
            .buildRootsUri(AUTHORITY), null);
}
</pre>


    </div>

    

  
    
  
    



<div class="wrap">
  <footer class="dac-footer ">
    <div class="cols dac-footer-main">
      <div class="col-1of2">
        <div class="dac-footer-contact">
          <a class="dac-footer-contact-link" href="https://developer.android.com/newsletter/index.html?hl=pt-br" title="Newsletter">Newsletter</a>
          <a class="dac-footer-contact-link" href="https://android-developers.blogspot.com/" title="Blog" target="_blank">Blog</a>
          <a class="dac-footer-contact-link" href="https://developer.android.com/support.html?hl=pt-br" title="Suporte">Suporte</a>
        </div>
      </div>
      <div class="col-1of2 dac-footer-reachout">
        <div class="dac-footer-social">
          <a class="dac-button-social dac-youtube dac-footer-social-link" href="https://www.youtube.com/user/androiddevelopers" title="Android Developers on YouTube" target="_blank"><i class="dac-sprite dac-youtube"></i><span class="hide-text">Android Developers on YouTube</span></a>
          <a class="dac-button-social dac-gplus dac-footer-social-link" href="https://plus.google.com/+AndroidDevelopers" title="Android Developers on Google+" target="_blank"><i class="dac-sprite dac-gplus"></i><span class="hide-text">Android Developers on Google+</span></a>
          <a class="dac-button-social dac-twitter dac-footer-social-link" href="https://twitter.com/AndroidDev" title="Android Developers on Twitter" target="_blank"><i class="dac-sprite dac-twitter"></i><span class="hide-text">Android Developers on Twitter</span></a>
        </div>
      </div>
    </div>

    <hr class="dac-footer-separator"/>
      
      <p class="dac-footer-copyright">
        
        Except as noted, this content is licensed under <a href="http://creativecommons.org/licenses/by/2.5/" target="_blank">Creative Commons Attribution 2.5</a>. For details and restrictions, see the <a href="https://developer.android.com/license.html">Content License</a>.
      </p>
    

    <p class="dac-footer-links">
      <a href="https://www.android.com/" title="Android.com" target="_blank">Android.com</a>
      <a href="https://developer.android.com/?hl=pt-br" title="Android Developers">Android Developers</a>
      <a href="https://developer.android.com/studio/index.html?hl=pt-br" title="Android Studio">Android Studio</a>
      <a href="https://developer.android.com/distribute/console/index.html?hl=pt-br" title="Google Play Console">Google Play Console</a>
      <a href="https://developer.android.com/legal.html?hl=pt-br" title="Legal Notice">Legal Notice</a>
    </p>

    <!-- TODO(akassay) Update all DAC js to use the class instead of the id b/30368561 -->
    <form class="devsite-utility-footer-language" id="setlang" action="https://developer.android.com/i18n/setlang/" method="post">
      <input type="hidden" name="xsrf_token" value="lbaN9RhB5DWqIF7koZkBJpoPn2VMTx5oyJXjwpOw25I6MTQ5NzUxNjA4MzE0Njg5MA" />
      <input type="hidden" name="next" value="document-provider.html">
      <span id="language" class="locales">
        <select class="devsite-utility-footer-language-select" name="language">
          
          <option value="id"
            >
            Bahasa Indonesia
          </option>
          
          <option value="de"
            >
            Deutsch
          </option>
          
          <option value="en"
            >
            English
          </option>
          
          <option value="es"
            >
            español
          </option>
          
          <option value="es-419"
            >
            Español (América Latina)
          </option>
          
          <option value="fr"
            >
            français
          </option>
          
          <option value="pt-br"
             selected="selected" >
            Português Brasileiro
          </option>
          
          <option value="vi"
            >
            Tiếng Việt
          </option>
          
          <option value="tr"
            >
            Türkçe
          </option>
          
          <option value="ru"
            >
            Русский
          </option>
          
          <option value="th"
            >
            ภาษาไทย
          </option>
          
          <option value="ja"
            >
            日本語
          </option>
          
          <option value="zh-cn"
            >
            简体中文
          </option>
          
          <option value="zh-tw"
            >
            繁體中文
          </option>
          
          <option value="ko"
            >
            한국어
          </option>
          
        </select>
      </span>
    </form>
  </footer>
</div><!--/.wrap -->

<div class="dac-toast-group">
  <div class="dac-toast" data-toast>
    <div class="dac-toast-wrap">
      This site uses cookies to store your preferences for site-specific language and display options.
    </div>
  </div>
</div>

<div data-modal="newsletter" data-newsletter-fb data-swap class="dac-modal newsletter">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <div class="dac-swap" data-swap-container>
          <section class="dac-swap-section dac-active dac-down">
            <h2 class="norule dac-modal-header-title" data-t="newsletter.title">Get the latest Android developer news and tips that will help you find success on Google Play.</h2>
            <p class="dac-modal-header-subtitle" data-t="newsletter.requiredHint">* Required Fields</p>
          </section>
          <section class="dac-swap-section dac-up">
            
            <h2 class="norule dac-modal-header-title" data-t="newsletter.successTitle">Hooray!</h2>
          </section>
        </div>
      </header>
      <div class="dac-swap" data-swap-container>
        <section class="dac-swap-section dac-active dac-left">
          <form action="https://services.google.com/fb/submissions/android-developer-mailing-list/" class="dac-form" method="post">
            <section class="dac-modal-content">
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-full-name" class="dac-form-floatlabel" data-t="newsletter.name">Full name</label>
                      <input type="text" class="dac-form-input" name="fullname" id="newsletter-full-name" required>
                      <span class="dac-form-required">*</span>
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-email" class="dac-form-floatlabel" data-t="newsletter.email">Endereço de e-mail</label>
                      <input type="email" class="dac-form-input" name="emailaddress" id="newsletter-email" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-company" class="dac-form-floatlabel" data-t="newsletter.company">Company / developer name</label>
                      <input type="text" class="dac-form-input" name="companydevelopername" id="newsletter-company">
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-play-store" class="dac-form-floatlabel" data-t="newsletter.appUrl">One of your Play Store app URLs</label>
                      <input type="url" class="dac-form-input" name="playstoreappurls" id="newsletter-play-store">
                    </div>
                  </div>
                </div>
              </fieldset>
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol newsletter-interested" data-validation-message="Please check at least one item.">
                    <legend class="dac-form-legend">What are you interested in?<span class="dac-form-required">*</span></legend>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-whats-new" value="whats-new">
                      <label for="interested-whats-new" class="dac-form-checkbox-button"></label>
                      <label for="interested-whats-new" class="dac-form-label">What's new</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-games-updates" value="games-updates">
                      <label for="interested-games-updates" class="dac-form-checkbox-button"></label>
                      <label for="interested-games-updates" class="dac-form-label">Games updates</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-android-development" value="android-development">
                      <label for="interested-android-development" class="dac-form-checkbox-button"></label>
                      <label for="interested-android-development" class="dac-form-label">Android development</label>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol newsletter-checkboxes">
                    <div class="dac-form-input-group">
                      <label for="newsletter-receive-in">Receive newsletter in</label>
                      <select name="language" class="dac-form-select" id="newsletter-receive-in">
                        <option value="en-US" selected>English</option>
                        <option value="ar">Arabic</option>
                        <option value="zh">Chinese (Simplified)</option>
                        <option value="zh-TW">Chinese (Traditional)</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="id">Indonesian (Bahasa)</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="pt-BR">Portuguese (Brazilian)</option>
                        <option value="ru">Russian</option>
                        <option value="es-419">Spanish (Latin American)</option>
                        <option value="th">Thai</option>
                        <option value="tr">Turkish</option>
                        <option value="vi">Vietnamese</option>
                      </select>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="marketingoptin" id="newsletter-add" required value="Add me to the mailing list.">
                          <label for="newsletter-add" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-add" class="dac-form-label dac-form-aside">
                            Add me to the mailing list.
                            <span class="dac-form-required">*</span>
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="privacystatement" id="newsletter-terms" required value="I acknowledge that the information provided in this form will be subject to Google's privacy policy (https://www.google.com/policies/privacy/).">
                          <label for="newsletter-terms" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-terms" class="dac-form-label dac-form-aside"><span data-t="newsletter.privacyPolicy" data-t-html>
                            
                            I acknowledge that the information provided in this form will be subject to <a href="https://www.google.com/policies/privacy/">Google's privacy policy</a>.
                          </span>
                          <span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fieldset>
            </section>
            <input type="hidden" name="referrer" value="dac">
            <footer class="dac-modal-footer">
              <div class="cols">
                <div class="col-2of5">
                </div>
              </div>
              <button type="submit" value="Submit" class="dac-fab dac-primary dac-large dac-modal-action"><i class="dac-sprite dac-arrow-right"></i></button>
            </footer>
          </form>
        </section>
        <section class="dac-swap-section dac-right">
          <div class="dac-modal-content">
            <p class="newsletter-success-message" data-t="newsletter.successDetails">
              You have successfully signed up for the latest Android developer news and tips.
            </p>
          </div>
        </section>
      </div>
    </div>
  </div>
</div><!--/.dac-modal.newsletter-->


<div data-modal="langform" class="dac-modal" id="langform">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            Browse this site in <span class="span-target-lang"></span>?
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <fieldset class="dac-form-fieldset">
              <div class="cols">
                <div class="col-2of2 langform-leftCol">
                  <p id="resetLangText">
                    You requested a page in <span class="span-target-lang"></span>, but your language preference for this site is <span class="span-current-lang"></span>.
                  </p>
                  <p id="resetLangCta">
                    Would you like to change your language preference and browse this site in <span class="span-target-lang"></span>? If you want to change your language preference later, use the language menu at the bottom of each page.
                  </p>
                </div>
              </div>
            </fieldset>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="yes" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang yes" data-t="newsletter.resetLangButtonYes" data-modal-toggle>
                Change Language
              </button>
            </a>
            <a href="#" class="" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang no" data-t="newsletter.resetLangButtonNo" data-modal-toggle>
                Not Now
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal-->


<div data-modal="api-unavailable" class="dac-modal" id="api-unavailable">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            This class requires API level <span class="api-level"></span> or higher
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <p>
              This doc is hidden because your selected API level for the documentation is <span class="api-level"></span>. You can change the documentation API level with the selector above the left navigation.
            </p>
            
            <p>For more information about specifying the API level your app requires, read <a href="https://developer.android.com/training/basics/supporting-devices/platforms.html">Supporting Different Platform Versions</a>.</p>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="ok" onclick="return false;">
              <button class="button dac-primary dac-modal-action ok"
              data-modal-toggle>
                OK, make this page visible
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal#api-unavailable-->

    
  </div><!--/#body-content-->

  <!-- Nav Setup -->
  <script>$('[data-dac-nav]').dacNav();</script>
  <script type="text/javascript">
    $('.slideshow-container').dacSlideshow({
        btnPrev: '.slideshow-prev',
        btnNext: '.slideshow-next',
        btnPause: '#pauseButton'
    });

    $(".feed").dacTabbedList({
      nav_id: '.feed-nav',
      frame_id: '.feed-frame'
    });
  </script>
  
  <script src="../../../ytblogger_lists_unified9fbc.js?hl=pt-br?v=2017061508" defer></script>
  <script src="../../../android_metadata_en9fbc.js?hl=pt-br?v=2017061508" defer></script>
  
  <script src="../../../reference/lists9fbc.js?hl=pt-br?v=2017061508" defer></script>
  <script src="../../../reference/gms_lists9fbc.js?hl=pt-br?v=2017061508" defer></script>
  <script src="../../../reference/android/support/wearable/lists9fbc.js?hl=pt-br?v=2017061508" defer></script>
  <script src="../../../reference/android/support/test/lists9fbc.js?hl=pt-br?v=2017061508" defer></script>
  <script src="../../../reference/android/support/constraint/lists9fbc.js?hl=pt-br?v=2017061508" defer></script>
  <script src="https://developer.android.com/_static2/f304fc21fa/jsi18n/?hl=pt-br"></script>
  <script>
    // Load localized metadata.
    (function(lang) {
      if (lang === 'en') { return; }
      document.write('<script src="https://developer.android.com/android_metadata_pt-br.js?hl=pt-br?v=2017061508" defer></' + 'script>');
    })(getLangPref())

    // Add skip to content for accessibility.
    $('#skip-to-main').click(function() {
      $('a[name=top]').focus();
    });

    $('.devsite-utility-footer-language-select').each(function() {
      $(this).change(function() {
        changeLangPref(this.value, true)
        $('.devsite-utility-footer-language').submit();
      });
    });
  </script>

  <script>
    (function($) {
      devsite.analytics.InitAnalytics();
    })(jQuery);
  </script>

  


<div id="survey-box-wrapper">
  <div class="material-dialog" style="width:270px">
    <div class="material-dialog-title">
      Take a one-minute survey?
    </div>
    <div class="material-dialog-description">
      Help us improve Android tools and documentation.
    </div>
    <div class="material-button-bar">
      <a class="dac-button dac-primary dac-raised" target="_blank"
          href="https://goo.gl/forms/kV7MoyD2dvcWkd5N2">Sure</a>
      <a class="dac-button" href="#">No thanks</a>
    </div>
  </div>
</div>

</body>

<!-- Mirrored from developer.android.com/guide/topics/providers/document-provider.html?hl=pt-br by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:04:18 GMT -->
</html>

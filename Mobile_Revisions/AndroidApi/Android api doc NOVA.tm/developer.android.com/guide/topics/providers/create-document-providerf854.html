





<!DOCTYPE html>
<html lang="zh-tw">

<!-- Mirrored from developer.android.com/guide/topics/providers/create-document-provider.html?hl=zh-tw by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:11:26 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

  



<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta content="IE=edge" http-equiv="X-UA-Compatible">





<script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script>

<meta charset="utf-8">



<meta name="xsrf_token" content="a7_3gphTRBJJ3LpQcZv_XALRqKf3ozbniCw-MFX-wUo6MTQ5NzUxNjczNTM0MDIxMA" />

  
    <link rel="canonical" href="create-document-provider.html">
  

  
    <link rel="alternate" href="create-document-provider.html" hreflang="en">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/create-document-provider.html" hreflang="en-cn">
  

  <link rel="alternate" href="create-document-provider.html" hreflang="x-default">




<link rel="shortcut icon" href="../../../_static/f304fc21fa/images/android/faviconf854.png?hl=zh-tw">

<link rel="apple-touch-icon" href="../../../_static/f304fc21fa/images/android/touchicon-180f854.png?hl=zh-tw">


<title>

  Create a Custom Document Provider | Android Developers

</title>

  <meta name="description" content="Android 4.4 (API level 19) introduces the Storage Access Framework (SAF). The SAF makes it simple for users to browse and open documents, images, and other files across all of their their preferred document storage providers.">


<!-- STYLESHEETS -->
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto+Condensed">
<link rel="stylesheet"
    href="http://fonts.googleapis.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold"
    title="roboto">







<link href="../../../static/css/default962f.css?hl=zh-tw?v=2017061508" rel="stylesheet" type="text/css">
<!-- JAVASCRIPT -->
<script src="../../../_static/f304fc21fa/js/android_3p-bundlef854.js?hl=zh-tw" type="text/javascript"></script>
<script src="../../../_static/f304fc21fa/js/script_foot_closure_android__zh_twf854.js?hl=zh-tw"></script>
<script src="../../../_static/f304fc21fa/js/script_foot_androidf854.js?hl=zh-tw"></script>

<script type="text/javascript">
  var toRoot = 'https://developer.android.com/';
  devsite.permissions.init({"039e5d84b87fd75807ffb37b7f1bbf2c": true, "098dafe57affddc137df300142652cfd": false, "cb025a64a50094835616312f4774a53d": true, "51470233c56fc1fde50f00b73c52b216": false, "752953480de00a336d911a46966cc16d": false, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true});

  var replaceBlog = false;
  var replaceYouTube = false;
  var siteDefaultLocale = 'en';

  var ANDROID_LANGUAGES = [
      'id','de','en','es','es-419','fr','pt-br','vi','tr','ru','th','ja','zh-cn','zh-tw','ko'
  ];
</script>
<script src="../../../static/js/docs962f.js?hl=zh-tw?v=2017061508" type="text/javascript"></script>


</head>

<body class="gc-documentation
            
            
              develop
              guide
            
            "
      itemscope itemtype="http://schema.org/Article">
  


  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;en&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;zh-tw&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-49880327-2&quot;}">
  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;en&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;zh-tw&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-5831155-1&quot;}">
  



  
  
    <script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "userCountry": "BE", "language": {"requested": "zh-tw", "served": "en"}, "projectName": "API Guides", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>
  



  
  <a href="#top" id="skip-to-main">Skip to content</a>
  <header id="header-wrapper">
    <div class="dac-header" id="header">
      <div class="dac-header-inner">
        <a class="dac-nav-toggle" data-dac-toggle-nav href="#" title="Open navigation">
          <span class="dac-nav-hamburger">
            <span class="dac-nav-hamburger-top"></span>
            <span class="dac-nav-hamburger-mid"></span>
            <span class="dac-nav-hamburger-bot"></span>
          </span>
        </a>
        
        <a class="dac-header-logo" href="https://developer.android.com/index.html?hl=zh-tw">
          <img class="dac-header-logo-image" src="../../../static/images/android_logof854.png?hl=zh-tw"
              srcset="https://developer.android.com/static/images/android_logo_2x.png 2x?hl=zh-tw"
              width="32" height="36" alt="Android"> Developers</a>
        <ul class="dac-header-tabs">
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/design/index.html?hl=zh-tw"
               zh-tw-lang="設計"
               zh-cn-lang="设计"
               ru-lang="Проектирование"
               ko-lang="디자인"
               ja-lang="設計"
               es-lang="Diseñar">Design</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/develop/index.html?hl=zh-tw"
               zh-tw-lang="開發"
               zh-cn-lang="开发"
               ru-lang="Разработка"
               ko-lang="개발"
               ja-lang="開発"
               es-lang="Desarrollar">Develop</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/distribute/index.html?hl=zh-tw"
               zh-tw-lang="發佈"
               zh-cn-lang="分发"
               ru-lang="Распространение"
               ko-lang="배포"
               ja-lang="配布"
               es-lang="Distribuir">Distribute</a>
          </li>
        </ul>


        

        <a class="dac-header-console-btn gc-analytics-event" href="https://play.google.com/apps/publish/"
           data-category="User" data-action="Console" data-label="Clicked">
          <img src="https://developer.android.com/static/images/developer-console-icon.svg?hl=zh-tw" width="18" height="19" alt="Play 管理中心">Play Console</a>

        

<form data-search="" class="dac-header-search">
  <button class="dac-header-search-close" data-search-close="">
    <i class="dac-sprite dac-back-arrow"></i>
  </button>

  <div class="dac-header-search-inner">
    <i class="dac-sprite dac-search-white dac-header-search-icon"></i>
    
    <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q" class="dac-header-search-input" placeholder="搜尋">
    <button class="dac-header-search-clear dac-hidden" data-search-clear="">
      <i class="dac-sprite dac-close-black"></i>
    </button>
  </div>
</form>

        
      </div><!--/.header-wrap.wrap-->
    </div><!--/.header-->

    

<div id="search-results" class="dac-search-results">
  <div id="dac-search-results-history" class="dac-search-results-history">
    <div class="wrap dac-search-results-history-wrap">
      <div class="cols">
        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Most visited</h2>
          <div class="resource-flow-layout" data-history-query="history:most/visited" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>

        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Recently visited</h2>
          <div class="resource-flow-layout cols" data-history-query="history:recent" data-allow-duplicates="true" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="dac-search-results-content" class="dac-search-results-content">
    <div class="dac-search-results-metadata wrap">
      <div class="dac-search-results-for">
        
          <h2>
          Results for <span id="search-results-for"></span>
          </h2>
      </div>

      <div id="dac-search-results-hero"></div>

      <div class="dac-search-results-hero cols">
        <div id="dac-search-results-reference" class="col-6of6 col-tablet-2of2 col-mobile-1of1">
          <div class="suggest-card reference no-display">
            <ul class="dac-search-results-reference">
            </ul>
          </div>
        </div>
      </div>

      <div class="cols dac-search-results-cse">
        <script src="../../../../cse.google.com/f4116.txt?cx=000521750095050289010:zpcpi1ea4s8" async></script>
        <gcse:searchresults-only linkTarget="_self"></gcse:searchresults-only>
      </div>
    </div>
  </div>
</div>

  </header>

  <a name="navigation" tabindex=0 class="nav-start-marker">navigation</a>
  <nav class="dac-nav">
    <div class="dac-nav-dimmer" data-dac-toggle-nav></div>
    <div class="dac-nav-sidebar" data-swap data-dynamic="false" data-transition-speed="300" data-dac-nav>
      <div data-swap-container>
        
        <a class="dac-nav-back-button dac-swap-section dac-up dac-no-anim" tabindex=0 data-swap-button>
          
          <i class="dac-sprite dac-nav-back"></i> <span class="dac-nav-back-title">返回</span>
        </a>

        <div class="dac-nav-sub dac-swap-section dac-right dac-active" itemscope
            itemtype="http://schema.org/SiteNavigationElement">
          
          
            
            <ul id="nav">
              <li class="nav-section"><div class="nav-section-header"><a href="../../indexf854.html?hl=zh-tw" >Introduction</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/fundamentalsf854.html?hl=zh-tw" >App Fundamentals</a></li><li><a href="../../practices/compatibilityf854.html?hl=zh-tw" >Device Compatibility</a></li><li class="nav-section"><div class="nav-section-header"><a href="../permissions/indexf854.html?hl=zh-tw" >System Permissions</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../permissions/requestingf854.html?hl=zh-tw" >Requesting Permissions</a></li><li><a href="../permissions/definingf854.html?hl=zh-tw" >Defining Permissions</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../platform/indexf854.html?hl=zh-tw" >Platform Architecture</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../platform/j8-jackf854.html?hl=zh-tw"  es-lang="Funciones del lenguaje Java 8" in-lang="Fitur Bahasa Java 8" ja-lang="Java 8 の機能" ko-lang="Java 8 언어 기능" pt-br-lang="Recursos de linguagem do Java 8" ru-lang="Возможности языка Java 8" vi-lang="Tính năng của Ngôn ngữ Java 8" zh-cn-lang="Java 8 语言功能" zh-tw-lang="Java 8 語言功能">Use Java 8 Language Features</a></li><li><a href="../../practices/verifying-apps-artf854.html?hl=zh-tw" >Verifying App Behavior on the Android Runtime (ART)</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/indexf854.html?hl=zh-tw" >App Components</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../../components/intents-filtersf854.html?hl=zh-tw" >Intents and Intent Filters</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/intents-commonf854.html?hl=zh-tw" >Common Intents</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/activities/indexf854.html?hl=zh-tw" >Activities</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/activities/intro-activitiesf854.html?hl=zh-tw" >Introduction to Activities</a></li><li><a href="../../components/activities/activity-lifecyclef854.html?hl=zh-tw" >The Activity Lifecycle</a></li><li><a href="../../components/activities/state-changesf854.html?hl=zh-tw" >Activity State Changes</a></li><li><a href="../../components/activities/tasks-and-back-stackf854.html?hl=zh-tw" >Tasks and Back Stack</a></li><li><a href="../../components/activities/process-lifecyclef854.html?hl=zh-tw" >Processes and Application Lifecycle</a></li><li><a href="../../components/activities/parcelables-and-bundlesf854.html?hl=zh-tw" >Parcelables and Bundles</a></li><li><a href="../../components/activities/recentsf854.html?hl=zh-tw" >Recents Screen</a></li></ul></li><li><a href="../../components/fragmentsf854.html?hl=zh-tw" >Fragments</a></li><li><a href="../../components/loadersf854.html?hl=zh-tw" >Loaders</a></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/servicesf854.html?hl=zh-tw" >Services</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/bound-servicesf854.html?hl=zh-tw" >Bound Services</a></li><li><a href="../../components/aidlf854.html?hl=zh-tw" >AIDL</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="content-providersf854.html?hl=zh-tw" >Content Providers</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="content-provider-basicsf854.html?hl=zh-tw" >Content Provider Basics</a></li><li><a href="content-provider-creatingf854.html?hl=zh-tw" >Creating a Content Provider</a></li><li><a href="calendar-providerf854.html?hl=zh-tw" >Calendar Provider</a></li><li><a href="contacts-providerf854.html?hl=zh-tw" >Contacts Provider</a></li><li><a href="document-providerf854.html?hl=zh-tw" >Open files using Storage Access Framework</a></li><li><a href="create-document-providerf854.html?hl=zh-tw" >Create a Custom Document Provider</a></li></ul></li><li><a href="../../components/broadcastsf854.html?hl=zh-tw" >Broadcasts</a></li><li class="nav-section"><div class="nav-section-header"><a href="../appwidgets/indexf854.html?hl=zh-tw" >App Widgets</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../appwidgets/hostf854.html?hl=zh-tw" >App Widget Host</a></li></ul></li><li><a href="../../components/processes-and-threadsf854.html?hl=zh-tw" >Processes and Threads</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/indexf854.html?hl=zh-tw" >App Resources</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/overviewf854.html?hl=zh-tw" >Overview</a></li><li><a href="../resources/providing-resourcesf854.html?hl=zh-tw" >Providing Resources</a></li><li><a href="../resources/accessing-resourcesf854.html?hl=zh-tw" >Accessing Resources</a></li><li><a href="../resources/runtime-changesf854.html?hl=zh-tw" >Handling Runtime Changes</a></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/localizationf854.html?hl=zh-tw" >Localization</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/icu4j-frameworkf854.html?hl=zh-tw" >ICU4J Android Framework APIs</a></li><li><a href="../resources/multilingual-supportf854.html?hl=zh-tw" >Language and Locale</a></li></ul></li><li><a href="../resources/complex-xml-resourcesf854.html?hl=zh-tw" >Complex XML Resources</a></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/available-resourcesf854.html?hl=zh-tw" >Resource Types</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/animation-resourcef854.html?hl=zh-tw" >Animation</a></li><li><a href="../resources/color-list-resourcef854.html?hl=zh-tw" >Color State List</a></li><li><a href="../resources/drawable-resourcef854.html?hl=zh-tw" >Drawable</a></li><li><a href="../resources/layout-resourcef854.html?hl=zh-tw" >Layout</a></li><li><a href="../resources/menu-resourcef854.html?hl=zh-tw" >Menu</a></li><li><a href="../resources/string-resourcef854.html?hl=zh-tw" >String</a></li><li><a href="../resources/style-resourcef854.html?hl=zh-tw" >Style</a></li><li><a href="../resources/more-resourcesf854.html?hl=zh-tw" >More Types</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../manifest/manifest-introf854.html?hl=zh-tw" >App Manifest</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../manifest/action-elementf854.html?hl=zh-tw" >&lt;action&gt;</a></li><li><a href="../manifest/activity-elementf854.html?hl=zh-tw" >&lt;activity&gt;</a></li><li><a href="../manifest/activity-alias-elementf854.html?hl=zh-tw" >&lt;activity-alias&gt;</a></li><li><a href="../manifest/application-elementf854.html?hl=zh-tw" >&lt;application&gt;</a></li><li><a href="../manifest/category-elementf854.html?hl=zh-tw" >&lt;category&gt;</a></li><li><a href="../manifest/compatible-screens-elementf854.html?hl=zh-tw" >&lt;compatible-screens&gt;</a></li><li><a href="../manifest/data-elementf854.html?hl=zh-tw" >&lt;data&gt;</a></li><li><a href="../manifest/grant-uri-permission-elementf854.html?hl=zh-tw" >&lt;grant-uri-permission&gt;</a></li><li><a href="../manifest/instrumentation-elementf854.html?hl=zh-tw" >&lt;instrumentation&gt;</a></li><li><a href="../manifest/intent-filter-elementf854.html?hl=zh-tw" >&lt;intent-filter&gt;</a></li><li><a href="../manifest/manifest-elementf854.html?hl=zh-tw" >&lt;manifest&gt;</a></li><li><a href="../manifest/meta-data-elementf854.html?hl=zh-tw" >&lt;meta-data&gt;</a></li><li><a href="../manifest/path-permission-elementf854.html?hl=zh-tw" >&lt;path-permission&gt;</a></li><li><a href="../manifest/permission-elementf854.html?hl=zh-tw" >&lt;permission&gt;</a></li><li><a href="../manifest/permission-group-elementf854.html?hl=zh-tw" >&lt;permission-group&gt;</a></li><li><a href="../manifest/permission-tree-elementf854.html?hl=zh-tw" >&lt;permission-tree&gt;</a></li><li><a href="../manifest/provider-elementf854.html?hl=zh-tw" >&lt;provider&gt;</a></li><li><a href="../manifest/receiver-elementf854.html?hl=zh-tw" >&lt;receiver&gt;</a></li><li><a href="../manifest/service-elementf854.html?hl=zh-tw" >&lt;service&gt;</a></li><li><a href="../manifest/supports-gl-texture-elementf854.html?hl=zh-tw" >&lt;supports-gl-texture&gt;</a></li><li><a href="../manifest/supports-screens-elementf854.html?hl=zh-tw" >&lt;supports-screens&gt;</a></li><li><a href="../manifest/uses-configuration-elementf854.html?hl=zh-tw" >&lt;uses-configuration&gt;</a></li><li><a href="../manifest/uses-feature-elementf854.html?hl=zh-tw" >&lt;uses-feature&gt;</a></li><li><a href="../manifest/uses-library-elementf854.html?hl=zh-tw" >&lt;uses-library&gt;</a></li><li><a href="../manifest/uses-permission-elementf854.html?hl=zh-tw" >&lt;uses-permission&gt;</a></li><li><a href="../manifest/uses-permission-sdk-23-elementf854.html?hl=zh-tw" >&lt;uses-permission-sdk-23&gt;</a></li><li><a href="../manifest/uses-sdk-elementf854.html?hl=zh-tw" >&lt;uses-sdk&gt;</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../ui/indexf854.html?hl=zh-tw" >User Interface</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../ui/overviewf854.html?hl=zh-tw" >Overview</a></li><li class="nav-section"><div class="nav-section-header"><a href="../ui/declaring-layoutf854.html?hl=zh-tw" >Layouts</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../ui/layout/linearf854.html?hl=zh-tw" >Linear Layout</a></li><li><a href="../ui/layout/relativef854.html?hl=zh-tw" >Relative Layout</a></li><li><a href="../ui/layout/recyclerviewf854.html?hl=zh-tw" >Recycler View</a></li><li><a href="../ui/layout/listviewf854.html?hl=zh-tw" >List View</a></li><li><a href="../ui/layout/gridviewf854.html?hl=zh-tw" >Grid View</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../ui/controlsf854.html?hl=zh-tw" >Input Controls</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../ui/controls/buttonf854.html?hl=zh-tw" >Buttons</a></li><li><a href="../ui/controls/checkboxf854.html?hl=zh-tw" >Checkboxes</a></li><li><a href="../ui/controls/radiobuttonf854.html?hl=zh-tw" >Radio Buttons</a></li><li><a href="../ui/controls/togglebuttonf854.html?hl=zh-tw" >Toggle Buttons</a></li><li><a href="../ui/controls/spinnerf854.html?hl=zh-tw" >Spinners</a></li><li><a href="../ui/controls/pickersf854.html?hl=zh-tw" >Pickers</a></li></ul></li><li><a href="../ui/ui-eventsf854.html?hl=zh-tw" >Input Events</a></li><li><a href="../ui/menusf854.html?hl=zh-tw" >Menus</a></li><li><a href="../ui/settingsf854.html?hl=zh-tw" >Settings</a></li><li><a href="../ui/dialogsf854.html?hl=zh-tw" >Dialogs</a></li><li><a href="../ui/notifiers/notificationsf854.html?hl=zh-tw" >Notifications</a></li><li><a href="../ui/notifiers/toastsf854.html?hl=zh-tw" >Toasts</a></li><li><a href="../ui/shortcutsf854.html?hl=zh-tw" >App Shortcuts</a></li><li class="nav-section"><div class="nav-section-header"><a href="../search/indexf854.html?hl=zh-tw" >Search</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../search/search-dialogf854.html?hl=zh-tw" >Creating a Search Interface</a></li><li><a href="../search/adding-recent-query-suggestionsf854.html?hl=zh-tw" >Adding Recent Query Suggestions</a></li><li><a href="../search/adding-custom-suggestionsf854.html?hl=zh-tw" >Adding Custom Suggestions</a></li><li><a href="../search/searchable-configf854.html?hl=zh-tw" >Searchable Configuration</a></li></ul></li><li><a href="../ui/multi-windowf854.html?hl=zh-tw" >Multi-Window Support</a></li><li><a href="../ui/drag-dropf854.html?hl=zh-tw" >Drag and Drop</a></li><li class="nav-section"><div class="nav-section-header"><a href="../ui/accessibility/indexf854.html?hl=zh-tw" >Accessibility</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../ui/accessibility/appsf854.html?hl=zh-tw" >Making Apps More Accessible</a></li><li><a href="../ui/accessibility/checklistf854.html?hl=zh-tw" >Accessibility Developer Checklist</a></li><li><a href="../ui/accessibility/node-tree-debuggingf854.html?hl=zh-tw" >Using Node Tree Debugging</a></li><li><a href="../ui/accessibility/servicesf854.html?hl=zh-tw" >Building Accessibility Services</a></li><li><a href="../ui/accessibility/custom-viewsf854.html?hl=zh-tw" >Building Accessible Custom Views</a></li></ul></li><li><a href="../ui/themesf854.html?hl=zh-tw" >Styles and Themes</a></li><li><a href="../ui/custom-componentsf854.html?hl=zh-tw" >Custom Components</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../graphics/indexf854.html?hl=zh-tw" >Animation and Graphics</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../graphics/overviewf854.html?hl=zh-tw" >Overview</a></li><li><a href="../graphics/prop-animationf854.html?hl=zh-tw" >Property Animation</a></li><li><a href="../graphics/view-animationf854.html?hl=zh-tw" >View Animation</a></li><li><a href="../graphics/drawable-animationf854.html?hl=zh-tw" >Drawable Animation</a></li><li class="nav-section"><div class="nav-section-header"><a href="../graphics/2d-graphicsf854.html?hl=zh-tw" >Canvas and Drawables</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../graphics/vector-drawable-resourcesf854.html?hl=zh-tw" >Vector Drawable</a></li></ul></li><li><a href="../graphics/openglf854.html?hl=zh-tw" >OpenGL ES</a></li><li><a href="../graphics/hardware-accelf854.html?hl=zh-tw" >Hardware Acceleration</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../renderscript/indexf854.html?hl=zh-tw" >Computation</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../renderscript/computef854.html?hl=zh-tw" >RenderScript</a></li><li><a href="../renderscript/advancedf854.html?hl=zh-tw" >Advanced RenderScript</a></li><li class="nav-section"><div class="nav-section-header"><a href="../renderscript/reference/overviewf854.html?hl=zh-tw" >Runtime API Reference</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../renderscript/reference/rs_value_typesf854.html?hl=zh-tw" >Numerical Types</a></li><li><a href="../renderscript/reference/rs_object_typesf854.html?hl=zh-tw" >Object Types</a></li><li><a href="../renderscript/reference/rs_convertf854.html?hl=zh-tw" >Conversion Functions</a></li><li><a href="../renderscript/reference/rs_mathf854.html?hl=zh-tw" >Mathematical Constants and Functions</a></li><li><a href="../renderscript/reference/rs_vector_mathf854.html?hl=zh-tw" >Vector Math Functions</a></li><li><a href="../renderscript/reference/rs_matrixf854.html?hl=zh-tw" >Matrix Functions</a></li><li><a href="../renderscript/reference/rs_quaternionf854.html?hl=zh-tw" >Quaternion Functions</a></li><li><a href="../renderscript/reference/rs_atomicf854.html?hl=zh-tw" >Atomic Update Functions</a></li><li><a href="../renderscript/reference/rs_timef854.html?hl=zh-tw" >Time Functions and Types</a></li><li><a href="../renderscript/reference/rs_allocation_dataf854.html?hl=zh-tw" >Allocation Data Access Functions</a></li><li><a href="../renderscript/reference/rs_object_infof854.html?hl=zh-tw" >Object Characteristics Functions</a></li><li><a href="../renderscript/reference/rs_for_eachf854.html?hl=zh-tw" >Kernel Invocation Functions and Types</a></li><li><a href="../renderscript/reference/rs_iof854.html?hl=zh-tw" >Input/Output Functions</a></li><li><a href="../renderscript/reference/rs_debugf854.html?hl=zh-tw" >Debugging Functions</a></li><li><a href="../renderscript/reference/rs_graphicsf854.html?hl=zh-tw" >Graphics Functions and Types</a></li><li><a href="../renderscript/reference/indexf854.html?hl=zh-tw" >Index</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../media-apps/indexf854.html?hl=zh-tw" >Media Apps</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media-apps/media-apps-overviewf854.html?hl=zh-tw" >Media Apps Overview</a></li><li><a href="../media-apps/working-with-a-media-sessionf854.html?hl=zh-tw" >Working with a Media Session</a></li><li class="nav-section"><div class="nav-section-header"><a href="../media-apps/audio-app/building-an-audio-appf854.html?hl=zh-tw" >Building an Audio App</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media-apps/audio-app/building-a-mediabrowserservicef854.html?hl=zh-tw" >Building a Media Browser Service</a></li><li><a href="../media-apps/audio-app/building-a-mediabrowser-clientf854.html?hl=zh-tw" >Building a Media Browser Client</a></li><li><a href="../media-apps/audio-app/mediasession-callbacksf854.html?hl=zh-tw" >Media Session Callbacks</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../media-apps/video-app/building-a-video-appf854.html?hl=zh-tw" >Building a Video App</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media-apps/video-app/building-a-video-player-activityf854.html?hl=zh-tw" >Building a Video Player Activity</a></li><li><a href="../media-apps/video-app/mediasession-callbacksf854.html?hl=zh-tw" >Media Session Callbacks</a></li></ul></li><li><a href="../media-apps/mediabuttonsf854.html?hl=zh-tw" >Responding to Media Buttons</a></li><li><a href="../media-apps/volume-and-earphonesf854.html?hl=zh-tw" >Handling Changes in Audio Output</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../media/indexf854.html?hl=zh-tw" >Media and Camera</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media/media-formatsf854.html?hl=zh-tw" >Supported Media Formats</a></li><li><a href="../media/mediaplayerf854.html?hl=zh-tw" >MediaPlayer</a></li><li><a href="../media/mediarecorderf854.html?hl=zh-tw" >MediaRecorder</a></li><li><a href="../media/exoplayerf854.html?hl=zh-tw" >ExoPlayer</a></li><li class="nav-section"><div class="nav-section-header"><a href="../media/media-routingf854.html?hl=zh-tw" >Media Routing</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media/mediarouterf854.html?hl=zh-tw" >MediaRouter API</a></li><li><a href="../media/mediarouteproviderf854.html?hl=zh-tw" >MediaRouteProvider API</a></li></ul></li><li><a href="../media/cameraf854.html?hl=zh-tw" >Camera API</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../sensors/indexf854.html?hl=zh-tw" >Location and Sensors</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../location/indexf854.html?hl=zh-tw" >Location and Maps</a></li><li><a href="../location/strategiesf854.html?hl=zh-tw" >Location Strategies</a></li><li><a href="../sensors/sensors_overviewf854.html?hl=zh-tw" >Sensors Overview</a></li><li><a href="../sensors/sensors_motionf854.html?hl=zh-tw" >Motion Sensors</a></li><li><a href="../sensors/sensors_positionf854.html?hl=zh-tw" >Position Sensors</a></li><li><a href="../sensors/sensors_environmentf854.html?hl=zh-tw" >Environment Sensors</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/indexf854.html?hl=zh-tw" >Connectivity</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/bluetoothf854.html?hl=zh-tw" >Bluetooth</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/bluetooth-lef854.html?hl=zh-tw" >Bluetooth Low Energy</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/nfc/indexf854.html?hl=zh-tw" >NFC</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/nfc/nfcf854.html?hl=zh-tw" >NFC Basics</a></li><li><a href="../connectivity/nfc/advanced-nfcf854.html?hl=zh-tw" >Advanced NFC</a></li><li><a href="../connectivity/nfc/hcef854.html?hl=zh-tw" >Host-based Card Emulation</a></li></ul></li><li><a href="../connectivity/wifip2pf854.html?hl=zh-tw" >Wi-Fi P2P</a></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/usb/indexf854.html?hl=zh-tw" >USB</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/usb/accessoryf854.html?hl=zh-tw" >Accessory</a></li><li><a href="../connectivity/usb/hostf854.html?hl=zh-tw" >Host</a></li></ul></li><li><a href="../connectivity/sipf854.html?hl=zh-tw" >SIP</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../text/indexf854.html?hl=zh-tw" >Text and Input</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../text/copy-pastef854.html?hl=zh-tw" >Copy and Paste</a></li><li class="nav-section"><div class="nav-section-header"><a href="../text/creating-input-methodf854.html?hl=zh-tw" >Creating an IME</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../text/image-keyboardf854.html?hl=zh-tw" >Image Keyboard</a></li></ul></li><li><a href="../text/spell-checker-frameworkf854.html?hl=zh-tw" >Spelling Checker</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../data/indexf854.html?hl=zh-tw" >Data Storage</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../data/data-storagef854.html?hl=zh-tw" >Storage Options</a></li><li class="nav-section"><div class="nav-section-header"><a href="../data/backupf854.html?hl=zh-tw" >Data Backup</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../data/autobackupf854.html?hl=zh-tw" >Auto Backup</a></li><li><a href="../data/keyvaluebackupf854.html?hl=zh-tw" >Key/Value Backup</a></li><li><a href="../data/testingbackupf854.html?hl=zh-tw" >Testing Backup and Restore</a></li></ul></li><li><a href="../data/install-locationf854.html?hl=zh-tw" >App Install Location</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../admin/indexf854.html?hl=zh-tw" >Administration</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../admin/device-adminf854.html?hl=zh-tw" >Device Policies</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../webapps/indexf854.html?hl=zh-tw" >Web Apps</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../webapps/targetingf854.html?hl=zh-tw" >Supporting Different Screens in Web Apps</a></li><li><a href="../../webapps/webviewf854.html?hl=zh-tw" >Building Web Apps in WebView</a></li><li><a href="../../webapps/migratingf854.html?hl=zh-tw" >Migrating to WebView in Android 4.4</a></li><li><a href="../../webapps/debuggingf854.html?hl=zh-tw" >Debugging Web Apps</a></li><li><a href="../../webapps/best-practicesf854.html?hl=zh-tw" >Best Practices for Web Apps</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../practices/indexf854.html?hl=zh-tw"  de-lang="Bewährte Verfahren" es-lang="Prácticas recomendadas" fr-lang="Meilleures pratiques" it-lang="Best practice" ja-lang="ベスト プラクティス" zh-cn-lang="最佳实践" zh-tw-lang="最佳實務">Best Practices</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../../practices/screens_supportf854.html?hl=zh-tw" >Supporting Multiple Screens</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../practices/screens-distributionf854.html?hl=zh-tw" >Distributing to Specific Screens</a></li><li><a href="../../practices/screen-compat-modef854.html?hl=zh-tw" >Screen Compatibility Mode</a></li></ul></li><li><a href="../../practices/app-design/seamlessnessf854.html?hl=zh-tw" >Designing for Seamlessness</a></li><li><a href="../../practices/tablets-and-handsetsf854.html?hl=zh-tw" >Supporting Tablets and Handsets</a></li></ul></li>
            </ul>
            
          
        </div>
        
        
          



<ul id="dac-main-navigation" class="dac-nav-list dac-swap-section dac-left dac-no-anim" tabindex=0>
  <li class="dac-nav-item home">
    <a class="dac-nav-link" href="https://developer.android.com/index.html?hl=zh-tw">首頁</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary about">
      <li class="dac-nav-item versions">
        <a class="dac-nav-link" href="https://developer.android.com/about/versions/nougat/index.html?hl=zh-tw">Android</a>
      </li>
      <li class="dac-nav-item wear">
        <a class="dac-nav-link" href="https://developer.android.com/wear/index.html?hl=zh-tw">Wear</a>
      </li>
      <li class="dac-nav-item tv">
        <a class="dac-nav-link" href="https://developer.android.com/tv/index.html?hl=zh-tw">TV</a>
      </li>
      <li class="dac-nav-item auto">
        <a class="dac-nav-link" href="https://developer.android.com/auto/index.html?hl=zh-tw">Auto</a>
      </li>
      <li class="dac-nav-item things">
        <a class="dac-nav-link" href="https://developer.android.com/things/index.html?hl=zh-tw">Things</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item design">
    <a class="dac-nav-link" href="https://developer.android.com/design/index.html?hl=zh-tw"
       zh-tw-lang="設計"
       zh-cn-lang="设计"
       ru-lang="Проектирование"
       ko-lang="디자인"
       ja-lang="設計"
       es-lang="Diseñar">Design</a>
  </li>
  <li class="dac-nav-item develop">
    <a class="dac-nav-link" href="https://developer.android.com/develop/index.html?hl=zh-tw"
       zh-tw-lang="開發"
       zh-cn-lang="开发"
       ru-lang="Разработка"
       ko-lang="개발"
       ja-lang="開発"
       es-lang="Desarrollar">Develop</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary develop">
      <li class="dac-nav-item training">
        <a class="dac-nav-link" href="https://developer.android.com/training/index.html?hl=zh-tw"
           zh-tw-lang="訓練課程"
           zh-cn-lang="培训"
           ru-lang="Курсы"
           ko-lang="교육"
           ja-lang="トレーニング"
           es-lang="Capacitación">訓練</a>
      </li>
      <li class="dac-nav-item guide">
        <a class="dac-nav-link" href="../../indexf854.html?hl=zh-tw"
           zh-tw-lang="API 指南"
           zh-cn-lang="API 指南"
           ru-lang="Руководства по API"
           ko-lang="API 가이드"
           ja-lang="API ガイド"
           es-lang="Guías de la API">API Guides</a>
      </li>
      <li class="dac-nav-item reference">
        <a class="dac-nav-link" href="https://developer.android.com/reference/packages.html?hl=zh-tw"
           zh-tw-lang="參考資源"
           zh-cn-lang="参考"
           ru-lang="Справочник"
           ko-lang="참조문서"
           ja-lang="リファレンス"
           es-lang="Referencia">參考資料</a>
      </li>
      <li class="dac-nav-item samples">
        <a class="dac-nav-link" href="https://developer.android.com/samples/index.html?hl=zh-tw">範例</a>
      </li>
      <li class="dac-nav-item libraries">
        <a class="dac-nav-link" href="https://developer.android.com/topic/libraries/index.html?hl=zh-tw"
           >程式庫</a></li>
      <li class="dac-nav-item studio">
        <a class="dac-nav-link" href="https://developer.android.com/studio/index.html?hl=zh-tw"
           >Android Studio</a></li>
      <li class="dac-nav-item ndk">
        <a class="dac-nav-link" href="https://developer.android.com/ndk/index.html?hl=zh-tw"
           >Android NDK</a></li>
      <li class="dac-nav-item google">
        <a class="dac-nav-link" href="https://developer.android.com/google/index.html?hl=zh-tw">Google Services</a>
      </li>
      <li class="dac-nav-item quality-guidelines">
        <a class="dac-nav-link" href="https://developer.android.com/develop/quality-guidelines/index.html?hl=zh-tw">Quality Guidelines</a>
      </li>
      <li class="dac-nav-item kotlin">
        <a class="dac-nav-link" href="https://developer.android.com/kotlin/index.html?hl=zh-tw">Kotlin</a>
       </li>
    </ul>
  </li>
  <li class="dac-nav-item distribute">
    <a class="dac-nav-link" href="https://developer.android.com/distribute/index.html?hl=zh-tw"
       zh-tw-lang="發佈"
       zh-cn-lang="分发"
       ru-lang="Распространение"
       ko-lang="배포"
       ja-lang="配布"
       de-lang="Vertrieb"
       es-lang="Distribuir"
       es-419-lang="Distribuye"
       fr-lang="Distribuer"
       id-lang="Distribusikan"
       pt-br-lang="Distribuição"
       th-lang="จัดจำหน่าย"
       tr-lang="Dağıtma"
       vi-lang="Phân phối">Distribute</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary distribute">
      <li class="dac-nav-item google-play">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/google-play/index.html?hl=zh-tw">Google Play</a>
      </li>
      <li class="dac-nav-item console">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/console/index.html?hl=zh-tw">Play 管理中心</a>
      </li>
      <li class="dac-nav-item best-practices">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/best-practices/index.html?hl=zh-tw"
          es-419-lang="Recomendaciones"
          fr-lang="Bonnes pratiques"
          id-lang="Praktik terbaik"
          ja-lang="おすすめの方法"
          ko-lang="권장사항"
          pt-br-lang="Práticas recomendadas"
          ru-lang="Рекомендации"
          th-lang="จัดจำหน่าย"
          tr-lang="En iyi uygulamalar"
          vi-lang="Các phương pháp hay nhất"
          zh-cn-lang="最佳做法"
          zh-tw-lang="最佳做法">Best practices</a>
      </li>
      <li class="dac-nav-item marketing-tools">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/marketing-tools/index.html?hl=zh-tw"
          de-lang="Marketing-Tools"
          es-419-lang="Herramientas de marketing"
          fr-lang="Outils marketing"
          id-lang="Fitur pemasaran"
          ja-lang="マーケティング ツール"
          ko-lang="마케팅 도구"
          pt-br-lang="Ferramentas de marketing"
          ru-lang="Маркетинговые инструменты"
          th-lang="เครื่องมือการตลาด"
          tr-lang="Pazarlama araçları"
          vi-lang="Công cụ tiếp thị"
          zh-cn-lang="营销工具"
          zh-tw-lang="行銷工具">Marketing tools</a>
      </li>
      <li class="dac-nav-item policy-center">
        <a class="dac-nav-link" href="https://play.google.com/about/developer-content-policy/" target="_blank">Policy center</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item stories">
    <a class="dac-nav-link" href="https://developer.android.com/stories/index.html?hl=zh-tw">Stories</a>
  </li>
  
  <li class="dac-nav-item preview">
    <a class="dac-nav-link" href="https://developer.android.com/preview/index.html?hl=zh-tw">Preview</a>
  </li>
  
</ul>

        
      </div>
    </div>
  </nav>

  <a name="top" tabindex="0"></a>
  
  <div class="wrap clearfix" id="body-content">
  
    
      
      <div class="content-header">
        <ul class="dac-header-crumbs"></ul>
        <!-- Breadcrumb Setup -->
        <script>$('.dac-nav-list').dacCurrentPage().dacCrumbs();</script>
        <h1 itemprop="name">Create a Custom Document Provider</h1>
      
        
      
      </div>
      
    
    <div class="jd-descr " itemprop="articleBody">
      

<div id="qv-wrapper">
<div id="qv">

<h2>In this document
 <a href="#" onclick="hideNestedItems('#toc44',this);return false;" class="header-toggle">
        <span class="more">show more</span>
        <span class="less" style="display:none">show less</span></a></h2>
<ol id="toc44" class="hide-nested">
  <li><a href="#manifest">Manifest</a></li>
  <li><a href="#contract">Contracts</a></li>
  <li><a href="#subclass">Create a subclass of DocumentsProvider</a>
    <ul>
      <li><a href="#queryRoots">Define a root</a></li>
      <li><a href="#queryChildDocuments">List documents in the provider</a></li>
      <li><a href="#queryDocument">Get document information</a></li>
      <li><a href="#openDocument">Open a document</a></li>
      <li><a href="#queryRecentDocuments">Support recent documents and search</a></li>
      <li><a href="#virtual-files">Support document creation</a></li>
      <li><a href="#browsing">Support document management features</a></li>
      <li><a href="#virtual-files">Support virtual files and alternate file formats</a></li>
    </ul>
  </li>
  <li><a href="#security">Security</a></li>
</ol>
<h2>Key classes</h2>
<ol>
    <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw">DocumentsProvider</a></code></li>
    <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.html?hl=zh-tw">DocumentsContract</a></code></li>
</ol>

<h2>Videos</h2>

<ol>
    <li><a href="http://www.youtube.com/watch?v=zxHVeXbK1P4&amp;hl=zh-tw">
DevBytes: Android 4.4 Storage Access Framework: Provider</a></li>
     <li><a href="https://www.youtube.com/watch?v=LaMUvV-gOfE&amp;hl=zh-tw">
Storage Access Framework: Building a DocumentsProvider</a></li>
     <li><a href="https://www.youtube.com/watch?v=4h7yCZt231Y&amp;hl=zh-tw">
Virtual Files in the Storage Access Framework</a></li>
  </ol>

<h2>Code Samples</h2>

<ol>
    <li><a href="https://github.com/googlesamples/android-StorageProvider">
Storage Provider</a></li>
     <li><a href="https://github.com/googlesamples/android-StorageClient">
StorageClient</a></li>
  </ol>

<h2>See Also</h2>
<ol>
    <li>
      <a href="https://medium.com/google-developers/building-a-documentsprovider-f7f2fb38e86a#.cq3fc969k">
        Building a DocumentsProvider
      </a>
    </li>
    <li>
      <a href="document-providerf854.html?hl=zh-tw">
        Open Files using Storage Access Framework
      </a>
    </li>
    <li>
      <a href="content-provider-basicsf854.html?hl=zh-tw">
        Content Provider Basics
      </a>
    </li>
</ol>

</div>
</div>

<p>
If you're developing an app that provides storage services for files (such as
a cloud save service), you can make your files available through the
Storage Access Framework (SAF) by writing a custom document provider.
This page describes how to create a custom document provider.</p>

<p>
  For more information about how the Storage Access Framework works, see the
  <a href="document-providerf854.html?hl=zh-tw#overview">Storage Access Framework overview</a>.
</p>



<h2 id="manifest">Manifest</h2>

<p>To implement a custom document provider, add the following to your application's
manifest:</p>

<ul>
  <li>A target of API level 19 or higher.</li>

  <li>A <code>&lt;provider&gt;</code> element that declares your custom storage
  provider. </li>

  <li>
    The attribute <code>android:name</code> set to the name of your
    <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw">DocumentsProvider</a></code> subclass,
    which is its class name, including package name:
    <p><code>com.example.android.storageprovider.MyCloudProvider</code>.</p>
  </li>

  <li>
    The attribute <code>android:authority</code> attribute,
    which is your package name (in this example,
    <code>com.example.android.storageprovider</code>)
    plus the type of content provider
    (<code>documents</code>).
  </li>

<li>The attribute <code>android:exported</code> set to <code>&quot;true&quot;</code>.
You must export your provider so that other apps can see it.</li>

<li>The attribute <code>android:grantUriPermissions</code> set to
<code>&quot;true&quot;</code>. This setting allows the system to grant other apps access
to content in your provider. For a discussion of how to persist a grant for
a particular document, see <a href="#permissions">Persist permissions</a>.</li>

<li>The <code>MANAGE_DOCUMENTS</code> permission. By default a provider is available
to everyone. Adding this permission restricts your provider to the system.
This restriction is important for security.</li>

<li>An intent filter that includes the
<code>android.content.action.DOCUMENTS_PROVIDER</code> action, so that your provider
appears in the picker when the system searches for providers.</li>

</ul>
<p>Here are excerpts from a sample manifest that includes a provider:</p>

<pre>&lt;manifest... &gt;
    ...
    &lt;uses-sdk
        android:minSdkVersion=&quot;19&quot;
        android:targetSdkVersion=&quot;19&quot; /&gt;
        ....
        &lt;provider
            android:name=&quot;com.example.android.storageprovider.MyCloudProvider&quot;
            android:authorities=&quot;com.example.android.storageprovider.documents&quot;
            android:grantUriPermissions=&quot;true&quot;
            android:exported=&quot;true&quot;
            android:permission=&quot;android.permission.MANAGE_DOCUMENTS&quot;&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.content.action.DOCUMENTS_PROVIDER&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/provider&gt;
    &lt;/application&gt;

&lt;/manifest&gt;</pre>


<h3 id="43">Supporting devices running Android 4.3 and lower</h3>

<p>The
<code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=zh-tw#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code> intent is only available
on devices running Android 4.4 and higher.
If you want your application to support <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=zh-tw#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code>
to accommodate devices that are running Android 4.3 and lower, you should
disable the <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=zh-tw#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code> intent filter in
your manifest for devices running Android 4.4 or higher. A
document provider and <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=zh-tw#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code> should be considered
 mutually exclusive. If you support both of them simultaneously, your app
appears twice in the system picker UI, offering two different ways of accessing
your stored data. This is confusing for users.</p>

<p>Here is the recommended way of disabling the
<code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=zh-tw#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code> intent filter for devices
running Android version 4.4 or higher:</p>

<ol>
<li>In your <code>bool.xml</code> resources file under <code>res/values/</code>, add
this line: <pre>&lt;bool name=&quot;atMostJellyBeanMR2&quot;&gt;true&lt;/bool&gt;</pre></li>

<li>In your <code>bool.xml</code> resources file under <code>res/values-v19/</code>, add
this line: <pre>&lt;bool name=&quot;atMostJellyBeanMR2&quot;&gt;false&lt;/bool&gt;</pre></li>

<li>Add an
<a href="../manifest/activity-alias-elementf854.html?hl=zh-tw">activity
alias</a> to disable the <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=zh-tw#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code> intent
filter for versions 4.4 (API level 19) and higher. For example:

<pre>
&lt;!-- This activity alias is added so that GET_CONTENT intent-filter
     can be disabled for builds on API level 19 and higher. --&gt;
&lt;activity-alias android:name=&quot;com.android.example.app.MyPicker&quot;
        android:targetActivity=&quot;com.android.example.app.MyActivity&quot;
        ...
        android:enabled=&quot;@bool/atMostJellyBeanMR2&quot;&gt;
    &lt;intent-filter&gt;
        &lt;action android:name=&quot;android.intent.action.GET_CONTENT&quot; /&gt;
        &lt;category android:name=&quot;android.intent.category.OPENABLE&quot; /&gt;
        &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;
        &lt;data android:mimeType=&quot;image/*&quot; /&gt;
        &lt;data android:mimeType=&quot;video/*&quot; /&gt;
    &lt;/intent-filter&gt;
&lt;/activity-alias&gt;
</pre>
</li>
</ol>


<h2 id="contract">Contracts</h2>

<p>Usually when you write a custom content provider, one of the tasks is
implementing contract classes, as described in the
<a href="content-provider-creatingf854.html?hl=zh-tw#ContractClass">
Content Providers</a> developers guide. A contract class is a <code>public final</code> class
that contains constant definitions for the URIs, column names, MIME types, and
other metadata that pertain to the provider. The SAF
provides these contract classes for you, so you don't need to write your
own:</p>

<ul>
   <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw">DocumentsContract.Document</a></code></li>
   <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Root.html?hl=zh-tw">DocumentsContract.Root</a></code></li>
</ul>

<p>For example, here are the columns you might return in a cursor when
your document provider is queried for documents or the root:</p>

<pre>private static final String[] DEFAULT_ROOT_PROJECTION =
        new String[]{Root.COLUMN_ROOT_ID, Root.COLUMN_MIME_TYPES,
        Root.COLUMN_FLAGS, Root.COLUMN_ICON, Root.COLUMN_TITLE,
        Root.COLUMN_SUMMARY, Root.COLUMN_DOCUMENT_ID,
        Root.COLUMN_AVAILABLE_BYTES,};
private static final String[] DEFAULT_DOCUMENT_PROJECTION = new
        String[]{Document.COLUMN_DOCUMENT_ID, Document.COLUMN_MIME_TYPE,
        Document.COLUMN_DISPLAY_NAME, Document.COLUMN_LAST_MODIFIED,
        Document.COLUMN_FLAGS, Document.COLUMN_SIZE,};
</pre>

<p>
  Your cursor for the root needs to include certain required columns.
  These columns are:
    <ul>
      <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Root.html?hl=zh-tw#COLUMN_ROOT_ID">COLUMN_ROOT_ID</a></code></li>
      <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Root.html?hl=zh-tw#COLUMN_ICON">COLUMN_ICON</a></code></li>
      <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Root.html?hl=zh-tw#COLUMN_TITLE">COLUMN_TITLE</a></code></li>
      <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Root.html?hl=zh-tw#COLUMN_FLAGS">COLUMN_FLAGS</a></code></li>
      <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Root.html?hl=zh-tw#COLUMN_DOCUMENT_ID">COLUMN_DOCUMENT_ID</a></code></li>
    </ul>
</p>

<p>
  The cursor for documents needs to include the following required columns:
  <ul>
      <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw#COLUMN_DOCUMENT_ID">COLUMN_DOCUMENT_ID</a></code></li>
      <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw#COLUMN_DISPLAY_NAME">COLUMN_DISPLAY_NAME</a></code></li>
      <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw#COLUMN_MIME_TYPE">COLUMN_MIME_TYPE</a></code></li>
      <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw#COLUMN_FLAGS">COLUMN_FLAGS</a></code></li>
      <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw#COLUMN_SIZE">COLUMN_SIZE</a></code></li>
      <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw#COLUMN_LAST_MODIFIED">COLUMN_LAST_MODIFIED</a></code></li>
  </ul>
</p>


<h2 id="subclass">Create a subclass of DocumentsProvider</h3>

<p>The next step in writing a custom document provider is to subclass the
abstract class <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw">DocumentsProvider</a></code>. At minimum, you must
implement the following methods:</p>

<ul>
<li><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#queryRoots(java.lang.String[])">queryRoots()</a></code></li>

<li><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#queryChildDocuments(java.lang.String, java.lang.String[], android.os.Bundle)">queryChildDocuments()</a></code></li>

<li><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#queryDocument(java.lang.String, java.lang.String[])">queryDocument()</a></code></li>

<li><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#openDocument(java.lang.String, java.lang.String, android.os.CancellationSignal)">openDocument()</a></code></li>
</ul>

<p>These are the only methods you are strictly required to implement, but there
are many more you might want to. See <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw">DocumentsProvider</a></code>
for details.</p>


<h3 id="queryRoots">Define a root</h3>

<p>Your implementation of <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#queryRoots(java.lang.String[])">queryRoots()</a></code> needs to return a <code><a href="https://developer.android.com/reference/android/database/Cursor.html?hl=zh-tw">Cursor</a></code> pointing to all
the root directories of your document provider, using columns defined in
<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Root.html?hl=zh-tw">DocumentsContract.Root</a></code>.</p>

<p>In the following snippet, the <code>projection</code> parameter represents the
specific fields the caller wants to get back. The snippet creates a new cursor
and adds one row to it&mdash;one root, a top level directory, like
Downloads or Images.  Most providers only have one root. You might have more than one,
for example, in the case of multiple user accounts. In that case, just add a
second row to the cursor.</p>

<pre>
@Override
public Cursor queryRoots(String[] projection) throws FileNotFoundException {

    // Use a MatrixCursor to build a cursor
    // with either the requested fields, or the default
    // projection if &quot;projection&quot; is null.
    final MatrixCursor result =
            new MatrixCursor(resolveRootProjection(projection));

    // If user is not logged in, return an empty root cursor.  This removes our
    // provider from the list entirely.
    if (!isUserLoggedIn()) {
        return result;
    }

    // It&#39;s possible to have multiple roots (e.g. for multiple accounts in the
    // same app) -- just add multiple cursor rows.
    final MatrixCursor.RowBuilder row = result.newRow();
    row.add(Root.COLUMN_ROOT_ID, ROOT);

    // You can provide an optional summary, which helps distinguish roots
    // with the same title. You can also use this field for displaying an
    // user account name.
    row.add(Root.COLUMN_SUMMARY, getContext().getString(R.string.root_summary));

    // FLAG_SUPPORTS_CREATE means at least one directory under the root supports
    // creating documents. FLAG_SUPPORTS_RECENTS means your application&#39;s most
    // recently used documents will show up in the &amp;quot;Recents&amp;quot; category.
    // FLAG_SUPPORTS_SEARCH allows users to search all documents the application
    // shares.
    row.add(Root.COLUMN_FLAGS, Root.FLAG_SUPPORTS_CREATE |
            Root.FLAG_SUPPORTS_RECENTS |
            Root.FLAG_SUPPORTS_SEARCH);

    // COLUMN_TITLE is the root title (e.g. Gallery, Drive).
    row.add(Root.COLUMN_TITLE, getContext().getString(R.string.title));

    // This document id cannot change after it&#39;s shared.
    row.add(Root.COLUMN_DOCUMENT_ID, getDocIdForFile(mBaseDir));

    // The child MIME types are used to filter the roots and only present to the
    // user those roots that contain the desired type somewhere in their file hierarchy.
    row.add(Root.COLUMN_MIME_TYPES, getChildMimeTypes(mBaseDir));
    row.add(Root.COLUMN_AVAILABLE_BYTES, mBaseDir.getFreeSpace());
    row.add(Root.COLUMN_ICON, R.drawable.ic_launcher);

    return result;
}</pre>

<p>
  If your document provider connects to a dynamic set of roots—for example, to a USB
  device that might be disconnected or an account that the user can sign out from—you
  can update the document UI to stay in sync with those changes using the
  <code><a href="https://developer.android.com/reference/android/content/ContentResolver.html?hl=zh-tw#notifyChange(android.net.Uri, android.database.ContentObserver)">ContentResolver.notifyChange()</a></code> method, as shown in the following code snippet.
</p>

<pre>
Uri rootsUri = DocumentsContract.buildRootsUri(BuildConfig.DOCUMENTS_AUTHORITY);
context.getContentResolver().notifyChange(rootsUri, null);
</pre>


<h3 id="queryChildDocuments">List documents in the provider</h3>

<p>Your implementation of
<code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#queryChildDocuments(java.lang.String, java.lang.String[], android.os.Bundle)">queryChildDocuments()</a></code>
must return a <code><a href="https://developer.android.com/reference/android/database/Cursor.html?hl=zh-tw">Cursor</a></code> that points to all the files in
the specified directory, using columns defined in
<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw">DocumentsContract.Document</a></code>.</p>

<p>
  This method gets called when the user chooses your root in the picker UI.
  The method retrieves the children of the document ID specified by
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Root.html?hl=zh-tw#COLUMN_DOCUMENT_ID">COLUMN_DOCUMENT_ID</a></code>.
  The system then calls this method any time the user selects a
  subdirectory within your documents provider.
</p>

<p>
  This snippet makes a new cursor with the requested columns, then adds
  information about every immediate child in the parent directory to the cursor.
  A child can be an image, another directory&mdash;any file:
</p>

<pre>@Override
public Cursor queryChildDocuments(String parentDocumentId, String[] projection,
                              String sortOrder) throws FileNotFoundException {

    final MatrixCursor result = new
            MatrixCursor(resolveDocumentProjection(projection));
    final File parent = getFileForDocId(parentDocumentId);
    for (File file : parent.listFiles()) {
        // Adds the file&#39;s display name, MIME type, size, and so on.
        includeFile(result, null, file);
    }
    return result;
}
</pre>


<h3 id="queryDocument">Get document information</h3>

<p>Your implementation of
<code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#queryDocument(java.lang.String, java.lang.String[])">queryDocument()</a></code>
must return a <code><a href="https://developer.android.com/reference/android/database/Cursor.html?hl=zh-tw">Cursor</a></code> that points to the specified file,
using columns defined in <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw">DocumentsContract.Document</a></code>.
</p>

<p>The <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#queryDocument(java.lang.String, java.lang.String[])">queryDocument()</a></code>
method returns the same information that was passed in
<code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#queryChildDocuments(java.lang.String, java.lang.String[], android.os.Bundle)">queryChildDocuments()</a></code>,
but for a specific file:</p>


<pre>@Override
public Cursor queryDocument(String documentId, String[] projection) throws
        FileNotFoundException {

    // Create a cursor with the requested projection, or the default projection.
    final MatrixCursor result = new
            MatrixCursor(resolveDocumentProjection(projection));
    includeFile(result, documentId, null);
    return result;
}
</pre>

<p>
  Your document provider can also provide thumbnails for a document by
  overriding the
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#openDocumentThumbnail(java.lang.String, android.graphics.Point, android.os.CancellationSignal)">DocumentsProvider.openDocumentThumbnail()</a></code> method and adding the
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw#FLAG_SUPPORTS_THUMBNAIL">FLAG_SUPPORTS_THUMBNAIL</a></code>
  flag to the supported files.
  The following code snippet provides an example of how to implement the
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#openDocumentThumbnail(java.lang.String, android.graphics.Point, android.os.CancellationSignal)">DocumentsProvider.openDocumentThumbnail()</a></code>.
</p>

<pre>@Override
public AssetFileDescriptor openDocumentThumbnail(String documentId, Point sizeHint,
                                                     CancellationSignal signal)
        throws FileNotFoundException {

    final File file = getThumbnailFileForDocId(documentId);
    final ParcelFileDescriptor pfd =
        ParcelFileDescriptor.open(file, ParcelFileDescriptor.MODE_READ_ONLY);
    return new AssetFileDescriptor(pfd, 0, AssetFileDescriptor.UNKNOWN_LENGTH);
}
</pre>

<p class="caution"><strong>Caution</strong>:
  A document provider should not return thumbnail images more than double
  the size specified by the <code>sizeHint</code> parameter.
</p>


<h3 id="openDocument">Open a document</h3>

<p>You must implement <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#openDocument(java.lang.String, java.lang.String, android.os.CancellationSignal)">openDocument()</a></code> to return a <code><a href="https://developer.android.com/reference/android/os/ParcelFileDescriptor.html?hl=zh-tw">ParcelFileDescriptor</a></code> representing
the specified file. Other apps can use the returned <code><a href="https://developer.android.com/reference/android/os/ParcelFileDescriptor.html?hl=zh-tw">ParcelFileDescriptor</a></code>
to stream data. The system calls this method after the user selects a file,
and the client app requests access to it by calling
<code><a href="https://developer.android.com/reference/android/content/ContentResolver.html?hl=zh-tw#openFileDescriptor(android.net.Uri, java.lang.String)">openFileDescriptor()</a></code>.
For example:</p>

<pre>@Override
public ParcelFileDescriptor openDocument(final String documentId,
                                         final String mode,
                                         CancellationSignal signal) throws
        FileNotFoundException {
    Log.v(TAG, &quot;openDocument, mode: &quot; + mode);
    // It&#39;s OK to do network operations in this method to download the document,
    // as long as you periodically check the CancellationSignal. If you have an
    // extremely large file to transfer from the network, a better solution may
    // be pipes or sockets (see ParcelFileDescriptor for helper methods).

    final File file = getFileForDocId(documentId);
    final int accessMode = ParcelFileDescriptor.parseMode(mode);

    final boolean isWrite = (mode.indexOf(&#39;w&#39;) != -1);
    if(isWrite) {
        // Attach a close listener if the document is opened in write mode.
        try {
            Handler handler = new Handler(getContext().getMainLooper());
            return ParcelFileDescriptor.open(file, accessMode, handler,
                        new ParcelFileDescriptor.OnCloseListener() {
                @Override
                public void onClose(IOException e) {

                    // Update the file with the cloud server. The client is done
                    // writing.
                    Log.i(TAG, &quot;A file with id &quot; +
                    documentId + &quot; has been closed! Time to &quot; +
                    &quot;update the server.&quot;);
                }

            });
        } catch (IOException e) {
            throw new FileNotFoundException(&quot;Failed to open document with id&quot;
            + documentId + &quot; and mode &quot; + mode);
        }
    } else {
        return ParcelFileDescriptor.open(file, accessMode);
    }
}
</pre>

<p>
  If your document provider streams files or handles complicated
  data structures, consider implementing the
  <code><a href="https://developer.android.com/reference/android/os/ParcelFileDescriptor.html?hl=zh-tw#createReliablePipe()">createReliablePipe()</a></code>
  or
  <code><a href="https://developer.android.com/reference/android/os/ParcelFileDescriptor.html?hl=zh-tw#createReliableSocketPair()">createReliableSocketPair()</a></code> methods.
  Those methods allow you to create a pair of
  <code><a href="https://developer.android.com/reference/android/os/ParcelFileDescriptor.html?hl=zh-tw">ParcelFileDescriptor</a></code> objects, where you can return one
  and send the other via an
  <code><a href="https://developer.android.com/reference/android/os/ParcelFileDescriptor.AutoCloseOutputStream.html?hl=zh-tw">ParcelFileDescriptor.AutoCloseOutputStream</a></code>
  or
  <code><a href="https://developer.android.com/reference/android/os/ParcelFileDescriptor.AutoCloseInputStream.html?hl=zh-tw">ParcelFileDescriptor.AutoCloseInputStream</a></code>.
</p>


<h3 id="queryRecentDocuments">Support recent documents and search</h3>

<p>
  You can provide a list of recently modified documents under the root of your
  document provider by overriding the
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#queryRecentDocuments(java.lang.String, java.lang.String[])">queryRecentDocuments()</a></code> method and returning
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Root.html?hl=zh-tw#FLAG_SUPPORTS_RECENTS">FLAG_SUPPORTS_RECENTS</a></code>,
  The following code snippet shows an example of how to implement the
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#queryRecentDocuments(java.lang.String, java.lang.String[])">queryRecentDocuments()</a></code> methods.
</p>

<pre>@Override
public Cursor queryRecentDocuments(String rootId, String[] projection)
        throws FileNotFoundException {

    // This example implementation walks a
    // local file structure to find the most recently
    // modified files.  Other implementations might
    // include making a network call to query a
    // server.

    // Create a cursor with the requested projection, or the default projection.
    final MatrixCursor result =
        new MatrixCursor(resolveDocumentProjection(projection));

    final File parent = getFileForDocId(rootId);

    // Create a queue to store the most recent documents,
    // which orders by last modified.
    PriorityQueue&lt;File&gt; lastModifiedFiles =
        new PriorityQueue&lt;File&gt;(5, new Comparator&lt;File&gt;() {

        public int compare(File i, File j) {
            return Long.compare(i.lastModified(), j.lastModified());
        }
    });

    // Iterate through all files and directories
    // in the file structure under the root.  If
    // the file is more recent than the least
    // recently modified, add it to the queue,
    // limiting the number of results.
    final LinkedList&lt;File&gt; pending = new LinkedList&lt;File&gt;();

    // Start by adding the parent to the list of files to be processed
    pending.add(parent);

    // Do while we still have unexamined files
    while (!pending.isEmpty()) {
        // Take a file from the list of unprocessed files
        final File file = pending.removeFirst();
        if (file.isDirectory()) {
            // If it&#39;s a directory, add all its children to the unprocessed list
            Collections.addAll(pending, file.listFiles());
        } else {
            // If it&#39;s a file, add it to the ordered queue.
            lastModifiedFiles.add(file);
        }
    }

    // Add the most recent files to the cursor,
    // not exceeding the max number of results.
    for (int i = 0; i &lt; Math.min(MAX_LAST_MODIFIED + 1, lastModifiedFiles.size()); i++) {
        final File file = lastModifiedFiles.remove();
        includeFile(result, null, file);
    }
    return result;
}
</pre>

<p>
  You can get the complete code for the snippet above by downloading the
  <a href="https://github.com/googlesamples/android-StorageProvider">StorageProvider</a>
  code sample.
</p>


<h3 id="creating">Support document creation</h3>

<p>
  You can allow client apps to create files within your document provider.
  If a client app sends an <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=zh-tw#ACTION_CREATE_DOCUMENT">ACTION_CREATE_DOCUMENT</a></code>
  intent, your document provider can allow that client app to create
  new documents within the document provider.
</p>

<p>
  To support document creation, your root needs to have the
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Root.html?hl=zh-tw#FLAG_SUPPORTS_CREATE">FLAG_SUPPORTS_CREATE</a></code> flag.
  Directories that allow new files to be created within them need to have the
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw#FLAG_DIR_SUPPORTS_CREATE">FLAG_DIR_SUPPORTS_CREATE</a></code>
  flag.
</p>

<p>
  Your document provider also needs to implement the
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#createDocument(java.lang.String, java.lang.String, java.lang.String)">createDocument()</a></code> method. When a user selects a directory within your
  document provider to save a new file, the document provider receives a call to
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#createDocument(java.lang.String, java.lang.String, java.lang.String)">createDocument()</a></code>. Inside the implementation of the
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#createDocument(java.lang.String, java.lang.String, java.lang.String)">createDocument()</a></code> method, you return a new
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw#COLUMN_DOCUMENT_ID">COLUMN_DOCUMENT_ID</a></code> for the
  file. The client app can then use that ID to get a handle for the file
  and, ultimately, call
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#openDocument(java.lang.String, java.lang.String, android.os.CancellationSignal)">openDocument()</a></code> to write to the new file.
</p>

<p>
  The following code snippet demonstrates how to create a new file within
  a document provider.
</p>

<pre>
@Override
public String createDocument(String documentId, String mimeType, String displayName)
        throws FileNotFoundException {

    File parent = getFileForDocId(documentId);
    File file = new File(parent.getPath(), displayName);
    try {
        file.createNewFile();
        file.setWritable(true);
        file.setReadable(true);
    } catch (IOException e) {
        throw new FileNotFoundException(&quot;Failed to create document with name &quot; +
                displayName +&quot; and documentId &quot; + documentId);
    }
    return getDocIdForFile(file);
}
</pre>

<p>
  You can get the complete code for the snippet above by downloading the
  <a href="https://github.com/googlesamples/android-StorageProvider">StorageProvider</a>
  code sample.
</p>


<h3 id="browsing">Support document management features</h3>

<p>
  In addition to opening, creating, and viewing files, your document provider
  can also allow client apps the ability to rename, copy, move, and delete
  files. To add document management functionality to
  your document provider, add a flag to the document's
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw#COLUMN_FLAGS">COLUMN_FLAGS</a></code> column
  to indicate the supported functionality. You also need to implement
  the corresponding method of the <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw">DocumentsProvider</a></code>
  class.
</p>

<p>
  The following table provides the
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw#COLUMN_FLAGS">COLUMN_FLAGS</a></code> flag
  and <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw">DocumentsProvider</a></code> method that a documents
  provider needs to implement to expose specific features.
</p>

<table>
  <tr>
    <th>
      Feature
    </th>
    <th>
      Flag
    </th>
    <th>
      Method
    </th>
  </tr>
  <tr>
    <td>
      Delete a file
    </td>
    <td>
      <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw#FLAG_SUPPORTS_DELETE">FLAG_SUPPORTS_DELETE</a></code>
    </td>
    <td>
      <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#deleteDocument(java.lang.String)">deleteDocument()</a></code>
    </td>
  </tr>
  <tr>
    <td>
      Rename a file
    </td>
    <td>
      <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw#FLAG_SUPPORTS_RENAME">FLAG_SUPPORTS_RENAME</a></code>
    </td>
    <td>
      <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#renameDocument(java.lang.String, java.lang.String)">renameDocument()</a></code>
    </td>
  </tr>
  <tr>
    <td>
      Copy a file to a new parent directory within the document provider
    </td>
    <td>
      <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw#FLAG_SUPPORTS_COPY">FLAG_SUPPORTS_COPY</a></code>
    </td>
    <td>
      <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#copyDocument(java.lang.String, java.lang.String)">copyDocument()</a></code>
    </td>
  </tr>
  <tr>
  <tr>
    <td>
      Move a file from one directory to another within the document provider
    </td>
    <td>
      <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw#FLAG_SUPPORTS_MOVE">FLAG_SUPPORTS_MOVE</a></code>
    </td>
    <td>
      <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#moveDocument(java.lang.String, java.lang.String, java.lang.String)">moveDocument()</a></code>
    </td>
  </tr>
  <tr>
    <td>
      Remove a file from its parent directory
    </td>
    <td>
      <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw#FLAG_SUPPORTS_REMOVE">FLAG_SUPPORTS_REMOVE</a></code>
    </td>
    <td>
      <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#removeDocument(java.lang.String, java.lang.String)">removeDocument()</a></code>
    </td>
  </tr>
</table>


<h3 id="virtual files">Support virtual files and alternate file formats</h3>

<p>
  <a href="document-providerf854.html?hl=zh-tw#virtual">Virtual files</a>,
  a feature introduced in Android 7.0 (API level 24), allows document providers
  to provide viewing access to files that do not have a
  direct bytecode representation. To enable other apps to view virtual files,
  your document provider needs to produce an alternative openable file
  representation for the virtual files.
</p>

<p>
  For example, imagine a document provider contains a file
  format that other apps cannot directly open, essentially a virtual file.
  When a client app sends an <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=zh-tw#ACTION_VIEW">ACTION_VIEW</a></code> intent
  without the <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=zh-tw#CATEGORY_OPENABLE">CATEGORY_OPENABLE</a></code> category,
  then users can select these virtual files within the document provider
  for viewing. The document provider then returns the virtual file
  in a different, but openable, file format like an image.
  The client app can then open the virtual file for the user to view.
</p>

<p>
  To declare that a document in the provider is virtual, you need to add the
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=zh-tw#FLAG_VIRTUAL_DOCUMENT">FLAG_VIRTUAL_DOCUMENT</a></code>
  flag to the file returned by the
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#queryDocument(java.lang.String, java.lang.String[])">queryDocument()</a></code>
  method. This flag alerts client apps that the file does not have a direct
  bytecode representation and cannot be directly opened.
</p>

<p>
  If you declare that a file in your document provider is virtual,
  it is strongly recommended that you make it available in another
  MIME type like an image or a PDF. The document provider
  declares the alternate MIME types that it
  supports for viewing a virtual file by overriding the
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#getDocumentStreamTypes(java.lang.String, java.lang.String)">getDocumentStreamTypes()</a></code>
  method. When client apps call the
  <code><a href="https://developer.android.com/reference/android/content/ContentResolver.html?hl=zh-tw#getStreamTypes(android.net.Uri, java.lang.String)">getStreamTypes(android.net.Uri, java.lang.String)</a></code>
  method, the system calls the
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#getDocumentStreamTypes(java.lang.String, java.lang.String)">getDocumentStreamTypes()</a></code>
  method of the document provider. The
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#getDocumentStreamTypes(java.lang.String, java.lang.String)">getDocumentStreamTypes()</a></code>
  method then returns an array of alternate MIME types that the
  document provider supports for the file.
</p>

<p>
  After the client determines
  that the document provider can produce the document in a viewable file
  format, the client app calls the
  <code><a href="https://developer.android.com/reference/android/content/ContentResolver.html?hl=zh-tw#openTypedAssetFileDescriptor(android.net.Uri, java.lang.String, android.os.Bundle, android.os.CancellationSignal)">openTypedAssetFileDescriptor()</a></code>
  method, which internally calls the document provider's
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#openTypedDocument(java.lang.String, java.lang.String, android.os.Bundle, android.os.CancellationSignal)">openTypedDocument()</a></code>
  method. The document provider returns the file to the client app in
  the requested file format.
</p>

<p>
  The following code snippet demonstrates a simple implementation of the
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#getDocumentStreamTypes(java.lang.String, java.lang.String)">getDocumentStreamTypes()</a></code>
  and
  <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#openTypedDocument(java.lang.String, java.lang.String, android.os.Bundle, android.os.CancellationSignal)">openTypedDocument()</a></code>
  methods.
</p>

<pre>
public static String[] SUPPORTED_MIME_TYPES = {&quot;image/png&quot;, &quot;image/jpg&quot;};

@Override
public AssetFileDescriptor openTypedDocument(String documentId,
    String mimeTypeFilter,
    Bundle opts,
    CancellationSignal signal) {

    try {

        // Determine which supported MIME type the client app requested.
        if (&quot;image/png&quot;.equals(mimeTypeFilter) ||
            &quot;image/*&quot;.equals(mimeTypeFilter) ||
            &quot;*/*&quot;.equals(mimeTypeFilter)) {

            // Return the file in the specified format.
            return openPngDocument(documentId);

        } else if (&quot;image/jpg&quot;.equals(mimeTypeFilter)) {
            return openJpgDocument(documentId);
        } else {
            throw new IllegalArgumentException(&quot;Invalid mimeTypeFilter &quot; + mimeTypeFilter);
        }

    } catch (Exception ex) {
        Log.e(TAG, ex.getMessage());
    } finally {
        return null;
    }
}

@Override
public String[] getDocumentStreamTypes(String documentId, String mimeTypeFilter) {

    // Return all supported MIME tyupes if the client app
    // passes in &#39;*/*&#39; or &#39;image/*&#39;.
    if (&quot;*/*&quot;.equals(mimeTypeFilter) ||
        &quot;image/*&quot;.equals(mimeTypeFilter)) {
        return SUPPORTED_MIME_TYPES;
    }

    ArrayList&lt;String&gt; requestedMimeTypes = new ArrayList&lt;&gt;();

    // Iterate over the list of supported mime types to find a match.
    for (int i=0; i &lt; SUPPORTED_MIME_TYPES.length; i++) {
        if (SUPPORTED_MIME_TYPES[i].equals(mimeTypeFilter)) {
            requestedMimeTypes.add(SUPPORTED_MIME_TYPES[i]);
        }
    }
    return (String[])requestedMimeTypes.toArray();
}
</pre>


<h2 id="security">Security</h3>

<p>Suppose your document provider is a password-protected cloud storage service
and you want to make sure that users are logged in before you start sharing their files.
What should your app do if the user is not logged in?  The solution is to return
zero roots in your implementation of <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#queryRoots(java.lang.String[])">queryRoots()</a></code>. That is, an empty root cursor:</p>

<pre>
public Cursor queryRoots(String[] projection) throws FileNotFoundException {
...
    // If user is not logged in, return an empty root cursor.  This removes our
    // provider from the list entirely.
    if (!isUserLoggedIn()) {
        return result;
}
</pre>

<p>The other step is to call <code>getContentResolver().notifyChange()</code>.
Remember the <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.html?hl=zh-tw">DocumentsContract</a></code>?  We’re using it to make
this URI. The following snippet tells the system to query the roots of your
document provider whenever the user's login status changes. If the user is not
logged in, a call to <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=zh-tw#queryRoots(java.lang.String[])">queryRoots()</a></code> returns an
empty cursor, as shown above. This ensures that a provider's documents are only
available if the user is logged into the provider.</p>

<pre>private void onLoginButtonClick() {
    loginOrLogout();
    getContentResolver().notifyChange(DocumentsContract
            .buildRootsUri(AUTHORITY), null);
}
</pre>


    </div>

    

  
    
  
    



<div class="wrap">
  <footer class="dac-footer ">
    <div class="cols dac-footer-main">
      <div class="col-1of2">
        <div class="dac-footer-contact">
          <a class="dac-footer-contact-link" href="https://developer.android.com/newsletter/index.html?hl=zh-tw" title="Newsletter">Newsletter</a>
          <a class="dac-footer-contact-link" href="https://android-developers.blogspot.com/" title="網誌" target="_blank">網誌</a>
          <a class="dac-footer-contact-link" href="https://developer.android.com/support.html?hl=zh-tw" title="完備支援">完備支援</a>
        </div>
      </div>
      <div class="col-1of2 dac-footer-reachout">
        <div class="dac-footer-social">
          <a class="dac-button-social dac-youtube dac-footer-social-link" href="https://www.youtube.com/user/androiddevelopers" title="Android Developers on YouTube" target="_blank"><i class="dac-sprite dac-youtube"></i><span class="hide-text">Android Developers on YouTube</span></a>
          <a class="dac-button-social dac-gplus dac-footer-social-link" href="https://plus.google.com/+AndroidDevelopers" title="Android Developers on Google+" target="_blank"><i class="dac-sprite dac-gplus"></i><span class="hide-text">Android Developers on Google+</span></a>
          <a class="dac-button-social dac-twitter dac-footer-social-link" href="https://twitter.com/AndroidDev" title="Android Developers on Twitter" target="_blank"><i class="dac-sprite dac-twitter"></i><span class="hide-text">Android Developers on Twitter</span></a>
        </div>
      </div>
    </div>

    <hr class="dac-footer-separator"/>
      
      <p class="dac-footer-copyright">
        
        Except as noted, this content is licensed under <a href="http://creativecommons.org/licenses/by/2.5/" target="_blank">Creative Commons Attribution 2.5</a>. For details and restrictions, see the <a href="https://developer.android.com/license.html">Content License</a>.
      </p>
    

    <p class="dac-footer-links">
      <a href="https://www.android.com/" title="Android.com" target="_blank">Android.com</a>
      <a href="https://developer.android.com/?hl=zh-tw" title="Android Developers">Android Developers</a>
      <a href="https://developer.android.com/studio/index.html?hl=zh-tw" title="Android Studio">Android Studio</a>
      <a href="https://developer.android.com/distribute/console/index.html?hl=zh-tw" title="Google Play Console">Google Play Console</a>
      <a href="https://developer.android.com/legal.html?hl=zh-tw" title="Legal Notice">Legal Notice</a>
    </p>

    <!-- TODO(akassay) Update all DAC js to use the class instead of the id b/30368561 -->
    <form class="devsite-utility-footer-language" id="setlang" action="https://developer.android.com/i18n/setlang/" method="post">
      <input type="hidden" name="xsrf_token" value="a7_3gphTRBJJ3LpQcZv_XALRqKf3ozbniCw-MFX-wUo6MTQ5NzUxNjczNTM0MDIxMA" />
      <input type="hidden" name="next" value="create-document-provider.html">
      <span id="language" class="locales">
        <select class="devsite-utility-footer-language-select" name="language">
          
          <option value="id"
            >
            Bahasa Indonesia
          </option>
          
          <option value="de"
            >
            Deutsch
          </option>
          
          <option value="en"
            >
            English
          </option>
          
          <option value="es"
            >
            español
          </option>
          
          <option value="es-419"
            >
            Español (América Latina)
          </option>
          
          <option value="fr"
            >
            français
          </option>
          
          <option value="pt-br"
            >
            Português Brasileiro
          </option>
          
          <option value="vi"
            >
            Tiếng Việt
          </option>
          
          <option value="tr"
            >
            Türkçe
          </option>
          
          <option value="ru"
            >
            Русский
          </option>
          
          <option value="th"
            >
            ภาษาไทย
          </option>
          
          <option value="ja"
            >
            日本語
          </option>
          
          <option value="zh-cn"
            >
            简体中文
          </option>
          
          <option value="zh-tw"
             selected="selected" >
            繁體中文
          </option>
          
          <option value="ko"
            >
            한국어
          </option>
          
        </select>
      </span>
    </form>
  </footer>
</div><!--/.wrap -->

<div class="dac-toast-group">
  <div class="dac-toast" data-toast>
    <div class="dac-toast-wrap">
      This site uses cookies to store your preferences for site-specific language and display options.
    </div>
  </div>
</div>

<div data-modal="newsletter" data-newsletter-fb data-swap class="dac-modal newsletter">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <div class="dac-swap" data-swap-container>
          <section class="dac-swap-section dac-active dac-down">
            <h2 class="norule dac-modal-header-title" data-t="newsletter.title">Get the latest Android developer news and tips that will help you find success on Google Play.</h2>
            <p class="dac-modal-header-subtitle" data-t="newsletter.requiredHint">* Required Fields</p>
          </section>
          <section class="dac-swap-section dac-up">
            
            <h2 class="norule dac-modal-header-title" data-t="newsletter.successTitle">Hooray!</h2>
          </section>
        </div>
      </header>
      <div class="dac-swap" data-swap-container>
        <section class="dac-swap-section dac-active dac-left">
          <form action="https://services.google.com/fb/submissions/android-developer-mailing-list/" class="dac-form" method="post">
            <section class="dac-modal-content">
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-full-name" class="dac-form-floatlabel" data-t="newsletter.name">Full name</label>
                      <input type="text" class="dac-form-input" name="fullname" id="newsletter-full-name" required>
                      <span class="dac-form-required">*</span>
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-email" class="dac-form-floatlabel" data-t="newsletter.email">電子郵件地址</label>
                      <input type="email" class="dac-form-input" name="emailaddress" id="newsletter-email" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-company" class="dac-form-floatlabel" data-t="newsletter.company">Company / developer name</label>
                      <input type="text" class="dac-form-input" name="companydevelopername" id="newsletter-company">
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-play-store" class="dac-form-floatlabel" data-t="newsletter.appUrl">One of your Play Store app URLs</label>
                      <input type="url" class="dac-form-input" name="playstoreappurls" id="newsletter-play-store">
                    </div>
                  </div>
                </div>
              </fieldset>
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol newsletter-interested" data-validation-message="Please check at least one item.">
                    <legend class="dac-form-legend">What are you interested in?<span class="dac-form-required">*</span></legend>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-whats-new" value="whats-new">
                      <label for="interested-whats-new" class="dac-form-checkbox-button"></label>
                      <label for="interested-whats-new" class="dac-form-label">What's new</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-games-updates" value="games-updates">
                      <label for="interested-games-updates" class="dac-form-checkbox-button"></label>
                      <label for="interested-games-updates" class="dac-form-label">Games updates</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-android-development" value="android-development">
                      <label for="interested-android-development" class="dac-form-checkbox-button"></label>
                      <label for="interested-android-development" class="dac-form-label">Android development</label>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol newsletter-checkboxes">
                    <div class="dac-form-input-group">
                      <label for="newsletter-receive-in">Receive newsletter in</label>
                      <select name="language" class="dac-form-select" id="newsletter-receive-in">
                        <option value="en-US" selected>English</option>
                        <option value="ar">Arabic</option>
                        <option value="zh">Chinese (Simplified)</option>
                        <option value="zh-TW">Chinese (Traditional)</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="id">Indonesian (Bahasa)</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="pt-BR">Portuguese (Brazilian)</option>
                        <option value="ru">Russian</option>
                        <option value="es-419">Spanish (Latin American)</option>
                        <option value="th">Thai</option>
                        <option value="tr">Turkish</option>
                        <option value="vi">Vietnamese</option>
                      </select>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="marketingoptin" id="newsletter-add" required value="Add me to the mailing list.">
                          <label for="newsletter-add" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-add" class="dac-form-label dac-form-aside">
                            Add me to the mailing list.
                            <span class="dac-form-required">*</span>
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="privacystatement" id="newsletter-terms" required value="I acknowledge that the information provided in this form will be subject to Google's privacy policy (https://www.google.com/policies/privacy/).">
                          <label for="newsletter-terms" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-terms" class="dac-form-label dac-form-aside"><span data-t="newsletter.privacyPolicy" data-t-html>
                            
                            I acknowledge that the information provided in this form will be subject to <a href="https://www.google.com/policies/privacy/">Google's privacy policy</a>.
                          </span>
                          <span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fieldset>
            </section>
            <input type="hidden" name="referrer" value="dac">
            <footer class="dac-modal-footer">
              <div class="cols">
                <div class="col-2of5">
                </div>
              </div>
              <button type="submit" value="Submit" class="dac-fab dac-primary dac-large dac-modal-action"><i class="dac-sprite dac-arrow-right"></i></button>
            </footer>
          </form>
        </section>
        <section class="dac-swap-section dac-right">
          <div class="dac-modal-content">
            <p class="newsletter-success-message" data-t="newsletter.successDetails">
              You have successfully signed up for the latest Android developer news and tips.
            </p>
          </div>
        </section>
      </div>
    </div>
  </div>
</div><!--/.dac-modal.newsletter-->


<div data-modal="langform" class="dac-modal" id="langform">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            Browse this site in <span class="span-target-lang"></span>?
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <fieldset class="dac-form-fieldset">
              <div class="cols">
                <div class="col-2of2 langform-leftCol">
                  <p id="resetLangText">
                    You requested a page in <span class="span-target-lang"></span>, but your language preference for this site is <span class="span-current-lang"></span>.
                  </p>
                  <p id="resetLangCta">
                    Would you like to change your language preference and browse this site in <span class="span-target-lang"></span>? If you want to change your language preference later, use the language menu at the bottom of each page.
                  </p>
                </div>
              </div>
            </fieldset>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="yes" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang yes" data-t="newsletter.resetLangButtonYes" data-modal-toggle>
                Change Language
              </button>
            </a>
            <a href="#" class="" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang no" data-t="newsletter.resetLangButtonNo" data-modal-toggle>
                Not Now
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal-->


<div data-modal="api-unavailable" class="dac-modal" id="api-unavailable">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            This class requires API level <span class="api-level"></span> or higher
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <p>
              This doc is hidden because your selected API level for the documentation is <span class="api-level"></span>. You can change the documentation API level with the selector above the left navigation.
            </p>
            
            <p>For more information about specifying the API level your app requires, read <a href="https://developer.android.com/training/basics/supporting-devices/platforms.html">Supporting Different Platform Versions</a>.</p>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="ok" onclick="return false;">
              <button class="button dac-primary dac-modal-action ok"
              data-modal-toggle>
                OK, make this page visible
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal#api-unavailable-->

    
  </div><!--/#body-content-->

  <!-- Nav Setup -->
  <script>$('[data-dac-nav]').dacNav();</script>
  <script type="text/javascript">
    $('.slideshow-container').dacSlideshow({
        btnPrev: '.slideshow-prev',
        btnNext: '.slideshow-next',
        btnPause: '#pauseButton'
    });

    $(".feed").dacTabbedList({
      nav_id: '.feed-nav',
      frame_id: '.feed-frame'
    });
  </script>
  
  <script src="../../../ytblogger_lists_unified962f.js?hl=zh-tw?v=2017061508" defer></script>
  <script src="../../../android_metadata_en962f.js?hl=zh-tw?v=2017061508" defer></script>
  
  <script src="../../../reference/lists962f.js?hl=zh-tw?v=2017061508" defer></script>
  <script src="../../../reference/gms_lists962f.js?hl=zh-tw?v=2017061508" defer></script>
  <script src="../../../reference/android/support/wearable/lists962f.js?hl=zh-tw?v=2017061508" defer></script>
  <script src="../../../reference/android/support/test/lists962f.js?hl=zh-tw?v=2017061508" defer></script>
  <script src="../../../reference/android/support/constraint/lists962f.js?hl=zh-tw?v=2017061508" defer></script>
  <script src="https://developer.android.com/_static2/f304fc21fa/jsi18n/?hl=zh-tw"></script>
  <script>
    // Load localized metadata.
    (function(lang) {
      if (lang === 'en') { return; }
      document.write('<script src="https://developer.android.com/android_metadata_zh-tw.js?hl=zh-tw?v=2017061508" defer></' + 'script>');
    })(getLangPref())

    // Add skip to content for accessibility.
    $('#skip-to-main').click(function() {
      $('a[name=top]').focus();
    });

    $('.devsite-utility-footer-language-select').each(function() {
      $(this).change(function() {
        changeLangPref(this.value, true)
        $('.devsite-utility-footer-language').submit();
      });
    });
  </script>

  <script>
    (function($) {
      devsite.analytics.InitAnalytics();
    })(jQuery);
  </script>

  


<div id="survey-box-wrapper">
  <div class="material-dialog" style="width:270px">
    <div class="material-dialog-title">
      Take a one-minute survey?
    </div>
    <div class="material-dialog-description">
      Help us improve Android tools and documentation.
    </div>
    <div class="material-button-bar">
      <a class="dac-button dac-primary dac-raised" target="_blank"
          href="https://goo.gl/forms/kV7MoyD2dvcWkd5N2">Sure</a>
      <a class="dac-button" href="#">No thanks</a>
    </div>
  </div>
</div>

</body>

<!-- Mirrored from developer.android.com/guide/topics/providers/create-document-provider.html?hl=zh-tw by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:11:26 GMT -->
</html>

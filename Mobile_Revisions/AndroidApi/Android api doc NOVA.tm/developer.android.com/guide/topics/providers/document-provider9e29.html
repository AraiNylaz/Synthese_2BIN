





<!DOCTYPE html>
<html lang="ja">

<!-- Mirrored from developer.android.com/guide/topics/providers/document-provider.html?hl=ja by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:16:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

  



<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta content="IE=edge" http-equiv="X-UA-Compatible">





<script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script>

<meta charset="utf-8">



<meta name="xsrf_token" content="Br-zNIZpIZgB6VQWqrr_wCtO10DmVWoJU0QAadLghR86MTQ5NzUxNzExNDQ0OTk1MA" />

  
    <link rel="canonical" href="document-provider9e29.html?hl=ja">
  

  
    <link rel="alternate" href="document-provider7554.html?hl=es-419" hreflang="es-419">
  
    <link rel="alternate" href="document-provider.html" hreflang="en">
  
    <link rel="alternate" href="document-provider9e29.html?hl=ja" hreflang="ja">
  
    <link rel="alternate" href="document-provider9201.html?hl=ru" hreflang="ru">
  
    <link rel="alternate" href="document-provider327f.html?hl=vi" hreflang="vi">
  
    <link rel="alternate" href="document-provider0b8e.html?hl=zh-cn" hreflang="zh-Hans">
  
    <link rel="alternate" href="document-providerde3a.html?hl=es" hreflang="es">
  
    <link rel="alternate" href="document-providerf854.html?hl=zh-tw" hreflang="zh-Hant">
  
    <link rel="alternate" href="document-provider6dd3.html?hl=pt-br" hreflang="pt-br">
  
    <link rel="alternate" href="document-provider0cf2.html?hl=id" hreflang="id">
  
    <link rel="alternate" href="document-provider232e.html?hl=ko" hreflang="ko">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=es-419" hreflang="es-419-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html" hreflang="en-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=ja" hreflang="ja-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=ru" hreflang="ru-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=vi" hreflang="vi-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=zh-cn" hreflang="zh-Hans-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=es" hreflang="es-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=zh-tw" hreflang="zh-Hant-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=pt-br" hreflang="pt-br-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=id" hreflang="id-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/topics/providers/document-provider.html?hl=ko" hreflang="ko-cn">
  

  <link rel="alternate" href="document-provider.html" hreflang="x-default">




<link rel="shortcut icon" href="../../../_static/f304fc21fa/images/android/favicon9e29.png?hl=ja">

<link rel="apple-touch-icon" href="../../../_static/f304fc21fa/images/android/touchicon-1809e29.png?hl=ja">


<title>

  ストレージ アクセス フレームワーク | Android Developers

</title>

  <meta name="description" content="Android 4.4 (API level 19) introduces the Storage Access Framework (SAF). The SAF makes it simple for users to browse and open documents, images, and other files across all of their their preferred document storage providers. A standard, easy-to-use UI…">


<!-- STYLESHEETS -->
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto+Condensed">
<link rel="stylesheet"
    href="http://fonts.googleapis.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold"
    title="roboto">







<link href="../../../static/css/defaultdd52.css?hl=ja?v=2017061508" rel="stylesheet" type="text/css">
<!-- JAVASCRIPT -->
<script src="../../../_static/f304fc21fa/js/android_3p-bundle9e29.js?hl=ja" type="text/javascript"></script>
<script src="../../../_static/f304fc21fa/js/script_foot_closure_android__ja9e29.js?hl=ja"></script>
<script src="../../../_static/f304fc21fa/js/script_foot_android9e29.js?hl=ja"></script>

<script type="text/javascript">
  var toRoot = 'https://developer.android.com/';
  devsite.permissions.init({"039e5d84b87fd75807ffb37b7f1bbf2c": true, "098dafe57affddc137df300142652cfd": false, "cb025a64a50094835616312f4774a53d": true, "51470233c56fc1fde50f00b73c52b216": false, "752953480de00a336d911a46966cc16d": false, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true});

  var replaceBlog = false;
  var replaceYouTube = false;
  var siteDefaultLocale = 'en';

  var ANDROID_LANGUAGES = [
      'id','de','en','es','es-419','fr','pt-br','vi','tr','ru','th','ja','zh-cn','zh-tw','ko'
  ];
</script>
<script src="../../../static/js/docsdd52.js?hl=ja?v=2017061508" type="text/javascript"></script>


</head>

<body class="gc-documentation
            
            
              develop
              guide
            
            "
      itemscope itemtype="http://schema.org/Article">
  


  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;ja&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;ja&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-49880327-2&quot;}">
  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;ja&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;ja&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-5831155-1&quot;}">
  



  
  
    <script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "userCountry": "BE", "language": {"requested": "ja", "served": "ja"}, "projectName": "API Guides", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>
  



  
  <a href="#top" id="skip-to-main">Skip to content</a>
  <header id="header-wrapper">
    <div class="dac-header" id="header">
      <div class="dac-header-inner">
        <a class="dac-nav-toggle" data-dac-toggle-nav href="#" title="Open navigation">
          <span class="dac-nav-hamburger">
            <span class="dac-nav-hamburger-top"></span>
            <span class="dac-nav-hamburger-mid"></span>
            <span class="dac-nav-hamburger-bot"></span>
          </span>
        </a>
        
        <a class="dac-header-logo" href="https://developer.android.com/index.html?hl=ja">
          <img class="dac-header-logo-image" src="../../../static/images/android_logo9e29.png?hl=ja"
              srcset="https://developer.android.com/static/images/android_logo_2x.png 2x?hl=ja"
              width="32" height="36" alt="Android"> Developers</a>
        <ul class="dac-header-tabs">
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/design/index.html?hl=ja"
               zh-tw-lang="設計"
               zh-cn-lang="设计"
               ru-lang="Проектирование"
               ko-lang="디자인"
               ja-lang="設計"
               es-lang="Diseñar">Design</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/develop/index.html?hl=ja"
               zh-tw-lang="開發"
               zh-cn-lang="开发"
               ru-lang="Разработка"
               ko-lang="개발"
               ja-lang="開発"
               es-lang="Desarrollar">Develop</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/distribute/index.html?hl=ja"
               zh-tw-lang="發佈"
               zh-cn-lang="分发"
               ru-lang="Распространение"
               ko-lang="배포"
               ja-lang="配布"
               es-lang="Distribuir">Distribute</a>
          </li>
        </ul>


        

        <a class="dac-header-console-btn gc-analytics-event" href="https://play.google.com/apps/publish/"
           data-category="User" data-action="Console" data-label="Clicked">
          <img src="https://developer.android.com/static/images/developer-console-icon.svg?hl=ja" width="18" height="19" alt="Play コンソール">Play Console</a>

        

<form data-search="" class="dac-header-search">
  <button class="dac-header-search-close" data-search-close="">
    <i class="dac-sprite dac-back-arrow"></i>
  </button>

  <div class="dac-header-search-inner">
    <i class="dac-sprite dac-search-white dac-header-search-icon"></i>
    
    <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q" class="dac-header-search-input" placeholder="検索">
    <button class="dac-header-search-clear dac-hidden" data-search-clear="">
      <i class="dac-sprite dac-close-black"></i>
    </button>
  </div>
</form>

        
      </div><!--/.header-wrap.wrap-->
    </div><!--/.header-->

    

<div id="search-results" class="dac-search-results">
  <div id="dac-search-results-history" class="dac-search-results-history">
    <div class="wrap dac-search-results-history-wrap">
      <div class="cols">
        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Most visited</h2>
          <div class="resource-flow-layout" data-history-query="history:most/visited" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>

        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Recently visited</h2>
          <div class="resource-flow-layout cols" data-history-query="history:recent" data-allow-duplicates="true" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="dac-search-results-content" class="dac-search-results-content">
    <div class="dac-search-results-metadata wrap">
      <div class="dac-search-results-for">
        
          <h2>
          Results for <span id="search-results-for"></span>
          </h2>
      </div>

      <div id="dac-search-results-hero"></div>

      <div class="dac-search-results-hero cols">
        <div id="dac-search-results-reference" class="col-6of6 col-tablet-2of2 col-mobile-1of1">
          <div class="suggest-card reference no-display">
            <ul class="dac-search-results-reference">
            </ul>
          </div>
        </div>
      </div>

      <div class="cols dac-search-results-cse">
        <script src="../../../../cse.google.com/f4116.txt?cx=000521750095050289010:zpcpi1ea4s8" async></script>
        <gcse:searchresults-only linkTarget="_self"></gcse:searchresults-only>
      </div>
    </div>
  </div>
</div>

  </header>

  <a name="navigation" tabindex=0 class="nav-start-marker">navigation</a>
  <nav class="dac-nav">
    <div class="dac-nav-dimmer" data-dac-toggle-nav></div>
    <div class="dac-nav-sidebar" data-swap data-dynamic="false" data-transition-speed="300" data-dac-nav>
      <div data-swap-container>
        
        <a class="dac-nav-back-button dac-swap-section dac-up dac-no-anim" tabindex=0 data-swap-button>
          
          <i class="dac-sprite dac-nav-back"></i> <span class="dac-nav-back-title">戻る</span>
        </a>

        <div class="dac-nav-sub dac-swap-section dac-right dac-active" itemscope
            itemtype="http://schema.org/SiteNavigationElement">
          
          
            
            <ul id="nav">
              <li class="nav-section"><div class="nav-section-header"><a href="../../index9e29.html?hl=ja" >はじめに</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/fundamentals9e29.html?hl=ja" >アプリケーションの基礎</a></li><li><a href="../../practices/compatibility9e29.html?hl=ja" >端末の互換性</a></li><li><a href="../security/permissions9e29.html?hl=ja" >システム パーミッション</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../platform/index9e29.html?hl=ja" >プラットフォーム アーキテクチャ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../platform/j8-jack9e29.html?hl=ja"  es-lang="Funciones del lenguaje Java 8" in-lang="Fitur Bahasa Java 8" ja-lang="Java 8 の機能" ko-lang="Java 8 언어 기능" pt-br-lang="Recursos de linguagem do Java 8" ru-lang="Возможности языка Java 8" vi-lang="Tính năng của Ngôn ngữ Java 8" zh-cn-lang="Java 8 语言功能" zh-tw-lang="Java 8 語言功能">Java 8 の言語機能を使う</a></li><li><a href="../../practices/verifying-apps-art9e29.html?hl=ja" >Android ランタイム（ART）でのアプリの動作確認</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/index9e29.html?hl=ja" >アプリのコンポーネント</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../../components/intents-filters9e29.html?hl=ja" >インテントとインテント フィルタ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/intents-common9e29.html?hl=ja" >一般的なインテント</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/activities9e29.html?hl=ja" >アクティビティ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/fragments9e29.html?hl=ja" >フラグメント</a></li><li><a href="../../components/loaders9e29.html?hl=ja" >ローダ</a></li><li><a href="../../components/tasks-and-back-stack9e29.html?hl=ja" >タスクとバックスタック</a></li><li><a href="../../components/recents9e29.html?hl=ja" >オーバービュー画面</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../components/services9e29.html?hl=ja" >サービス</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../components/bound-services9e29.html?hl=ja" >バインドされたサービス</a></li><li><a href="../../components/aidl9e29.html?hl=ja" >AIDL</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="content-providers9e29.html?hl=ja" >コンテンツ プロバイダ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="content-provider-basics9e29.html?hl=ja" >コンテンツ プロバイダの基本</a></li><li><a href="content-provider-creating9e29.html?hl=ja" >コンテンツ プロバイダの作成</a></li><li><a href="calendar-provider9e29.html?hl=ja" >カレンダー プロバイダ</a></li><li><a href="contacts-provider9e29.html?hl=ja" >連絡先プロバイダ</a></li><li><a href="document-provider9e29.html?hl=ja" >ストレージ アクセス フレームワーク</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../appwidgets/index9e29.html?hl=ja" >アプリ ウィジェット</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../appwidgets/host9e29.html?hl=ja" >アプリ ウィジェットのホスト</a></li></ul></li><li><a href="../../components/processes-and-threads9e29.html?hl=ja" >プロセスとスレッド</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/index9e29.html?hl=ja" >アプリのリソース</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/overview9e29.html?hl=ja" >リソースの概要</a></li><li><a href="../resources/providing-resources9e29.html?hl=ja" >リソースの提供</a></li><li><a href="../resources/accessing-resources9e29.html?hl=ja" >リソースへのアクセス</a></li><li><a href="../resources/runtime-changes9e29.html?hl=ja" >実行時の変更の処理</a></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/localization9e29.html?hl=ja" >ローカライズ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/icu4j-framework9e29.html?hl=ja" >ICU4J Android Framework API</a></li><li><a href="../resources/multilingual-support9e29.html?hl=ja" >言語とロケール</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../resources/available-resources9e29.html?hl=ja" >リソースのタイプ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../resources/animation-resource9e29.html?hl=ja" >アニメーション</a></li><li><a href="../resources/color-list-resource9e29.html?hl=ja" >色状態リスト</a></li><li><a href="../resources/drawable-resource9e29.html?hl=ja" >ドローアブル</a></li><li><a href="../resources/layout-resource9e29.html?hl=ja" >レイアウト</a></li><li><a href="../resources/menu-resource9e29.html?hl=ja" >メニュー</a></li><li><a href="../resources/string-resource9e29.html?hl=ja" >文字列</a></li><li><a href="../resources/style-resource9e29.html?hl=ja" >スタイル</a></li><li><a href="../resources/more-resources9e29.html?hl=ja" >その他のタイプ</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../manifest/manifest-intro9e29.html?hl=ja" >アプリ マニフェスト</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../manifest/action-element9e29.html?hl=ja" >&lt;action&gt;</a></li><li><a href="../manifest/activity-element9e29.html?hl=ja" >&lt;activity&gt;</a></li><li><a href="../manifest/activity-alias-element9e29.html?hl=ja" >&lt;activity-alias&gt;</a></li><li><a href="../manifest/application-element9e29.html?hl=ja" >&lt;application&gt;</a></li><li><a href="../manifest/category-element9e29.html?hl=ja" >&lt;category&gt;</a></li><li><a href="../manifest/compatible-screens-element9e29.html?hl=ja" >&lt;compatible-screens&gt;</a></li><li><a href="../manifest/data-element9e29.html?hl=ja" >&lt;data&gt;</a></li><li><a href="../manifest/grant-uri-permission-element9e29.html?hl=ja" >&lt;grant-uri-permission&gt;</a></li><li><a href="../manifest/instrumentation-element9e29.html?hl=ja" >&lt;instrumentation&gt;</a></li><li><a href="../manifest/intent-filter-element9e29.html?hl=ja" >&lt;intent-filter&gt;</a></li><li><a href="../manifest/manifest-element9e29.html?hl=ja" >&lt;manifest&gt;</a></li><li><a href="../manifest/meta-data-element9e29.html?hl=ja" >&lt;meta-data&gt;</a></li><li><a href="../manifest/path-permission-element9e29.html?hl=ja" >&lt;path-permission&gt;</a></li><li><a href="../manifest/permission-element9e29.html?hl=ja" >&lt;permission&gt;</a></li><li><a href="../manifest/permission-group-element9e29.html?hl=ja" >&lt;permission-group&gt;</a></li><li><a href="../manifest/permission-tree-element9e29.html?hl=ja" >&lt;permission-tree&gt;</a></li><li><a href="../manifest/provider-element9e29.html?hl=ja" >&lt;provider&gt;</a></li><li><a href="../manifest/receiver-element9e29.html?hl=ja" >&lt;receiver&gt;</a></li><li><a href="../manifest/service-element9e29.html?hl=ja" >&lt;service&gt;</a></li><li><a href="../manifest/supports-gl-texture-element9e29.html?hl=ja" >&lt;supports-gl-texture&gt;</a></li><li><a href="../manifest/supports-screens-element9e29.html?hl=ja" >&lt;supports-screens&gt;</a></li><li><a href="../manifest/uses-configuration-element9e29.html?hl=ja" >&lt;uses-configuration&gt;</a></li><li><a href="../manifest/uses-feature-element9e29.html?hl=ja" >&lt;uses-feature&gt;</a></li><li><a href="../manifest/uses-library-element9e29.html?hl=ja" >&lt;uses-library&gt;</a></li><li><a href="../manifest/uses-permission-element9e29.html?hl=ja" >&lt;uses-permission&gt;</a></li><li><a href="../manifest/uses-permission-sdk-23-element9e29.html?hl=ja" >&lt;uses-permission-sdk-23&gt;</a></li><li><a href="../manifest/uses-sdk-element9e29.html?hl=ja" >&lt;uses-sdk&gt;</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../ui/index9e29.html?hl=ja" >ユーザー インターフェース</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../ui/overview9e29.html?hl=ja" >UI の概要</a></li><li class="nav-section"><div class="nav-section-header"><a href="../ui/declaring-layout9e29.html?hl=ja" >レイアウト</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../ui/layout/linear9e29.html?hl=ja" >線形レイアウト</a></li><li><a href="../ui/layout/relative9e29.html?hl=ja" >相対レイアウト</a></li><li><a href="../ui/layout/listview9e29.html?hl=ja" >リストビュー</a></li><li><a href="../ui/layout/gridview9e29.html?hl=ja" >グリッドビュー</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../ui/controls9e29.html?hl=ja" >入力コントロール</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../ui/controls/button9e29.html?hl=ja" >ボタン</a></li><li><a href="https://developer.android.com/training/keyboard-input/style.html?hl=ja" >テキスト フィールド</a></li><li><a href="../ui/controls/checkbox9e29.html?hl=ja" >チェックボックス</a></li><li><a href="../ui/controls/radiobutton9e29.html?hl=ja" >ラジオボタン</a></li><li><a href="../ui/controls/togglebutton9e29.html?hl=ja" >切り替えボタン</a></li><li><a href="../ui/controls/spinner9e29.html?hl=ja" >スピナー</a></li><li><a href="../ui/controls/pickers9e29.html?hl=ja" >ピッカー</a></li></ul></li><li><a href="../ui/ui-events9e29.html?hl=ja" >入力イベント</a></li><li><a href="../ui/menus9e29.html?hl=ja" >メニュー</a></li><li><a href="../ui/settings9e29.html?hl=ja" >設定</a></li><li><a href="../ui/dialogs9e29.html?hl=ja" >ダイアログ</a></li><li><a href="../ui/notifiers/notifications9e29.html?hl=ja" >通知</a></li><li><a href="../ui/notifiers/toasts9e29.html?hl=ja" >トースト</a></li><li class="nav-section"><div class="nav-section-header"><a href="../search/index9e29.html?hl=ja" >検索</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../search/search-dialog9e29.html?hl=ja" >検索インターフェースの作成</a></li><li><a href="../search/adding-recent-query-suggestions9e29.html?hl=ja" >検索候補の表示の追加</a></li><li><a href="../search/adding-custom-suggestions9e29.html?hl=ja" >カスタム候補の追加</a></li><li><a href="../search/searchable-config9e29.html?hl=ja" >検索可能な設定</a></li></ul></li><li><a href="../ui/multi-window9e29.html?hl=ja" >マルチ ウィンドウのサポート</a></li><li><a href="../ui/drag-drop9e29.html?hl=ja" >ドラッグ＆ドロップ</a></li><li class="nav-section"><div class="nav-section-header"><a href="../ui/accessibility/index9e29.html?hl=ja" >ユーザー補助機能</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../ui/accessibility/apps9e29.html?hl=ja" >ユーザー補助機能に対応</a></li><li><a href="../ui/accessibility/checklist9e29.html?hl=ja" >ユーザー補助機能のデベロッパー チェックリスト</a></li><li><a href="../ui/accessibility/services9e29.html?hl=ja" >ユーザー補助機能サービスの作成</a></li></ul></li><li><a href="../ui/themes9e29.html?hl=ja" >スタイルとテーマ</a></li><li><a href="../ui/custom-components9e29.html?hl=ja" >カスタム コンポーネント</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../graphics/index9e29.html?hl=ja" >アニメーションとグラフィック</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../graphics/overview9e29.html?hl=ja" >アニメーションとグラフィックの概要</a></li><li><a href="../graphics/prop-animation9e29.html?hl=ja" >プロパティ アニメーション</a></li><li><a href="../graphics/view-animation9e29.html?hl=ja" >ビュー アニメーション</a></li><li><a href="../graphics/drawable-animation9e29.html?hl=ja" >ドローアブル アニメーション</a></li><li><a href="../graphics/2d-graphics9e29.html?hl=ja" >キャンバスとドローアブル</a></li><li><a href="../graphics/opengl9e29.html?hl=ja" >OpenGL ES</a></li><li><a href="../graphics/hardware-accel9e29.html?hl=ja" >ハードウェア アクセラレーション</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../renderscript/index9e29.html?hl=ja" >演算処理</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../renderscript/compute9e29.html?hl=ja" >RenderScript</a></li><li><a href="../renderscript/advanced9e29.html?hl=ja" >高度な RenderScript</a></li><li class="nav-section"><div class="nav-section-header"><a href="../renderscript/reference/overview9e29.html?hl=ja" >ランタイム API リファレンス</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../renderscript/reference/rs_value_types9e29.html?hl=ja" >数値型</a></li><li><a href="../renderscript/reference/rs_object_types9e29.html?hl=ja" >オブジェクト型</a></li><li><a href="../renderscript/reference/rs_convert9e29.html?hl=ja" >変換関数</a></li><li><a href="../renderscript/reference/rs_math9e29.html?hl=ja" >数学定数と数学関数</a></li><li><a href="../renderscript/reference/rs_vector_math9e29.html?hl=ja" >ベクター数学関数</a></li><li><a href="../renderscript/reference/rs_matrix9e29.html?hl=ja" >行列関数</a></li><li><a href="../renderscript/reference/rs_quaternion9e29.html?hl=ja" >四元数関数</a></li><li><a href="../renderscript/reference/rs_atomic9e29.html?hl=ja" >アトミック更新関数</a></li><li><a href="../renderscript/reference/rs_time9e29.html?hl=ja" >時間関数と時間型</a></li><li><a href="../renderscript/reference/rs_allocation_data9e29.html?hl=ja" >アロケーション データ アクセス関数</a></li><li><a href="../renderscript/reference/rs_object_info9e29.html?hl=ja" >オブジェクト特性関数</a></li><li><a href="../renderscript/reference/rs_for_each9e29.html?hl=ja" >カーネル呼び出し関数とカーネル呼び出し型</a></li><li><a href="../renderscript/reference/rs_io9e29.html?hl=ja" >入出力関数</a></li><li><a href="../renderscript/reference/rs_debug9e29.html?hl=ja" >デバッグ関数</a></li><li><a href="../renderscript/reference/rs_graphics9e29.html?hl=ja" >グラフィック関数とグラフィック型</a></li><li><a href="../renderscript/reference/index9e29.html?hl=ja" >インデックス</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../media/index9e29.html?hl=ja" >メディアとカメラ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../media/mediaplayer9e29.html?hl=ja" >メディア再生</a></li><li><a href="../media/mediarouter9e29.html?hl=ja" >メディア ルーター</a></li><li><a href="../media/mediarouteprovider9e29.html?hl=ja" >メディア ルーター プロバイダ</a></li><li><a href="../media/exoplayer9e29.html?hl=ja" >ExoPlayer</a></li><li><a href="../media/media-formats9e29.html?hl=ja" >サポートされているメディア形式</a></li><li><a href="../media/mediarecorder9e29.html?hl=ja" >オーディオの録音</a></li><li><a href="../media/jetplayer9e29.html?hl=ja" >JetPlayer</a></li><li><a href="../media/camera9e29.html?hl=ja" >カメラ</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../sensors/index9e29.html?hl=ja" >位置情報とセンサー</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../location/index9e29.html?hl=ja" >位置情報と地図</a></li><li><a href="../location/strategies9e29.html?hl=ja" >位置情報に関する戦略</a></li><li><a href="../sensors/sensors_overview9e29.html?hl=ja" >センサーの概要</a></li><li><a href="../sensors/sensors_motion9e29.html?hl=ja" >モーション センサー</a></li><li><a href="../sensors/sensors_position9e29.html?hl=ja" >位置センサー</a></li><li><a href="../sensors/sensors_environment9e29.html?hl=ja" >環境センサー</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/index9e29.html?hl=ja" >ネットワーク接続</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/bluetooth9e29.html?hl=ja" >Bluetooth</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/bluetooth-le9e29.html?hl=ja" >Bluetooth Low Energy</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/nfc/index9e29.html?hl=ja" >NFC</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/nfc/nfc9e29.html?hl=ja" >NFC の基本</a></li><li><a href="../connectivity/nfc/advanced-nfc9e29.html?hl=ja" >NFC の高度な利用</a></li><li><a href="../connectivity/nfc/hce9e29.html?hl=ja" >ホストベースのカード エミュレーション</a></li></ul></li><li><a href="../connectivity/wifip2p9e29.html?hl=ja" >Wi-Fi P2P</a></li><li class="nav-section"><div class="nav-section-header"><a href="../connectivity/usb/index9e29.html?hl=ja" >USB</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../connectivity/usb/accessory9e29.html?hl=ja" >アクセサリ</a></li><li><a href="../connectivity/usb/host9e29.html?hl=ja" >ホスト</a></li></ul></li><li><a href="../connectivity/sip9e29.html?hl=ja" >SIP</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../text/index9e29.html?hl=ja" >テキストと入力</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../text/copy-paste9e29.html?hl=ja" >コピーとペースト</a></li><li><a href="../text/creating-input-method9e29.html?hl=ja" >IME の作成</a></li><li><a href="../text/spell-checker-framework9e29.html?hl=ja" >スペル チェッカー</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../data/index9e29.html?hl=ja" >データ ストレージ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../data/data-storage9e29.html?hl=ja" >ストレージ オプション</a></li><li><a href="../data/backup9e29.html?hl=ja" >データのバックアップ</a></li><li><a href="../data/install-location9e29.html?hl=ja" >アプリのインストール場所</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/topic/libraries/index.html?hl=ja" >ライブラリ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/topic/libraries/support-library/index.html?hl=ja" >Support Library</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="https://developer.android.com/topic/libraries/support-library/features.html?hl=ja" >機能</a></li><li><a href="https://developer.android.com/topic/libraries/support-library/setup.html?hl=ja" >セットアップ</a></li><li><a href="https://developer.android.com/topic/libraries/support-library/revisions.html?hl=ja" >変更履歴</a></li></ul></li><li><a href="https://developer.android.com/topic/libraries/data-binding/index.html?hl=ja" >データ バインディング ライブラリ</a></li><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/topic/libraries/testing-support-library/index.html?hl=ja" >Testing Support Library</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="https://developer.android.com/reference/android/support/test/package-summary.html?hl=ja" >API リファレンス</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../admin/index9e29.html?hl=ja" >管理</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../admin/device-admin9e29.html?hl=ja" >端末ポリシー</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../webapps/index9e29.html?hl=ja" >ウェブアプリ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../webapps/targeting9e29.html?hl=ja" >ウェブアプリでの異なる画面のサポート</a></li><li><a href="../../webapps/webview9e29.html?hl=ja" >WebView によるウェブアプリの作成</a></li><li><a href="../../webapps/migrating9e29.html?hl=ja" >Android 4.4 での WebView への移行</a></li><li><a href="../../webapps/debugging9e29.html?hl=ja" >ウェブアプリのデバッグ</a></li><li><a href="../../webapps/best-practices9e29.html?hl=ja" >ウェブアプリのベスト プラクティス</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../../practices/index9e29.html?hl=ja"  de-lang="Bewährte Verfahren" es-lang="Prácticas recomendadas" fr-lang="Meilleures pratiques" it-lang="Best practice" ja-lang="ベスト プラクティス" zh-cn-lang="最佳实践" zh-tw-lang="最佳實務">ベスト プラクティス</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../../practices/screens_support9e29.html?hl=ja" >複数の画面のサポート</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../../practices/screens-distribution9e29.html?hl=ja" >特定の画面の端末にのみ配布</a></li><li><a href="../../practices/screen-compat-mode9e29.html?hl=ja" >画面互換性モード</a></li></ul></li><li><a href="../../practices/tablets-and-handsets9e29.html?hl=ja" >タブレットとハンドセットのサポート</a></li></ul></li>
            </ul>
            
          
        </div>
        
        
          



<ul id="dac-main-navigation" class="dac-nav-list dac-swap-section dac-left dac-no-anim" tabindex=0>
  <li class="dac-nav-item home">
    <a class="dac-nav-link" href="https://developer.android.com/index.html?hl=ja">ホーム</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary about">
      <li class="dac-nav-item versions">
        <a class="dac-nav-link" href="https://developer.android.com/about/versions/nougat/index.html?hl=ja">Android</a>
      </li>
      <li class="dac-nav-item wear">
        <a class="dac-nav-link" href="https://developer.android.com/wear/index.html?hl=ja">Wear</a>
      </li>
      <li class="dac-nav-item tv">
        <a class="dac-nav-link" href="https://developer.android.com/tv/index.html?hl=ja">TV</a>
      </li>
      <li class="dac-nav-item auto">
        <a class="dac-nav-link" href="https://developer.android.com/auto/index.html?hl=ja">Auto</a>
      </li>
      <li class="dac-nav-item things">
        <a class="dac-nav-link" href="https://developer.android.com/things/index.html?hl=ja">Things</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item design">
    <a class="dac-nav-link" href="https://developer.android.com/design/index.html?hl=ja"
       zh-tw-lang="設計"
       zh-cn-lang="设计"
       ru-lang="Проектирование"
       ko-lang="디자인"
       ja-lang="設計"
       es-lang="Diseñar">Design</a>
  </li>
  <li class="dac-nav-item develop">
    <a class="dac-nav-link" href="https://developer.android.com/develop/index.html?hl=ja"
       zh-tw-lang="開發"
       zh-cn-lang="开发"
       ru-lang="Разработка"
       ko-lang="개발"
       ja-lang="開発"
       es-lang="Desarrollar">Develop</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary develop">
      <li class="dac-nav-item training">
        <a class="dac-nav-link" href="https://developer.android.com/training/index.html?hl=ja"
           zh-tw-lang="訓練課程"
           zh-cn-lang="培训"
           ru-lang="Курсы"
           ko-lang="교육"
           ja-lang="トレーニング"
           es-lang="Capacitación">トレーニング</a>
      </li>
      <li class="dac-nav-item guide">
        <a class="dac-nav-link" href="../../index9e29.html?hl=ja"
           zh-tw-lang="API 指南"
           zh-cn-lang="API 指南"
           ru-lang="Руководства по API"
           ko-lang="API 가이드"
           ja-lang="API ガイド"
           es-lang="Guías de la API">API Guides</a>
      </li>
      <li class="dac-nav-item reference">
        <a class="dac-nav-link" href="https://developer.android.com/reference/packages.html?hl=ja"
           zh-tw-lang="參考資源"
           zh-cn-lang="参考"
           ru-lang="Справочник"
           ko-lang="참조문서"
           ja-lang="リファレンス"
           es-lang="Referencia">リファレンス</a>
      </li>
      <li class="dac-nav-item samples">
        <a class="dac-nav-link" href="https://developer.android.com/samples/index.html?hl=ja">サンプル</a>
      </li>
      <li class="dac-nav-item libraries">
        <a class="dac-nav-link" href="https://developer.android.com/topic/libraries/index.html?hl=ja"
           >ライブラリ</a></li>
      <li class="dac-nav-item studio">
        <a class="dac-nav-link" href="https://developer.android.com/studio/index.html?hl=ja"
           >Android Studio</a></li>
      <li class="dac-nav-item ndk">
        <a class="dac-nav-link" href="https://developer.android.com/ndk/index.html?hl=ja"
           >Android NDK</a></li>
      <li class="dac-nav-item google">
        <a class="dac-nav-link" href="https://developer.android.com/google/index.html?hl=ja">Google Services</a>
      </li>
      <li class="dac-nav-item quality-guidelines">
        <a class="dac-nav-link" href="https://developer.android.com/develop/quality-guidelines/index.html?hl=ja">Quality Guidelines</a>
      </li>
      <li class="dac-nav-item kotlin">
        <a class="dac-nav-link" href="https://developer.android.com/kotlin/index.html?hl=ja">Kotlin</a>
       </li>
    </ul>
  </li>
  <li class="dac-nav-item distribute">
    <a class="dac-nav-link" href="https://developer.android.com/distribute/index.html?hl=ja"
       zh-tw-lang="發佈"
       zh-cn-lang="分发"
       ru-lang="Распространение"
       ko-lang="배포"
       ja-lang="配布"
       de-lang="Vertrieb"
       es-lang="Distribuir"
       es-419-lang="Distribuye"
       fr-lang="Distribuer"
       id-lang="Distribusikan"
       pt-br-lang="Distribuição"
       th-lang="จัดจำหน่าย"
       tr-lang="Dağıtma"
       vi-lang="Phân phối">Distribute</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary distribute">
      <li class="dac-nav-item google-play">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/google-play/index.html?hl=ja">Google Play</a>
      </li>
      <li class="dac-nav-item console">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/console/index.html?hl=ja">Play コンソール</a>
      </li>
      <li class="dac-nav-item best-practices">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/best-practices/index.html?hl=ja"
          es-419-lang="Recomendaciones"
          fr-lang="Bonnes pratiques"
          id-lang="Praktik terbaik"
          ja-lang="おすすめの方法"
          ko-lang="권장사항"
          pt-br-lang="Práticas recomendadas"
          ru-lang="Рекомендации"
          th-lang="จัดจำหน่าย"
          tr-lang="En iyi uygulamalar"
          vi-lang="Các phương pháp hay nhất"
          zh-cn-lang="最佳做法"
          zh-tw-lang="最佳做法">Best practices</a>
      </li>
      <li class="dac-nav-item marketing-tools">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/marketing-tools/index.html?hl=ja"
          de-lang="Marketing-Tools"
          es-419-lang="Herramientas de marketing"
          fr-lang="Outils marketing"
          id-lang="Fitur pemasaran"
          ja-lang="マーケティング ツール"
          ko-lang="마케팅 도구"
          pt-br-lang="Ferramentas de marketing"
          ru-lang="Маркетинговые инструменты"
          th-lang="เครื่องมือการตลาด"
          tr-lang="Pazarlama araçları"
          vi-lang="Công cụ tiếp thị"
          zh-cn-lang="营销工具"
          zh-tw-lang="行銷工具">Marketing tools</a>
      </li>
      <li class="dac-nav-item policy-center">
        <a class="dac-nav-link" href="https://play.google.com/about/developer-content-policy/" target="_blank">Policy center</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item stories">
    <a class="dac-nav-link" href="https://developer.android.com/stories/index.html?hl=ja">Stories</a>
  </li>
  
  <li class="dac-nav-item preview">
    <a class="dac-nav-link" href="https://developer.android.com/preview/index.html?hl=ja">Preview</a>
  </li>
  
</ul>

        
      </div>
    </div>
  </nav>

  <a name="top" tabindex="0"></a>
  
  <div class="wrap clearfix" id="body-content">
  
    
      
      <div class="content-header">
        <ul class="dac-header-crumbs"></ul>
        <!-- Breadcrumb Setup -->
        <script>$('.dac-nav-list').dacCurrentPage().dacCrumbs();</script>
        <h1 itemprop="name">ストレージ アクセス フレームワーク</h1>
      
        
      
      </div>
      
    
    <div class="jd-descr " itemprop="articleBody">
      

<div id="qv-wrapper">
<div id="qv">

<h2>このドキュメントの内容
 <a href="#" onclick="hideNestedItems('#toc44',this);return false;" class="header-toggle">
        <span class="more">詳細を表示</span>
        <span class="less" style="display:none">詳細を非表示</span></a></h2>
<ol id="toc44" class="hide-nested">
    <li>
        <a href="#overview">概要</a>
    </li>
    <li>
        <a href="#flow">コントロール フロー</a>
    </li>
    <li>
        <a href="#client">クライアント アプリを作成する</a>
        <ol>
        <li><a href="#search">ドキュメントを検索する</a></li>
        <li><a href="#process">プロセスの結果</a></li>
        <li><a href="#metadata">ドキュメント メタデータを確認する</a></li>
        <li><a href="#open">ドキュメントを開く</a></li>
        <li><a href="#create">新しいドキュメントを作成する</a></li>
        <li><a href="#delete">ドキュメントを削除する</a></li>
        <li><a href="#edit">ドキュメントを編集する</a></li>
        <li><a href="#permissions">パーミッションを固定する</a></li>
        </ol>
    </li>
    <li><a href="#custom">カスタム ドキュメント プロバイダを作成する</a>
        <ol>
        <li><a href="#manifest">マニフェスト</a></li>
        <li><a href="#contract">コントラクト</a></li>
        <li><a href="#subclass">サブクラス DocumentsProvider</a></li>
        <li><a href="#security">セキュリティ</a></li>
        </ol>
    </li>

</ol>
<h2>キークラス</h2>
<ol>
    <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja">DocumentsProvider</a></code></li>
    <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.html?hl=ja">DocumentsContract</a></code></li>
</ol>

<h2>ビデオ</h2>

<ol>
    <li><a href="http://www.youtube.com/watch?v=zxHVeXbK1P4&amp;hl=ja">
DevBytes: Android 4.4 ストレージ アクセス フレームワーク: プロバイダ</a></li>
     <li><a href="http://www.youtube.com/watch?v=UFj9AEz0DHQ&amp;hl=ja">
DevBytes: Android 4.4 ストレージ アクセス フレームワーク: クライアント</a></li>
</ol>


<h2>コードサンプル</h2>

<ol>
    <li><a href="https://developer.android.com/samples/StorageProvider/index.html?hl=ja">
StorageProvider</a></li>
     <li><a href="https://developer.android.com/samples/StorageClient/index.html?hl=ja">
StorageClient</a></li>
</ol>

<h2>関連ドキュメント</h2>
<ol>
    <li>
        <a href="content-provider-basics9e29.html?hl=ja">        コンテンツ プロバイダの基本        </a>


    </li>
</ol>

</div>
</div>


<p>Android 4.4 （API レベル 19）は、ストレージ アクセス フレームワーク（SAF）を採用しています。SAF を利用することで、ユーザーは設定したドキュメント ストレージ プロバイダ全体から簡単にドキュメント、画像、その他のファイルを参照して開くことができます。

標準の使いやすい UI により、アプリやプロバイダを通じて一貫性のある方法でファイルを参照したり、最近使用したファイルにアクセスしたりできます。
</p>

<p>サービスをカプセル化する <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja">DocumentsProvider</a></code> を実装することで、クラウドやローカル ストレージ サービスをエコシステムに参加させることができます。
プロバイダのドキュメントへのアクセスが必要なクライアントも、数行のコードだけで SAF と統合できます。

</p>

<p>SAF には次の項目が含まれます。</p>

<ul>
<li><strong>ドキュメント プロバイダ</strong>&mdash;ストレージ サービス（Google Drive など）が管理するファイルの表示を許可するコンテンツ プロバイダです。
ドキュメント プロバイダは <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja">DocumentsProvider</a></code> クラスのサブクラスとして実装されます。document-provider スキーマは従来のファイル階層に基づくものですが、ドキュメント プロバイダが物理的にどのようにファイルを格納するかはその設定次第です。Android プラットフォームには、ダウンロード、画像、ビデオなどの組み込みのドキュメント プロバイダがいくつか用意されています。




</li>

<li><strong>クライアント アプリ</strong>&mdash;<code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code> または <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_CREATE_DOCUMENT">ACTION_CREATE_DOCUMENT</a></code> インテントを呼び出し、ドキュメント プロバイダが返したファイルを受け取るカスタムアプリです。


</li>

<li><strong>ピッカー</strong>&mdash;クライアントアプリの検索条件を満たすすべてのドキュメント プロバイダのドキュメントにアクセスできるシステム UI です。
</li>
</ul>

<p>SAF は次のような機能も提供します。</p>
<ul>
<li>ユーザーは 1 つのアプリだけではなく、すべてのドキュメント プロバイダのコンテンツを参照できます。</li>
<li>アプリからドキュメント プロバイダが所有するドキュメントへの、長期間の固定アクセスを可能にします。
このアクセスにより、ユーザーはプロバイダ上でのファイルの追加、編集、保存、削除が可能になります。
</li>
<li>複数のユーザー アカウントと USB ストレージ プロバイダなどの一時的なルートをサポートします。一時的なルートはドライブを挿入した場合にのみ表示されます。
 </li>
</ul>

<h2 id ="overview">概要</h2>

<p>SAF は、<code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja">DocumentsProvider</a></code> クラスのサブクラスであるコンテンツ プロバイダを中心に展開します。
ドキュメント プロバイダでは、データは下図のように従来のファイル階層で構造化されます。<em></em>
</p>
<p><img src="../../../images/providers/storage_datamodel9e29.png?hl=ja" alt="データモデル" /></p>
<p class="img-caption"><strong>図 1.</strong> ドキュメント プロバイダのデータモデル。ルートポイントが 1 つのドキュメントを指し、そこからツリー全体が広がります。
</p>

<p>注: </p>
<ul>

<li>各ドキュメント プロバイダは、ドキュメントのツリーの検索の出発点である 1 つ以上の「ルート」を報告します。各ルートは一意の <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Root.html?hl=ja#COLUMN_ROOT_ID">COLUMN_ROOT_ID</a></code> を持ち、該当するルートの下のコンテンツを表すドキュメント（ディレクトリ）を指します。ルートはデザインによって動的に変化し、複数アカウント、一時的な USB ストレージ ドライブ、ユーザーのログインとログアウトなどのユースケースをサポートします。





</li>

<li>各ルートの下のドキュメントは 1 つだけになります。そのドキュメントは、1 ～ <em>N</em> 個のドキュメントを指し、さらにそれぞれのドキュメントも 1 ～ <em>N</em> 個のドキュメントを指すことができます。
 </li>

<li>各ストレージ バックエンドは、一意の <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=ja#COLUMN_DOCUMENT_ID">COLUMN_DOCUMENT_ID</a></code> を使って個々のファイルやディレクトリを参照して表示します。端末の再起動後も使用できる永続的な URI の付与に使用することから、ドキュメント ID は一意でなければならず、一度発行すると変更できません。



</li>


<li>ドキュメントには、開くことができるファイル（特定の MIME タイプを持つもの）か、追加のドキュメント（<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=ja#MIME_TYPE_DIR">MIME_TYPE_DIR</a></code> MIME タイプを持つもの）を含むディレクトリのいずれかに設定できます。

</li>

<li>各ドキュメントはさまざまな機能を持つことができ、<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=ja#COLUMN_FLAGS">COLUMN_FLAGS</a></code> を使って記述します。たとえば、<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=ja#FLAG_SUPPORTS_WRITE">FLAG_SUPPORTS_WRITE</a></code>、<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=ja#FLAG_SUPPORTS_DELETE">FLAG_SUPPORTS_DELETE</a></code>、<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=ja#FLAG_SUPPORTS_THUMBNAIL">FLAG_SUPPORTS_THUMBNAIL</a></code> といった機能です。同一の <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=ja#COLUMN_DOCUMENT_ID">COLUMN_DOCUMENT_ID</a></code> は複数のディレクトリに含めることができます。





</li>
</ul>

<h2 id="flow">コントロール フロー</h2>
<p>前述のように、ドキュメント プロバイダのデータモデルは従来のファイル階層を基本とします。
ただし、<code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja">DocumentsProvider</a></code> API でアクセスできる場合は、任意の方法でデータを物理的に格納できます。
たとえば、データにタグベースのクラウド ストレージを使用できます。
</p>

<p>図 2 の例は、写真アプリが格納されたデータに SAF を使ってアクセスする様子を表しています。
</p>
<p><img src="../../../images/providers/storage_dataflow9e29.png?hl=ja" alt="アプリ" /></p>

<p class="img-caption"><strong>図 2.</strong> ストレージ アクセス フレームワークのフロー</p>

<p>注: </p>
<ul>

<li>SAF では、プロバイダとクライアントは直接やり取りできません。
クライアントが、ファイルを操作（ファイルの読み取り、編集、作成、削除）するためのパーミッションを要求します。
</li>

<li>アプリケーション（この例では写真アプリ）がインテント <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code> または <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_CREATE_DOCUMENT">ACTION_CREATE_DOCUMENT</a></code> を起動すると、やり取りが始まります。
インテントには、基準を詳細に調整するためのフィルタが含まれる場合があります。たとえば、「画像」の MIME
タイプを持つ、開くことができるすべてのファイルを取得する、のように設定できます。
</li>

<li>インテントが起動すると、システム ピッカーが登録済みの各プロバイダに移動し、一致するコンテンツのルートをユーザーに表示します。
</li>

<li>基礎となるドキュメント プロバイダの種類に関係なく、ドキュメントにアクセスするための標準的なインターフェースがピッカーから提供されます。
図 2 には、Google Drive プロバイダ、USB プロバイダ、クラウド プロバイダの例を示しています。
</li>
</ul>

<p>図 3 は、Google Drive アカウントを選択したユーザーが画像を検索するピッカーを表しています。
</p>

<p><img src="../../../images/providers/storage_picker9e29.png?hl=ja" width="340"
alt="ピッカー" style="border:2px solid #ddd"/></p>

<p class="img-caption"><strong>図 3.</strong> ピッカー</p>

<p>ユーザーが Google Drive を選択すると、図 4 のように画像が表示されます。この時点から、ユーザーはプロバイダとクライアント アプリがサポートするすべての方法で、画像を操作できるようになります。



<p><img src="../../../images/providers/storage_photos9e29.png?hl=ja" width="340"
alt="ピッカー" style="border:2px solid #ddd"/></p>

<p class="img-caption"><strong>図 4.</strong> 画像</p>

<h2 id="client">クライアント アプリを作成する</h2>

<p>Android 4.3 以前では、別のアプリからファイルを取得する場合、<code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_PICK">ACTION_PICK</a></code> や <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code> といったインテントを呼び出す必要があります。

その後ユーザーは、ファイルを選択するためのアプリを 1 つ選びます。選択されたアプリはユーザーが使用可能なファイルを参照して選択するためのユーザー インターフェースを提供する必要があります。

 </p>

<p>Android 4.4 以降であれば、<code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code> インテントを使用するという選択肢もあります。このインテントではシステム制御のピッカー UI が表示され、ユーザーはそこから他のアプリで利用可能なすべてのファイル参照できます。


ユーザーは、この 1 つの UI から、サポートされるすべてのアプリのファイルを選択できます。
</p>

<p><code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code> は、<code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code> との置き換えを意図したものではありません。どちらを使用するかは、アプリのニーズによって異なります。

</p>

<ul>
<li>アプリでデータの読み取りとインポートのみを行う場合は、<code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code> を使用します。
この方法を使用すると、アプリは、画像ファイルなどのデータのコピーをインポートします。
</li>

<li>アプリからドキュメント プロバイダが所有するドキュメントへの、長期間の固定アクセスを可能にするには、<code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code> を使用します。

ドキュメント プロバイダに格納されている画像をユーザーが編集するための、写真編集アプリなどの例が挙げられます。
 </li>

</ul>


<p>ここでは、<code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code> と <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_CREATE_DOCUMENT">ACTION_CREATE_DOCUMENT</a></code> インテントに基づいたクライアント アプリの作成方法について説明します。

</p>


<h3 id="search">ドキュメントを検索する</h3>

<p>
次のスニペットでは <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code> を使って、画像ファイルがあるドキュメント プロバイダを検索します。

</p>

<pre>private static final int READ_REQUEST_CODE = 42;
...
/**
 * Fires an intent to spin up the &quot;file chooser&quot; UI and select an image.
 */
public void performFileSearch() {

    // ACTION_OPEN_DOCUMENT is the intent to choose a file via the system's file
    // browser.
    Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);

    // Filter to only show results that can be &quot;opened&quot;, such as a
    // file (as opposed to a list of contacts or timezones)
    intent.addCategory(Intent.CATEGORY_OPENABLE);

    // Filter to show only images, using the image MIME data type.
    // If one wanted to search for ogg vorbis files, the type would be &quot;audio/ogg&quot;.
    // To search for all documents available via installed storage providers,
    // it would be &quot;*/*&quot;.
    intent.setType(&quot;image/*&quot;);

    startActivityForResult(intent, READ_REQUEST_CODE);
}</pre>

<p>注: </p>
<ul>
<li>アプリが <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code> インテントを開始すると、ピッカーが起動し、条件に一致するすべてのドキュメント プロバイダが表示されます。
</li>

<li>カテゴリ <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#CATEGORY_OPENABLE">CATEGORY_OPENABLE</a></code> をインテントに追加すると、結果がフィルタリングされ、画像ファイルなどの開くことができるドキュメントのみが表示されます。
</li>

<li><code>intent.setType(&quot;image/*&quot;)</code> で結果をさらにフィルタリングし、画像 MIME データタイプのドキュメントのみを表示します。
</li>
</ul>

<h3 id="results">プロセスの結果</h3>

<p>ユーザーがピッカーでドキュメントを選択すると、<code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=ja#onActivityResult(int, int, android.content.Intent)">onActivityResult()</a></code> が呼び出されます。選択したドキュメントを指す URI は <code>resultData</code> パラメータに含まれます。


<code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#getData()">getData()</a></code> を使って URI を抽出します。URI を抽出したら、その URI を使ってユーザーが希望するドキュメントを取得できます。
次に例を示します。
</p>

<pre>&#64;Override
public void onActivityResult(int requestCode, int resultCode,
        Intent resultData) {

    // The ACTION_OPEN_DOCUMENT intent was sent with the request code
    // READ_REQUEST_CODE. If the request code seen here doesn't match, it's the
    // response to some other intent, and the code below shouldn't run at all.

    if (requestCode == READ_REQUEST_CODE && resultCode == Activity.RESULT_OK) {
        // The document selected by the user won't be returned in the intent.
        // Instead, a URI to that document will be contained in the return intent
        // provided to this method as a parameter.
        // Pull that URI using resultData.getData().
        Uri uri = null;
        if (resultData != null) {
            uri = resultData.getData();
            Log.i(TAG, "Uri: " + uri.toString());
            showImage(uri);
        }
    }
}
</pre>

<h3 id="metadata">ドキュメント メタデータを確認する</h3>

<p>ドキュメントのURI を取得したら、そのメタデータにアクセスできます。次のスニペットは、URI で指定したドキュメントのメタデータを取得して、ログに記録します。
</p>

<pre>public void dumpImageMetaData(Uri uri) {

    // The query, since it only applies to a single document, will only return
    // one row. There's no need to filter, sort, or select fields, since we want
    // all fields for one document.
    Cursor cursor = getActivity().getContentResolver()
            .query(uri, null, null, null, null, null);

    try {
    // moveToFirst() returns false if the cursor has 0 rows.  Very handy for
    // &quot;if there's anything to look at, look at it&quot; conditionals.
        if (cursor != null &amp;&amp; cursor.moveToFirst()) {

            // Note it's called &quot;Display Name&quot;.  This is
            // provider-specific, and might not necessarily be the file name.
            String displayName = cursor.getString(
                    cursor.getColumnIndex(OpenableColumns.DISPLAY_NAME));
            Log.i(TAG, &quot;Display Name: &quot; + displayName);

            int sizeIndex = cursor.getColumnIndex(OpenableColumns.SIZE);
            // If the size is unknown, the value stored is null.  But since an
            // int can't be null in Java, the behavior is implementation-specific,
            // which is just a fancy term for &quot;unpredictable&quot;.  So as
            // a rule, check if it's null before assigning to an int.  This will
            // happen often:  The storage API allows for remote files, whose
            // size might not be locally known.
            String size = null;
            if (!cursor.isNull(sizeIndex)) {
                // Technically the column stores an int, but cursor.getString()
                // will do the conversion automatically.
                size = cursor.getString(sizeIndex);
            } else {
                size = &quot;Unknown&quot;;
            }
            Log.i(TAG, &quot;Size: &quot; + size);
        }
    } finally {
        cursor.close();
    }
}
</pre>

<h3 id="open-client">ドキュメントを開く</h3>

<p>ドキュメントのURI を取得したら、そのドキュメントを開いてさまざまな操作を行うことができます。
</p>

<h4>ビットマップ</h4>

<p><code><a href="https://developer.android.com/reference/android/graphics/Bitmap.html?hl=ja">Bitmap</a></code> を開く方法の例を次に示します。</p>

<pre>private Bitmap getBitmapFromUri(Uri uri) throws IOException {
    ParcelFileDescriptor parcelFileDescriptor =
            getContentResolver().openFileDescriptor(uri, "r");
    FileDescriptor fileDescriptor = parcelFileDescriptor.getFileDescriptor();
    Bitmap image = BitmapFactory.decodeFileDescriptor(fileDescriptor);
    parcelFileDescriptor.close();
    return image;
}
</pre>

<p>この操作を UI スレッドで実行しないでください。<code><a href="https://developer.android.com/reference/android/os/AsyncTask.html?hl=ja">AsyncTask</a></code> を使ってバックグラウンドで実行します。
ビットマップを開いたら、<code><a href="https://developer.android.com/reference/android/widget/ImageView.html?hl=ja">ImageView</a></code> で表示できます。

</p>

<h4>InputStream を取得する</h4>

<p>URI から <code><a href="https://developer.android.com/reference/java/io/InputStream.html?hl=ja">InputStream</a></code> を取得する方法の例を次に示します。このスニペットでは、ファイルの行が文字列に読み込まれます。
</p>

<pre>private String readTextFromUri(Uri uri) throws IOException {
    InputStream inputStream = getContentResolver().openInputStream(uri);
    BufferedReader reader = new BufferedReader(new InputStreamReader(
            inputStream));
    StringBuilder stringBuilder = new StringBuilder();
    String line;
    while ((line = reader.readLine()) != null) {
        stringBuilder.append(line);
    }
    fileInputStream.close();
    parcelFileDescriptor.close();
    return stringBuilder.toString();
}
</pre>

<h3 id="create">新しいドキュメントを作成する</h3>

<p><code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_CREATE_DOCUMENT">ACTION_CREATE_DOCUMENT</a></code> インテントを使用すると、アプリでドキュメント プロバイダに新しいドキュメントを作成できます。

ファイルを作成するには、インテントに MIME タイプとファイル名を渡し、一意の要求コードを使ってインテントを起動します。
後は自分で設定します。</p>


<pre>
// Here are some examples of how you might call this method.
// The first parameter is the MIME type, and the second parameter is the name
// of the file you are creating:
//
// createFile("text/plain", "foobar.txt");
// createFile("image/png", "mypicture.png");

// Unique request code.
private static final int WRITE_REQUEST_CODE = 43;
...
private void createFile(String mimeType, String fileName) {
    Intent intent = new Intent(Intent.ACTION_CREATE_DOCUMENT);

    // Filter to only show results that can be &quot;opened&quot;, such as
    // a file (as opposed to a list of contacts or timezones).
    intent.addCategory(Intent.CATEGORY_OPENABLE);

    // Create a file with the requested MIME type.
    intent.setType(mimeType);
    intent.putExtra(Intent.EXTRA_TITLE, fileName);
    startActivityForResult(intent, WRITE_REQUEST_CODE);
}
</pre>

<p>新しいドキュメントを作成したら、<code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=ja#onActivityResult(int, int, android.content.Intent)">onActivityResult()</a></code> で URI を取得して、ドキュメントに書き込み操作を実行できます。

</p>

<h3 id="delete">ドキュメントを削除する</h3>

<p>ドキュメントの URI と、<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=ja#FLAG_SUPPORTS_DELETE">SUPPORTS_DELETE</a></code> を含むドキュメントの <code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=ja#COLUMN_FLAGS">Document.COLUMN_FLAGS</a></code> を取得すると、ドキュメントを削除できます。



次に例を示します。</p>

<pre>
DocumentsContract.deleteDocument(getContentResolver(), uri);
</pre>

<h3 id="edit">ドキュメントを編集する</h3>

<p>SAF を使用するとテキスト ドキュメントを直接編集できます。このスニペットは <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code> インテントを起動し、カテゴリ <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#CATEGORY_OPENABLE">CATEGORY_OPENABLE</a></code> を使って、開くことができるドキュメントのみを表示します。



次のように、テキスト ファイルのみを表示するようにフィルタリングします。</p>

<pre>
private static final int EDIT_REQUEST_CODE = 44;
/**
 * Open a file for writing and append some text to it.
 */
 private void editDocument() {
    // ACTION_OPEN_DOCUMENT is the intent to choose a file via the system's
    // file browser.
    Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);

    // Filter to only show results that can be &quot;opened&quot;, such as a
    // file (as opposed to a list of contacts or timezones).
    intent.addCategory(Intent.CATEGORY_OPENABLE);

    // Filter to show only text files.
    intent.setType(&quot;text/plain&quot;);

    startActivityForResult(intent, EDIT_REQUEST_CODE);
}
</pre>

<p>次に、<code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=ja#onActivityResult(int, int, android.content.Intent)">onActivityResult()</a></code>（<a href="#results">プロセスの結果</a>をご覧ください）からコードを呼び出して、編集を行います。次のスニペットは <code><a href="https://developer.android.com/reference/android/content/ContentResolver.html?hl=ja">ContentResolver</a></code> から <code><a href="https://developer.android.com/reference/java/io/FileOutputStream.html?hl=ja">FileOutputStream</a></code> を取得します。


デフォルトでは、「書き込み」モードを使用します。必要最小限のアクセスのみを要求することをお勧めします。書き込みのみが必要な場合に読み込みと書き込みを要求しないでください。

</p>

<pre>private void alterDocument(Uri uri) {
    try {
        ParcelFileDescriptor pfd = getActivity().getContentResolver().
                openFileDescriptor(uri, "w");
        FileOutputStream fileOutputStream =
                new FileOutputStream(pfd.getFileDescriptor());
        fileOutputStream.write(("Overwritten by MyCloud at " +
                System.currentTimeMillis() + "\n").getBytes());
        // Let the document provider know you're done by closing the stream.
        fileOutputStream.close();
        pfd.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}</pre>

<h3 id="permissions">パーミッションを固定する</h3>

<p>アプリで読み込みや書き込み用にファイルを開くと、システムからアプリに対して、該当するファイルの URI パーミッションが付与されます。
このパーミッションはユーザーが端末を再起動するまで有効です。しかし、画像アプリでユーザーが最近編集した 5 つの画像にアプリから直接アクセスできるようにするにはどうすればいいでしょう。

ユーザーの端末が再起動されたら、ファイルを検索するためにユーザーをシステム ピッカーに戻す必要がありますが、これは適切な方法とは言えません。

</p>

<p>このような状況を避けるために、システムがアプリに付与するパーミッションを固定します。
実際は、システムが提供する固定可能な URI パーミッションをアプリで「取得」します。
これにより、端末を再起動した場合でも、ユーザーはアプリからファイルに継続的にアクセスできます。
</p>


<pre>final int takeFlags = intent.getFlags()
            &amp; (Intent.FLAG_GRANT_READ_URI_PERMISSION
            | Intent.FLAG_GRANT_WRITE_URI_PERMISSION);
// Check for the freshest data.
getContentResolver().takePersistableUriPermission(uri, takeFlags);</pre>

<p>最後にもう 1 つ手順があります。アプリが最近アクセスした URI
は、保存されていても既に無効になっている場合があります。別のアプリによってドキュメントが削除されたり、修正されたりすることが考えられます。
そこで、最新のデータを確認するには、常に <code>getContentResolver().takePersistableUriPermission()</code> を呼び出す必要があります。

</p>

<h2 id="custom">カスタム ドキュメント プロバイダを作成する</h2>

<p>
ファイル用のストレージ サービスを提供するアプリ（クラウド保存サービスなど）を開発する場合、カスタム ドキュメント プロバイダを作成すれば、SAF を介してファイルを利用可能にできます。

ここではその方法について説明します。
</p>


<h3 id="manifest">マニフェスト</h3>

<p>カスタム ドキュメント プロバイダを実装するには、アプリケーションのマニフェストに次のものを追加します。
</p>
<ul>

<li>API レベル 19 以降のターゲット。</li>

<li>カスタム ストレージ プロバイダを宣言する <code>&lt;provider&gt;</code> 要素。
 </li>

<li>クラス名となる、プロバイダの名前。パッケージ名を含みます。例: <code>com.example.android.storageprovider.MyCloudProvider</code>。
</li>

<li>認証局の名前。これはパッケージ名（この例では <code>com.example.android.storageprovider</code>）とコンテンツ プロバイダのタイプを合わせたもの（<code>documents</code>）。

たとえば、<code>com.example.android.storageprovider.documents</code> のようになります。</li>

<li><code>&quot;true&quot;</code> に設定された属性 <code>android:exported</code>。他のアプリで認識できるようにプロバイダをエクスポートする必要があります。
</li>

<li><code>&quot;true&quot;</code> に設定された属性 <code>android:grantUriPermissions</code>。
この設定により、プロバイダのコンテンツにアクセスできるように、システムが他のアプリにアクセス権を付与します。
特定のドキュメントへのアクセス権を固定する方法については、<a href="#permissions">パーミッションを固定する</a>をご覧ください。
</li>

<li><code>MANAGE_DOCUMENTS</code> パーミッション。デフォルトでは、プロバイダはすべてのユーザーが利用可能です。
このパーミッションを追加することで、プロバイダをシステムに制限できます。セキュリティ上この制限は重要です。
</li>

<li>リソース ファイルで定義され、ブール値が設定された <code>android:enabled</code> 属性。
この属性は、Android 4.3 以前を実行する端末でプロバイダを無効にすることを目的としています。たとえば、<code>android:enabled=&quot;&#64;bool/atLeastKitKat&quot;</code> のようになります。
マニフェストのこの属性に加え、次の操作を実行する必要があります。

<ul>
<li><code>res/values/</code> にある <code>bool.xml</code> リソース ファイルに、次の行を追加します。
 <pre>&lt;bool name=&quot;atLeastKitKat&quot;&gt;false&lt;/bool&gt;</pre></li>

<li><code>res/values-v19/</code> にある <code>bool.xml</code> リソース ファイルに、次の行を追加します。
 <pre>&lt;bool name=&quot;atLeastKitKat&quot;&gt;true&lt;/bool&gt;</pre></li>
</ul></li>

<li><code>android.content.action.DOCUMENTS_PROVIDER</code> アクションを含むインテント フィルタ。システムがプロバイダを検索したときに、プロバイダがピッカーに表示されます。

</li>

</ul>
<p>プロバイダを含むサンプル マニフェストの抜粋を次に示します。</p>

<pre>&lt;manifest... &gt;
    ...
    &lt;uses-sdk
        android:minSdkVersion=&quot;19&quot;
        android:targetSdkVersion=&quot;19&quot; /&gt;
        ....
        &lt;provider
            android:name=&quot;com.example.android.storageprovider.MyCloudProvider&quot;
            android:authorities=&quot;com.example.android.storageprovider.documents&quot;
            android:grantUriPermissions=&quot;true&quot;
            android:exported=&quot;true&quot;
            android:permission=&quot;android.permission.MANAGE_DOCUMENTS&quot;
            android:enabled=&quot;&#64;bool/atLeastKitKat&quot;&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.content.action.DOCUMENTS_PROVIDER&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/provider&gt;
    &lt;/application&gt;

&lt;/manifest&gt;</pre>

<h4 id="43">Android 4.3 以前を実行する端末をサポートする</h4>

<p><code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_OPEN_DOCUMENT">ACTION_OPEN_DOCUMENT</a></code> インテントは、Android 4.4 以降を実行する端末でのみ利用可能です。Android 4.3 以前を実行する端末に対応するためにアプリケーションで <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code> をサポートするには、Android 4.4 以降を実行する端末のマニフェストで <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code> インテント フィルタを無効にする必要があります。





ドキュメント プロバイダと <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code> は互いに排他的な関係にあると考える必要があります。

両方を同時にサポートする場合、アプリはシステム ピッカー UI に 2 度表示され、格納されたデータへの 2 つの異なる方法を提供します。

これではユーザーも操作に迷ってしまいます。</p>

<p>ここでは、Android バージョン 4.4 以降を実行する端末で <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code> インテント フィルタを無効にする際に推奨される方法を紹介します。

</p>

<ol>
<li><code>res/values/</code> にある <code>bool.xml</code> リソース ファイルに、次の行を追加します。
 <pre>&lt;bool name=&quot;atMostJellyBeanMR2&quot;&gt;true&lt;/bool&gt;</pre></li>

<li><code>res/values-v19/</code> にある <code>bool.xml</code> リソース ファイルに、次の行を追加します。
 <pre>&lt;bool name=&quot;atMostJellyBeanMR2&quot;&gt;false&lt;/bool&gt;</pre></li>

<li>4.4 （API レベル 19）以降のバージョンに対して <code><a href="https://developer.android.com/reference/android/content/Intent.html?hl=ja#ACTION_GET_CONTENT">ACTION_GET_CONTENT</a></code> インテント フィルタを無効にするには、<a href="../manifest/activity-alias-element9e29.html?hl=ja">アクティビティ エイリアス</a>を追加します。


次に例を示します。

<pre>
&lt;!-- This activity alias is added so that GET_CONTENT intent-filter
     can be disabled for builds on API level 19 and higher. --&gt;
&lt;activity-alias android:name=&quot;com.android.example.app.MyPicker&quot;
        android:targetActivity=&quot;com.android.example.app.MyActivity&quot;
        ...
        android:enabled=&quot;@bool/atMostJellyBeanMR2&quot;&gt;
    &lt;intent-filter&gt;
        &lt;action android:name=&quot;android.intent.action.GET_CONTENT&quot; /&gt;
        &lt;category android:name=&quot;android.intent.category.OPENABLE&quot; /&gt;
        &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;
        &lt;data android:mimeType=&quot;image/*&quot; /&gt;
        &lt;data android:mimeType=&quot;video/*&quot; /&gt;
    &lt;/intent-filter&gt;
&lt;/activity-alias&gt;
</pre>
</li>
</ol>
<h3 id="contract">コントラクト</h3>

<p>通常、カスタム コンテンツ プロバイダを作成するときには、<a href="content-provider-creating9e29.html?hl=ja#ContractClass">コンテンツ プロバイダ</a>のデベロッパー ガイドに記載があるように、コントラクト クラスを実装するタスクが必要になります。


コントラクト クラスは <code>public final</code> クラスであり、URI、列名、MIME タイプ、プロバイダに関連するその他のメタデータを含みます。

コントラクト クラスは SAF によって提供されるため、独自に作成する必要はありません。

</p>

<ul>
   <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=ja">DocumentsContract.Document</a></code></li>
   <li><code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Root.html?hl=ja">DocumentsContract.Root</a></code></li>
</ul>

<p>たとえば、ドキュメント プロバイダでドキュメントやルートを照会したときには、カーソルに次のような列が返されることがあります。
</p>

<pre>private static final String[] DEFAULT_ROOT_PROJECTION =
        new String[]{Root.COLUMN_ROOT_ID, Root.COLUMN_MIME_TYPES,
        Root.COLUMN_FLAGS, Root.COLUMN_ICON, Root.COLUMN_TITLE,
        Root.COLUMN_SUMMARY, Root.COLUMN_DOCUMENT_ID,
        Root.COLUMN_AVAILABLE_BYTES,};
private static final String[] DEFAULT_DOCUMENT_PROJECTION = new
        String[]{Document.COLUMN_DOCUMENT_ID, Document.COLUMN_MIME_TYPE,
        Document.COLUMN_DISPLAY_NAME, Document.COLUMN_LAST_MODIFIED,
        Document.COLUMN_FLAGS, Document.COLUMN_SIZE,};
</pre>

<h3 id="subclass">サブクラス DocumentsProvider</h3>

<p>カスタム ドキュメント プロバイダの作成の次の手順では、抽象クラス <code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja">DocumentsProvider</a></code> をサブクラス化します。
少なくとも、次のメソッドを実装する必要があります。
</p>

<ul>
<li><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja#queryRoots(java.lang.String[])">queryRoots()</a></code></li>

<li><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja#queryChildDocuments(java.lang.String, java.lang.String[], android.os.Bundle)">queryChildDocuments()</a></code></li>

<li><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja#queryDocument(java.lang.String, java.lang.String[])">queryDocument()</a></code></li>

<li><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja#openDocument(java.lang.String, java.lang.String, android.os.CancellationSignal)">openDocument()</a></code></li>
</ul>

<p>これらは実装する必要があるメソッドですが、これ以外にも多くのメソッドを実装できます。
詳細については、<code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja">DocumentsProvider</a></code> をご覧ください。
</p>

<h4 id="queryRoots">queryRoots を実装する</h4>

<p><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja#queryRoots(java.lang.String[])">queryRoots()</a></code> を実装すると、<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Root.html?hl=ja">DocumentsContract.Root</a></code> で定義される列を使って、ドキュメント プロバイダのすべてのルート ディレクトリを指す <code><a href="https://developer.android.com/reference/android/database/Cursor.html?hl=ja">Cursor</a></code> が返されます。

</p>

<p>次のスニペットの <code>projection</code> パラメータは、呼び出し側が取得する特定のフィールドを表します。
スニペットは新しいカーソルを作成し、それに行を 1 つ追加します。[ダウンロード] や [画像] 
と同じように、1 つのルートに対して最上位のディレクトリが 1 つになります。
ほとんどのプロバイダでルートは 1 つになります。複数のユーザー アカウントを使用するような場合は、1 つ以上のルートを設定できます。
その場合、カーソルに 2 つ目の行を追加します。
</p>

<pre>
&#64;Override
public Cursor queryRoots(String[] projection) throws FileNotFoundException {

    // Create a cursor with either the requested fields, or the default
    // projection if "projection" is null.
    final MatrixCursor result =
            new MatrixCursor(resolveRootProjection(projection));

    // If user is not logged in, return an empty root cursor.  This removes our
    // provider from the list entirely.
    if (!isUserLoggedIn()) {
        return result;
    }

    // It's possible to have multiple roots (e.g. for multiple accounts in the
    // same app) -- just add multiple cursor rows.
    // Construct one row for a root called &quot;MyCloud&quot;.
    final MatrixCursor.RowBuilder row = result.newRow();
    row.add(Root.COLUMN_ROOT_ID, ROOT);
    row.add(Root.COLUMN_SUMMARY, getContext().getString(R.string.root_summary));

    // FLAG_SUPPORTS_CREATE means at least one directory under the root supports
    // creating documents. FLAG_SUPPORTS_RECENTS means your application's most
    // recently used documents will show up in the &quot;Recents&quot; category.
    // FLAG_SUPPORTS_SEARCH allows users to search all documents the application
    // shares.
    row.add(Root.COLUMN_FLAGS, Root.FLAG_SUPPORTS_CREATE |
            Root.FLAG_SUPPORTS_RECENTS |
            Root.FLAG_SUPPORTS_SEARCH);

    // COLUMN_TITLE is the root title (e.g. Gallery, Drive).
    row.add(Root.COLUMN_TITLE, getContext().getString(R.string.title));

    // This document id cannot change once it's shared.
    row.add(Root.COLUMN_DOCUMENT_ID, getDocIdForFile(mBaseDir));

    // The child MIME types are used to filter the roots and only present to the
    //  user roots that contain the desired type somewhere in their file hierarchy.
    row.add(Root.COLUMN_MIME_TYPES, getChildMimeTypes(mBaseDir));
    row.add(Root.COLUMN_AVAILABLE_BYTES, mBaseDir.getFreeSpace());
    row.add(Root.COLUMN_ICON, R.drawable.ic_launcher);

    return result;
}</pre>

<h4 id="queryChildDocuments">queryChildDocuments を実装する</h4>

<p><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja#queryChildDocuments(java.lang.String, java.lang.String[], android.os.Bundle)">queryChildDocuments()</a></code> を実装すると、<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=ja">DocumentsContract.Document</a></code> で定義される列を使って、指定したディレクトリ内のすべてのファイルを指す <code><a href="https://developer.android.com/reference/android/database/Cursor.html?hl=ja">Cursor</a></code> が返されます。



</p>

<p>ピッカー UI でアプリケーション ルートを選択すると、このメソッドが呼び出されます。ルートの下のディレクトリの子ドキュメントを取得します。
ルートだけでなく、ファイル階層内の任意のレベルで呼び出せます。
このスニペットでは、要求した列を持つ新しいカーソルが作成され、
親ディレクトリのすぐ下のそれぞれの子の情報がカーソルに追加されます。
子は、画像、別のディレクトリなど任意のファイルとなります。
</p>

<pre>&#64;Override
public Cursor queryChildDocuments(String parentDocumentId, String[] projection,
                              String sortOrder) throws FileNotFoundException {

    final MatrixCursor result = new
            MatrixCursor(resolveDocumentProjection(projection));
    final File parent = getFileForDocId(parentDocumentId);
    for (File file : parent.listFiles()) {
        // Adds the file's display name, MIME type, size, and so on.
        includeFile(result, null, file);
    }
    return result;
}
</pre>

<h4 id="queryDocument">queryDocument を実装する</h4>

<p><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja#queryDocument(java.lang.String, java.lang.String[])">queryDocument()</a></code> を実装すると、<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.Document.html?hl=ja">DocumentsContract.Document</a></code> で定義される列を使って、指定したファイルを指す <code><a href="https://developer.android.com/reference/android/database/Cursor.html?hl=ja">Cursor</a></code> が返されます。



</p>

<p><code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja#queryDocument(java.lang.String, java.lang.String[])">queryDocument()</a></code> メソッドでは、特定のファイルの情報ではなく、<code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja#queryChildDocuments(java.lang.String, java.lang.String[], android.os.Bundle)">queryChildDocuments()</a></code> に渡したのと同じ情報が返されます。


</p>


<pre>&#64;Override
public Cursor queryDocument(String documentId, String[] projection) throws
        FileNotFoundException {

    // Create a cursor with the requested projection, or the default projection.
    final MatrixCursor result = new
            MatrixCursor(resolveDocumentProjection(projection));
    includeFile(result, documentId, null);
    return result;
}
</pre>

<h4 id="openDocument">openDocument を実装する</h4>

<p>指定したファイルを表す <code><a href="https://developer.android.com/reference/android/os/ParcelFileDescriptor.html?hl=ja">ParcelFileDescriptor</a></code> を返すには、<code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja#openDocument(java.lang.String, java.lang.String, android.os.CancellationSignal)">openDocument()</a></code> を実装する必要があります。
他のアプリは、返された <code><a href="https://developer.android.com/reference/android/os/ParcelFileDescriptor.html?hl=ja">ParcelFileDescriptor</a></code> を使ってデータをストリーミングします。
ユーザーがファイルを選択するとシステムがこのメソッドを呼び出し、クライアント アプリは <code><a href="https://developer.android.com/reference/android/content/ContentResolver.html?hl=ja#openFileDescriptor(android.net.Uri, java.lang.String)">openFileDescriptor()</a></code> を呼び出してファイルへのアクセスを要求します。次に例を示します。


</p>

<pre>&#64;Override
public ParcelFileDescriptor openDocument(final String documentId,
                                         final String mode,
                                         CancellationSignal signal) throws
        FileNotFoundException {
    Log.v(TAG, &quot;openDocument, mode: &quot; + mode);
    // It's OK to do network operations in this method to download the document,
    // as long as you periodically check the CancellationSignal. If you have an
    // extremely large file to transfer from the network, a better solution may
    // be pipes or sockets (see ParcelFileDescriptor for helper methods).

    final File file = getFileForDocId(documentId);

    final boolean isWrite = (mode.indexOf('w') != -1);
    if(isWrite) {
        // Attach a close listener if the document is opened in write mode.
        try {
            Handler handler = new Handler(getContext().getMainLooper());
            return ParcelFileDescriptor.open(file, accessMode, handler,
                        new ParcelFileDescriptor.OnCloseListener() {
                &#64;Override
                public void onClose(IOException e) {

                    // Update the file with the cloud server. The client is done
                    // writing.
                    Log.i(TAG, &quot;A file with id &quot; +
                    documentId + &quot; has been closed!
                    Time to &quot; +
                    &quot;update the server.&quot;);
                }

            });
        } catch (IOException e) {
            throw new FileNotFoundException(&quot;Failed to open document with id &quot;
            + documentId + &quot; and mode &quot; + mode);
        }
    } else {
        return ParcelFileDescriptor.open(file, accessMode);
    }
}
</pre>

<h3 id="security">セキュリティ</h3>

<p>たとえば、ドキュメント プロバイダがパスワードで保護されたクラウド ストレージ サービスであり、ファイル共有を開始する前にユーザーがログインしているかどうかを確認するとします。ユーザーがログインしていない場合、アプリはどのような動作を行う必要があるでしょうか。

このような場合、<code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja#queryRoots(java.lang.String[])">queryRoots()</a></code> の実装のゼロルートを返すようにします。
つまり、空のルートカーソルになります。</p>

<pre>
public Cursor queryRoots(String[] projection) throws FileNotFoundException {
...
    // If user is not logged in, return an empty root cursor.  This removes our
    // provider from the list entirely.
    if (!isUserLoggedIn()) {
        return result;
}
</pre>

<p>その他に <code>getContentResolver().notifyChange()</code> を呼び出す手順もあります。<code><a href="https://developer.android.com/reference/android/provider/DocumentsContract.html?hl=ja">DocumentsContract</a></code> については既に説明したとおりです。
これを使ってこの URI を作成します。
次のスニペットは、ユーザーのログイン ステータスが変わった場合に、ドキュメント プロバイダのルートを照会するようシステムに指示します。
ユーザーがログインしてない場合は、上述のように、<code><a href="https://developer.android.com/reference/android/provider/DocumentsProvider.html?hl=ja#queryRoots(java.lang.String[])">queryRoots()</a></code> を呼び出すと空のカーソルが返されます。

こうすることで、ユーザーがプロバイダにログインしている場合にのみ、プロバイダのドキュメントを利用できます。
</p>

<pre>private void onLoginButtonClick() {
    loginOrLogout();
    getContentResolver().notifyChange(DocumentsContract
            .buildRootsUri(AUTHORITY), null);
}
</pre>


    </div>

    

  
    
  
    



<div class="wrap">
  <footer class="dac-footer ">
    <div class="cols dac-footer-main">
      <div class="col-1of2">
        <div class="dac-footer-contact">
          <a class="dac-footer-contact-link" href="https://developer.android.com/newsletter/index.html?hl=ja" title="Newsletter">Newsletter</a>
          <a class="dac-footer-contact-link" href="https://android-developers.blogspot.com/" title="ブログ" target="_blank">ブログ</a>
          <a class="dac-footer-contact-link" href="https://developer.android.com/support.html?hl=ja" title="サポート">サポート</a>
        </div>
      </div>
      <div class="col-1of2 dac-footer-reachout">
        <div class="dac-footer-social">
          <a class="dac-button-social dac-youtube dac-footer-social-link" href="https://www.youtube.com/user/androiddevelopers" title="Android Developers on YouTube" target="_blank"><i class="dac-sprite dac-youtube"></i><span class="hide-text">Android Developers on YouTube</span></a>
          <a class="dac-button-social dac-gplus dac-footer-social-link" href="https://plus.google.com/+AndroidDevelopers" title="Android Developers on Google+" target="_blank"><i class="dac-sprite dac-gplus"></i><span class="hide-text">Android Developers on Google+</span></a>
          <a class="dac-button-social dac-twitter dac-footer-social-link" href="https://twitter.com/AndroidDev" title="Android Developers on Twitter" target="_blank"><i class="dac-sprite dac-twitter"></i><span class="hide-text">Android Developers on Twitter</span></a>
        </div>
      </div>
    </div>

    <hr class="dac-footer-separator"/>
      
      <p class="dac-footer-copyright">
        
        Except as noted, this content is licensed under <a href="http://creativecommons.org/licenses/by/2.5/" target="_blank">Creative Commons Attribution 2.5</a>. For details and restrictions, see the <a href="https://developer.android.com/license.html">Content License</a>.
      </p>
    

    <p class="dac-footer-links">
      <a href="https://www.android.com/" title="Android.com" target="_blank">Android.com</a>
      <a href="https://developer.android.com/?hl=ja" title="Android Developers">Android Developers</a>
      <a href="https://developer.android.com/studio/index.html?hl=ja" title="Android Studio">Android Studio</a>
      <a href="https://developer.android.com/distribute/console/index.html?hl=ja" title="Google Play Console">Google Play Console</a>
      <a href="https://developer.android.com/legal.html?hl=ja" title="Legal Notice">Legal Notice</a>
    </p>

    <!-- TODO(akassay) Update all DAC js to use the class instead of the id b/30368561 -->
    <form class="devsite-utility-footer-language" id="setlang" action="https://developer.android.com/i18n/setlang/" method="post">
      <input type="hidden" name="xsrf_token" value="Br-zNIZpIZgB6VQWqrr_wCtO10DmVWoJU0QAadLghR86MTQ5NzUxNzExNDQ0OTk1MA" />
      <input type="hidden" name="next" value="document-provider.html">
      <span id="language" class="locales">
        <select class="devsite-utility-footer-language-select" name="language">
          
          <option value="id"
            >
            Bahasa Indonesia
          </option>
          
          <option value="de"
            >
            Deutsch
          </option>
          
          <option value="en"
            >
            English
          </option>
          
          <option value="es"
            >
            español
          </option>
          
          <option value="es-419"
            >
            Español (América Latina)
          </option>
          
          <option value="fr"
            >
            français
          </option>
          
          <option value="pt-br"
            >
            Português Brasileiro
          </option>
          
          <option value="vi"
            >
            Tiếng Việt
          </option>
          
          <option value="tr"
            >
            Türkçe
          </option>
          
          <option value="ru"
            >
            Русский
          </option>
          
          <option value="th"
            >
            ภาษาไทย
          </option>
          
          <option value="ja"
             selected="selected" >
            日本語
          </option>
          
          <option value="zh-cn"
            >
            简体中文
          </option>
          
          <option value="zh-tw"
            >
            繁體中文
          </option>
          
          <option value="ko"
            >
            한국어
          </option>
          
        </select>
      </span>
    </form>
  </footer>
</div><!--/.wrap -->

<div class="dac-toast-group">
  <div class="dac-toast" data-toast>
    <div class="dac-toast-wrap">
      This site uses cookies to store your preferences for site-specific language and display options.
    </div>
  </div>
</div>

<div data-modal="newsletter" data-newsletter-fb data-swap class="dac-modal newsletter">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <div class="dac-swap" data-swap-container>
          <section class="dac-swap-section dac-active dac-down">
            <h2 class="norule dac-modal-header-title" data-t="newsletter.title">Get the latest Android developer news and tips that will help you find success on Google Play.</h2>
            <p class="dac-modal-header-subtitle" data-t="newsletter.requiredHint">* Required Fields</p>
          </section>
          <section class="dac-swap-section dac-up">
            
            <h2 class="norule dac-modal-header-title" data-t="newsletter.successTitle">Hooray!</h2>
          </section>
        </div>
      </header>
      <div class="dac-swap" data-swap-container>
        <section class="dac-swap-section dac-active dac-left">
          <form action="https://services.google.com/fb/submissions/android-developer-mailing-list/" class="dac-form" method="post">
            <section class="dac-modal-content">
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-full-name" class="dac-form-floatlabel" data-t="newsletter.name">Full name</label>
                      <input type="text" class="dac-form-input" name="fullname" id="newsletter-full-name" required>
                      <span class="dac-form-required">*</span>
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-email" class="dac-form-floatlabel" data-t="newsletter.email">メールアドレス</label>
                      <input type="email" class="dac-form-input" name="emailaddress" id="newsletter-email" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-company" class="dac-form-floatlabel" data-t="newsletter.company">Company / developer name</label>
                      <input type="text" class="dac-form-input" name="companydevelopername" id="newsletter-company">
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-play-store" class="dac-form-floatlabel" data-t="newsletter.appUrl">One of your Play Store app URLs</label>
                      <input type="url" class="dac-form-input" name="playstoreappurls" id="newsletter-play-store">
                    </div>
                  </div>
                </div>
              </fieldset>
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol newsletter-interested" data-validation-message="Please check at least one item.">
                    <legend class="dac-form-legend">What are you interested in?<span class="dac-form-required">*</span></legend>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-whats-new" value="whats-new">
                      <label for="interested-whats-new" class="dac-form-checkbox-button"></label>
                      <label for="interested-whats-new" class="dac-form-label">What's new</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-games-updates" value="games-updates">
                      <label for="interested-games-updates" class="dac-form-checkbox-button"></label>
                      <label for="interested-games-updates" class="dac-form-label">Games updates</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-android-development" value="android-development">
                      <label for="interested-android-development" class="dac-form-checkbox-button"></label>
                      <label for="interested-android-development" class="dac-form-label">Android development</label>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol newsletter-checkboxes">
                    <div class="dac-form-input-group">
                      <label for="newsletter-receive-in">Receive newsletter in</label>
                      <select name="language" class="dac-form-select" id="newsletter-receive-in">
                        <option value="en-US" selected>English</option>
                        <option value="ar">Arabic</option>
                        <option value="zh">Chinese (Simplified)</option>
                        <option value="zh-TW">Chinese (Traditional)</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="id">Indonesian (Bahasa)</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="pt-BR">Portuguese (Brazilian)</option>
                        <option value="ru">Russian</option>
                        <option value="es-419">Spanish (Latin American)</option>
                        <option value="th">Thai</option>
                        <option value="tr">Turkish</option>
                        <option value="vi">Vietnamese</option>
                      </select>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="marketingoptin" id="newsletter-add" required value="Add me to the mailing list.">
                          <label for="newsletter-add" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-add" class="dac-form-label dac-form-aside">
                            Add me to the mailing list.
                            <span class="dac-form-required">*</span>
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="privacystatement" id="newsletter-terms" required value="I acknowledge that the information provided in this form will be subject to Google's privacy policy (https://www.google.com/policies/privacy/).">
                          <label for="newsletter-terms" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-terms" class="dac-form-label dac-form-aside"><span data-t="newsletter.privacyPolicy" data-t-html>
                            
                            I acknowledge that the information provided in this form will be subject to <a href="https://www.google.com/policies/privacy/">Google's privacy policy</a>.
                          </span>
                          <span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fieldset>
            </section>
            <input type="hidden" name="referrer" value="dac">
            <footer class="dac-modal-footer">
              <div class="cols">
                <div class="col-2of5">
                </div>
              </div>
              <button type="submit" value="Submit" class="dac-fab dac-primary dac-large dac-modal-action"><i class="dac-sprite dac-arrow-right"></i></button>
            </footer>
          </form>
        </section>
        <section class="dac-swap-section dac-right">
          <div class="dac-modal-content">
            <p class="newsletter-success-message" data-t="newsletter.successDetails">
              You have successfully signed up for the latest Android developer news and tips.
            </p>
          </div>
        </section>
      </div>
    </div>
  </div>
</div><!--/.dac-modal.newsletter-->


<div data-modal="langform" class="dac-modal" id="langform">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            Browse this site in <span class="span-target-lang"></span>?
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <fieldset class="dac-form-fieldset">
              <div class="cols">
                <div class="col-2of2 langform-leftCol">
                  <p id="resetLangText">
                    You requested a page in <span class="span-target-lang"></span>, but your language preference for this site is <span class="span-current-lang"></span>.
                  </p>
                  <p id="resetLangCta">
                    Would you like to change your language preference and browse this site in <span class="span-target-lang"></span>? If you want to change your language preference later, use the language menu at the bottom of each page.
                  </p>
                </div>
              </div>
            </fieldset>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="yes" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang yes" data-t="newsletter.resetLangButtonYes" data-modal-toggle>
                Change Language
              </button>
            </a>
            <a href="#" class="" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang no" data-t="newsletter.resetLangButtonNo" data-modal-toggle>
                Not Now
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal-->


<div data-modal="api-unavailable" class="dac-modal" id="api-unavailable">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            This class requires API level <span class="api-level"></span> or higher
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <p>
              This doc is hidden because your selected API level for the documentation is <span class="api-level"></span>. You can change the documentation API level with the selector above the left navigation.
            </p>
            
            <p>For more information about specifying the API level your app requires, read <a href="https://developer.android.com/training/basics/supporting-devices/platforms.html">Supporting Different Platform Versions</a>.</p>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="ok" onclick="return false;">
              <button class="button dac-primary dac-modal-action ok"
              data-modal-toggle>
                OK, make this page visible
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal#api-unavailable-->

    
  </div><!--/#body-content-->

  <!-- Nav Setup -->
  <script>$('[data-dac-nav]').dacNav();</script>
  <script type="text/javascript">
    $('.slideshow-container').dacSlideshow({
        btnPrev: '.slideshow-prev',
        btnNext: '.slideshow-next',
        btnPause: '#pauseButton'
    });

    $(".feed").dacTabbedList({
      nav_id: '.feed-nav',
      frame_id: '.feed-frame'
    });
  </script>
  
  <script src="../../../ytblogger_lists_unifieddd52.js?hl=ja?v=2017061508" defer></script>
  <script src="../../../android_metadata_endd52.js?hl=ja?v=2017061508" defer></script>
  
  <script src="../../../reference/listsdd52.js?hl=ja?v=2017061508" defer></script>
  <script src="../../../reference/gms_listsdd52.js?hl=ja?v=2017061508" defer></script>
  <script src="../../../reference/android/support/wearable/listsdd52.js?hl=ja?v=2017061508" defer></script>
  <script src="../../../reference/android/support/test/listsdd52.js?hl=ja?v=2017061508" defer></script>
  <script src="../../../reference/android/support/constraint/listsdd52.js?hl=ja?v=2017061508" defer></script>
  <script src="https://developer.android.com/_static2/f304fc21fa/jsi18n/?hl=ja"></script>
  <script>
    // Load localized metadata.
    (function(lang) {
      if (lang === 'en') { return; }
      document.write('<script src="https://developer.android.com/android_metadata_ja.js?hl=ja?v=2017061508" defer></' + 'script>');
    })(getLangPref())

    // Add skip to content for accessibility.
    $('#skip-to-main').click(function() {
      $('a[name=top]').focus();
    });

    $('.devsite-utility-footer-language-select').each(function() {
      $(this).change(function() {
        changeLangPref(this.value, true)
        $('.devsite-utility-footer-language').submit();
      });
    });
  </script>

  <script>
    (function($) {
      devsite.analytics.InitAnalytics();
    })(jQuery);
  </script>

  


<div id="survey-box-wrapper">
  <div class="material-dialog" style="width:270px">
    <div class="material-dialog-title">
      Take a one-minute survey?
    </div>
    <div class="material-dialog-description">
      Help us improve Android tools and documentation.
    </div>
    <div class="material-button-bar">
      <a class="dac-button dac-primary dac-raised" target="_blank"
          href="https://goo.gl/forms/kV7MoyD2dvcWkd5N2">Sure</a>
      <a class="dac-button" href="#">No thanks</a>
    </div>
  </div>
</div>

</body>

<!-- Mirrored from developer.android.com/guide/topics/providers/document-provider.html?hl=ja by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:16:14 GMT -->
</html>







<!DOCTYPE html>
<html lang="ja">

<!-- Mirrored from developer.android.com/guide/components/aidl.html?hl=ja by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:16:10 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

  



<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta content="IE=edge" http-equiv="X-UA-Compatible">





<script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script>

<meta charset="utf-8">



<meta name="xsrf_token" content="wQecKjsmb8CQjNC3gm9NnlHY1j-2UXgwErFjSR9i4A06MTQ5NzUxNzExMDkxNTY4MA" />

  
    <link rel="canonical" href="aidl9e29.html?hl=ja">
  

  
    <link rel="alternate" href="aidl7554.html?hl=es-419" hreflang="es-419">
  
    <link rel="alternate" href="aidl9e29.html?hl=ja" hreflang="ja">
  
    <link rel="alternate" href="aidl.html" hreflang="en">
  
    <link rel="alternate" href="aidl232e.html?hl=ko" hreflang="ko">
  
    <link rel="alternate" href="aidlde3a.html?hl=es" hreflang="es">
  
    <link rel="alternate" href="aidl0b8e.html?hl=zh-cn" hreflang="zh-Hans">
  
    <link rel="alternate" href="aidl0cf2.html?hl=id" hreflang="id">
  
    <link rel="alternate" href="aidl6dd3.html?hl=pt-br" hreflang="pt-br">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/aidl.html?hl=es-419" hreflang="es-419-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/aidl.html?hl=ja" hreflang="ja-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/aidl.html" hreflang="en-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/aidl.html?hl=ko" hreflang="ko-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/aidl.html?hl=es" hreflang="es-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/aidl.html?hl=zh-cn" hreflang="zh-Hans-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/aidl.html?hl=id" hreflang="id-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/aidl.html?hl=pt-br" hreflang="pt-br-cn">
  

  <link rel="alternate" href="aidl.html" hreflang="x-default">




<link rel="shortcut icon" href="../../_static/f304fc21fa/images/android/favicon9e29.png?hl=ja">

<link rel="apple-touch-icon" href="../../_static/f304fc21fa/images/android/touchicon-1809e29.png?hl=ja">


<title>

  Android インターフェース定義言語（AIDL） | Android Developers

</title>

  <meta name="description" content="AIDL (Android Interface Definition Language) is similar to other IDLs you might have worked with. It allows you to define the programming interface that both the client and service agree upon in order to communicate with each other using interprocess …">


<!-- STYLESHEETS -->
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto+Condensed">
<link rel="stylesheet"
    href="http://fonts.googleapis.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold"
    title="roboto">







<link href="../../static/css/defaultdd52.css?hl=ja?v=2017061508" rel="stylesheet" type="text/css">
<!-- JAVASCRIPT -->
<script src="../../_static/f304fc21fa/js/android_3p-bundle9e29.js?hl=ja" type="text/javascript"></script>
<script src="../../_static/f304fc21fa/js/script_foot_closure_android__ja9e29.js?hl=ja"></script>
<script src="../../_static/f304fc21fa/js/script_foot_android9e29.js?hl=ja"></script>

<script type="text/javascript">
  var toRoot = 'https://developer.android.com/';
  devsite.permissions.init({"039e5d84b87fd75807ffb37b7f1bbf2c": true, "098dafe57affddc137df300142652cfd": false, "cb025a64a50094835616312f4774a53d": true, "51470233c56fc1fde50f00b73c52b216": false, "752953480de00a336d911a46966cc16d": false, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true});

  var replaceBlog = false;
  var replaceYouTube = false;
  var siteDefaultLocale = 'en';

  var ANDROID_LANGUAGES = [
      'id','de','en','es','es-419','fr','pt-br','vi','tr','ru','th','ja','zh-cn','zh-tw','ko'
  ];
</script>
<script src="../../static/js/docsdd52.js?hl=ja?v=2017061508" type="text/javascript"></script>


</head>

<body class="gc-documentation
            
            
              develop
              guide
            
            "
      itemscope itemtype="http://schema.org/Article">
  


  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;ja&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;ja&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-49880327-2&quot;}">
  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;ja&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;ja&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-5831155-1&quot;}">
  



  
  
    <script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "userCountry": "BE", "language": {"requested": "ja", "served": "ja"}, "projectName": "API Guides", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>
  



  
  <a href="#top" id="skip-to-main">Skip to content</a>
  <header id="header-wrapper">
    <div class="dac-header" id="header">
      <div class="dac-header-inner">
        <a class="dac-nav-toggle" data-dac-toggle-nav href="#" title="Open navigation">
          <span class="dac-nav-hamburger">
            <span class="dac-nav-hamburger-top"></span>
            <span class="dac-nav-hamburger-mid"></span>
            <span class="dac-nav-hamburger-bot"></span>
          </span>
        </a>
        
        <a class="dac-header-logo" href="https://developer.android.com/index.html?hl=ja">
          <img class="dac-header-logo-image" src="../../static/images/android_logo9e29.png?hl=ja"
              srcset="https://developer.android.com/static/images/android_logo_2x.png 2x?hl=ja"
              width="32" height="36" alt="Android"> Developers</a>
        <ul class="dac-header-tabs">
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/design/index.html?hl=ja"
               zh-tw-lang="設計"
               zh-cn-lang="设计"
               ru-lang="Проектирование"
               ko-lang="디자인"
               ja-lang="設計"
               es-lang="Diseñar">Design</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/develop/index.html?hl=ja"
               zh-tw-lang="開發"
               zh-cn-lang="开发"
               ru-lang="Разработка"
               ko-lang="개발"
               ja-lang="開発"
               es-lang="Desarrollar">Develop</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/distribute/index.html?hl=ja"
               zh-tw-lang="發佈"
               zh-cn-lang="分发"
               ru-lang="Распространение"
               ko-lang="배포"
               ja-lang="配布"
               es-lang="Distribuir">Distribute</a>
          </li>
        </ul>


        

        <a class="dac-header-console-btn gc-analytics-event" href="https://play.google.com/apps/publish/"
           data-category="User" data-action="Console" data-label="Clicked">
          <img src="https://developer.android.com/static/images/developer-console-icon.svg?hl=ja" width="18" height="19" alt="Play コンソール">Play Console</a>

        

<form data-search="" class="dac-header-search">
  <button class="dac-header-search-close" data-search-close="">
    <i class="dac-sprite dac-back-arrow"></i>
  </button>

  <div class="dac-header-search-inner">
    <i class="dac-sprite dac-search-white dac-header-search-icon"></i>
    
    <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q" class="dac-header-search-input" placeholder="検索">
    <button class="dac-header-search-clear dac-hidden" data-search-clear="">
      <i class="dac-sprite dac-close-black"></i>
    </button>
  </div>
</form>

        
      </div><!--/.header-wrap.wrap-->
    </div><!--/.header-->

    

<div id="search-results" class="dac-search-results">
  <div id="dac-search-results-history" class="dac-search-results-history">
    <div class="wrap dac-search-results-history-wrap">
      <div class="cols">
        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Most visited</h2>
          <div class="resource-flow-layout" data-history-query="history:most/visited" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>

        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Recently visited</h2>
          <div class="resource-flow-layout cols" data-history-query="history:recent" data-allow-duplicates="true" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="dac-search-results-content" class="dac-search-results-content">
    <div class="dac-search-results-metadata wrap">
      <div class="dac-search-results-for">
        
          <h2>
          Results for <span id="search-results-for"></span>
          </h2>
      </div>

      <div id="dac-search-results-hero"></div>

      <div class="dac-search-results-hero cols">
        <div id="dac-search-results-reference" class="col-6of6 col-tablet-2of2 col-mobile-1of1">
          <div class="suggest-card reference no-display">
            <ul class="dac-search-results-reference">
            </ul>
          </div>
        </div>
      </div>

      <div class="cols dac-search-results-cse">
        <script src="../../../cse.google.com/f4116.txt?cx=000521750095050289010:zpcpi1ea4s8" async></script>
        <gcse:searchresults-only linkTarget="_self"></gcse:searchresults-only>
      </div>
    </div>
  </div>
</div>

  </header>

  <a name="navigation" tabindex=0 class="nav-start-marker">navigation</a>
  <nav class="dac-nav">
    <div class="dac-nav-dimmer" data-dac-toggle-nav></div>
    <div class="dac-nav-sidebar" data-swap data-dynamic="false" data-transition-speed="300" data-dac-nav>
      <div data-swap-container>
        
        <a class="dac-nav-back-button dac-swap-section dac-up dac-no-anim" tabindex=0 data-swap-button>
          
          <i class="dac-sprite dac-nav-back"></i> <span class="dac-nav-back-title">戻る</span>
        </a>

        <div class="dac-nav-sub dac-swap-section dac-right dac-active" itemscope
            itemtype="http://schema.org/SiteNavigationElement">
          
          
            
            <ul id="nav">
              <li class="nav-section"><div class="nav-section-header"><a href="../index9e29.html?hl=ja" >はじめに</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="fundamentals9e29.html?hl=ja" >アプリケーションの基礎</a></li><li><a href="../practices/compatibility9e29.html?hl=ja" >端末の互換性</a></li><li><a href="../topics/security/permissions9e29.html?hl=ja" >システム パーミッション</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../platform/index9e29.html?hl=ja" >プラットフォーム アーキテクチャ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../platform/j8-jack9e29.html?hl=ja"  es-lang="Funciones del lenguaje Java 8" in-lang="Fitur Bahasa Java 8" ja-lang="Java 8 の機能" ko-lang="Java 8 언어 기능" pt-br-lang="Recursos de linguagem do Java 8" ru-lang="Возможности языка Java 8" vi-lang="Tính năng của Ngôn ngữ Java 8" zh-cn-lang="Java 8 语言功能" zh-tw-lang="Java 8 語言功能">Java 8 の言語機能を使う</a></li><li><a href="../practices/verifying-apps-art9e29.html?hl=ja" >Android ランタイム（ART）でのアプリの動作確認</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="index9e29.html?hl=ja" >アプリのコンポーネント</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="intents-filters9e29.html?hl=ja" >インテントとインテント フィルタ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="intents-common9e29.html?hl=ja" >一般的なインテント</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="activities9e29.html?hl=ja" >アクティビティ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="fragments9e29.html?hl=ja" >フラグメント</a></li><li><a href="loaders9e29.html?hl=ja" >ローダ</a></li><li><a href="tasks-and-back-stack9e29.html?hl=ja" >タスクとバックスタック</a></li><li><a href="recents9e29.html?hl=ja" >オーバービュー画面</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="services9e29.html?hl=ja" >サービス</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="bound-services9e29.html?hl=ja" >バインドされたサービス</a></li><li><a href="aidl9e29.html?hl=ja" >AIDL</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/providers/content-providers9e29.html?hl=ja" >コンテンツ プロバイダ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/providers/content-provider-basics9e29.html?hl=ja" >コンテンツ プロバイダの基本</a></li><li><a href="../topics/providers/content-provider-creating9e29.html?hl=ja" >コンテンツ プロバイダの作成</a></li><li><a href="../topics/providers/calendar-provider9e29.html?hl=ja" >カレンダー プロバイダ</a></li><li><a href="../topics/providers/contacts-provider9e29.html?hl=ja" >連絡先プロバイダ</a></li><li><a href="../topics/providers/document-provider9e29.html?hl=ja" >ストレージ アクセス フレームワーク</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/appwidgets/index9e29.html?hl=ja" >アプリ ウィジェット</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/appwidgets/host9e29.html?hl=ja" >アプリ ウィジェットのホスト</a></li></ul></li><li><a href="processes-and-threads9e29.html?hl=ja" >プロセスとスレッド</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/resources/index9e29.html?hl=ja" >アプリのリソース</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/resources/overview9e29.html?hl=ja" >リソースの概要</a></li><li><a href="../topics/resources/providing-resources9e29.html?hl=ja" >リソースの提供</a></li><li><a href="../topics/resources/accessing-resources9e29.html?hl=ja" >リソースへのアクセス</a></li><li><a href="../topics/resources/runtime-changes9e29.html?hl=ja" >実行時の変更の処理</a></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/resources/localization9e29.html?hl=ja" >ローカライズ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/resources/icu4j-framework9e29.html?hl=ja" >ICU4J Android Framework API</a></li><li><a href="../topics/resources/multilingual-support9e29.html?hl=ja" >言語とロケール</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/resources/available-resources9e29.html?hl=ja" >リソースのタイプ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/resources/animation-resource9e29.html?hl=ja" >アニメーション</a></li><li><a href="../topics/resources/color-list-resource9e29.html?hl=ja" >色状態リスト</a></li><li><a href="../topics/resources/drawable-resource9e29.html?hl=ja" >ドローアブル</a></li><li><a href="../topics/resources/layout-resource9e29.html?hl=ja" >レイアウト</a></li><li><a href="../topics/resources/menu-resource9e29.html?hl=ja" >メニュー</a></li><li><a href="../topics/resources/string-resource9e29.html?hl=ja" >文字列</a></li><li><a href="../topics/resources/style-resource9e29.html?hl=ja" >スタイル</a></li><li><a href="../topics/resources/more-resources9e29.html?hl=ja" >その他のタイプ</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/manifest/manifest-intro9e29.html?hl=ja" >アプリ マニフェスト</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/manifest/action-element9e29.html?hl=ja" >&lt;action&gt;</a></li><li><a href="../topics/manifest/activity-element9e29.html?hl=ja" >&lt;activity&gt;</a></li><li><a href="../topics/manifest/activity-alias-element9e29.html?hl=ja" >&lt;activity-alias&gt;</a></li><li><a href="../topics/manifest/application-element9e29.html?hl=ja" >&lt;application&gt;</a></li><li><a href="../topics/manifest/category-element9e29.html?hl=ja" >&lt;category&gt;</a></li><li><a href="../topics/manifest/compatible-screens-element9e29.html?hl=ja" >&lt;compatible-screens&gt;</a></li><li><a href="../topics/manifest/data-element9e29.html?hl=ja" >&lt;data&gt;</a></li><li><a href="../topics/manifest/grant-uri-permission-element9e29.html?hl=ja" >&lt;grant-uri-permission&gt;</a></li><li><a href="../topics/manifest/instrumentation-element9e29.html?hl=ja" >&lt;instrumentation&gt;</a></li><li><a href="../topics/manifest/intent-filter-element9e29.html?hl=ja" >&lt;intent-filter&gt;</a></li><li><a href="../topics/manifest/manifest-element9e29.html?hl=ja" >&lt;manifest&gt;</a></li><li><a href="../topics/manifest/meta-data-element9e29.html?hl=ja" >&lt;meta-data&gt;</a></li><li><a href="../topics/manifest/path-permission-element9e29.html?hl=ja" >&lt;path-permission&gt;</a></li><li><a href="../topics/manifest/permission-element9e29.html?hl=ja" >&lt;permission&gt;</a></li><li><a href="../topics/manifest/permission-group-element9e29.html?hl=ja" >&lt;permission-group&gt;</a></li><li><a href="../topics/manifest/permission-tree-element9e29.html?hl=ja" >&lt;permission-tree&gt;</a></li><li><a href="../topics/manifest/provider-element9e29.html?hl=ja" >&lt;provider&gt;</a></li><li><a href="../topics/manifest/receiver-element9e29.html?hl=ja" >&lt;receiver&gt;</a></li><li><a href="../topics/manifest/service-element9e29.html?hl=ja" >&lt;service&gt;</a></li><li><a href="../topics/manifest/supports-gl-texture-element9e29.html?hl=ja" >&lt;supports-gl-texture&gt;</a></li><li><a href="../topics/manifest/supports-screens-element9e29.html?hl=ja" >&lt;supports-screens&gt;</a></li><li><a href="../topics/manifest/uses-configuration-element9e29.html?hl=ja" >&lt;uses-configuration&gt;</a></li><li><a href="../topics/manifest/uses-feature-element9e29.html?hl=ja" >&lt;uses-feature&gt;</a></li><li><a href="../topics/manifest/uses-library-element9e29.html?hl=ja" >&lt;uses-library&gt;</a></li><li><a href="../topics/manifest/uses-permission-element9e29.html?hl=ja" >&lt;uses-permission&gt;</a></li><li><a href="../topics/manifest/uses-permission-sdk-23-element9e29.html?hl=ja" >&lt;uses-permission-sdk-23&gt;</a></li><li><a href="../topics/manifest/uses-sdk-element9e29.html?hl=ja" >&lt;uses-sdk&gt;</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/ui/index9e29.html?hl=ja" >ユーザー インターフェース</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/ui/overview9e29.html?hl=ja" >UI の概要</a></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/ui/declaring-layout9e29.html?hl=ja" >レイアウト</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/ui/layout/linear9e29.html?hl=ja" >線形レイアウト</a></li><li><a href="../topics/ui/layout/relative9e29.html?hl=ja" >相対レイアウト</a></li><li><a href="../topics/ui/layout/listview9e29.html?hl=ja" >リストビュー</a></li><li><a href="../topics/ui/layout/gridview9e29.html?hl=ja" >グリッドビュー</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/ui/controls9e29.html?hl=ja" >入力コントロール</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/ui/controls/button9e29.html?hl=ja" >ボタン</a></li><li><a href="https://developer.android.com/training/keyboard-input/style.html?hl=ja" >テキスト フィールド</a></li><li><a href="../topics/ui/controls/checkbox9e29.html?hl=ja" >チェックボックス</a></li><li><a href="../topics/ui/controls/radiobutton9e29.html?hl=ja" >ラジオボタン</a></li><li><a href="../topics/ui/controls/togglebutton9e29.html?hl=ja" >切り替えボタン</a></li><li><a href="../topics/ui/controls/spinner9e29.html?hl=ja" >スピナー</a></li><li><a href="../topics/ui/controls/pickers9e29.html?hl=ja" >ピッカー</a></li></ul></li><li><a href="../topics/ui/ui-events9e29.html?hl=ja" >入力イベント</a></li><li><a href="../topics/ui/menus9e29.html?hl=ja" >メニュー</a></li><li><a href="../topics/ui/settings9e29.html?hl=ja" >設定</a></li><li><a href="../topics/ui/dialogs9e29.html?hl=ja" >ダイアログ</a></li><li><a href="../topics/ui/notifiers/notifications9e29.html?hl=ja" >通知</a></li><li><a href="../topics/ui/notifiers/toasts9e29.html?hl=ja" >トースト</a></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/search/index9e29.html?hl=ja" >検索</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/search/search-dialog9e29.html?hl=ja" >検索インターフェースの作成</a></li><li><a href="../topics/search/adding-recent-query-suggestions9e29.html?hl=ja" >検索候補の表示の追加</a></li><li><a href="../topics/search/adding-custom-suggestions9e29.html?hl=ja" >カスタム候補の追加</a></li><li><a href="../topics/search/searchable-config9e29.html?hl=ja" >検索可能な設定</a></li></ul></li><li><a href="../topics/ui/multi-window9e29.html?hl=ja" >マルチ ウィンドウのサポート</a></li><li><a href="../topics/ui/drag-drop9e29.html?hl=ja" >ドラッグ＆ドロップ</a></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/ui/accessibility/index9e29.html?hl=ja" >ユーザー補助機能</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/ui/accessibility/apps9e29.html?hl=ja" >ユーザー補助機能に対応</a></li><li><a href="../topics/ui/accessibility/checklist9e29.html?hl=ja" >ユーザー補助機能のデベロッパー チェックリスト</a></li><li><a href="../topics/ui/accessibility/services9e29.html?hl=ja" >ユーザー補助機能サービスの作成</a></li></ul></li><li><a href="../topics/ui/themes9e29.html?hl=ja" >スタイルとテーマ</a></li><li><a href="../topics/ui/custom-components9e29.html?hl=ja" >カスタム コンポーネント</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/graphics/index9e29.html?hl=ja" >アニメーションとグラフィック</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/graphics/overview9e29.html?hl=ja" >アニメーションとグラフィックの概要</a></li><li><a href="../topics/graphics/prop-animation9e29.html?hl=ja" >プロパティ アニメーション</a></li><li><a href="../topics/graphics/view-animation9e29.html?hl=ja" >ビュー アニメーション</a></li><li><a href="../topics/graphics/drawable-animation9e29.html?hl=ja" >ドローアブル アニメーション</a></li><li><a href="../topics/graphics/2d-graphics9e29.html?hl=ja" >キャンバスとドローアブル</a></li><li><a href="../topics/graphics/opengl9e29.html?hl=ja" >OpenGL ES</a></li><li><a href="../topics/graphics/hardware-accel9e29.html?hl=ja" >ハードウェア アクセラレーション</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/renderscript/index9e29.html?hl=ja" >演算処理</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/renderscript/compute9e29.html?hl=ja" >RenderScript</a></li><li><a href="../topics/renderscript/advanced9e29.html?hl=ja" >高度な RenderScript</a></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/renderscript/reference/overview9e29.html?hl=ja" >ランタイム API リファレンス</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/renderscript/reference/rs_value_types9e29.html?hl=ja" >数値型</a></li><li><a href="../topics/renderscript/reference/rs_object_types9e29.html?hl=ja" >オブジェクト型</a></li><li><a href="../topics/renderscript/reference/rs_convert9e29.html?hl=ja" >変換関数</a></li><li><a href="../topics/renderscript/reference/rs_math9e29.html?hl=ja" >数学定数と数学関数</a></li><li><a href="../topics/renderscript/reference/rs_vector_math9e29.html?hl=ja" >ベクター数学関数</a></li><li><a href="../topics/renderscript/reference/rs_matrix9e29.html?hl=ja" >行列関数</a></li><li><a href="../topics/renderscript/reference/rs_quaternion9e29.html?hl=ja" >四元数関数</a></li><li><a href="../topics/renderscript/reference/rs_atomic9e29.html?hl=ja" >アトミック更新関数</a></li><li><a href="../topics/renderscript/reference/rs_time9e29.html?hl=ja" >時間関数と時間型</a></li><li><a href="../topics/renderscript/reference/rs_allocation_data9e29.html?hl=ja" >アロケーション データ アクセス関数</a></li><li><a href="../topics/renderscript/reference/rs_object_info9e29.html?hl=ja" >オブジェクト特性関数</a></li><li><a href="../topics/renderscript/reference/rs_for_each9e29.html?hl=ja" >カーネル呼び出し関数とカーネル呼び出し型</a></li><li><a href="../topics/renderscript/reference/rs_io9e29.html?hl=ja" >入出力関数</a></li><li><a href="../topics/renderscript/reference/rs_debug9e29.html?hl=ja" >デバッグ関数</a></li><li><a href="../topics/renderscript/reference/rs_graphics9e29.html?hl=ja" >グラフィック関数とグラフィック型</a></li><li><a href="../topics/renderscript/reference/index9e29.html?hl=ja" >インデックス</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/media/index9e29.html?hl=ja" >メディアとカメラ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/media/mediaplayer9e29.html?hl=ja" >メディア再生</a></li><li><a href="../topics/media/mediarouter9e29.html?hl=ja" >メディア ルーター</a></li><li><a href="../topics/media/mediarouteprovider9e29.html?hl=ja" >メディア ルーター プロバイダ</a></li><li><a href="../topics/media/exoplayer9e29.html?hl=ja" >ExoPlayer</a></li><li><a href="../topics/media/media-formats9e29.html?hl=ja" >サポートされているメディア形式</a></li><li><a href="../topics/media/mediarecorder9e29.html?hl=ja" >オーディオの録音</a></li><li><a href="../topics/media/jetplayer9e29.html?hl=ja" >JetPlayer</a></li><li><a href="../topics/media/camera9e29.html?hl=ja" >カメラ</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/sensors/index9e29.html?hl=ja" >位置情報とセンサー</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/location/index9e29.html?hl=ja" >位置情報と地図</a></li><li><a href="../topics/location/strategies9e29.html?hl=ja" >位置情報に関する戦略</a></li><li><a href="../topics/sensors/sensors_overview9e29.html?hl=ja" >センサーの概要</a></li><li><a href="../topics/sensors/sensors_motion9e29.html?hl=ja" >モーション センサー</a></li><li><a href="../topics/sensors/sensors_position9e29.html?hl=ja" >位置センサー</a></li><li><a href="../topics/sensors/sensors_environment9e29.html?hl=ja" >環境センサー</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/connectivity/index9e29.html?hl=ja" >ネットワーク接続</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../topics/connectivity/bluetooth9e29.html?hl=ja" >Bluetooth</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/connectivity/bluetooth-le9e29.html?hl=ja" >Bluetooth Low Energy</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/connectivity/nfc/index9e29.html?hl=ja" >NFC</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/connectivity/nfc/nfc9e29.html?hl=ja" >NFC の基本</a></li><li><a href="../topics/connectivity/nfc/advanced-nfc9e29.html?hl=ja" >NFC の高度な利用</a></li><li><a href="../topics/connectivity/nfc/hce9e29.html?hl=ja" >ホストベースのカード エミュレーション</a></li></ul></li><li><a href="../topics/connectivity/wifip2p9e29.html?hl=ja" >Wi-Fi P2P</a></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/connectivity/usb/index9e29.html?hl=ja" >USB</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/connectivity/usb/accessory9e29.html?hl=ja" >アクセサリ</a></li><li><a href="../topics/connectivity/usb/host9e29.html?hl=ja" >ホスト</a></li></ul></li><li><a href="../topics/connectivity/sip9e29.html?hl=ja" >SIP</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/text/index9e29.html?hl=ja" >テキストと入力</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/text/copy-paste9e29.html?hl=ja" >コピーとペースト</a></li><li><a href="../topics/text/creating-input-method9e29.html?hl=ja" >IME の作成</a></li><li><a href="../topics/text/spell-checker-framework9e29.html?hl=ja" >スペル チェッカー</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/data/index9e29.html?hl=ja" >データ ストレージ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/data/data-storage9e29.html?hl=ja" >ストレージ オプション</a></li><li><a href="../topics/data/backup9e29.html?hl=ja" >データのバックアップ</a></li><li><a href="../topics/data/install-location9e29.html?hl=ja" >アプリのインストール場所</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/topic/libraries/index.html?hl=ja" >ライブラリ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/topic/libraries/support-library/index.html?hl=ja" >Support Library</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="https://developer.android.com/topic/libraries/support-library/features.html?hl=ja" >機能</a></li><li><a href="https://developer.android.com/topic/libraries/support-library/setup.html?hl=ja" >セットアップ</a></li><li><a href="https://developer.android.com/topic/libraries/support-library/revisions.html?hl=ja" >変更履歴</a></li></ul></li><li><a href="https://developer.android.com/topic/libraries/data-binding/index.html?hl=ja" >データ バインディング ライブラリ</a></li><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/topic/libraries/testing-support-library/index.html?hl=ja" >Testing Support Library</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="https://developer.android.com/reference/android/support/test/package-summary.html?hl=ja" >API リファレンス</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/admin/index9e29.html?hl=ja" >管理</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/admin/device-admin9e29.html?hl=ja" >端末ポリシー</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../webapps/index9e29.html?hl=ja" >ウェブアプリ</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../webapps/targeting9e29.html?hl=ja" >ウェブアプリでの異なる画面のサポート</a></li><li><a href="../webapps/webview9e29.html?hl=ja" >WebView によるウェブアプリの作成</a></li><li><a href="../webapps/migrating9e29.html?hl=ja" >Android 4.4 での WebView への移行</a></li><li><a href="../webapps/debugging9e29.html?hl=ja" >ウェブアプリのデバッグ</a></li><li><a href="../webapps/best-practices9e29.html?hl=ja" >ウェブアプリのベスト プラクティス</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../practices/index9e29.html?hl=ja"  de-lang="Bewährte Verfahren" es-lang="Prácticas recomendadas" fr-lang="Meilleures pratiques" it-lang="Best practice" ja-lang="ベスト プラクティス" zh-cn-lang="最佳实践" zh-tw-lang="最佳實務">ベスト プラクティス</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../practices/screens_support9e29.html?hl=ja" >複数の画面のサポート</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../practices/screens-distribution9e29.html?hl=ja" >特定の画面の端末にのみ配布</a></li><li><a href="../practices/screen-compat-mode9e29.html?hl=ja" >画面互換性モード</a></li></ul></li><li><a href="../practices/tablets-and-handsets9e29.html?hl=ja" >タブレットとハンドセットのサポート</a></li></ul></li>
            </ul>
            
          
        </div>
        
        
          



<ul id="dac-main-navigation" class="dac-nav-list dac-swap-section dac-left dac-no-anim" tabindex=0>
  <li class="dac-nav-item home">
    <a class="dac-nav-link" href="https://developer.android.com/index.html?hl=ja">ホーム</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary about">
      <li class="dac-nav-item versions">
        <a class="dac-nav-link" href="https://developer.android.com/about/versions/nougat/index.html?hl=ja">Android</a>
      </li>
      <li class="dac-nav-item wear">
        <a class="dac-nav-link" href="https://developer.android.com/wear/index.html?hl=ja">Wear</a>
      </li>
      <li class="dac-nav-item tv">
        <a class="dac-nav-link" href="https://developer.android.com/tv/index.html?hl=ja">TV</a>
      </li>
      <li class="dac-nav-item auto">
        <a class="dac-nav-link" href="https://developer.android.com/auto/index.html?hl=ja">Auto</a>
      </li>
      <li class="dac-nav-item things">
        <a class="dac-nav-link" href="https://developer.android.com/things/index.html?hl=ja">Things</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item design">
    <a class="dac-nav-link" href="https://developer.android.com/design/index.html?hl=ja"
       zh-tw-lang="設計"
       zh-cn-lang="设计"
       ru-lang="Проектирование"
       ko-lang="디자인"
       ja-lang="設計"
       es-lang="Diseñar">Design</a>
  </li>
  <li class="dac-nav-item develop">
    <a class="dac-nav-link" href="https://developer.android.com/develop/index.html?hl=ja"
       zh-tw-lang="開發"
       zh-cn-lang="开发"
       ru-lang="Разработка"
       ko-lang="개발"
       ja-lang="開発"
       es-lang="Desarrollar">Develop</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary develop">
      <li class="dac-nav-item training">
        <a class="dac-nav-link" href="https://developer.android.com/training/index.html?hl=ja"
           zh-tw-lang="訓練課程"
           zh-cn-lang="培训"
           ru-lang="Курсы"
           ko-lang="교육"
           ja-lang="トレーニング"
           es-lang="Capacitación">トレーニング</a>
      </li>
      <li class="dac-nav-item guide">
        <a class="dac-nav-link" href="../index9e29.html?hl=ja"
           zh-tw-lang="API 指南"
           zh-cn-lang="API 指南"
           ru-lang="Руководства по API"
           ko-lang="API 가이드"
           ja-lang="API ガイド"
           es-lang="Guías de la API">API Guides</a>
      </li>
      <li class="dac-nav-item reference">
        <a class="dac-nav-link" href="https://developer.android.com/reference/packages.html?hl=ja"
           zh-tw-lang="參考資源"
           zh-cn-lang="参考"
           ru-lang="Справочник"
           ko-lang="참조문서"
           ja-lang="リファレンス"
           es-lang="Referencia">リファレンス</a>
      </li>
      <li class="dac-nav-item samples">
        <a class="dac-nav-link" href="https://developer.android.com/samples/index.html?hl=ja">サンプル</a>
      </li>
      <li class="dac-nav-item libraries">
        <a class="dac-nav-link" href="https://developer.android.com/topic/libraries/index.html?hl=ja"
           >ライブラリ</a></li>
      <li class="dac-nav-item studio">
        <a class="dac-nav-link" href="https://developer.android.com/studio/index.html?hl=ja"
           >Android Studio</a></li>
      <li class="dac-nav-item ndk">
        <a class="dac-nav-link" href="https://developer.android.com/ndk/index.html?hl=ja"
           >Android NDK</a></li>
      <li class="dac-nav-item google">
        <a class="dac-nav-link" href="https://developer.android.com/google/index.html?hl=ja">Google Services</a>
      </li>
      <li class="dac-nav-item quality-guidelines">
        <a class="dac-nav-link" href="https://developer.android.com/develop/quality-guidelines/index.html?hl=ja">Quality Guidelines</a>
      </li>
      <li class="dac-nav-item kotlin">
        <a class="dac-nav-link" href="https://developer.android.com/kotlin/index.html?hl=ja">Kotlin</a>
       </li>
    </ul>
  </li>
  <li class="dac-nav-item distribute">
    <a class="dac-nav-link" href="https://developer.android.com/distribute/index.html?hl=ja"
       zh-tw-lang="發佈"
       zh-cn-lang="分发"
       ru-lang="Распространение"
       ko-lang="배포"
       ja-lang="配布"
       de-lang="Vertrieb"
       es-lang="Distribuir"
       es-419-lang="Distribuye"
       fr-lang="Distribuer"
       id-lang="Distribusikan"
       pt-br-lang="Distribuição"
       th-lang="จัดจำหน่าย"
       tr-lang="Dağıtma"
       vi-lang="Phân phối">Distribute</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary distribute">
      <li class="dac-nav-item google-play">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/google-play/index.html?hl=ja">Google Play</a>
      </li>
      <li class="dac-nav-item console">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/console/index.html?hl=ja">Play コンソール</a>
      </li>
      <li class="dac-nav-item best-practices">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/best-practices/index.html?hl=ja"
          es-419-lang="Recomendaciones"
          fr-lang="Bonnes pratiques"
          id-lang="Praktik terbaik"
          ja-lang="おすすめの方法"
          ko-lang="권장사항"
          pt-br-lang="Práticas recomendadas"
          ru-lang="Рекомендации"
          th-lang="จัดจำหน่าย"
          tr-lang="En iyi uygulamalar"
          vi-lang="Các phương pháp hay nhất"
          zh-cn-lang="最佳做法"
          zh-tw-lang="最佳做法">Best practices</a>
      </li>
      <li class="dac-nav-item marketing-tools">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/marketing-tools/index.html?hl=ja"
          de-lang="Marketing-Tools"
          es-419-lang="Herramientas de marketing"
          fr-lang="Outils marketing"
          id-lang="Fitur pemasaran"
          ja-lang="マーケティング ツール"
          ko-lang="마케팅 도구"
          pt-br-lang="Ferramentas de marketing"
          ru-lang="Маркетинговые инструменты"
          th-lang="เครื่องมือการตลาด"
          tr-lang="Pazarlama araçları"
          vi-lang="Công cụ tiếp thị"
          zh-cn-lang="营销工具"
          zh-tw-lang="行銷工具">Marketing tools</a>
      </li>
      <li class="dac-nav-item policy-center">
        <a class="dac-nav-link" href="https://play.google.com/about/developer-content-policy/" target="_blank">Policy center</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item stories">
    <a class="dac-nav-link" href="https://developer.android.com/stories/index.html?hl=ja">Stories</a>
  </li>
  
  <li class="dac-nav-item preview">
    <a class="dac-nav-link" href="https://developer.android.com/preview/index.html?hl=ja">Preview</a>
  </li>
  
</ul>

        
      </div>
    </div>
  </nav>

  <a name="top" tabindex="0"></a>
  
  <div class="wrap clearfix" id="body-content">
  
    
      
      <div class="content-header">
        <ul class="dac-header-crumbs"></ul>
        <!-- Breadcrumb Setup -->
        <script>$('.dac-nav-list').dacCurrentPage().dacCrumbs();</script>
        <h1 itemprop="name">Android インターフェース定義言語（AIDL）</h1>
      
        
      
      </div>
      
    
    <div class="jd-descr " itemprop="articleBody">
      

<div id="qv-wrapper">
<div id="qv">
<h2>このドキュメントの内容</h2>
<ol>
  <li><a href="#Defining">AIDL インターフェースの定義</a>
    <ol>
      <li><a href="#Create">.aidl ファイルを作成する</a></li>
      <li><a href="#Implement">インターフェースを実装する</a></li>
      <li><a href="#Expose">インターフェースをクライアントに公開する</a></li>
    </ol>
  </li>
  <li><a href="#PassingObjects">IPC によるオブジェクトの受け渡し</a></li>
  <li><a href="#Calling">IPC メソッドの呼び出し</a></li>
</ol>

<h2>関連ドキュメント</h2>
<ol>
  <li><a href="bound-services9e29.html?hl=ja">バインドされたサービス</a></li>
</ol>

</div>
</div>


<p>AIDL（Android インターフェース定義言語）は、広く使用されている IDL の一種で、
クライアントとサービスがプロセス間通信（IPC）で相互に通信するために双方が合意する必要があるプログラミング インターフェースを定義するものです。

通常、Android のプロセスは、別のプロセスのメモリにアクセスすることはできません。
そのため、相互に通信を行うには、オペレーティング システムが理解できるプリミティブにオブジェクトを分解し、プロセスの境界をまたいでから再度オブジェクトとしてまとめなおす（マーシャルする）必要があります。
このマーシャル処理を実行するコードを毎回記述するのは非効率なので、Android が AIDL を利用してその処理を代行するようになっています。
</p>

<p class="note"><strong>注: </strong>AIDL の利用が必須となるのは、クライアントが別のアプリケーションから IPC を実行し、かつサービスがマルチスレッド対応である場合のみです。

別のアプリケーションから並列に IPC を行う必要がない場合は、<a href="bound-services9e29.html?hl=ja#Binder">Binder を実装</a>してインターフェースを作成します。また、IPC を実行してもマルチスレッドに対応する必要がない場合は、<a href="bound-services9e29.html?hl=ja#Messenger">Messenger を使用</a>してインターフェースを実装します。いずれの場合も、AIDL を実装する前に<a href="bound-services9e29.html?hl=ja">バインドされたサービス</a>について理解するようにしてください。<em></em>




</p>

<p>AIDL インターフェースの設計を始める前に、AIDL インターフェースの呼び出しは直接関数呼び出しであることに注意する必要があります。
どのスレッドから呼び出されるかを仮定することはできません。
ローカル プロセスのスレッドからの呼び出しか、リモート プロセスのスレッドからの呼び出しかによって、実行される処理は異なります。
特に次の点に注意が必要です。</p>

<ul>
<li>ローカル プロセスからの呼び出しは、呼び出しを行ったスレッドと同じスレッドで実行されます。メイン UI スレッドから呼び出した場合、メイン UI スレッド上で AIDL インターフェースの実行が継続されます。
別のスレッドから呼び出した場合、そのスレッドでサービスのコードが実行されます。
そのため、サービスにアクセスするのがローカル スレッドのみの場合は、どのスレッドで実行されるかを完全に制御することができます（ただし、その場合はそもそも AIDL を使用するべきではなく、<a href="bound-services9e29.html?hl=ja#Binder">Binder を実装</a>してインターフェースを作成するべきです）。



</li>

<li>リモート プロセスから呼び出される場合、サービス側のプロセス内でプラットフォームが管理するスレッド プールからディスパッチされます。
この場合、未知のスレッドから同時に着信する複数の呼び出しに対応できる必要があります。
つまり、AIDL インターフェースの実装は完全にスレッド セーフでなければなりません。
</li>

<li><code>oneway</code> キーワードによって、リモート呼び出しの動作を変更できます。このキーワードを利用すると、リモート呼び出しの際に、トランザクション データを送信した後すぐに処理が戻されるため、処理がブロックされることはありません。その後、インターフェースの実装は <code><a href="https://developer.android.com/reference/android/os/Binder.html?hl=ja">Binder</a></code> スレッド プールからの通常の呼び出しとして結果を受信します。これは通常のリモート呼び出しとして扱われます。

<code>oneway</code> はローカル呼び出しには影響しません。ローカル呼び出しは同期的に処理されます。
</li>
</ul>


<h2 id="Defining">AIDL インターフェースの定義</h2>

<p>AIDL インターフェースは、Java プログラミング言語の構文を使用して <code>.aidl</code> ファイルで定義します。このファイルは、サービスをホストするアプリと、サービスにバインドするすべてのアプリのソースコード（<code>src/</code> ディレクトリ内）に保存します。

</p>

<p><code>.aidl</code> ファイルを含むアプリをビルドすると、Android SDK ツールが <code>.aidl</code> ファイルに基づいて <code><a href="https://developer.android.com/reference/android/os/IBinder.html?hl=ja">IBinder</a></code> インターフェースを生成し、その結果をプロジェクトの <code>gen/</code> ディレクトリに保存します。

サービスは、必要に応じて <code><a href="https://developer.android.com/reference/android/os/IBinder.html?hl=ja">IBinder</a></code> インターフェースを実装します。
その後、クライアント アプリケーションをサービスにバインドし、<code><a href="https://developer.android.com/reference/android/os/IBinder.html?hl=ja">IBinder</a></code> からメソッドを呼び出して IPC を実行できるようになります。
</p>

<p>AIDL を使用してバインドされたサービスを作成するには、次の手順に従います。</p>
<ol>
    <li><a href="#CreateAidl">.aidl ファイルを作成する</a>
      <p>このファイルでは、メソッド シグネチャを使ってプログラミング インターフェースを定義します。</p>
    </li>
    <li><a href="#ImplementTheInterface">インターフェースを実装する</a>
      <p>Android SDK ツールが <code>.aidl</code> ファイルに基づいて Java プログラミング言語でインターフェースを生成します。
このインターフェースには、<code>Stub</code> という名前の内部抽象クラスがあります。これは <code><a href="https://developer.android.com/reference/android/os/Binder.html?hl=ja">Binder</a></code> を拡張したクラスで、AIDL インターフェースで定義されたメソッドを実装しています。
この <code>Stub</code> クラスを拡張してメソッドを実装します。
</p>
    </li>
    <li><a href="#ExposeTheInterface">インターフェースをクライアントに公開する</a>
      <p><code><a href="https://developer.android.com/reference/android/app/Service.html?hl=ja">Service</a></code> を実装して <code><a href="https://developer.android.com/reference/android/app/Service.html?hl=ja#onBind(android.content.Intent)">onBind()</a></code> をオーバーライドし、<code>Stub</code> クラスの実装を返すようにします。
</p>
    </li>
</ol>

<p class="caution"><strong>警告: </strong>最初のリリース後に AIDL インターフェースを変更する場合は、サービスを利用する他のアプリケーションで問題が発生しないように、下方互換性を持たせる必要があります。

サービスのインターフェースにアクセスするアプリは <code>.aidl</code> ファイルのコピーを保持しています。そのため、元のインターフェースを維持する必要があります。

</p>


<h3 id="Create">1 .aidl ファイルを作成する</h3>

<p>AIDL では、パラメータと戻り値を持つ 1 つまたは複数のメソッドでインターフェースを宣言できる簡単な構文を使用します。
パラメータと戻り値には任意の型を指定できます。他の AIDL が生成するインターフェースを使用することもできます。
</p>

<p>まず、Java プログラミング言語で記述した <code>.aidl</code> ファイルを作成する必要があります。<code>.aidl</code> ファイルでは、1 つのインターフェースを宣言します。必要となるのは、インターフェースの宣言とメソッドのシグネチャのみです。

</p>

<p>AIDL はデフォルトで次のデータ型をサポートします。</p>

<ul>
  <li>Java プログラミング言語のすべてのプリミティブ型（<code>int</code>、<code>long</code>、<code>char</code>、<code>boolean</code> など）
</li>
  <li><code><a href="https://developer.android.com/reference/java/lang/String.html?hl=ja">String</a></code></li>
  <li><code><a href="https://developer.android.com/reference/java/lang/CharSequence.html?hl=ja">CharSequence</a></code></li>
  <li><code><a href="https://developer.android.com/reference/java/util/List.html?hl=ja">List</a></code>
    <p><code><a href="https://developer.android.com/reference/java/util/List.html?hl=ja">List</a></code> 内のすべての要素は、このリストに記載されているサポートされるデータ型、他の AIDL によって生成されたインターフェース、宣言済みの Parcelable のいずれかである必要があります。
<code><a href="https://developer.android.com/reference/java/util/List.html?hl=ja">List</a></code> には、総称型のクラス（たとえば <code>List&lt;String&gt;</code>）を使用することもできます。<code><a href="https://developer.android.com/reference/java/util/List.html?hl=ja">List</a></code> インターフェースを使用するメソッドが生成されますが、受信側が実際に受け取る具象クラスは常に <code><a href="https://developer.android.com/reference/java/util/ArrayList.html?hl=ja">ArrayList</a></code> になります。

</p>
  </li>
  <li><code><a href="https://developer.android.com/reference/java/util/Map.html?hl=ja">Map</a></code>
    <p><code><a href="https://developer.android.com/reference/java/util/Map.html?hl=ja">Map</a></code> 内のすべての要素は、このリストに記載されているサポートされるデータ型、他の AIDL によって生成されたインターフェース、宣言済みの Parcelable のいずれかである必要があります。
総称型の Map（たとえば <code>Map&lt;String,Integer&gt;</code> といった形式）はサポートされません。

<code><a href="https://developer.android.com/reference/java/util/Map.html?hl=ja">Map</a></code> インターフェースを使用するメソッドが生成されますが、受信側が実際に受け取る具象クラスは常に <code><a href="https://developer.android.com/reference/java/util/HashMap.html?hl=ja">HashMap</a></code> になります。

</p>
  </li>
</ul>

<p>ここに記載されていないその他の型を使用する場合は、<code>import</code> 文が必要になります。インターフェースと同じパッケージで定義されている場合でも、インポート宣言が必要です。
</p>

<p>サービス インターフェースを定義する際には、次の点に注意してください。</p>
<ul>
  <li>メソッドは、パラメータがあってもなくても構いません。また、値を戻すメソッドでも、void 型のメソッドでも構いません。</li>
  <li>プリミティブ以外のパラメータには、データが流れる方向を示す方向タグが必要です。これは、<code>in</code>、<code>out</code>、<code>inout</code> のいずれかです（以下の例をご覧ください）。

    <p>プリミティブはデフォルトで <code>in</code> であり、他の指定はできません。</p>
    <p class="caution"><strong>警告: </strong>パラメータのマーシャルは負荷が大きい処理であるため、実際に必要となる方向のみを指定してください。
</p></li>
  <li>生成される <code><a href="https://developer.android.com/reference/android/os/IBinder.html?hl=ja">IBinder</a></code> インターフェースには、<code>.aidl</code> ファイル内のすべてのコードコメントが含まれます。ただし、インポート宣言とパッケージ宣言の前にあるコメントは除きます。
</li>
    <li>サポートされるのはメソッドのみです。AIDL で静的フィールドを公開することはできません。</li>
</ul>

<p><code>.aidl</code> ファイルの例を次に示します。</p>

<pre>
// IRemoteService.aidl
package com.example.android;

// Declare any non-default types here with import statements

/** Example service interface */
interface IRemoteService {
    /** Request the process ID of this service, to do evil things with it. */
    int getPid();

    /** Demonstrates some basic types that you can use as parameters
     * and return values in AIDL.
     */
    void basicTypes(int anInt, long aLong, boolean aBoolean, float aFloat,
            double aDouble, String aString);
}
</pre>

<p><code>.aidl</code> ファイルは、プロジェクトの <code>src/</code> ディレクトリに保存します。アプリをビルドすると、SDK ツールがプロジェクトの <code>gen/</code> ディレクトリに <code><a href="https://developer.android.com/reference/android/os/IBinder.html?hl=ja">IBinder</a></code> インターフェース ファイルを生成します。

生成されたファイル名は <code>.aidl</code> ファイルの名前と同じですが、拡張子は <code>.java</code> になります。たとえば、<code>IRemoteService.aidl</code> から <code>IRemoteService.java</code> が生成されます。
</p>

<p>Android Studio を使用している場合、増分ビルドによりバインダクラスがほぼ瞬時に生成されます。Android Studio を使用していない場合は、次にアプリをビルドする際に Gradle ツールがバインダクラスを生成します。生成されるクラスにコードをリンクできるように、<code>.aidl</code> ファイルの記述後、できるだけ早くプロジェクトのビルドを行ってください。プロジェクトのビルドは、<code>gradle assembleDebug</code>（または <code>gradle assembleRelease</code>）で実行します。



</p>


<h3 id="Implement">2 インターフェースを実装する</h3>

<p>アプリをビルドすると、Android SDK ツールは <code>.aidl</code> ファイルと同じ名前の <code>.java</code> インターフェース ファイルを生成します。
生成されたインターフェースには、<code>Stub</code> という名前のサブクラスが含まれています。このクラス（たとえば、<code>YourInterface.Stub</code>）は、親インターフェースを実装する抽象クラスであり、<code>.aidl</code> ファイルのすべてのメソッドが宣言されています。
</p>

<p class="note"><strong>注:</strong> <code>Stub</code> には、いくつかのヘルパー メソッドも定義されています。中でも有用なのが <code>asInterface()</code> です。このメソッドは、<code><a href="https://developer.android.com/reference/android/os/IBinder.html?hl=ja">IBinder</a></code>（通常は、クライアントの <code><a href="https://developer.android.com/reference/android/content/ServiceConnection.html?hl=ja#onServiceConnected(android.content.ComponentName, android.os.IBinder)">onServiceConnected()</a></code> コールバック メソッドに渡されるもの）を受け取り、AIDL で定義されたインターフェースのインスタンスを返します。

このメソッドの詳細については、<a href="#Calling">IPC メソッドの呼び出し</a>のセクションをご覧ください。
</p>

<p><code>.aidl</code> から生成されたインターフェースを実装するには、生成された <code><a href="https://developer.android.com/reference/android/os/Binder.html?hl=ja">Binder</a></code> インターフェース（たとえば、<code>YourInterface.Stub</code>）を拡張し、そのクラスで <code>.aidl</code> ファイルから継承されたメソッドを実装します。
</p>

<p>次の例では、<code>IRemoteService</code> インターフェース（前述の <code>IRemoteService.aidl</code> の例で定義したもの）を匿名インスタンスで実装しています。
</p>

<pre>
private final IRemoteService.Stub mBinder = new IRemoteService.Stub() {
    public int getPid(){
        return Process.myPid();
    }
    public void basicTypes(int anInt, long aLong, boolean aBoolean,
        float aFloat, double aDouble, String aString) {
        // Does nothing
    }
};
</pre>

<p>これによって、<code>mBinder</code> に <code>Stub</code> クラスのインスタンスが代入されます。このクラスは <code><a href="https://developer.android.com/reference/android/os/Binder.html?hl=ja">Binder</a></code> を継承しており、サービスへの RPC インターフェースが定義されています。
次のステップでは、このインスタンスをクライアントに公開し、クライアントがサービスと通信できるようにします。
</p>

<p>AIDL インターフェースを実装する場合、次のルールに注意する必要があります。 </p>
<ul>
    <li>呼び出しを受信しても、それがメインスレッドで実行されるとは限りません。そのため、最初からマルチスレッドを考慮して設計し、スレッドセーフなサービスを構築する必要があります。
</li>
    <li>デフォルトで、RPC は同期的に呼び出されます。サービスがリクエストを完了するまでに数ミリ秒以上かかることが予想される場合、アクティビティのメインスレッドからは呼び出しを行わないようにしてください。メインスレッドから呼び出すと、アプリケーションがハングする（「アプリケーションは応答していません」というダイアログが表示される）可能性があります。通常は、クライアントの別のスレッドから呼び出します。


 </li>
    <li>例外がスローされても、呼び出し元に戻されることはありません。</li>
</ul>


<h3 id="Expose">3 インターフェースをクライアントに公開する</h3>

<p>実装したサービスのインターフェースは、公開してクライアントがバインドできるようにします。
サービスのインターフェースを公開するには、<code><a href="https://developer.android.com/reference/android/app/Service.html?hl=ja">Service</a></code> を拡張して <code><a href="https://developer.android.com/reference/android/app/Service.html?hl=ja#onBind(android.content.Intent)">onBind()</a></code> を実装し、生成された <code>Stub</code> を実装するクラス（前のセクションで作成したクラス）のインスタンスを返すようにします。

次に、<code>IRemoteService</code> サンプル インターフェースをクライアントに公開するサービスの例を示します。
 </p>

<pre>
public class RemoteService extends Service {
    &#64;Override
    public void onCreate() {
        super.onCreate();
    }

    &#64;Override
    public IBinder onBind(Intent intent) {
        // Return the interface
        return mBinder;
    }

    private final IRemoteService.Stub mBinder = new IRemoteService.Stub() {
        public int getPid(){
            return Process.myPid();
        }
        public void basicTypes(int anInt, long aLong, boolean aBoolean,
            float aFloat, double aDouble, String aString) {
            // Does nothing
        }
    };
}
</pre>

<p>クライアント（アクティビティなど）がこのサービスに接続するために <code><a href="https://developer.android.com/reference/android/content/Context.html?hl=ja#bindService(android.content.Intent, android.content.ServiceConnection, int)">bindService()</a></code> を呼び出すと、クライアントは <code><a href="https://developer.android.com/reference/android/content/ServiceConnection.html?hl=ja#onServiceConnected(android.content.ComponentName, android.os.IBinder)">onServiceConnected()</a></code> コールバックで、サービスの <code><a href="https://developer.android.com/reference/android/app/Service.html?hl=ja#onBind(android.content.Intent)">onBind()</a></code> メソッドが返す <code>mBinder</code> インスタンスを受信します。

</p>

<p>クライアントはインターフェースのクラスにアクセスできる必要があります。そのため、クライアントとサービスが別のアプリである場合は、クライアント アプリの <code>src/</code> ディレクトリに <code>.aidl</code> ファイルのコピーを置く必要があります。そうすることによって <code>android.os.Binder</code> インターフェースが生成され、クライアントが AIDL のメソッドにアクセスできるようになります。


</p>

<p><code><a href="https://developer.android.com/reference/android/content/ServiceConnection.html?hl=ja#onServiceConnected(android.content.ComponentName, android.os.IBinder)">onServiceConnected()</a></code> コールバックで <code><a href="https://developer.android.com/reference/android/os/IBinder.html?hl=ja">IBinder</a></code> を受信した後、クライアントは <code><em>YourServiceInterface</em>.Stub.asInterface(service)</code> を呼び出し、受け取ったパラメータを <code><em>YourServiceInterface</em></code> 型にキャストします。

次に例を示します。</p>

<pre>
IRemoteService mIRemoteService;
private ServiceConnection mConnection = new ServiceConnection() {
    // Called when the connection with the service is established
    public void onServiceConnected(ComponentName className, IBinder service) {
        // Following the example above for an AIDL interface,
        // this gets an instance of the IRemoteInterface, which we can use to call on the service
        mIRemoteService = IRemoteService.Stub.asInterface(service);
    }

    // Called when the connection with the service disconnects unexpectedly
    public void onServiceDisconnected(ComponentName className) {
        Log.e(TAG, "Service has unexpectedly disconnected");
        mIRemoteService = null;
    }
};
</pre>

<p>他のサンプルコードについては、<a href="https://developer.android.com/resources/samples/ApiDemos/index.html?hl=ja">ApiDemos</a> の <a href="https://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/RemoteService.html?hl=ja"><code>RemoteService.java</code></a> クラスをご覧ください。</p>








<h2 id="PassingObjects">IPC によるオブジェクトの受け渡し</h2>

<p>IPC インターフェースでは、プロセス間でクラスを受け渡しすることもできます。
その場合、クラスは <code><a href="https://developer.android.com/reference/android/os/Parcelable.html?hl=ja">Parcelable</a></code> インターフェースを実装し、IPC の通信相手側もクラスのコードを利用できる必要があります。
<code><a href="https://developer.android.com/reference/android/os/Parcelable.html?hl=ja">Parcelable</a></code> インターフェースを実装すると、Android システムはオブジェクトをプリミティブに分解し、プロセスをまたいでからマーシャルすることができるようになるため、この実装は重要です。

</p>

<p><code><a href="https://developer.android.com/reference/android/os/Parcelable.html?hl=ja">Parcelable</a></code> プロトコルをサポートするクラスを作成するには、以下の手順に従います。</b>

<ol>
<li>クラスで <code><a href="https://developer.android.com/reference/android/os/Parcelable.html?hl=ja">Parcelable</a></code> インターフェースを実装します。</li>
<li><code><a href="https://developer.android.com/reference/android/os/Parcelable.html?hl=ja#writeToParcel(android.os.Parcel, int)">writeToParcel</a></code> メソッドを実装します。このメソッドで、オブジェクトの現在の状態を取得して <code><a href="https://developer.android.com/reference/android/os/Parcel.html?hl=ja">Parcel</a></code> に書き込みます。
</li>
<li>クラスに <code>CREATOR</code> という静的フィールドを追加します。これは、<code><a href="https://developer.android.com/reference/android/os/Parcelable.Creator.html?hl=ja">Parcelable.Creator</a></code> インターフェースを実装するオブジェクトです。
</li>
<li>最後に、<code>.aidl</code> ファイルを作成し、Parcelable を実装したクラスを宣言します（下記の <code>Rect.aidl</code> ファイルを参照）。

  <p>カスタム ビルドプロセスを使用している場合は、ビルド対象に <code>.aidl</code> ファイルを追加しないでください。<em></em>
C 言語のヘッダー ファイルと同様に、<code>.aidl</code> ファイルはコンパイルするものではありません。</p></li>
</ol>

<p>AIDL は、生成されたコードのメソッドやフィールドを利用して、オブジェクトのマーシャルやアンマーシャルを行います。
</p>

<p>たとえば、次の例は Parcelable な <code>Rect</code> クラスを作成する <code>Rect.aidl</code> ファイルです。
</p>

<pre>
package android.graphics;

// Declare Rect so AIDL can find it and knows that it implements
// the parcelable protocol.
parcelable Rect;
</pre>

<p>また、次の例は <code><a href="https://developer.android.com/reference/android/graphics/Rect.html?hl=ja">Rect</a></code> クラスで <code><a href="https://developer.android.com/reference/android/os/Parcelable.html?hl=ja">Parcelable</a></code> プロトコルを実装する方法を示しています。
</p>

<pre>
import android.os.Parcel;
import android.os.Parcelable;

public final class Rect implements Parcelable {
    public int left;
    public int top;
    public int right;
    public int bottom;

    public static final Parcelable.Creator&lt;Rect&gt; CREATOR = new
Parcelable.Creator&lt;Rect&gt;() {
        public Rect createFromParcel(Parcel in) {
            return new Rect(in);
        }

        public Rect[] newArray(int size) {
            return new Rect[size];
        }
    };

    public Rect() {
    }

    private Rect(Parcel in) {
        readFromParcel(in);
    }

    public void writeToParcel(Parcel out) {
        out.writeInt(left);
        out.writeInt(top);
        out.writeInt(right);
        out.writeInt(bottom);
    }

    public void readFromParcel(Parcel in) {
        left = in.readInt();
        top = in.readInt();
        right = in.readInt();
        bottom = in.readInt();
    }
}
</pre>

<p><code>Rect</code> クラスのマーシャル処理は、非常に簡単です。Parcel に書き込むことができる他のタイプの値については、<code><a href="https://developer.android.com/reference/android/os/Parcel.html?hl=ja">Parcel</a></code> の他のメソッドをご確認ください。

</p>

<p class="warning"><strong>警告: </strong>他のプロセスからデータを受け取ることによるセキュリティ面での影響も考慮するようにしてください。
この場合、<code>Rect</code> は <code><a href="https://developer.android.com/reference/android/os/Parcel.html?hl=ja">Parcel</a></code> から数値を読み出しますが、呼び出し元が指定した数値が有効な値の範囲に収まっているかどうかは、受信側で確認する必要があります。
アプリケーションをマルウェアから保護する方法の詳細については、<a href="https://developer.android.com/training/articles/security-tips.html?hl=ja">セキュリティとパーミッション</a>をご覧ください。
</p>



<h2 id="Calling">IPC メソッドの呼び出し</h2>

<p>次に、AIDL で定義されたリモート インターフェースを呼び出す際に、呼び出し側のクラスが従う必要がある手順を示します。 </p>
<ol>
    <li>プロジェクトの <code>src/</code> ディレクトリに <code>.aidl</code> ファイルを置きます。</li>
    <li>AIDL に基づいて生成される <code><a href="https://developer.android.com/reference/android/os/IBinder.html?hl=ja">IBinder</a></code> インターフェースのインスタンスを宣言します。
 </li>
    <li><code><a href="https://developer.android.com/reference/android/content/ServiceConnection.html?hl=ja">ServiceConnection</a></code> を実装する。 </li>
    <li><code><a href="https://developer.android.com/reference/android/content/Context.html?hl=ja#bindService(android.content.Intent, android.content.ServiceConnection, int)">Context.bindService()</a></code> を呼び出します。その際に、<code><a href="https://developer.android.com/reference/android/content/ServiceConnection.html?hl=ja">ServiceConnection</a></code> の実装を渡します。 </li>
    <li>実装した <code><a href="https://developer.android.com/reference/android/content/ServiceConnection.html?hl=ja#onServiceConnected(android.content.ComponentName, android.os.IBinder)">onServiceConnected()</a></code> に <code><a href="https://developer.android.com/reference/android/os/IBinder.html?hl=ja">IBinder</a></code> インスタンス（<code>service</code> パラメータ）が渡されます。
<code><em>YourInterfaceName</em>.Stub.asInterface((IBinder)<em>service</em>)</code> を呼び出して、受け取ったパラメータを <em>YourInterface</em> 型に変換します。

</li>
    <li>インターフェースで定義したメソッドを呼び出します。接続が切れたときにスローされる <code><a href="https://developer.android.com/reference/android/os/DeadObjectException.html?hl=ja">DeadObjectException</a></code> に対する例外処理は必ず行ってください。リモート メソッドからスローされるのは、この例外のみです。


</li>
    <li>接続を切断するには、インターフェースのインスタンスを指定して <code><a href="https://developer.android.com/reference/android/content/Context.html?hl=ja#unbindService(android.content.ServiceConnection)">Context.unbindService()</a></code> を呼び出します。 </li>
</ol>
<p>IPC サービスを呼び出す際は、次の点に注意してください。</p>
<ul>
    <li>オブジェクトはプロセス間で有効な参照です。 </li>
    <li>メソッドの引数として匿名オブジェクトを渡すことも可能です。
 </li>
</ul>

<p>サービスへのバインドの詳細については、<a href="bound-services9e29.html?hl=ja#Binding">バインドされたサービス</a>をご覧ください。
</p>

<p>次に示すのは、AIDL によって作成されたサービスを呼び出すサンプルコードです。このコードは、ApiDemos プロジェクトのリモート サービス サンプルからの抜粋です。
</p>
<p><pre>public static class Binding extends Activity {
    /** The primary interface we will be calling on the service. */
    IRemoteService mService = null;
    /** Another interface we use on the service. */
    ISecondary mSecondaryService = null;

    Button mKillButton;
    TextView mCallbackText;

    private boolean mIsBound;

    /**
     * Standard initialization of this activity.  Set up the UI, then wait
     * for the user to poke it before doing anything.
     */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.remote_service_binding);

        // Watch for button clicks.
        Button button = (Button)findViewById(R.id.bind);
        button.setOnClickListener(mBindListener);
        button = (Button)findViewById(R.id.unbind);
        button.setOnClickListener(mUnbindListener);
        mKillButton = (Button)findViewById(R.id.kill);
        mKillButton.setOnClickListener(mKillListener);
        mKillButton.setEnabled(false);

        mCallbackText = (TextView)findViewById(R.id.callback);
        mCallbackText.setText("Not attached.");
    }

    /**
     * Class for interacting with the main interface of the service.
     */
    private ServiceConnection mConnection = new ServiceConnection() {
        public void onServiceConnected(ComponentName className,
                IBinder service) {
            // This is called when the connection with the service has been
            // established, giving us the service object we can use to
            // interact with the service.  We are communicating with our
            // service through an IDL interface, so get a client-side
            // representation of that from the raw service object.
            mService = IRemoteService.Stub.asInterface(service);
            mKillButton.setEnabled(true);
            mCallbackText.setText("Attached.");

            // We want to monitor the service for as long as we are
            // connected to it.
            try {
                mService.registerCallback(mCallback);
            } catch (RemoteException e) {
                // In this case the service has crashed before we could even
                // do anything with it; we can count on soon being
                // disconnected (and then reconnected if it can be restarted)
                // so there is no need to do anything here.
            }

            // As part of the sample, tell the user what happened.
            Toast.makeText(Binding.this, R.string.remote_service_connected,
                    Toast.LENGTH_SHORT).show();
        }

        public void onServiceDisconnected(ComponentName className) {
            // This is called when the connection with the service has been
            // unexpectedly disconnected -- that is, its process crashed.
            mService = null;
            mKillButton.setEnabled(false);
            mCallbackText.setText("Disconnected.");

            // As part of the sample, tell the user what happened.
            Toast.makeText(Binding.this, R.string.remote_service_disconnected,
                    Toast.LENGTH_SHORT).show();
        }
    };

    /**
     * Class for interacting with the secondary interface of the service.
     */
    private ServiceConnection mSecondaryConnection = new ServiceConnection() {
        public void onServiceConnected(ComponentName className,
                IBinder service) {
            // Connecting to a secondary interface is the same as any
            // other interface.
            mSecondaryService = ISecondary.Stub.asInterface(service);
            mKillButton.setEnabled(true);
        }

        public void onServiceDisconnected(ComponentName className) {
            mSecondaryService = null;
            mKillButton.setEnabled(false);
        }
    };

    private OnClickListener mBindListener = new OnClickListener() {
        public void onClick(View v) {
            // Establish a couple connections with the service, binding
            // by interface names.  This allows other applications to be
            // installed that replace the remote service by implementing
            // the same interface.
            Intent intent = new Intent(Binding.this, RemoteService.class);
            intent.setAction(IRemoteService.class.getName());
            bindService(intent, mConnection, Context.BIND_AUTO_CREATE);
            intent.setAction(ISecondary.class.getName());
            bindService(intent, mSecondaryConnection, Context.BIND_AUTO_CREATE);
            mIsBound = true;
            mCallbackText.setText("Binding.");
        }
    };

    private OnClickListener mUnbindListener = new OnClickListener() {
        public void onClick(View v) {
            if (mIsBound) {
                // If we have received the service, and hence registered with
                // it, then now is the time to unregister.
                if (mService != null) {
                    try {
                        mService.unregisterCallback(mCallback);
                    } catch (RemoteException e) {
                        // There is nothing special we need to do if the service
                        // has crashed.
                    }
                }

                // Detach our existing connection.
                unbindService(mConnection);
                unbindService(mSecondaryConnection);
                mKillButton.setEnabled(false);
                mIsBound = false;
                mCallbackText.setText("Unbinding.");
            }
        }
    };

    private OnClickListener mKillListener = new OnClickListener() {
        public void onClick(View v) {
            // To kill the process hosting our service, we need to know its
            // PID.  Conveniently our service has a call that will return
            // to us that information.
            if (mSecondaryService != null) {
                try {
                    int pid = mSecondaryService.getPid();
                    // Note that, though this API allows us to request to
                    // kill any process based on its PID, the kernel will
                    // still impose standard restrictions on which PIDs you
                    // are actually able to kill.  Typically this means only
                    // the process running your application and any additional
                    // processes created by that app as shown here; packages
                    // sharing a common UID will also be able to kill each
                    // other's processes.
                    Process.killProcess(pid);
                    mCallbackText.setText("Killed service process.");
                } catch (RemoteException ex) {
                    // Recover gracefully from the process hosting the
                    // server dying.
                    // Just for purposes of the sample, put up a notification.
                    Toast.makeText(Binding.this,
                            R.string.remote_call_failed,
                            Toast.LENGTH_SHORT).show();
                }
            }
        }
    };

    // ----------------------------------------------------------------------
    // Code showing how to deal with callbacks.
    // ----------------------------------------------------------------------

    /**
     * This implementation is used to receive callbacks from the remote
     * service.
     */
    private IRemoteServiceCallback mCallback = new IRemoteServiceCallback.Stub() {
        /**
         * This is called by the remote service regularly to tell us about
         * new values.  Note that IPC calls are dispatched through a thread
         * pool running in each process, so the code executing here will
         * NOT be running in our main thread like most other things -- so,
         * to update the UI, we need to use a Handler to hop over there.
         */
        public void valueChanged(int value) {
            mHandler.sendMessage(mHandler.obtainMessage(BUMP_MSG, value, 0));
        }
    };

    private static final int BUMP_MSG = 1;

    private Handler mHandler = new Handler() {
        @Override public void handleMessage(Message msg) {
            switch (msg.what) {
                case BUMP_MSG:
                    mCallbackText.setText("Received from service: " + msg.arg1);
                    break;
                default:
                    super.handleMessage(msg);
            }
        }

    };
}</pre></p>



    </div>

    

  
    
  
    



<div class="wrap">
  <footer class="dac-footer ">
    <div class="cols dac-footer-main">
      <div class="col-1of2">
        <div class="dac-footer-contact">
          <a class="dac-footer-contact-link" href="https://developer.android.com/newsletter/index.html?hl=ja" title="Newsletter">Newsletter</a>
          <a class="dac-footer-contact-link" href="https://android-developers.blogspot.com/" title="ブログ" target="_blank">ブログ</a>
          <a class="dac-footer-contact-link" href="https://developer.android.com/support.html?hl=ja" title="サポート">サポート</a>
        </div>
      </div>
      <div class="col-1of2 dac-footer-reachout">
        <div class="dac-footer-social">
          <a class="dac-button-social dac-youtube dac-footer-social-link" href="https://www.youtube.com/user/androiddevelopers" title="Android Developers on YouTube" target="_blank"><i class="dac-sprite dac-youtube"></i><span class="hide-text">Android Developers on YouTube</span></a>
          <a class="dac-button-social dac-gplus dac-footer-social-link" href="https://plus.google.com/+AndroidDevelopers" title="Android Developers on Google+" target="_blank"><i class="dac-sprite dac-gplus"></i><span class="hide-text">Android Developers on Google+</span></a>
          <a class="dac-button-social dac-twitter dac-footer-social-link" href="https://twitter.com/AndroidDev" title="Android Developers on Twitter" target="_blank"><i class="dac-sprite dac-twitter"></i><span class="hide-text">Android Developers on Twitter</span></a>
        </div>
      </div>
    </div>

    <hr class="dac-footer-separator"/>
      
      <p class="dac-footer-copyright">
        
        Except as noted, this content is licensed under <a href="http://creativecommons.org/licenses/by/2.5/" target="_blank">Creative Commons Attribution 2.5</a>. For details and restrictions, see the <a href="https://developer.android.com/license.html">Content License</a>.
      </p>
    

    <p class="dac-footer-links">
      <a href="https://www.android.com/" title="Android.com" target="_blank">Android.com</a>
      <a href="https://developer.android.com/?hl=ja" title="Android Developers">Android Developers</a>
      <a href="https://developer.android.com/studio/index.html?hl=ja" title="Android Studio">Android Studio</a>
      <a href="https://developer.android.com/distribute/console/index.html?hl=ja" title="Google Play Console">Google Play Console</a>
      <a href="https://developer.android.com/legal.html?hl=ja" title="Legal Notice">Legal Notice</a>
    </p>

    <!-- TODO(akassay) Update all DAC js to use the class instead of the id b/30368561 -->
    <form class="devsite-utility-footer-language" id="setlang" action="https://developer.android.com/i18n/setlang/" method="post">
      <input type="hidden" name="xsrf_token" value="wQecKjsmb8CQjNC3gm9NnlHY1j-2UXgwErFjSR9i4A06MTQ5NzUxNzExMDkxNTY4MA" />
      <input type="hidden" name="next" value="/guide/components/aidl.html">
      <span id="language" class="locales">
        <select class="devsite-utility-footer-language-select" name="language">
          
          <option value="id"
            >
            Bahasa Indonesia
          </option>
          
          <option value="de"
            >
            Deutsch
          </option>
          
          <option value="en"
            >
            English
          </option>
          
          <option value="es"
            >
            español
          </option>
          
          <option value="es-419"
            >
            Español (América Latina)
          </option>
          
          <option value="fr"
            >
            français
          </option>
          
          <option value="pt-br"
            >
            Português Brasileiro
          </option>
          
          <option value="vi"
            >
            Tiếng Việt
          </option>
          
          <option value="tr"
            >
            Türkçe
          </option>
          
          <option value="ru"
            >
            Русский
          </option>
          
          <option value="th"
            >
            ภาษาไทย
          </option>
          
          <option value="ja"
             selected="selected" >
            日本語
          </option>
          
          <option value="zh-cn"
            >
            简体中文
          </option>
          
          <option value="zh-tw"
            >
            繁體中文
          </option>
          
          <option value="ko"
            >
            한국어
          </option>
          
        </select>
      </span>
    </form>
  </footer>
</div><!--/.wrap -->

<div class="dac-toast-group">
  <div class="dac-toast" data-toast>
    <div class="dac-toast-wrap">
      This site uses cookies to store your preferences for site-specific language and display options.
    </div>
  </div>
</div>

<div data-modal="newsletter" data-newsletter-fb data-swap class="dac-modal newsletter">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <div class="dac-swap" data-swap-container>
          <section class="dac-swap-section dac-active dac-down">
            <h2 class="norule dac-modal-header-title" data-t="newsletter.title">Get the latest Android developer news and tips that will help you find success on Google Play.</h2>
            <p class="dac-modal-header-subtitle" data-t="newsletter.requiredHint">* Required Fields</p>
          </section>
          <section class="dac-swap-section dac-up">
            
            <h2 class="norule dac-modal-header-title" data-t="newsletter.successTitle">Hooray!</h2>
          </section>
        </div>
      </header>
      <div class="dac-swap" data-swap-container>
        <section class="dac-swap-section dac-active dac-left">
          <form action="https://services.google.com/fb/submissions/android-developer-mailing-list/" class="dac-form" method="post">
            <section class="dac-modal-content">
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-full-name" class="dac-form-floatlabel" data-t="newsletter.name">Full name</label>
                      <input type="text" class="dac-form-input" name="fullname" id="newsletter-full-name" required>
                      <span class="dac-form-required">*</span>
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-email" class="dac-form-floatlabel" data-t="newsletter.email">メールアドレス</label>
                      <input type="email" class="dac-form-input" name="emailaddress" id="newsletter-email" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-company" class="dac-form-floatlabel" data-t="newsletter.company">Company / developer name</label>
                      <input type="text" class="dac-form-input" name="companydevelopername" id="newsletter-company">
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-play-store" class="dac-form-floatlabel" data-t="newsletter.appUrl">One of your Play Store app URLs</label>
                      <input type="url" class="dac-form-input" name="playstoreappurls" id="newsletter-play-store">
                    </div>
                  </div>
                </div>
              </fieldset>
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol newsletter-interested" data-validation-message="Please check at least one item.">
                    <legend class="dac-form-legend">What are you interested in?<span class="dac-form-required">*</span></legend>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-whats-new" value="whats-new">
                      <label for="interested-whats-new" class="dac-form-checkbox-button"></label>
                      <label for="interested-whats-new" class="dac-form-label">What's new</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-games-updates" value="games-updates">
                      <label for="interested-games-updates" class="dac-form-checkbox-button"></label>
                      <label for="interested-games-updates" class="dac-form-label">Games updates</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-android-development" value="android-development">
                      <label for="interested-android-development" class="dac-form-checkbox-button"></label>
                      <label for="interested-android-development" class="dac-form-label">Android development</label>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol newsletter-checkboxes">
                    <div class="dac-form-input-group">
                      <label for="newsletter-receive-in">Receive newsletter in</label>
                      <select name="language" class="dac-form-select" id="newsletter-receive-in">
                        <option value="en-US" selected>English</option>
                        <option value="ar">Arabic</option>
                        <option value="zh">Chinese (Simplified)</option>
                        <option value="zh-TW">Chinese (Traditional)</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="id">Indonesian (Bahasa)</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="pt-BR">Portuguese (Brazilian)</option>
                        <option value="ru">Russian</option>
                        <option value="es-419">Spanish (Latin American)</option>
                        <option value="th">Thai</option>
                        <option value="tr">Turkish</option>
                        <option value="vi">Vietnamese</option>
                      </select>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="marketingoptin" id="newsletter-add" required value="Add me to the mailing list.">
                          <label for="newsletter-add" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-add" class="dac-form-label dac-form-aside">
                            Add me to the mailing list.
                            <span class="dac-form-required">*</span>
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="privacystatement" id="newsletter-terms" required value="I acknowledge that the information provided in this form will be subject to Google's privacy policy (https://www.google.com/policies/privacy/).">
                          <label for="newsletter-terms" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-terms" class="dac-form-label dac-form-aside"><span data-t="newsletter.privacyPolicy" data-t-html>
                            
                            I acknowledge that the information provided in this form will be subject to <a href="https://www.google.com/policies/privacy/">Google's privacy policy</a>.
                          </span>
                          <span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fieldset>
            </section>
            <input type="hidden" name="referrer" value="dac">
            <footer class="dac-modal-footer">
              <div class="cols">
                <div class="col-2of5">
                </div>
              </div>
              <button type="submit" value="Submit" class="dac-fab dac-primary dac-large dac-modal-action"><i class="dac-sprite dac-arrow-right"></i></button>
            </footer>
          </form>
        </section>
        <section class="dac-swap-section dac-right">
          <div class="dac-modal-content">
            <p class="newsletter-success-message" data-t="newsletter.successDetails">
              You have successfully signed up for the latest Android developer news and tips.
            </p>
          </div>
        </section>
      </div>
    </div>
  </div>
</div><!--/.dac-modal.newsletter-->


<div data-modal="langform" class="dac-modal" id="langform">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            Browse this site in <span class="span-target-lang"></span>?
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <fieldset class="dac-form-fieldset">
              <div class="cols">
                <div class="col-2of2 langform-leftCol">
                  <p id="resetLangText">
                    You requested a page in <span class="span-target-lang"></span>, but your language preference for this site is <span class="span-current-lang"></span>.
                  </p>
                  <p id="resetLangCta">
                    Would you like to change your language preference and browse this site in <span class="span-target-lang"></span>? If you want to change your language preference later, use the language menu at the bottom of each page.
                  </p>
                </div>
              </div>
            </fieldset>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="yes" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang yes" data-t="newsletter.resetLangButtonYes" data-modal-toggle>
                Change Language
              </button>
            </a>
            <a href="#" class="" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang no" data-t="newsletter.resetLangButtonNo" data-modal-toggle>
                Not Now
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal-->


<div data-modal="api-unavailable" class="dac-modal" id="api-unavailable">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            This class requires API level <span class="api-level"></span> or higher
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <p>
              This doc is hidden because your selected API level for the documentation is <span class="api-level"></span>. You can change the documentation API level with the selector above the left navigation.
            </p>
            
            <p>For more information about specifying the API level your app requires, read <a href="https://developer.android.com/training/basics/supporting-devices/platforms.html">Supporting Different Platform Versions</a>.</p>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="ok" onclick="return false;">
              <button class="button dac-primary dac-modal-action ok"
              data-modal-toggle>
                OK, make this page visible
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal#api-unavailable-->

    
  </div><!--/#body-content-->

  <!-- Nav Setup -->
  <script>$('[data-dac-nav]').dacNav();</script>
  <script type="text/javascript">
    $('.slideshow-container').dacSlideshow({
        btnPrev: '.slideshow-prev',
        btnNext: '.slideshow-next',
        btnPause: '#pauseButton'
    });

    $(".feed").dacTabbedList({
      nav_id: '.feed-nav',
      frame_id: '.feed-frame'
    });
  </script>
  
  <script src="../../ytblogger_lists_unifieddd52.js?hl=ja?v=2017061508" defer></script>
  <script src="../../android_metadata_endd52.js?hl=ja?v=2017061508" defer></script>
  
  <script src="../../reference/listsdd52.js?hl=ja?v=2017061508" defer></script>
  <script src="../../reference/gms_listsdd52.js?hl=ja?v=2017061508" defer></script>
  <script src="../../reference/android/support/wearable/listsdd52.js?hl=ja?v=2017061508" defer></script>
  <script src="../../reference/android/support/test/listsdd52.js?hl=ja?v=2017061508" defer></script>
  <script src="../../reference/android/support/constraint/listsdd52.js?hl=ja?v=2017061508" defer></script>
  <script src="https://developer.android.com/_static2/f304fc21fa/jsi18n/?hl=ja"></script>
  <script>
    // Load localized metadata.
    (function(lang) {
      if (lang === 'en') { return; }
      document.write('<script src="https://developer.android.com/android_metadata_ja.js?hl=ja?v=2017061508" defer></' + 'script>');
    })(getLangPref())

    // Add skip to content for accessibility.
    $('#skip-to-main').click(function() {
      $('a[name=top]').focus();
    });

    $('.devsite-utility-footer-language-select').each(function() {
      $(this).change(function() {
        changeLangPref(this.value, true)
        $('.devsite-utility-footer-language').submit();
      });
    });
  </script>

  <script>
    (function($) {
      devsite.analytics.InitAnalytics();
    })(jQuery);
  </script>

  


<div id="survey-box-wrapper">
  <div class="material-dialog" style="width:270px">
    <div class="material-dialog-title">
      Take a one-minute survey?
    </div>
    <div class="material-dialog-description">
      Help us improve Android tools and documentation.
    </div>
    <div class="material-button-bar">
      <a class="dac-button dac-primary dac-raised" target="_blank"
          href="https://goo.gl/forms/kV7MoyD2dvcWkd5N2">Sure</a>
      <a class="dac-button" href="#">No thanks</a>
    </div>
  </div>
</div>

</body>

<!-- Mirrored from developer.android.com/guide/components/aidl.html?hl=ja by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:16:11 GMT -->
</html>

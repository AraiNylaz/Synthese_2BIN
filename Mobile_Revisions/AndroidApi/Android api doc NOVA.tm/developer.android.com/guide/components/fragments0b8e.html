





<!DOCTYPE html>
<html lang="zh-cn">

<!-- Mirrored from developer.android.com/guide/components/fragments.html?hl=zh-cn by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:14:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

  



<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta content="IE=edge" http-equiv="X-UA-Compatible">





<script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script>

<meta charset="utf-8">



<meta name="xsrf_token" content="heaow_2IzRWVIlu7RYe1Wy7ALHDh08cxCrSf78ar-co6MTQ5NzUxNjk4NzA0ODY1MA" />

  
    <link rel="canonical" href="fragments0b8e.html?hl=zh-cn">
  

  
    <link rel="alternate" href="fragments9201.html?hl=ru" hreflang="ru">
  
    <link rel="alternate" href="fragmentsf854.html?hl=zh-tw" hreflang="zh-Hant">
  
    <link rel="alternate" href="fragments327f.html?hl=vi" hreflang="vi">
  
    <link rel="alternate" href="fragments7554.html?hl=es-419" hreflang="es-419">
  
    <link rel="alternate" href="fragments9e29.html?hl=ja" hreflang="ja">
  
    <link rel="alternate" href="fragments232e.html?hl=ko" hreflang="ko">
  
    <link rel="alternate" href="fragments0b8e.html?hl=zh-cn" hreflang="zh-Hans">
  
    <link rel="alternate" href="fragments0cf2.html?hl=id" hreflang="id">
  
    <link rel="alternate" href="fragmentsde3a.html?hl=es" hreflang="es">
  
    <link rel="alternate" href="fragments6dd3.html?hl=pt-br" hreflang="pt-br">
  
    <link rel="alternate" href="fragments.html" hreflang="en">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/fragments.html?hl=ru" hreflang="ru-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/fragments.html?hl=zh-tw" hreflang="zh-Hant-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/fragments.html?hl=vi" hreflang="vi-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/fragments.html?hl=es-419" hreflang="es-419-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/fragments.html?hl=ja" hreflang="ja-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/fragments.html?hl=ko" hreflang="ko-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/fragments.html?hl=zh-cn" hreflang="zh-Hans-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/fragments.html?hl=id" hreflang="id-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/fragments.html?hl=es" hreflang="es-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/fragments.html?hl=pt-br" hreflang="pt-br-cn">
  
    <link rel="alternate" href="https://developer.android.google.cn/guide/components/fragments.html" hreflang="en-cn">
  

  <link rel="alternate" href="fragments.html" hreflang="x-default">




<link rel="shortcut icon" href="../../_static/f304fc21fa/images/android/favicon0b8e.png?hl=zh-cn">

<link rel="apple-touch-icon" href="../../_static/f304fc21fa/images/android/touchicon-1800b8e.png?hl=zh-cn">


<title>

  片段 | Android Developers

</title>

  <meta name="description" content="A Fragment represents a behavior or a portion of user interface in an Activity. You can combine multiple fragments in a single activity to build a multi-pane UI and reuse a fragment in multiple activities. You can think of a fragment as a modular section…">


<!-- STYLESHEETS -->
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto+Condensed">
<link rel="stylesheet"
    href="http://fonts.googleapis.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold"
    title="roboto">







<link href="../../static/css/default414d.css?hl=zh-cn?v=2017061508" rel="stylesheet" type="text/css">
<!-- JAVASCRIPT -->
<script src="../../_static/f304fc21fa/js/android_3p-bundle0b8e.js?hl=zh-cn" type="text/javascript"></script>
<script src="../../_static/f304fc21fa/js/script_foot_closure_android__zh_cn0b8e.js?hl=zh-cn"></script>
<script src="../../_static/f304fc21fa/js/script_foot_android0b8e.js?hl=zh-cn"></script>

<script type="text/javascript">
  var toRoot = 'https://developer.android.com/';
  devsite.permissions.init({"039e5d84b87fd75807ffb37b7f1bbf2c": true, "098dafe57affddc137df300142652cfd": false, "cb025a64a50094835616312f4774a53d": true, "51470233c56fc1fde50f00b73c52b216": false, "752953480de00a336d911a46966cc16d": false, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true});

  var replaceBlog = false;
  var replaceYouTube = false;
  var siteDefaultLocale = 'en';

  var ANDROID_LANGUAGES = [
      'id','de','en','es','es-419','fr','pt-br','vi','tr','ru','th','ja','zh-cn','zh-tw','ko'
  ];
</script>
<script src="../../static/js/docs414d.js?hl=zh-cn?v=2017061508" type="text/javascript"></script>


</head>

<body class="gc-documentation
            
            
              develop
              guide
            
            "
      itemscope itemtype="http://schema.org/Article">
  


  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;zh-cn&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;zh-cn&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-49880327-2&quot;}">
  
    <input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;zh-cn&quot;, &quot;dimension4&quot;: &quot;API Guides&quot;, &quot;dimension5&quot;: &quot;zh-cn&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-5831155-1&quot;}">
  



  
  
    <script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "userCountry": "BE", "language": {"requested": "zh-cn", "served": "zh-cn"}, "projectName": "API Guides", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>
  



  
  <a href="#top" id="skip-to-main">Skip to content</a>
  <header id="header-wrapper">
    <div class="dac-header" id="header">
      <div class="dac-header-inner">
        <a class="dac-nav-toggle" data-dac-toggle-nav href="#" title="Open navigation">
          <span class="dac-nav-hamburger">
            <span class="dac-nav-hamburger-top"></span>
            <span class="dac-nav-hamburger-mid"></span>
            <span class="dac-nav-hamburger-bot"></span>
          </span>
        </a>
        
        <a class="dac-header-logo" href="https://developer.android.com/index.html?hl=zh-cn">
          <img class="dac-header-logo-image" src="../../static/images/android_logo0b8e.png?hl=zh-cn"
              srcset="https://developer.android.com/static/images/android_logo_2x.png 2x?hl=zh-cn"
              width="32" height="36" alt="Android"> Developers</a>
        <ul class="dac-header-tabs">
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/design/index.html?hl=zh-cn"
               zh-tw-lang="設計"
               zh-cn-lang="设计"
               ru-lang="Проектирование"
               ko-lang="디자인"
               ja-lang="設計"
               es-lang="Diseñar">Design</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/develop/index.html?hl=zh-cn"
               zh-tw-lang="開發"
               zh-cn-lang="开发"
               ru-lang="Разработка"
               ko-lang="개발"
               ja-lang="開発"
               es-lang="Desarrollar">Develop</a>
          </li>
          <li>
            <a class="dac-header-tab" href="https://developer.android.com/distribute/index.html?hl=zh-cn"
               zh-tw-lang="發佈"
               zh-cn-lang="分发"
               ru-lang="Распространение"
               ko-lang="배포"
               ja-lang="配布"
               es-lang="Distribuir">Distribute</a>
          </li>
        </ul>


        

        <a class="dac-header-console-btn gc-analytics-event" href="https://play.google.com/apps/publish/"
           data-category="User" data-action="Console" data-label="Clicked">
          <img src="https://developer.android.com/static/images/developer-console-icon.svg?hl=zh-cn" width="18" height="19" alt="Play 控制台">Play Console</a>

        

<form data-search="" class="dac-header-search">
  <button class="dac-header-search-close" data-search-close="">
    <i class="dac-sprite dac-back-arrow"></i>
  </button>

  <div class="dac-header-search-inner">
    <i class="dac-sprite dac-search-white dac-header-search-icon"></i>
    
    <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q" class="dac-header-search-input" placeholder="搜索">
    <button class="dac-header-search-clear dac-hidden" data-search-clear="">
      <i class="dac-sprite dac-close-black"></i>
    </button>
  </div>
</form>

        
      </div><!--/.header-wrap.wrap-->
    </div><!--/.header-->

    

<div id="search-results" class="dac-search-results">
  <div id="dac-search-results-history" class="dac-search-results-history">
    <div class="wrap dac-search-results-history-wrap">
      <div class="cols">
        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Most visited</h2>
          <div class="resource-flow-layout" data-history-query="history:most/visited" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>

        <div class="col-1of2 col-tablet-1of2 col-mobile-1of1">
          <h2>Recently visited</h2>
          <div class="resource-flow-layout cols" data-history-query="history:recent" data-allow-duplicates="true" data-maxresults="3" data-cardsizes="18x2"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="dac-search-results-content" class="dac-search-results-content">
    <div class="dac-search-results-metadata wrap">
      <div class="dac-search-results-for">
        
          <h2>
          Results for <span id="search-results-for"></span>
          </h2>
      </div>

      <div id="dac-search-results-hero"></div>

      <div class="dac-search-results-hero cols">
        <div id="dac-search-results-reference" class="col-6of6 col-tablet-2of2 col-mobile-1of1">
          <div class="suggest-card reference no-display">
            <ul class="dac-search-results-reference">
            </ul>
          </div>
        </div>
      </div>

      <div class="cols dac-search-results-cse">
        <script src="../../../cse.google.com/f4116.txt?cx=000521750095050289010:zpcpi1ea4s8" async></script>
        <gcse:searchresults-only linkTarget="_self"></gcse:searchresults-only>
      </div>
    </div>
  </div>
</div>

  </header>

  <a name="navigation" tabindex=0 class="nav-start-marker">navigation</a>
  <nav class="dac-nav">
    <div class="dac-nav-dimmer" data-dac-toggle-nav></div>
    <div class="dac-nav-sidebar" data-swap data-dynamic="false" data-transition-speed="300" data-dac-nav>
      <div data-swap-container>
        
        <a class="dac-nav-back-button dac-swap-section dac-up dac-no-anim" tabindex=0 data-swap-button>
          
          <i class="dac-sprite dac-nav-back"></i> <span class="dac-nav-back-title">返回</span>
        </a>

        <div class="dac-nav-sub dac-swap-section dac-right dac-active" itemscope
            itemtype="http://schema.org/SiteNavigationElement">
          
          
            
            <ul id="nav">
              <li class="nav-section"><div class="nav-section-header"><a href="../index0b8e.html?hl=zh-cn" >简介</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="fundamentals0b8e.html?hl=zh-cn" >应用基础知识</a></li><li><a href="../practices/compatibility0b8e.html?hl=zh-cn" >设备兼容性</a></li><li><a href="../topics/security/permissions0b8e.html?hl=zh-cn" >系统权限</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../platform/index0b8e.html?hl=zh-cn" >平台架构</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../platform/j8-jack0b8e.html?hl=zh-cn"  es-lang="Funciones del lenguaje Java 8" in-lang="Fitur Bahasa Java 8" ja-lang="Java 8 の機能" ko-lang="Java 8 언어 기능" pt-br-lang="Recursos de linguagem do Java 8" ru-lang="Возможности языка Java 8" vi-lang="Tính năng của Ngôn ngữ Java 8" zh-cn-lang="Java 8 の機能" zh-tw-lang="Java 8 の機能">使用 Java 8 语言功能</a></li><li><a href="../practices/verifying-apps-art0b8e.html?hl=zh-cn" >在 Android Runtime (ART) 上验证应用行为</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="index0b8e.html?hl=zh-cn" >应用组件</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="intents-filters0b8e.html?hl=zh-cn" >Intent 和 Intent 过滤器</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="intents-common0b8e.html?hl=zh-cn" >通用 Intent</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="activities0b8e.html?hl=zh-cn" >Activity</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="fragments0b8e.html?hl=zh-cn" >片段</a></li><li><a href="loaders0b8e.html?hl=zh-cn" >加载器</a></li><li><a href="tasks-and-back-stack0b8e.html?hl=zh-cn" >任务和返回栈</a></li><li><a href="recents0b8e.html?hl=zh-cn" >概览屏幕</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="services0b8e.html?hl=zh-cn" >服务</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="bound-services0b8e.html?hl=zh-cn" >绑定服务</a></li><li><a href="aidl0b8e.html?hl=zh-cn" >AIDL</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/providers/content-providers0b8e.html?hl=zh-cn" >内容提供程序</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/providers/content-provider-basics0b8e.html?hl=zh-cn" >内容提供程序基础知识</a></li><li><a href="../topics/providers/content-provider-creating0b8e.html?hl=zh-cn" >创建内容提供程序</a></li><li><a href="../topics/providers/calendar-provider0b8e.html?hl=zh-cn" >日历提供程序</a></li><li><a href="../topics/providers/contacts-provider0b8e.html?hl=zh-cn" >联系人提供程序</a></li><li><a href="../topics/providers/document-provider0b8e.html?hl=zh-cn" >存储访问框架</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/appwidgets/index0b8e.html?hl=zh-cn" >应用小部件</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/appwidgets/host0b8e.html?hl=zh-cn" >应用小部件主机</a></li></ul></li><li><a href="processes-and-threads0b8e.html?hl=zh-cn" >进程和线程</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/resources/index0b8e.html?hl=zh-cn" >应用资源</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/resources/overview0b8e.html?hl=zh-cn" >概览</a></li><li><a href="../topics/resources/providing-resources0b8e.html?hl=zh-cn" >提供资源</a></li><li><a href="../topics/resources/accessing-resources0b8e.html?hl=zh-cn" >访问资源</a></li><li><a href="../topics/resources/runtime-changes0b8e.html?hl=zh-cn" >处理运行时变更</a></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/resources/localization0b8e.html?hl=zh-cn" >本地化</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/resources/icu4j-framework0b8e.html?hl=zh-cn" >ICU4J Android 框架 API</a></li><li><a href="../topics/resources/multilingual-support0b8e.html?hl=zh-cn" >语言和语言区域</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/resources/available-resources0b8e.html?hl=zh-cn" >资源类型</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/resources/animation-resource0b8e.html?hl=zh-cn" >动画</a></li><li><a href="../topics/resources/color-list-resource0b8e.html?hl=zh-cn" >颜色状态列表</a></li><li><a href="../topics/resources/drawable-resource0b8e.html?hl=zh-cn" >可绘制对象</a></li><li><a href="../topics/resources/layout-resource0b8e.html?hl=zh-cn" >布局</a></li><li><a href="../topics/resources/menu-resource0b8e.html?hl=zh-cn" >菜单</a></li><li><a href="../topics/resources/string-resource0b8e.html?hl=zh-cn" >字符串</a></li><li><a href="../topics/resources/style-resource0b8e.html?hl=zh-cn" >样式</a></li><li><a href="../topics/resources/more-resources0b8e.html?hl=zh-cn" >其他类型</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/manifest/manifest-intro0b8e.html?hl=zh-cn" >应用清单</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/manifest/action-element0b8e.html?hl=zh-cn" >&lt;action&gt;</a></li><li><a href="../topics/manifest/activity-element0b8e.html?hl=zh-cn" >&lt;activity&gt;</a></li><li><a href="../topics/manifest/activity-alias-element0b8e.html?hl=zh-cn" >&lt;activity-alias&gt;</a></li><li><a href="../topics/manifest/application-element0b8e.html?hl=zh-cn" >&lt;application&gt;</a></li><li><a href="../topics/manifest/category-element0b8e.html?hl=zh-cn" >&lt;category&gt;</a></li><li><a href="../topics/manifest/compatible-screens-element0b8e.html?hl=zh-cn" >&lt;compatible-screens&gt;</a></li><li><a href="../topics/manifest/data-element0b8e.html?hl=zh-cn" >&lt;data&gt;</a></li><li><a href="../topics/manifest/grant-uri-permission-element0b8e.html?hl=zh-cn" >&lt;grant-uri-permission&gt;</a></li><li><a href="../topics/manifest/instrumentation-element0b8e.html?hl=zh-cn" >&lt;instrumentation&gt;</a></li><li><a href="../topics/manifest/intent-filter-element0b8e.html?hl=zh-cn" >&lt;intent-filter&gt;</a></li><li><a href="../topics/manifest/manifest-element0b8e.html?hl=zh-cn" >&lt;manifest&gt;</a></li><li><a href="../topics/manifest/meta-data-element0b8e.html?hl=zh-cn" >&lt;meta-data&gt;</a></li><li><a href="../topics/manifest/path-permission-element0b8e.html?hl=zh-cn" >&lt;path-permission&gt;</a></li><li><a href="../topics/manifest/permission-element0b8e.html?hl=zh-cn" >&lt;permission&gt;</a></li><li><a href="../topics/manifest/permission-group-element0b8e.html?hl=zh-cn" >&lt;permission-group&gt;</a></li><li><a href="../topics/manifest/permission-tree-element0b8e.html?hl=zh-cn" >&lt;permission-tree&gt;</a></li><li><a href="../topics/manifest/provider-element0b8e.html?hl=zh-cn" >&lt;provider&gt;</a></li><li><a href="../topics/manifest/receiver-element0b8e.html?hl=zh-cn" >&lt;receiver&gt;</a></li><li><a href="../topics/manifest/service-element0b8e.html?hl=zh-cn" >&lt;service&gt;</a></li><li><a href="../topics/manifest/supports-gl-texture-element0b8e.html?hl=zh-cn" >&lt;supports-gl-texture&gt;</a></li><li><a href="../topics/manifest/supports-screens-element0b8e.html?hl=zh-cn" >&lt;supports-screens&gt;</a></li><li><a href="../topics/manifest/uses-configuration-element0b8e.html?hl=zh-cn" >&lt;uses-configuration&gt;</a></li><li><a href="../topics/manifest/uses-feature-element0b8e.html?hl=zh-cn" >&lt;uses-feature&gt;</a></li><li><a href="../topics/manifest/uses-library-element0b8e.html?hl=zh-cn" >&lt;uses-library&gt;</a></li><li><a href="../topics/manifest/uses-permission-element0b8e.html?hl=zh-cn" >&lt;uses-permission&gt;</a></li><li><a href="../topics/manifest/uses-permission-sdk-23-element0b8e.html?hl=zh-cn" >&lt;uses-permission-sdk-23&gt;</a></li><li><a href="../topics/manifest/uses-sdk-element0b8e.html?hl=zh-cn" >&lt;uses-sdk&gt;</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/ui/index0b8e.html?hl=zh-cn" >用户界面</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/ui/overview0b8e.html?hl=zh-cn" >概览</a></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/ui/declaring-layout0b8e.html?hl=zh-cn" >布局</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/ui/layout/linear0b8e.html?hl=zh-cn" >线性布局</a></li><li><a href="../topics/ui/layout/relative0b8e.html?hl=zh-cn" >相对布局</a></li><li><a href="../topics/ui/layout/listview0b8e.html?hl=zh-cn" >列表视图</a></li><li><a href="../topics/ui/layout/gridview0b8e.html?hl=zh-cn" >网格视图</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/ui/controls0b8e.html?hl=zh-cn" >输入控件</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/ui/controls/button0b8e.html?hl=zh-cn" >按钮</a></li><li><a href="https://developer.android.com/training/keyboard-input/style.html?hl=zh-cn" >文本字段</a></li><li><a href="../topics/ui/controls/checkbox0b8e.html?hl=zh-cn" >复选框</a></li><li><a href="../topics/ui/controls/radiobutton0b8e.html?hl=zh-cn" >单选按钮</a></li><li><a href="../topics/ui/controls/togglebutton0b8e.html?hl=zh-cn" >切换按钮</a></li><li><a href="../topics/ui/controls/spinner0b8e.html?hl=zh-cn" >微调框</a></li><li><a href="../topics/ui/controls/pickers0b8e.html?hl=zh-cn" >选取器</a></li></ul></li><li><a href="../topics/ui/ui-events0b8e.html?hl=zh-cn" >输入事件</a></li><li><a href="../topics/ui/menus0b8e.html?hl=zh-cn" >菜单</a></li><li><a href="../topics/ui/settings0b8e.html?hl=zh-cn" >设置</a></li><li><a href="../topics/ui/dialogs0b8e.html?hl=zh-cn" >对话框</a></li><li><a href="../topics/ui/notifiers/notifications0b8e.html?hl=zh-cn" >通知</a></li><li><a href="../topics/ui/notifiers/toasts0b8e.html?hl=zh-cn" >Toast</a></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/search/index0b8e.html?hl=zh-cn" >搜索</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/search/search-dialog0b8e.html?hl=zh-cn" >创建搜索界面</a></li><li><a href="../topics/search/adding-recent-query-suggestions0b8e.html?hl=zh-cn" >添加近期查询建议</a></li><li><a href="../topics/search/adding-custom-suggestions0b8e.html?hl=zh-cn" >添加自定义建议</a></li><li><a href="../topics/search/searchable-config0b8e.html?hl=zh-cn" >可搜索配置</a></li></ul></li><li><a href="../topics/ui/multi-window0b8e.html?hl=zh-cn" >多窗口支持</a></li><li><a href="../topics/ui/drag-drop0b8e.html?hl=zh-cn" >拖放</a></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/ui/accessibility/index0b8e.html?hl=zh-cn" >无障碍功能</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/ui/accessibility/apps0b8e.html?hl=zh-cn" >为应用设置无障碍功能</a></li><li><a href="../topics/ui/accessibility/checklist0b8e.html?hl=zh-cn" >无障碍功能开发者检查单</a></li><li><a href="../topics/ui/accessibility/services0b8e.html?hl=zh-cn" >构建无障碍服务</a></li></ul></li><li><a href="../topics/ui/themes0b8e.html?hl=zh-cn" >样式和主题</a></li><li><a href="../topics/ui/custom-components0b8e.html?hl=zh-cn" >自定义组件</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/graphics/index0b8e.html?hl=zh-cn" >动画和图形</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/graphics/overview0b8e.html?hl=zh-cn" >概览</a></li><li><a href="../topics/graphics/prop-animation0b8e.html?hl=zh-cn" >属性动画</a></li><li><a href="../topics/graphics/view-animation0b8e.html?hl=zh-cn" >视图动画</a></li><li><a href="../topics/graphics/drawable-animation0b8e.html?hl=zh-cn" >可绘制动画</a></li><li><a href="../topics/graphics/2d-graphics0b8e.html?hl=zh-cn" >画布和可绘制对象</a></li><li><a href="../topics/graphics/opengl0b8e.html?hl=zh-cn" >OpenGL ES</a></li><li><a href="../topics/graphics/hardware-accel0b8e.html?hl=zh-cn" >硬件加速</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/renderscript/index0b8e.html?hl=zh-cn" >计算</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/renderscript/compute0b8e.html?hl=zh-cn" >RenderScript</a></li><li><a href="../topics/renderscript/advanced0b8e.html?hl=zh-cn" >高级 RenderScript</a></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/renderscript/reference/overview0b8e.html?hl=zh-cn" >Runtime API 参考</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/renderscript/reference/rs_value_types0b8e.html?hl=zh-cn" >数字类型</a></li><li><a href="../topics/renderscript/reference/rs_object_types0b8e.html?hl=zh-cn" >对象类型</a></li><li><a href="../topics/renderscript/reference/rs_convert0b8e.html?hl=zh-cn" >转换函数</a></li><li><a href="../topics/renderscript/reference/rs_math0b8e.html?hl=zh-cn" >数学常量和函数</a></li><li><a href="../topics/renderscript/reference/rs_vector_math0b8e.html?hl=zh-cn" >矢量数学函数</a></li><li><a href="../topics/renderscript/reference/rs_matrix0b8e.html?hl=zh-cn" >矩阵函数</a></li><li><a href="../topics/renderscript/reference/rs_quaternion0b8e.html?hl=zh-cn" >四元数函数</a></li><li><a href="../topics/renderscript/reference/rs_atomic0b8e.html?hl=zh-cn" >原子更新函数</a></li><li><a href="../topics/renderscript/reference/rs_time0b8e.html?hl=zh-cn" >时间函数和类型</a></li><li><a href="../topics/renderscript/reference/rs_allocation_data0b8e.html?hl=zh-cn" >分配数据访问函数</a></li><li><a href="../topics/renderscript/reference/rs_object_info0b8e.html?hl=zh-cn" >对象特性函数</a></li><li><a href="../topics/renderscript/reference/rs_for_each0b8e.html?hl=zh-cn" >内核调用函数和类型</a></li><li><a href="../topics/renderscript/reference/rs_io0b8e.html?hl=zh-cn" >输入/输出函数</a></li><li><a href="../topics/renderscript/reference/rs_debug0b8e.html?hl=zh-cn" >调试函数</a></li><li><a href="../topics/renderscript/reference/rs_graphics0b8e.html?hl=zh-cn" >图形函数和类型</a></li><li><a href="../topics/renderscript/reference/index0b8e.html?hl=zh-cn" >索引</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/media/index0b8e.html?hl=zh-cn" >媒体和相机</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/media/mediaplayer0b8e.html?hl=zh-cn" >媒体回放</a></li><li><a href="../topics/media/mediarouter0b8e.html?hl=zh-cn" >媒体路由器</a></li><li><a href="../topics/media/mediarouteprovider0b8e.html?hl=zh-cn" >媒体路由提供程序</a></li><li><a href="../topics/media/exoplayer0b8e.html?hl=zh-cn" >ExoPlayer</a></li><li><a href="../topics/media/media-formats0b8e.html?hl=zh-cn" >支持的媒体格式</a></li><li><a href="../topics/media/mediarecorder0b8e.html?hl=zh-cn" >音频采集</a></li><li><a href="../topics/media/jetplayer0b8e.html?hl=zh-cn" >JetPlayer</a></li><li><a href="../topics/media/camera0b8e.html?hl=zh-cn" >相机</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/sensors/index0b8e.html?hl=zh-cn" >位置和传感器</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/location/index0b8e.html?hl=zh-cn" >位置和地图</a></li><li><a href="../topics/location/strategies0b8e.html?hl=zh-cn" >位置策略</a></li><li><a href="../topics/sensors/sensors_overview0b8e.html?hl=zh-cn" >传感器概览</a></li><li><a href="../topics/sensors/sensors_motion0b8e.html?hl=zh-cn" >运动传感器</a></li><li><a href="../topics/sensors/sensors_position0b8e.html?hl=zh-cn" >位置传感器</a></li><li><a href="../topics/sensors/sensors_environment0b8e.html?hl=zh-cn" >环境传感器</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/connectivity/index0b8e.html?hl=zh-cn" >连接</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../topics/connectivity/bluetooth0b8e.html?hl=zh-cn" >蓝牙</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/connectivity/bluetooth-le0b8e.html?hl=zh-cn" >蓝牙低功耗</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/connectivity/nfc/index0b8e.html?hl=zh-cn" >NFC</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/connectivity/nfc/nfc0b8e.html?hl=zh-cn" >NFC 基础知识</a></li><li><a href="../topics/connectivity/nfc/advanced-nfc0b8e.html?hl=zh-cn" >高级 NFC</a></li><li><a href="../topics/connectivity/nfc/hce0b8e.html?hl=zh-cn" >基于主机的卡模拟</a></li></ul></li><li><a href="../topics/connectivity/wifip2p0b8e.html?hl=zh-cn" >Wi-Fi P2P</a></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/connectivity/usb/index0b8e.html?hl=zh-cn" >USB</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/connectivity/usb/accessory0b8e.html?hl=zh-cn" >配件</a></li><li><a href="../topics/connectivity/usb/host0b8e.html?hl=zh-cn" >主机</a></li></ul></li><li><a href="../topics/connectivity/sip0b8e.html?hl=zh-cn" >SIP</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/text/index0b8e.html?hl=zh-cn" >文本和输入</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/text/copy-paste0b8e.html?hl=zh-cn" >复制和粘贴</a></li><li><a href="../topics/text/creating-input-method0b8e.html?hl=zh-cn" >创建 IME</a></li><li><a href="../topics/text/spell-checker-framework0b8e.html?hl=zh-cn" >拼写检查程序</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/data/index0b8e.html?hl=zh-cn" >数据存储</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/data/data-storage0b8e.html?hl=zh-cn" >存储选项</a></li><li><a href="../topics/data/backup0b8e.html?hl=zh-cn" >数据备份</a></li><li><a href="../topics/data/install-location0b8e.html?hl=zh-cn" >应用安装位置</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/topic/libraries/index.html?hl=zh-cn" >库</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/topic/libraries/support-library/index.html?hl=zh-cn" >支持库</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="https://developer.android.com/topic/libraries/support-library/features.html?hl=zh-cn" >功能</a></li><li><a href="https://developer.android.com/topic/libraries/support-library/setup.html?hl=zh-cn" >设置</a></li><li><a href="https://developer.android.com/topic/libraries/support-library/revisions.html?hl=zh-cn" >修订历史记录</a></li></ul></li><li><a href="https://developer.android.com/topic/libraries/data-binding/index.html?hl=zh-cn" >数据绑定库</a></li><li class="nav-section"><div class="nav-section-header"><a href="https://developer.android.com/topic/libraries/testing-support-library/index.html?hl=zh-cn" >测试支持库</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="https://developer.android.com/reference/android/support/test/package-summary.html?hl=zh-cn" >API 参考</a></li></ul></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../topics/admin/index0b8e.html?hl=zh-cn" >管理</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../topics/admin/device-admin0b8e.html?hl=zh-cn" >设备政策</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../webapps/index0b8e.html?hl=zh-cn" >网络应用</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../webapps/targeting0b8e.html?hl=zh-cn" >在网络应用中支持不同屏幕</a></li><li><a href="../webapps/webview0b8e.html?hl=zh-cn" >在 WebView 中构建网络应用</a></li><li><a href="../webapps/migrating0b8e.html?hl=zh-cn" >迁移到 Android 4.4 中的 WebView</a></li><li><a href="../webapps/debugging0b8e.html?hl=zh-cn" >调试网络应用</a></li><li><a href="../webapps/best-practices0b8e.html?hl=zh-cn" >网络应用最佳做法</a></li></ul></li><li class="nav-section"><div class="nav-section-header"><a href="../practices/index0b8e.html?hl=zh-cn"  de-lang="Bewährte Verfahren" es-lang="Prácticas recomendadas" fr-lang="Meilleures pratiques" it-lang="最佳做法" ja-lang="ベスト プラクティス" zh-cn-lang="最佳实践" zh-tw-lang="最佳實務">最佳做法</a><span class="toggle-icon" tabindex="0"></span></div><ul><li class="nav-section"><div class="nav-section-header"><a href="../practices/screens_support0b8e.html?hl=zh-cn" >支持多种屏幕</a><span class="toggle-icon" tabindex="0"></span></div><ul><li><a href="../practices/screens-distribution0b8e.html?hl=zh-cn" >分配到特定屏幕</a></li><li><a href="../practices/screen-compat-mode0b8e.html?hl=zh-cn" >屏幕兼容性模式</a></li></ul></li><li><a href="../practices/tablets-and-handsets0b8e.html?hl=zh-cn" >支持平板电脑和手机</a></li></ul></li>
            </ul>
            
          
        </div>
        
        
          



<ul id="dac-main-navigation" class="dac-nav-list dac-swap-section dac-left dac-no-anim" tabindex=0>
  <li class="dac-nav-item home">
    <a class="dac-nav-link" href="https://developer.android.com/index.html?hl=zh-cn">首页</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary about">
      <li class="dac-nav-item versions">
        <a class="dac-nav-link" href="https://developer.android.com/about/versions/nougat/index.html?hl=zh-cn">Android</a>
      </li>
      <li class="dac-nav-item wear">
        <a class="dac-nav-link" href="https://developer.android.com/wear/index.html?hl=zh-cn">Wear</a>
      </li>
      <li class="dac-nav-item tv">
        <a class="dac-nav-link" href="https://developer.android.com/tv/index.html?hl=zh-cn">TV</a>
      </li>
      <li class="dac-nav-item auto">
        <a class="dac-nav-link" href="https://developer.android.com/auto/index.html?hl=zh-cn">Auto</a>
      </li>
      <li class="dac-nav-item things">
        <a class="dac-nav-link" href="https://developer.android.com/things/index.html?hl=zh-cn">Things</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item design">
    <a class="dac-nav-link" href="https://developer.android.com/design/index.html?hl=zh-cn"
       zh-tw-lang="設計"
       zh-cn-lang="设计"
       ru-lang="Проектирование"
       ko-lang="디자인"
       ja-lang="設計"
       es-lang="Diseñar">Design</a>
  </li>
  <li class="dac-nav-item develop">
    <a class="dac-nav-link" href="https://developer.android.com/develop/index.html?hl=zh-cn"
       zh-tw-lang="開發"
       zh-cn-lang="开发"
       ru-lang="Разработка"
       ko-lang="개발"
       ja-lang="開発"
       es-lang="Desarrollar">Develop</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary develop">
      <li class="dac-nav-item training">
        <a class="dac-nav-link" href="https://developer.android.com/training/index.html?hl=zh-cn"
           zh-tw-lang="訓練課程"
           zh-cn-lang="培训"
           ru-lang="Курсы"
           ko-lang="교육"
           ja-lang="トレーニング"
           es-lang="Capacitación">培训</a>
      </li>
      <li class="dac-nav-item guide">
        <a class="dac-nav-link" href="../index0b8e.html?hl=zh-cn"
           zh-tw-lang="API 指南"
           zh-cn-lang="API 指南"
           ru-lang="Руководства по API"
           ko-lang="API 가이드"
           ja-lang="API ガイド"
           es-lang="Guías de la API">API Guides</a>
      </li>
      <li class="dac-nav-item reference">
        <a class="dac-nav-link" href="https://developer.android.com/reference/packages.html?hl=zh-cn"
           zh-tw-lang="參考資源"
           zh-cn-lang="参考"
           ru-lang="Справочник"
           ko-lang="참조문서"
           ja-lang="リファレンス"
           es-lang="Referencia">参考网页</a>
      </li>
      <li class="dac-nav-item samples">
        <a class="dac-nav-link" href="https://developer.android.com/samples/index.html?hl=zh-cn">示例</a>
      </li>
      <li class="dac-nav-item libraries">
        <a class="dac-nav-link" href="https://developer.android.com/topic/libraries/index.html?hl=zh-cn"
           >库</a></li>
      <li class="dac-nav-item studio">
        <a class="dac-nav-link" href="https://developer.android.com/studio/index.html?hl=zh-cn"
           >Android Studio</a></li>
      <li class="dac-nav-item ndk">
        <a class="dac-nav-link" href="https://developer.android.com/ndk/index.html?hl=zh-cn"
           >Android NDK</a></li>
      <li class="dac-nav-item google">
        <a class="dac-nav-link" href="https://developer.android.com/google/index.html?hl=zh-cn">Google Services</a>
      </li>
      <li class="dac-nav-item quality-guidelines">
        <a class="dac-nav-link" href="https://developer.android.com/develop/quality-guidelines/index.html?hl=zh-cn">Quality Guidelines</a>
      </li>
      <li class="dac-nav-item kotlin">
        <a class="dac-nav-link" href="https://developer.android.com/kotlin/index.html?hl=zh-cn">Kotlin</a>
       </li>
    </ul>
  </li>
  <li class="dac-nav-item distribute">
    <a class="dac-nav-link" href="https://developer.android.com/distribute/index.html?hl=zh-cn"
       zh-tw-lang="發佈"
       zh-cn-lang="分发"
       ru-lang="Распространение"
       ko-lang="배포"
       ja-lang="配布"
       de-lang="Vertrieb"
       es-lang="Distribuir"
       es-419-lang="Distribuye"
       fr-lang="Distribuer"
       id-lang="Distribusikan"
       pt-br-lang="Distribuição"
       th-lang="จัดจำหน่าย"
       tr-lang="Dağıtma"
       vi-lang="Phân phối">Distribute</a>
    <i class="dac-sprite dac-expand-more-black dac-nav-sub-slider" tabindex=0></i>
    <ul class="dac-nav-secondary distribute">
      <li class="dac-nav-item google-play">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/google-play/index.html?hl=zh-cn">Google Play</a>
      </li>
      <li class="dac-nav-item console">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/console/index.html?hl=zh-cn">Play 控制台</a>
      </li>
      <li class="dac-nav-item best-practices">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/best-practices/index.html?hl=zh-cn"
          es-419-lang="Recomendaciones"
          fr-lang="Bonnes pratiques"
          id-lang="Praktik terbaik"
          ja-lang="おすすめの方法"
          ko-lang="권장사항"
          pt-br-lang="Práticas recomendadas"
          ru-lang="Рекомендации"
          th-lang="จัดจำหน่าย"
          tr-lang="En iyi uygulamalar"
          vi-lang="Các phương pháp hay nhất"
          zh-cn-lang="最佳做法"
          zh-tw-lang="最佳做法">Best practices</a>
      </li>
      <li class="dac-nav-item marketing-tools">
        <a class="dac-nav-link" href="https://developer.android.com/distribute/marketing-tools/index.html?hl=zh-cn"
          de-lang="Marketing-Tools"
          es-419-lang="Herramientas de marketing"
          fr-lang="Outils marketing"
          id-lang="Fitur pemasaran"
          ja-lang="マーケティング ツール"
          ko-lang="마케팅 도구"
          pt-br-lang="Ferramentas de marketing"
          ru-lang="Маркетинговые инструменты"
          th-lang="เครื่องมือการตลาด"
          tr-lang="Pazarlama araçları"
          vi-lang="Công cụ tiếp thị"
          zh-cn-lang="营销工具"
          zh-tw-lang="行銷工具">Marketing tools</a>
      </li>
      <li class="dac-nav-item policy-center">
        <a class="dac-nav-link" href="https://play.google.com/about/developer-content-policy/" target="_blank">Policy center</a>
      </li>
    </ul>
  </li>
  <li class="dac-nav-item stories">
    <a class="dac-nav-link" href="https://developer.android.com/stories/index.html?hl=zh-cn">Stories</a>
  </li>
  
  <li class="dac-nav-item preview">
    <a class="dac-nav-link" href="https://developer.android.com/preview/index.html?hl=zh-cn">Preview</a>
  </li>
  
</ul>

        
      </div>
    </div>
  </nav>

  <a name="top" tabindex="0"></a>
  
  <div class="wrap clearfix" id="body-content">
  
    
      
      <div class="content-header">
        <ul class="dac-header-crumbs"></ul>
        <!-- Breadcrumb Setup -->
        <script>$('.dac-nav-list').dacCurrentPage().dacCrumbs();</script>
        <h1 itemprop="name">片段</h1>
      
        
      
      </div>
      
    
    <div class="jd-descr " itemprop="articleBody">
      

<div id="qv-wrapper">
<div id="qv">
  <h2>本文内容</h2>
  <ol>
    <li><a href="#Design">设计原理</a></li>
    <li><a href="#Creating">创建片段</a>
      <ol>
        <li><a href="#UI">添加用户界面</a></li>
        <li><a href="#Adding">向 Activity 添加片段</a></li>
      </ol>
    </li>
    <li><a href="#Managing">管理片段</a></li>
    <li><a href="#Transactions">执行片段事务</a></li>
    <li><a href="#CommunicatingWithActivity">与 Activity 通信</a>
      <ol>
        <li><a href="#EventCallbacks">创建对 Activity 的事件回调</a></li>
        <li><a href="#ActionBar">向应用栏添加项目</a></li>
      </ol>
    </li>
    <li><a href="#Lifecycle">处理片段生命周期</a>
      <ol>
        <li><a href="#CoordinatingWithActivity">与 Activity 生命周期协调一致</a></li>
      </ol>
    </li>
    <li><a href="#Example">示例</a></li>
  </ol>

  <h2>关键类</h2>
  <ol>
    <li><code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn">Fragment</a></code></li>
    <li><code><a href="https://developer.android.com/reference/android/app/FragmentManager.html?hl=zh-cn">FragmentManager</a></code></li>
    <li><code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn">FragmentTransaction</a></code></li>
  </ol>

  <h2>另请参阅</h2>
  <ol>
    <li><a href="https://developer.android.com/training/basics/fragments/index.html?hl=zh-cn">利用片段构建动态 UI</a></li>
    <li><a href="../practices/tablets-and-handsets0b8e.html?hl=zh-cn">支持平板电脑和手机</a>
</li>
  </ol>
</div>
</div>

<p><code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn">Fragment</a></code> 表示
<code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=zh-cn">Activity</a></code> 中的行为或用户界面部分。您可以将多个片段组合在一个 Activity 中来构建多窗格
UI，以及在多个 Activity 中重复使用某个片段。您可以将片段视为 Activity 的模块化组成部分，它具有自己的生命周期，能接收自己的输入事件，并且您可以在 Activity 运行时添加或移除片段（有点像您可以在不同 Activity 中重复使用的“子 Activity”）。


</p>

<p>片段必须始终嵌入在 Activity 中，其生命周期直接受宿主 Activity 生命周期的影响。
例如，当 Activity 暂停时，其中的所有片段也会暂停；当 Activity 被销毁时，所有片段也会被销毁。
不过，当 Activity 正在运行（处于<em>已恢复</em><a href="activities0b8e.html?hl=zh-cn#Lifecycle">生命周期状态</a>）时，您可以独立操纵每个片段，如添加或移除它们。

当您执行此类片段事务时，您也可以将其添加到由 Activity 管理的返回栈 &mdash; Activity 中的每个返回栈条目都是一条已发生片段事务的记录。


返回栈让用户可以通过按<em>返回</em>按钮撤消片段事务（后退）。
</p>

<p>当您将片段作为 Activity 布局的一部分添加时，它存在于 Activity 视图层次结构的某个 <code><a href="https://developer.android.com/reference/android/view/ViewGroup.html?hl=zh-cn">ViewGroup</a></code>
内部，并且片段会定义其自己的视图布局。您可以通过在 Activity 的布局文件中声明片段，将其作为
<code>&lt;fragment&gt;</code>
元素插入您的 Activity 布局中，或者通过将其添加到某个现有
<code><a href="https://developer.android.com/reference/android/view/ViewGroup.html?hl=zh-cn">ViewGroup</a></code>，利用应用代码进行插入。不过，片段并非必须成为 Activity 布局的一部分；您还可以将没有自己
UI
的片段用作 Activity 的不可见工作线程。</p>

<p>本文描述如何在开发您的应用时使用片段，包括将片段添加到 Activity 返回栈时如何保持其状态、如何与 Activity 及 Activity 中的其他片段共享事件、如何为 Activity 的操作栏发挥作用等等。


</p>


<h2 id="Design">设计原理</h2>

<p>Android 在 Android 3.0（API 级别 11）中引入了片段，主要是为了给大屏幕（如平板电脑）上更加动态和灵活的 UI
设计提供支持。由于平板电脑的屏幕比手机屏幕大得多，因此可用于组合和交换
UI
组件的空间更大。利用片段实现此类设计时，您无需管理对视图层次结构的复杂更改。
通过将 Activity 布局分成片段，您可以在运行时修改 Activity 的外观，并在由 Activity 管理的返回栈中保留这些更改。

</p>

<p>例如，新闻应用可以使用一个片段在左侧显示文章列表，使用另一个片段在右侧显示文章 &mdash; 两个片段并排显示在一个 Activity 中，每个片段都具有自己的一套生命周期回调方法，并各自处理自己的用户输入事件。


因此，用户不需要使用一个 Activity 来选择文章，然后使用另一个 Activity 来阅读文章，而是可以在同一个 Activity 内选择文章并进行阅读，如图 1 中的平板电脑布局所示。

</p>

<p>您应该将每个片段都设计为可重复使用的模块化 Activity 组件。也就是说，由于每个片段都会通过各自的生命周期回调来定义其自己的布局和行为，您可以将一个片段加入多个 Activity，因此，您应该采用可复用式设计，避免直接从某个片段直接操纵另一个片段。


这特别重要，因为模块化片段让您可以通过更改片段的组合方式来适应不同的屏幕尺寸。
在设计可同时支持平板电脑和手机的应用时，您可以在不同的布局配置中重复使用您的片段，以根据可用的屏幕空间优化用户体验。

例如，在手机上，如果不能在同一 Activity 内储存多个片段，可能必须利用单独片段来实现单窗格
UI。
</p>

<img src="../../images/fundamentals/fragments0b8e.png?hl=zh-cn" alt="" />
<p class="img-caption"><strong>图 1.</strong> 有关由片段定义的两个 UI 模块如何适应不同设计的示例：通过组合成一个 Activity 来适应平板电脑设计，通过单独片段来适应手机设计。

</p>

<p>例如 &mdash; 仍然以新闻应用为例 &mdash; 在平板电脑尺寸的设备上运行时，该应用可以在 <em>Activity A</em> 中嵌入两个片段。
不过，在手机尺寸的屏幕上，没有足以储存两个片段的空间，因此<em>Activity A</em> 只包括用于显示文章列表的片段，当用户选择文章时，它会启动<em>Activity B</em>，其中包括用于阅读文章的第二个片段。


因此，应用可通过重复使用不同组合的片段来同时支持平板电脑和手机，如图 1 所示。

</p>

<p>如需了解有关通过利用不同片段组合来适应不同屏幕配置这种方法设计应用的详细信息，请参阅<a href="../practices/tablets-and-handsets0b8e.html?hl=zh-cn">支持平板电脑和手机</a>指南。
</p>



<h2 id="Creating">创建片段</h2>

<div class="figure" style="width:327px">
<img src="../../images/fragment_lifecycle0b8e.png?hl=zh-cn" alt="" />
<p class="img-caption"><strong>图 2.</strong> 片段的生命周期（其 Activity 运行时）。
</p>
</div>

<p>要想创建片段，您必须创建 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn">Fragment</a></code>
的子类（或已有其子类）。<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn">Fragment</a></code> 类的代码与
<code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=zh-cn">Activity</a></code> 非常相似。它包含与 Activity 类似的回调方法，如
<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onCreate(android.os.Bundle)">onCreate()</a></code>、<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onStart()">onStart()</a></code>、<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onPause()">onPause()</a></code>
和 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onStop()">onStop()</a></code>。实际上，如果您要将现有
Android
应用转换为使用片段，可能只需将代码从 Activity 的回调方法移入片段相应的回调方法中。
</p>

<p>通常，您至少应实现以下生命周期方法：</p>

<dl>
  <dt><code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onCreate(android.os.Bundle)">onCreate()</a></code></dt>
  <dd>系统会在创建片段时调用此方法。您应该在实现内初始化您想在片段暂停或停止后恢复时保留的必需片段组件。

</dd>
  <dt><code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)">onCreateView()</a></code></dt>
  <dd>系统会在片段首次绘制其用户界面时调用此方法。
要想为您的片段绘制
UI，您从此方法中返回的 <code><a href="https://developer.android.com/reference/android/view/View.html?hl=zh-cn">View</a></code> 必须是片段布局的根视图。如果片段未提供
UI，您可以返回 null。</dd>
  <dt><code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=zh-cn#onPause()">onPause()</a></code></dt>
  <dd>系统将此方法作为用户离开片段的第一个信号（但并不总是意味着此片段会被销毁）进行调用。
您通常应该在此方法内确认在当前用户会话结束后仍然有效的任何更改（因为用户可能不会返回）。

</dd>
</dl>

<p>大多数应用都应该至少为每个片段实现这三个方法，但您还应该使用几种其他回调方法来处理片段生命周期的各个阶段。

<a href="#Lifecycle">处理片段生命周期</a>部分对所有生命周期回调方法做了更详尽的阐述。
</p>


<p>您可能还想扩展几个子类，而不是 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn">Fragment</a></code> 基类：</p>

<dl>
  <dt><code><a href="https://developer.android.com/reference/android/app/DialogFragment.html?hl=zh-cn">DialogFragment</a></code></dt>
  <dd>显示浮动对话框。使用此类创建对话框可有效地替代使用
<code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=zh-cn">Activity</a></code>
类中的对话框帮助程序方法，因为您可以将片段对话框纳入由 Activity 管理的片段返回栈，从而使用户能够返回清除的片段。
</dd>

  <dt><code><a href="https://developer.android.com/reference/android/app/ListFragment.html?hl=zh-cn">ListFragment</a></code></dt>
  <dd>显示由适配器（如 <code><a href="https://developer.android.com/reference/android/widget/SimpleCursorAdapter.html?hl=zh-cn">SimpleCursorAdapter</a></code>）管理的一系列项目，类似于 <code><a href="https://developer.android.com/reference/android/app/ListActivity.html?hl=zh-cn">ListActivity</a></code>。它提供了几种管理列表视图的方法，如用于处理点击事件的
<code><a href="https://developer.android.com/reference/android/app/ListFragment.html?hl=zh-cn#onListItemClick(android.widget.ListView, android.view.View, int, long)">onListItemClick()</a></code>
回调。</dd>

  <dt><code><a href="https://developer.android.com/reference/android/preference/PreferenceFragment.html?hl=zh-cn">PreferenceFragment</a></code></dt>
  <dd>以列表形式显示 <code><a href="https://developer.android.com/reference/android/preference/Preference.html?hl=zh-cn">Preference</a></code> 对象的层次结构，类似于
<code><a href="https://developer.android.com/reference/android/preference/PreferenceActivity.html?hl=zh-cn">PreferenceActivity</a></code>。这在为您的应用创建“设置” Activity 时很有用处。
</dd>
</dl>


<h3 id="UI">添加用户界面</h3>

<p>片段通常用作 Activity 用户界面的一部分，将其自己的布局融入 Activity。
</p>

<p>要想为片段提供布局，您必须实现 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)">onCreateView()</a></code> 回调方法，Android
系统会在片段需要绘制其布局时调用该方法。您对此方法的实现返回的
<code><a href="https://developer.android.com/reference/android/view/View.html?hl=zh-cn">View</a></code> 必须是片段布局的根视图。</p>

<p class="note"><strong>注</strong>：如果您的片段是 <code><a href="https://developer.android.com/reference/android/app/ListFragment.html?hl=zh-cn">ListFragment</a></code> 的子类，则默认实现会从
<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)">onCreateView()</a></code> 返回一个 <code><a href="https://developer.android.com/reference/android/widget/ListView.html?hl=zh-cn">ListView</a></code>，因此您无需实现它。</p>

<p>要想从 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)">onCreateView()</a></code> 返回布局，您可以通过 XML 中定义的<a href="../topics/resources/layout-resource0b8e.html?hl=zh-cn">布局资源</a>来扩展布局。为帮助您执行此操作，<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)">onCreateView()</a></code>
提供了一个
<code><a href="https://developer.android.com/reference/android/view/LayoutInflater.html?hl=zh-cn">LayoutInflater</a></code> 对象。</p>

<p>例如，以下这个 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn">Fragment</a></code> 子类从 <code>example_fragment.xml</code>
文件加载布局：</p>

<pre>
public static class ExampleFragment extends Fragment {
    &#64;Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.example_fragment, container, false);
    }
}
</pre>

<div class="sidebox-wrapper">
<div class="sidebox">
  <h3>创建布局</h3>
  <p>在上例中，<code>R.layout.example_fragment</code> 是对应用资源中保存的名为
<code>example_fragment.xml</code> 的布局资源的引用。如需了解有关如何在
XML
中创建布局的信息，请参阅<a href="../topics/ui/index0b8e.html?hl=zh-cn">用户界面</a>文档。</p>
</div>
</div>

<p>传递至 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)">onCreateView()</a></code> 的 <code>container</code>
参数是您的片段布局将插入到的父
<code><a href="https://developer.android.com/reference/android/view/ViewGroup.html?hl=zh-cn">ViewGroup</a></code>（来自 Activity 的布局）。<code>savedInstanceState</code>
参数是在恢复片段时，提供上一片段实例相关数据的
<code><a href="https://developer.android.com/reference/android/os/Bundle.html?hl=zh-cn">Bundle</a></code>（<a href="#Lifecycle">处理片段生命周期</a>部分对恢复状态做了详细阐述）。
</p>

<p><code><a href="https://developer.android.com/reference/android/view/LayoutInflater.html?hl=zh-cn#inflate(int, android.view.ViewGroup, boolean)">inflate()</a></code>
方法带有三个参数：</p>
<ul>
  <li>您想要扩展的布局的资源 ID；</li>
  <li>将作为扩展布局父项的 <code><a href="https://developer.android.com/reference/android/view/ViewGroup.html?hl=zh-cn">ViewGroup</a></code>。传递 <code>container</code>
对系统向扩展布局的根视图（由其所属的父视图指定）应用布局参数具有重要意义；</li>
  <li>指示是否应该在扩展期间将扩展布局附加至 <code><a href="https://developer.android.com/reference/android/view/ViewGroup.html?hl=zh-cn">ViewGroup</a></code>（第二个参数）的布尔值。（在本例中，其值为
false，因为系统已经将扩展布局插入 <code>container</code> &mdash; 传递 true 值会在最终布局中创建一个多余的视图组。）</li>
</ul>

<p>现在，您已经了解了如何创建提供布局的片段。接下来，您需要将该片段添加到您的 Activity 中。
</p>



<h3 id="Adding">向 Activity 添加片段</h3>

<p>通常，片段向宿主 Activity 贡献一部分
UI，作为 Activity 总体视图层次结构的一部分嵌入到 Activity 中。可以通过两种方式向 Activity 布局添加片段：
</p>

<ul>
  <li><b>在 Activity 的布局文件内声明片段</b>
<p>在本例中，您可以将片段当作视图来为其指定布局属性。
例如，以下是一个具有两个片段的 Activity 的布局文件：
</p>
<pre>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent"&gt;
    &lt;fragment android:name="com.example.news.ArticleListFragment"
            android:id="@+id/list"
            android:layout_weight="1"
            android:layout_width="0dp"
            android:layout_height="match_parent" /&gt;
    &lt;fragment android:name="com.example.news.ArticleReaderFragment"
            android:id="@+id/viewer"
            android:layout_weight="2"
            android:layout_width="0dp"
            android:layout_height="match_parent" /&gt;
&lt;/LinearLayout&gt;
</pre>
  <p><code>&lt;fragment&gt;</code> 中的 <code>android:name</code> 属性指定要在布局中实例化的 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn">Fragment</a></code> 类。</p>

<p>当系统创建此 Activity 布局时，会实例化在布局中指定的每个片段，并为每个片段调用
<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)">onCreateView()</a></code>
方法，以检索每个片段的布局。系统会直接插入片段返回的 <code><a href="https://developer.android.com/reference/android/view/View.html?hl=zh-cn">View</a></code> 来替代
<code>&lt;fragment&gt;</code> 元素。</p>

<div class="note">
  <p><strong>注</strong>：每个片段都需要一个唯一的标识符，重启 Activity 时，系统可以使用该标识符来恢复片段（您也可以使用该标识符来捕获片段以执行某些事务，如将其移除）。

可以通过三种方式为片段提供 ID：
</p>
  <ul>
    <li>为 <code>android:id</code> 属性提供唯一 ID。</li>
    <li>为 <code>android:tag</code> 属性提供唯一字符串。</li>
    <li>如果您未给以上两个属性提供值，系统会使用容器视图的 ID。
</li>
  </ul>
</div>
  </li>

  <li><b>或者通过编程方式将片段添加到某个现有 <code><a href="https://developer.android.com/reference/android/view/ViewGroup.html?hl=zh-cn">ViewGroup</a></code></b>
<p>您可以在 Activity 运行期间随时将片段添加到 Activity 布局中。您只需指定要将片段放入哪个 <code><a href="https://developer.android.com/reference/android/view/ViewGroup.html?hl=zh-cn">ViewGroup</a></code>。
</p>
  <p>要想在您的 Activity 中执行片段事务（如添加、移除或替换片段），您必须使用
<code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn">FragmentTransaction</a></code> 中的 API。您可以像下面这样从
<code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=zh-cn">Activity</a></code> 获取一个 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn">FragmentTransaction</a></code> 实例：</p>

<pre>
FragmentManager fragmentManager = <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=zh-cn#getFragmentManager()">getFragmentManager()</a></code>;
FragmentTransaction fragmentTransaction = fragmentManager.<code><a href="https://developer.android.com/reference/android/app/FragmentManager.html?hl=zh-cn#beginTransaction()">beginTransaction()</a></code>;
</pre>

<p>然后，您可以使用 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#add(int, android.app.Fragment)">add()</a></code>
方法添加一个片段，指定要添加的片段以及将其插入哪个视图。例如：</p>

<pre>
ExampleFragment fragment = new ExampleFragment();
fragmentTransaction.add(R.id.fragment_container, fragment);
fragmentTransaction.commit();
</pre>

  <p>传递到 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#add(int, android.app.Fragment)">add()</a></code>
的第一个参数是 <code><a href="https://developer.android.com/reference/android/view/ViewGroup.html?hl=zh-cn">ViewGroup</a></code>，即应该放置片段的位置，由资源
ID 指定，第二个参数是要添加的片段。</p>
  <p>一旦您通过
<code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn">FragmentTransaction</a></code> 做出了更改，就必须调用
<code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#commit()">commit()</a></code> 以使更改生效。</p>
  </li>
</ul>


<h4 id="AddingWithoutUI">添加没有 UI 的片段</h4>

<p>上例展示了如何向您的 Activity 添加片段以提供 UI。不过，您还可以使用片段为 Activity 提供后台行为，而不显示额外 UI。

</p>

<p>要想添加没有 UI 的片段，请使用 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#add(android.app.Fragment, java.lang.String)">add(Fragment, String)</a></code> 从 Activity 添加片段（为片段提供一个唯一的字符串“标记”，而不是视图 ID）。
这会添加片段，但由于它并不与 Activity 布局中的视图关联，因此不会收到对
<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)">onCreateView()</a></code> 的调用。因此，您不需要实现该方法。</p>

<p>并非只能为非 UI 片段提供字符串标记 &mdash; 您也可以为具有 UI
的片段提供字符串标记 &mdash; 但如果片段没有
UI，则字符串标记将是标识它的唯一方式。如果您想稍后从 Activity 中获取片段，则需要使用
<code><a href="https://developer.android.com/reference/android/app/FragmentManager.html?hl=zh-cn#findFragmentByTag(java.lang.String)">findFragmentByTag()</a></code>。</p>

<p>如需查看将没有 UI 的片段用作后台工作线程的示例 Activity，请参阅 <code>FragmentRetainInstance.java</code> 示例，该示例包括在 SDK 示例（通过
Android SDK 管理器提供）中，以 
<code>&lt;sdk_root&gt;/APIDemos/app/src/main/java/com/example/android/apis/app/FragmentRetainInstance.java</code> 形式位于您的系统中。</p>



<h2 id="Managing">管理片段</h2>

<p>要想管理您的 Activity 中的片段，您需要使用 <code><a href="https://developer.android.com/reference/android/app/FragmentManager.html?hl=zh-cn">FragmentManager</a></code>。要想获取它，请从您的 Activity 调用
<code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=zh-cn#getFragmentManager()">getFragmentManager()</a></code>。</p>

<p>您可以使用 <code><a href="https://developer.android.com/reference/android/app/FragmentManager.html?hl=zh-cn">FragmentManager</a></code> 执行的操作包括：</p>

<ul>
  <li>通过 <code><a href="https://developer.android.com/reference/android/app/FragmentManager.html?hl=zh-cn#findFragmentById(int)">findFragmentById()</a></code>（对于在 Activity 布局中提供 UI
的片段）或 <code><a href="https://developer.android.com/reference/android/app/FragmentManager.html?hl=zh-cn#findFragmentByTag(java.lang.String)">findFragmentByTag()</a></code>（对于提供或不提供 UI 的片段）获取 Activity 中存在的片段。</li>
  <li>通过 <code><a href="https://developer.android.com/reference/android/app/FragmentManager.html?hl=zh-cn#popBackStack()">popBackStack()</a></code>（模拟用户发出的<em>返回</em>命令）将片段从返回栈中弹出。</li>
  <li>通过 <code><a href="https://developer.android.com/reference/android/app/FragmentManager.html?hl=zh-cn#addOnBackStackChangedListener(android.app.FragmentManager.OnBackStackChangedListener)">addOnBackStackChangedListener()</a></code> 注册一个侦听返回栈变化的侦听器。</li>
</ul>

<p>如需了解有关这些方法以及其他方法的详细信息，请参阅 <code><a href="https://developer.android.com/reference/android/app/FragmentManager.html?hl=zh-cn">FragmentManager</a></code> 类文档。</p>

<p>如上文所示，您也可以使用 <code><a href="https://developer.android.com/reference/android/app/FragmentManager.html?hl=zh-cn">FragmentManager</a></code>
打开一个
<code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn">FragmentTransaction</a></code>，通过它来执行某些事务，如添加和移除片段。</p>


<h2 id="Transactions">执行片段事务</h2>

<p>在 Activity 中使用片段的一大优点是，可以根据用户行为通过它们执行添加、移除、替换以及其他操作。
您提交给 Activity 的每组更改都称为事务，您可以使用
<code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn">FragmentTransaction</a></code> 中的 API 来执行一项事务。您也可以将每个事务保存到由 Activity 管理的返回栈内，从而让用户能够回退片段更改（类似于回退 Activity）。

</p>

<p>您可以像下面这样从 <code><a href="https://developer.android.com/reference/android/app/FragmentManager.html?hl=zh-cn">FragmentManager</a></code> 获取一个 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn">FragmentTransaction</a></code> 实例：</p>

<pre>
FragmentManager fragmentManager = <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=zh-cn#getFragmentManager()">getFragmentManager()</a></code>;
FragmentTransaction fragmentTransaction = fragmentManager.<code><a href="https://developer.android.com/reference/android/app/FragmentManager.html?hl=zh-cn#beginTransaction()">beginTransaction()</a></code>;
</pre>

<p>每个事务都是您想要同时执行的一组更改。您可以使用
<code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#add(android.app.Fragment, java.lang.String)">add()</a></code>、<code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#remove(android.app.Fragment)">remove()</a></code> 和 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#replace(int, android.app.Fragment)">replace()</a></code>
等方法为给定事务设置您想要执行的所有更改。然后，要想将事务应用到 Activity，您必须调用
<code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#commit()">commit()</a></code>。</p>
</dl>

<p>不过，在您调用 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#commit()">commit()</a></code> 之前，您可能想调用 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#addToBackStack(java.lang.String)">addToBackStack()</a></code>，以将事务添加到片段事务返回栈。
该返回栈由 Activity 管理，允许用户通过按<em>返回</em>按钮返回上一片段状态。
</p>

<p>例如，以下示例说明了如何将一个片段替换成另一个片段，以及如何在返回栈中保留先前状态：
</p>

<pre>
// Create new fragment and transaction
Fragment newFragment = new ExampleFragment();
FragmentTransaction transaction = getFragmentManager().beginTransaction();

// Replace whatever is in the fragment_container view with this fragment,
// and add the transaction to the back stack
transaction.replace(R.id.fragment_container, newFragment);
transaction.addToBackStack(null);

// Commit the transaction
transaction.commit();
</pre>

<p>在上例中，<code>newFragment</code>
会替换目前在 <code>R.id.fragment_container</code> ID 所标识的布局容器中的任何片段（如有）。通过调用 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#addToBackStack(java.lang.String)">addToBackStack()</a></code> 可将替换事务保存到返回栈，以便用户能够通过按<em>返回</em>按钮撤消事务并回退到上一片段。

</p>

<p>如果您向事务添加了多个更改（如又一个 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#add(android.app.Fragment, java.lang.String)">add()</a></code> 或 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#remove(android.app.Fragment)">remove()</a></code>），并且调用了 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#addToBackStack(java.lang.String)">addToBackStack()</a></code>，则在调用
<code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#commit()">commit()</a></code> 前应用的所有更改都将作为单一事务添加到返回栈，并且<em>返回</em>按钮会将它们一并撤消。
</p>

<p>向 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn">FragmentTransaction</a></code>
添加更改的顺序无关紧要，不过：</p>
<ul>
  <li>您必须最后调用 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#commit()">commit()</a></code></li>
  <li>如果您要向同一容器添加多个片段，则您添加片段的顺序将决定它们在视图层次结构中的出现顺序
</li>
</ul>

<p>如果您没有在执行移除片段的事务时调用 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#addToBackStack(java.lang.String)">addToBackStack()</a></code>，则事务提交时该片段会被销毁，用户将无法回退到该片段。
不过，如果您在删除片段时调用了
<code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#addToBackStack(java.lang.String)">addToBackStack()</a></code>，则系统会<em>停止</em>该片段，并在用户回退时将其恢复。

</p>

<p class="note"><strong>提示</strong>：对于每个片段事务，您都可以通过在提交前调用
<code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#setTransition(int)">setTransition()</a></code>
来应用过渡动画。</p>

<p>调用 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#commit()">commit()</a></code>
不会立即执行事务，而是在 Activity 的 UI
线程（“主”线程）可以执行该操作时再安排其在线程上运行。不过，如有必要，您也可以从 UI 线程调用 <code><a href="https://developer.android.com/reference/android/app/FragmentManager.html?hl=zh-cn#executePendingTransactions()">executePendingTransactions()</a></code> 以立即执行
<code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#commit()">commit()</a></code> 提交的事务。通常不必这样做，除非其他线程中的作业依赖该事务。
</p>

<p class="caution"><strong>注意</strong>：您只能在 Activity<a href="activities0b8e.html?hl=zh-cn#SavingActivityState"> 保存其状态</a>（用户离开 Activity）之前使用 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#commit()">commit()</a></code>
提交事务。如果您试图在该时间点后提交，则会引发异常。
这是因为如需恢复 Activity，则提交后的状态可能会丢失。
对于丢失提交无关紧要的情况，请使用 <code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#commitAllowingStateLoss()">commitAllowingStateLoss()</a></code>。</p>




<h2 id="CommunicatingWithActivity">与 Activity 通信</h2>

<p>尽管 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn">Fragment</a></code> 是作为独立于
<code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=zh-cn">Activity</a></code>
的对象实现，并且可在多个 Activity 内使用，但片段的给定实例会直接绑定到包含它的 Activity。</p>

<p>具体地说，片段可以通过 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#getActivity()">getActivity()</a></code>
访问 <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=zh-cn">Activity</a></code> 实例，并轻松地执行在 Activity 布局中查找视图等任务。</p>

<pre>
View listView = <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#getActivity()">getActivity()</a></code>.<code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=zh-cn#findViewById(int)">findViewById</a></code>(R.id.list);
</pre>

<p>同样地，您的 Activity 也可以使用
<code><a href="https://developer.android.com/reference/android/app/FragmentManager.html?hl=zh-cn#findFragmentById(int)">findFragmentById()</a></code> 或 <code><a href="https://developer.android.com/reference/android/app/FragmentManager.html?hl=zh-cn#findFragmentByTag(java.lang.String)">findFragmentByTag()</a></code>，通过从 <code><a href="https://developer.android.com/reference/android/app/FragmentManager.html?hl=zh-cn">FragmentManager</a></code> 获取对 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn">Fragment</a></code> 的引用来调用片段中的方法。例如：</p>

<pre>
ExampleFragment fragment = (ExampleFragment) getFragmentManager().findFragmentById(R.id.example_fragment);
</pre>


<h3 id="EventCallbacks">创建对 Activity 的事件回调</h3>

<p>在某些情况下，您可能需要通过片段与 Activity 共享事件。执行此操作的一个好方法是，在片段内定义一个回调接口，并要求宿主 Activity 实现它。

当 Activity 通过该接口收到回调时，可以根据需要与布局中的其他片段共享这些信息。
</p>

<p>例如，如果一个新闻应用的 Activity 有两个片段 &mdash; 一个用于显示文章列表（片段 A），另一个用于显示文章（片段 B）&mdash; 那么片段 A 必须在列表项被选定后告知 Activity，以便它告知片段 B 显示该文章。

在本例中，<code>OnArticleSelectedListener</code>
接口在片段 A 内声明：</p>

<pre>
public static class FragmentA extends ListFragment {
    ...
    // Container Activity must implement this interface
    public interface OnArticleSelectedListener {
        public void onArticleSelected(Uri articleUri);
    }
    ...
}
</pre>

<p>然后，该片段的宿主 Activity 会实现 <code>OnArticleSelectedListener</code>
接口并替代 <code>onArticleSelected()</code>，将来自片段 A
的事件通知片段 B。为确保宿主 Activity 实现此接口，片段 A 的 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onAttach(android.app.Activity)">onAttach()</a></code>
回调方法（系统在向 Activity 添加片段时调用的方法）会通过转换传递到
<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onAttach(android.app.Activity)">onAttach()</a></code> 中的 <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=zh-cn">Activity</a></code> 来实例化 <code>OnArticleSelectedListener</code> 的实例：
</p>

<pre>
public static class FragmentA extends ListFragment {
    OnArticleSelectedListener mListener;
    ...
    &#64;Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        try {
            mListener = (OnArticleSelectedListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString() + " must implement OnArticleSelectedListener");
        }
    }
    ...
}
</pre>

<p>如果 Activity 未实现接口，则片段会引发
<code><a href="https://developer.android.com/reference/java/lang/ClassCastException.html?hl=zh-cn">ClassCastException</a></code>。实现时，<code>mListener</code>
成员会保留对 Activity 的 <code>OnArticleSelectedListener</code> 实现的引用，以便片段 A 可以通过调用
<code>OnArticleSelectedListener</code>
接口定义的方法与 Activity 共享事件。例如，如果片段 A 是
<code><a href="https://developer.android.com/reference/android/app/ListFragment.html?hl=zh-cn">ListFragment</a></code>
的一个扩展，则用户每次点击列表项时，系统都会调用片段中的 <code><a href="https://developer.android.com/reference/android/app/ListFragment.html?hl=zh-cn#onListItemClick(android.widget.ListView, android.view.View, int, long)">onListItemClick()</a></code>，然后该方法会调用 <code>onArticleSelected()</code>
以与 Activity 共享事件：</p>

<pre>
public static class FragmentA extends ListFragment {
    OnArticleSelectedListener mListener;
    ...
    &#64;Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        // Append the clicked item's row ID with the content provider Uri
        Uri noteUri = ContentUris.<code><a href="https://developer.android.com/reference/android/content/ContentUris.html?hl=zh-cn#withAppendedId(android.net.Uri, long)">withAppendedId</a></code>(ArticleColumns.CONTENT_URI, id);
        // Send the event and Uri to the host activity
        mListener.onArticleSelected(noteUri);
    }
    ...
}
</pre>

<p>传递到 <code><a href="https://developer.android.com/reference/android/app/ListFragment.html?hl=zh-cn#onListItemClick(android.widget.ListView, android.view.View, int, long)">onListItemClick()</a></code> 的 <code>id</code> 参数是被点击项的行
ID，即 Activity（或其他片段）用来从应用的 <code><a href="https://developer.android.com/reference/android/content/ContentProvider.html?hl=zh-cn">ContentProvider</a></code> 获取文章的 ID。</p>

<p><!--To see a complete implementation of this kind of callback interface, see the <a
href="https://developer.android.com/resources/samples/NotePad/index.html?hl=zh-cn">NotePad sample</a>. --><a href="../topics/providers/content-providers0b8e.html?hl=zh-cn">内容提供程序</a>文档中提供了有关内容提供程序用法的更多详情。
</p>



<h3 id="ActionBar">向应用栏添加项目</h3>

<p>您的片段可以通过实现
<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onCreateOptionsMenu(android.view.Menu, android.view.MenuInflater)">onCreateOptionsMenu()</a></code> 向 Activity 的<a href="../topics/ui/menus0b8e.html?hl=zh-cn#options-menu">选项菜单</a>（并因此向<a href="https://developer.android.com/training/appbar/index.html?hl=zh-cn">应用栏</a>）贡献菜单项。不过，为了使此方法能够收到调用，您必须在
 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onCreate(android.os.Bundle)">onCreate()</a></code> 期间调用 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#setHasOptionsMenu(boolean)">setHasOptionsMenu()</a></code>，以指示片段想要向选项菜单添加菜单项（否则，片段将不会收到对
<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onCreateOptionsMenu(android.view.Menu, android.view.MenuInflater)">onCreateOptionsMenu()</a></code>
的调用）。</p>

<p>您之后从片段添加到选项菜单的任何菜单项都将追加到现有菜单项之后。
选定菜单项时，片段还会收到对 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onOptionsItemSelected(android.view.MenuItem)">onOptionsItemSelected()</a></code>
的回调。</p>

<p>您还可以通过调用 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#registerForContextMenu(android.view.View)">registerForContextMenu()</a></code>，在片段布局中注册一个视图来提供上下文菜单。用户打开上下文菜单时，片段会收到对
<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onCreateContextMenu(android.view.ContextMenu, android.view.View, android.view.ContextMenu.ContextMenuInfo)">onCreateContextMenu()</a></code> 的调用。当用户选择某个菜单项时，片段会收到对 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onContextItemSelected(android.view.MenuItem)">onContextItemSelected()</a></code> 的调用。</p>

<p class="note"><strong>注</strong>：尽管您的片段会收到与其添加的每个菜单项对应的菜单项选定回调，但当用户选择菜单项时，Activity 会首先收到相应的回调。

如果 Activity 对菜单项选定回调的实现不会处理选定的菜单项，则系统会将事件传递到片段的回调。
这适用于选项菜单和上下文菜单。
</p>

<p>如需了解有关菜单的详细信息，请参阅<a href="../topics/ui/menus0b8e.html?hl=zh-cn">菜单</a>开发者指南和<a href="https://developer.android.com/training/appbar/index.html?hl=zh-cn">应用栏</a>培训课程。</p>




<h2 id="Lifecycle">处理片段生命周期</h2>

<div class="figure" style="width:350px">
<img src="../../images/activity_fragment_lifecycle0b8e.png?hl=zh-cn" alt=""/>
<p class="img-caption"><strong>图 3.</strong> Activity 生命周期对片段生命周期的影响。
</p>
</div>

<p>管理片段生命周期与管理 Activity 生命周期很相似。和 Activity 一样，片段也以三种状态存在：
</p>

<dl>
  <dt><i>继续</i></dt>
    <dd>片段在运行中的 Activity 中可见。</dd>

  <dt><i>暂停</i></dt>
    <dd>另一个 Activity 位于前台并具有焦点，但此片段所在的 Activity 仍然可见（前台 Activity 部分透明，或未覆盖整个屏幕）。

</dd>

  <dt><i>停止</i></dt>
    <dd>片段不可见。宿主 Activity 已停止，或片段已从 Activity 中移除，但已添加到返回栈。
停止片段仍然处于活动状态（系统会保留所有状态和成员信息）。
不过，它对用户不再可见，如果 Activity 被终止，它也会被终止。
</dd>
</dl>

<p>同样与 Activity 一样，假使 Activity 的进程被终止，而您需要在重建 Activity 时恢复片段状态，您也可以使用 <code><a href="https://developer.android.com/reference/android/os/Bundle.html?hl=zh-cn">Bundle</a></code>
保留片段的状态。您可以在片段的 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onSaveInstanceState(android.os.Bundle)">onSaveInstanceState()</a></code> 回调期间保存状态，并可在
<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onCreate(android.os.Bundle)">onCreate()</a></code>、<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)">onCreateView()</a></code> 或 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onActivityCreated(android.os.Bundle)">onActivityCreated()</a></code> 期间恢复状态。如需了解有关保存状态的详细信息，请参阅 <a href="activities0b8e.html?hl=zh-cn#SavingActivityState">Activity</a> 文档。

</p>

<p>Activity 生命周期与片段生命周期之间的最显著差异在于它们在其各自返回栈中的存储方式。
默认情况下，Activity 停止时会被放入由系统管理的 Activity 返回栈（以便用户通过<em>返回</em>按钮回退到 Activity，<a href="tasks-and-back-stack0b8e.html?hl=zh-cn">任务和返回栈</a>对此做了阐述）。不过，仅当您在移除片段的事务执行期间通过调用
<code><a href="https://developer.android.com/reference/android/app/FragmentTransaction.html?hl=zh-cn#addToBackStack(java.lang.String)">addToBackStack()</a></code> 显式请求保存实例时，系统才会将片段放入由宿主 Activity 管理的返回栈。



</p>

<p>在其他方面，管理片段生命周期与管理 Activity 生命周期非常相似。
因此，<a href="activities0b8e.html?hl=zh-cn#Lifecycle">管理 Activity 生命周期</a>的做法同样适用于片段。
但您还需要了解 Activity 的生命周期对片段生命周期的影响。
</p>

<p class="caution"><strong>注意</strong>：如需 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn">Fragment</a></code>
内的某个 <code><a href="https://developer.android.com/reference/android/content/Context.html?hl=zh-cn">Context</a></code>
对象，可以调用 <code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#getActivity()">getActivity()</a></code>。但要注意，请仅在片段附加到 Activity 时调用
<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#getActivity()">getActivity()</a></code>。如果片段尚未附加，或在其生命周期结束期间分离，则
<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#getActivity()">getActivity()</a></code> 将返回 null。</p>


<h3 id="CoordinatingWithActivity">与 Activity 生命周期协调一致</h3>

<p>片段所在的 Activity 的生命周期会直接影响片段的生命周期，其表现为，Activity 的每次生命周期回调都会引发每个片段的类似回调。

例如，当 Activity 收到 <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=zh-cn#onPause()">onPause()</a></code> 时，Activity 中的每个片段也会收到
<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onPause()">onPause()</a></code>。</p>

<p>不过，片段还有几个额外的生命周期回调，用于处理与 Activity 的唯一交互，以执行构建和销毁片段 UI 等操作。
这些额外的回调方法是：
</p>

<dl>
  <dt><code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onAttach(android.app.Activity)">onAttach()</a></code></dt>
    <dd>在片段已与 Activity 关联时调用（<code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=zh-cn">Activity</a></code> 传递到此方法内）。</dd>
  <dt><code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)">onCreateView()</a></code></dt>
    <dd>调用它可创建与片段关联的视图层次结构。</dd>
  <dt><code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onActivityCreated(android.os.Bundle)">onActivityCreated()</a></code></dt>
    <dd>在 Activity 的 <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=zh-cn#onCreate(android.os.Bundle)">onCreate()</a></code> 方法已返回时调用。</dd>
  <dt><code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onDestroyView()">onDestroyView()</a></code></dt>
    <dd>在移除与片段关联的视图层次结构时调用。</dd>
  <dt><code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onDetach()">onDetach()</a></code></dt>
    <dd>在取消片段与 Activity 的关联时调用。</dd>
</dl>

<p>图 3
图示说明了受其宿主 Activity 影响的片段生命周期流。在该图中，您可以看到 Activity 的每个连续状态如何决定片段可以收到的回调方法。
例如，当 Activity 收到其 <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=zh-cn#onCreate(android.os.Bundle)">onCreate()</a></code> 回调时，Activity 中的片段只会收到
<code><a href="https://developer.android.com/reference/android/app/Fragment.html?hl=zh-cn#onActivityCreated(android.os.Bundle)">onActivityCreated()</a></code> 回调。</p>

<p>一旦 Activity 达到恢复状态，您就可以随意向 Activity 添加片段和移除其中的片段。
因此，只有当 Activity 处于恢复状态时，片段的生命周期才能独立变化。
</p>

<p>不过，当 Activity 离开恢复状态时，片段会在 Activity 的推动下再次经历其生命周期。
</p>




<h2 id="Example">示例</h2>

<p>为了将本文阐述的所有内容融会贯通，以下提供了一个示例，其中的 Activity 使用两个片段来创建一个双窗格布局。
下面的 Activity 包括两个片段：一个用于显示莎士比亚戏剧标题列表，另一个用于从列表中选定戏剧时显示其摘要。

此外，它还展示了如何根据屏幕配置提供不同的片段配置。
</p>

<p class="note"><strong>注</strong>：<a href="https://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/FragmentLayout.html?hl=zh-cn"><code>FragmentLayout.java</code></a> 中提供了此 Activity 的完整源代码。
</p>

<p>主 Activity 会在 <code><a href="https://developer.android.com/reference/android/app/Activity.html?hl=zh-cn#onCreate(android.os.Bundle)">onCreate()</a></code> 期间以常规方式应用布局：</p>

<pre>@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.fragment_layout);
}</pre>

<p>应用的布局为 <code>fragment_layout.xml</code>：</p>

<pre>&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent" android:layout_height="match_parent"&gt;

    &lt;fragment class="com.example.android.apis.app.FragmentLayout$TitlesFragment"
            android:id="@+id/titles" android:layout_weight="1"
            android:layout_width="0px" android:layout_height="match_parent" /&gt;

    &lt;FrameLayout android:id="@+id/details" android:layout_weight="1"
            android:layout_width="0px" android:layout_height="match_parent"
            android:background="?android:attr/detailsElementBackground" /&gt;

&lt;/LinearLayout&gt;</pre>

<p>通过使用此布局，系统可在 Activity 加载布局时立即实例化
<code>TitlesFragment</code>（列出戏剧标题），而
<code><a href="https://developer.android.com/reference/android/widget/FrameLayout.html?hl=zh-cn">FrameLayout</a></code>（用于显示戏剧摘要的片段所在位置）则会占用屏幕右侧的空间，但最初处于空白状态。
正如您将在下文所见的那样，用户从列表中选择某个项目后，系统才会将片段放入
<code><a href="https://developer.android.com/reference/android/widget/FrameLayout.html?hl=zh-cn">FrameLayout</a></code>。</p>

<p>不过，并非所有屏幕配置都具有足够的宽度，可以并排显示戏剧列表和摘要。
因此，以上布局仅用于横向屏幕配置（布局保存在
<code>res/layout-land/fragment_layout.xml</code>）。</p>

<p>因此，当屏幕纵向显示时，系统会应用以下布局（保存在
<code>res/layout/fragment_layout.xml</code>）：</p>

<pre>&lt;FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent" android:layout_height="match_parent"&gt;
    &lt;fragment class="com.example.android.apis.app.FragmentLayout$TitlesFragment"
            android:id="@+id/titles"
            android:layout_width="match_parent" android:layout_height="match_parent" /&gt;
&lt;/FrameLayout&gt;</pre>

<p>此布局仅包括 <code>TitlesFragment</code>。这意味着，当设备纵向显示时，只有戏剧标题列表可见。
因此，当用户在此配置中点击某个列表项时，应用会启动一个新 Activity 来显示摘要，而不是加载另一个片段。

</p>

<p>接下来，您可以看到如何在片段类中实现此目的。第一个片段是 <code>TitlesFragment</code>，它显示莎士比亚戏剧标题列表。该片段扩展了 <code><a href="https://developer.android.com/reference/android/app/ListFragment.html?hl=zh-cn">ListFragment</a></code>，并依靠它来处理大多数列表视图工作。</p>

<p>当您检查此代码时，请注意，用户点击列表项时可能会出现两种行为：系统可能会创建并显示一个新片段，从而在同一 Activity 中显示详细信息（将片段添加到
<code><a href="https://developer.android.com/reference/android/widget/FrameLayout.html?hl=zh-cn">FrameLayout</a></code>），也可能会启动一个新 Activity（在该 Activity 中可显示片段），具体取决于这两个布局中哪一个处于活动状态。
</p>

<pre>public static class TitlesFragment extends ListFragment {
    boolean mDualPane;
    int mCurCheckPosition = 0;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        // Populate list with our static array of titles.
        setListAdapter(new ArrayAdapter&lt;String&gt;(getActivity(),
                android.R.layout.simple_list_item_activated_1, Shakespeare.TITLES));

        // Check to see if we have a frame in which to embed the details
        // fragment directly in the containing UI.
        View detailsFrame = getActivity().findViewById(R.id.details);
        mDualPane = detailsFrame != null &amp;&amp; detailsFrame.getVisibility() == View.VISIBLE;

        if (savedInstanceState != null) {
            // Restore last state for checked position.
            mCurCheckPosition = savedInstanceState.getInt("curChoice", 0);
        }

        if (mDualPane) {
            // In dual-pane mode, the list view highlights the selected item.
            getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
            // Make sure our UI is in the correct state.
            showDetails(mCurCheckPosition);
        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("curChoice", mCurCheckPosition);
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        showDetails(position);
    }

    /**
     * Helper function to show the details of a selected item, either by
     * displaying a fragment in-place in the current UI, or starting a
     * whole new activity in which it is displayed.
     */
    void showDetails(int index) {
        mCurCheckPosition = index;

        if (mDualPane) {
            // We can display everything in-place with fragments, so update
            // the list to highlight the selected item and show the data.
            getListView().setItemChecked(index, true);

            // Check what fragment is currently shown, replace if needed.
            DetailsFragment details = (DetailsFragment)
                    getFragmentManager().findFragmentById(R.id.details);
            if (details == null || details.getShownIndex() != index) {
                // Make new fragment to show this selection.
                details = DetailsFragment.newInstance(index);

                // Execute a transaction, replacing any existing fragment
                // with this one inside the frame.
                FragmentTransaction ft = getFragmentManager().beginTransaction();
                if (index == 0) {
                    ft.replace(R.id.details, details);
                } else {
                    ft.replace(R.id.a_item, details);
                }
                ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
                ft.commit();
            }

        } else {
            // Otherwise we need to launch a new activity to display
            // the dialog fragment with selected text.
            Intent intent = new Intent();
            intent.setClass(getActivity(), DetailsActivity.class);
            intent.putExtra("index", index);
            startActivity(intent);
        }
    }
}</pre>

<p>第二个片段 <code>DetailsFragment</code> 显示从
<code>TitlesFragment</code> 的列表中选择的项目的戏剧摘要：</p>

<pre>public static class DetailsFragment extends Fragment {
    /**
     * Create a new instance of DetailsFragment, initialized to
     * show the text at 'index'.
     */
    public static DetailsFragment newInstance(int index) {
        DetailsFragment f = new DetailsFragment();

        // Supply index input as an argument.
        Bundle args = new Bundle();
        args.putInt("index", index);
        f.setArguments(args);

        return f;
    }

    public int getShownIndex() {
        return getArguments().getInt("index", 0);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (container == null) {
            // We have different layouts, and in one of them this
            // fragment's containing frame doesn't exist.  The fragment
            // may still be created from its saved state, but there is
            // no reason to try to create its view hierarchy because it
            // won't be displayed.  Note this is not needed -- we could
            // just run the code below, where we would create and return
            // the view hierarchy; it would just never be used.
            return null;
        }

        ScrollView scroller = new ScrollView(getActivity());
        TextView text = new TextView(getActivity());
        int padding = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,
                4, getActivity().getResources().getDisplayMetrics());
        text.setPadding(padding, padding, padding, padding);
        scroller.addView(text);
        text.setText(Shakespeare.DIALOGUE[getShownIndex()]);
        return scroller;
    }
}</pre>

<p>从 <code>TitlesFragment</code> 类中重新调用，如果用户点击某个列表项，且当前布局“根本不”<em></em>包括 <code>R.id.details</code>
视图（即
<code>DetailsFragment</code> 所属视图），则应用会启动 <code>DetailsActivity</code>
Activity 以显示该项目的内容。</p>

<p>以下是 <code>DetailsActivity</code>，它简单地嵌入了
<code>DetailsFragment</code>，以在屏幕为纵向时显示所选的戏剧摘要：</p>

<pre>public static class DetailsActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (getResources().getConfiguration().orientation
                == Configuration.ORIENTATION_LANDSCAPE) {
            // If the screen is now in landscape mode, we can show the
            // dialog in-line with the list so we don't need this activity.
            finish();
            return;
        }

        if (savedInstanceState == null) {
            // During initial setup, plug in the details fragment.
            DetailsFragment details = new DetailsFragment();
            details.setArguments(getIntent().getExtras());
            getFragmentManager().beginTransaction().add(android.R.id.content, details).commit();
        }
    }
}</pre>

<p>请注意，如果配置为横向，则此 Activity 会自行完成，以便主 Activity 可以接管并沿 <code>TitlesFragment</code>
显示
<code>DetailsFragment</code>。如果用户在纵向显示时启动
<code>DetailsActivity</code>，但随后旋转为横向（这会重启当前 Activity），就可能出现这种情况。</p>


<p>如需查看使用片段的更多示例（以及本示例的完整源文件），请参阅
<a href="https://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/index.html?hl=zh-cn#Fragment">
ApiDemos</a>（可从<a href="https://developer.android.com/resources/samples/get.html?hl=zh-cn">示例 SDK 组件</a>下载）中提供的 API Demos 示例应用。</p>





    </div>

    

  
    
  
    



<div class="wrap">
  <footer class="dac-footer ">
    <div class="cols dac-footer-main">
      <div class="col-1of2">
        <div class="dac-footer-contact">
          <a class="dac-footer-contact-link" href="https://developer.android.com/newsletter/index.html?hl=zh-cn" title="Newsletter">Newsletter</a>
          <a class="dac-footer-contact-link" href="https://android-developers.blogspot.com/" title="博客" target="_blank">博客</a>
          <a class="dac-footer-contact-link" href="https://developer.android.com/support.html?hl=zh-cn" title="支持">支持</a>
        </div>
      </div>
      <div class="col-1of2 dac-footer-reachout">
        <div class="dac-footer-social">
          <a class="dac-button-social dac-youtube dac-footer-social-link" href="https://www.youtube.com/user/androiddevelopers" title="Android Developers on YouTube" target="_blank"><i class="dac-sprite dac-youtube"></i><span class="hide-text">Android Developers on YouTube</span></a>
          <a class="dac-button-social dac-gplus dac-footer-social-link" href="https://plus.google.com/+AndroidDevelopers" title="Android Developers on Google+" target="_blank"><i class="dac-sprite dac-gplus"></i><span class="hide-text">Android Developers on Google+</span></a>
          <a class="dac-button-social dac-twitter dac-footer-social-link" href="https://twitter.com/AndroidDev" title="Android Developers on Twitter" target="_blank"><i class="dac-sprite dac-twitter"></i><span class="hide-text">Android Developers on Twitter</span></a>
        </div>
      </div>
    </div>

    <hr class="dac-footer-separator"/>
      
      <p class="dac-footer-copyright">
        
        Except as noted, this content is licensed under <a href="http://creativecommons.org/licenses/by/2.5/" target="_blank">Creative Commons Attribution 2.5</a>. For details and restrictions, see the <a href="https://developer.android.com/license.html">Content License</a>.
      </p>
    

    <p class="dac-footer-links">
      <a href="https://www.android.com/" title="Android.com" target="_blank">Android.com</a>
      <a href="https://developer.android.com/?hl=zh-cn" title="Android Developers">Android Developers</a>
      <a href="https://developer.android.com/studio/index.html?hl=zh-cn" title="Android Studio">Android Studio</a>
      <a href="https://developer.android.com/distribute/console/index.html?hl=zh-cn" title="Google Play Console">Google Play Console</a>
      <a href="https://developer.android.com/legal.html?hl=zh-cn" title="Legal Notice">Legal Notice</a>
    </p>

    <!-- TODO(akassay) Update all DAC js to use the class instead of the id b/30368561 -->
    <form class="devsite-utility-footer-language" id="setlang" action="https://developer.android.com/i18n/setlang/" method="post">
      <input type="hidden" name="xsrf_token" value="heaow_2IzRWVIlu7RYe1Wy7ALHDh08cxCrSf78ar-co6MTQ5NzUxNjk4NzA0ODY1MA" />
      <input type="hidden" name="next" value="fragments.html">
      <span id="language" class="locales">
        <select class="devsite-utility-footer-language-select" name="language">
          
          <option value="id"
            >
            Bahasa Indonesia
          </option>
          
          <option value="de"
            >
            Deutsch
          </option>
          
          <option value="en"
            >
            English
          </option>
          
          <option value="es"
            >
            español
          </option>
          
          <option value="es-419"
            >
            Español (América Latina)
          </option>
          
          <option value="fr"
            >
            français
          </option>
          
          <option value="pt-br"
            >
            Português Brasileiro
          </option>
          
          <option value="vi"
            >
            Tiếng Việt
          </option>
          
          <option value="tr"
            >
            Türkçe
          </option>
          
          <option value="ru"
            >
            Русский
          </option>
          
          <option value="th"
            >
            ภาษาไทย
          </option>
          
          <option value="ja"
            >
            日本語
          </option>
          
          <option value="zh-cn"
             selected="selected" >
            简体中文
          </option>
          
          <option value="zh-tw"
            >
            繁體中文
          </option>
          
          <option value="ko"
            >
            한국어
          </option>
          
        </select>
      </span>
    </form>
  </footer>
</div><!--/.wrap -->

<div class="dac-toast-group">
  <div class="dac-toast" data-toast>
    <div class="dac-toast-wrap">
      This site uses cookies to store your preferences for site-specific language and display options.
    </div>
  </div>
</div>

<div data-modal="newsletter" data-newsletter-fb data-swap class="dac-modal newsletter">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <div class="dac-swap" data-swap-container>
          <section class="dac-swap-section dac-active dac-down">
            <h2 class="norule dac-modal-header-title" data-t="newsletter.title">Get the latest Android developer news and tips that will help you find success on Google Play.</h2>
            <p class="dac-modal-header-subtitle" data-t="newsletter.requiredHint">* Required Fields</p>
          </section>
          <section class="dac-swap-section dac-up">
            
            <h2 class="norule dac-modal-header-title" data-t="newsletter.successTitle">Hooray!</h2>
          </section>
        </div>
      </header>
      <div class="dac-swap" data-swap-container>
        <section class="dac-swap-section dac-active dac-left">
          <form action="https://services.google.com/fb/submissions/android-developer-mailing-list/" class="dac-form" method="post">
            <section class="dac-modal-content">
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-full-name" class="dac-form-floatlabel" data-t="newsletter.name">Full name</label>
                      <input type="text" class="dac-form-input" name="fullname" id="newsletter-full-name" required>
                      <span class="dac-form-required">*</span>
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-email" class="dac-form-floatlabel" data-t="newsletter.email">Email 地址</label>
                      <input type="email" class="dac-form-input" name="emailaddress" id="newsletter-email" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-company" class="dac-form-floatlabel" data-t="newsletter.company">Company / developer name</label>
                      <input type="text" class="dac-form-input" name="companydevelopername" id="newsletter-company">
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-play-store" class="dac-form-floatlabel" data-t="newsletter.appUrl">One of your Play Store app URLs</label>
                      <input type="url" class="dac-form-input" name="playstoreappurls" id="newsletter-play-store">
                    </div>
                  </div>
                </div>
              </fieldset>
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol newsletter-interested" data-validation-message="Please check at least one item.">
                    <legend class="dac-form-legend">What are you interested in?<span class="dac-form-required">*</span></legend>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-whats-new" value="whats-new">
                      <label for="interested-whats-new" class="dac-form-checkbox-button"></label>
                      <label for="interested-whats-new" class="dac-form-label">What's new</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-games-updates" value="games-updates">
                      <label for="interested-games-updates" class="dac-form-checkbox-button"></label>
                      <label for="interested-games-updates" class="dac-form-label">Games updates</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="checkbox" class="dac-form-checkbox" name="interested" id="interested-android-development" value="android-development">
                      <label for="interested-android-development" class="dac-form-checkbox-button"></label>
                      <label for="interested-android-development" class="dac-form-label">Android development</label>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol newsletter-checkboxes">
                    <div class="dac-form-input-group">
                      <label for="newsletter-receive-in">Receive newsletter in</label>
                      <select name="language" class="dac-form-select" id="newsletter-receive-in">
                        <option value="en-US" selected>English</option>
                        <option value="ar">Arabic</option>
                        <option value="zh">Chinese (Simplified)</option>
                        <option value="zh-TW">Chinese (Traditional)</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="id">Indonesian (Bahasa)</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="pt-BR">Portuguese (Brazilian)</option>
                        <option value="ru">Russian</option>
                        <option value="es-419">Spanish (Latin American)</option>
                        <option value="th">Thai</option>
                        <option value="tr">Turkish</option>
                        <option value="vi">Vietnamese</option>
                      </select>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="marketingoptin" id="newsletter-add" required value="Add me to the mailing list.">
                          <label for="newsletter-add" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-add" class="dac-form-label dac-form-aside">
                            Add me to the mailing list.
                            <span class="dac-form-required">*</span>
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="privacystatement" id="newsletter-terms" required value="I acknowledge that the information provided in this form will be subject to Google's privacy policy (https://www.google.com/policies/privacy/).">
                          <label for="newsletter-terms" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-terms" class="dac-form-label dac-form-aside"><span data-t="newsletter.privacyPolicy" data-t-html>
                            
                            I acknowledge that the information provided in this form will be subject to <a href="https://www.google.com/policies/privacy/">Google's privacy policy</a>.
                          </span>
                          <span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fieldset>
            </section>
            <input type="hidden" name="referrer" value="dac">
            <footer class="dac-modal-footer">
              <div class="cols">
                <div class="col-2of5">
                </div>
              </div>
              <button type="submit" value="Submit" class="dac-fab dac-primary dac-large dac-modal-action"><i class="dac-sprite dac-arrow-right"></i></button>
            </footer>
          </form>
        </section>
        <section class="dac-swap-section dac-right">
          <div class="dac-modal-content">
            <p class="newsletter-success-message" data-t="newsletter.successDetails">
              You have successfully signed up for the latest Android developer news and tips.
            </p>
          </div>
        </section>
      </div>
    </div>
  </div>
</div><!--/.dac-modal.newsletter-->


<div data-modal="langform" class="dac-modal" id="langform">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            Browse this site in <span class="span-target-lang"></span>?
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <fieldset class="dac-form-fieldset">
              <div class="cols">
                <div class="col-2of2 langform-leftCol">
                  <p id="resetLangText">
                    You requested a page in <span class="span-target-lang"></span>, but your language preference for this site is <span class="span-current-lang"></span>.
                  </p>
                  <p id="resetLangCta">
                    Would you like to change your language preference and browse this site in <span class="span-target-lang"></span>? If you want to change your language preference later, use the language menu at the bottom of each page.
                  </p>
                </div>
              </div>
            </fieldset>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="yes" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang yes" data-t="newsletter.resetLangButtonYes" data-modal-toggle>
                Change Language
              </button>
            </a>
            <a href="#" class="" onclick="return false;">
              <button class="button dac-primary dac-modal-action lang no" data-t="newsletter.resetLangButtonNo" data-modal-toggle>
                Not Now
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal-->


<div data-modal="api-unavailable" class="dac-modal" id="api-unavailable">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <div class="dac-modal-header-actions">
          <button class="dac-modal-header-close" data-modal-toggle></button>
        </div>
        <section class="dac-swap-section dac-active dac-down">
          <h2 class="norule dac-modal-header-title">
            This class requires API level <span class="api-level"></span> or higher
          </h2>
        </section>
      </header>
      <section class="dac-swap-section dac-active dac-left">
          <section class="dac-modal-content">
            <p>
              This doc is hidden because your selected API level for the documentation is <span class="api-level"></span>. You can change the documentation API level with the selector above the left navigation.
            </p>
            
            <p>For more information about specifying the API level your app requires, read <a href="https://developer.android.com/training/basics/supporting-devices/platforms.html">Supporting Different Platform Versions</a>.</p>
          </section>
          <footer class="dac-modal-footer" id="langfooter">
            <div class="cols">
              <div class="col-2of5">
              </div>
            </div>
            <a href="#" class="ok" onclick="return false;">
              <button class="button dac-primary dac-modal-action ok"
              data-modal-toggle>
                OK, make this page visible
              </button>
            </a>
          </footer>
        </form>
      </section>
    </div>
  </div>
</div><!--/.dac-modal#api-unavailable-->

    
  </div><!--/#body-content-->

  <!-- Nav Setup -->
  <script>$('[data-dac-nav]').dacNav();</script>
  <script type="text/javascript">
    $('.slideshow-container').dacSlideshow({
        btnPrev: '.slideshow-prev',
        btnNext: '.slideshow-next',
        btnPause: '#pauseButton'
    });

    $(".feed").dacTabbedList({
      nav_id: '.feed-nav',
      frame_id: '.feed-frame'
    });
  </script>
  
  <script src="../../ytblogger_lists_unified414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="../../android_metadata_en414d.js?hl=zh-cn?v=2017061508" defer></script>
  
  <script src="../../reference/lists414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="../../reference/gms_lists414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="../../reference/android/support/wearable/lists414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="../../reference/android/support/test/lists414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="../../reference/android/support/constraint/lists414d.js?hl=zh-cn?v=2017061508" defer></script>
  <script src="https://developer.android.com/_static2/f304fc21fa/jsi18n/?hl=zh-cn"></script>
  <script>
    // Load localized metadata.
    (function(lang) {
      if (lang === 'en') { return; }
      document.write('<script src="https://developer.android.com/android_metadata_zh-cn.js?hl=zh-cn?v=2017061508" defer></' + 'script>');
    })(getLangPref())

    // Add skip to content for accessibility.
    $('#skip-to-main').click(function() {
      $('a[name=top]').focus();
    });

    $('.devsite-utility-footer-language-select').each(function() {
      $(this).change(function() {
        changeLangPref(this.value, true)
        $('.devsite-utility-footer-language').submit();
      });
    });
  </script>

  <script>
    (function($) {
      devsite.analytics.InitAnalytics();
    })(jQuery);
  </script>

  


<div id="survey-box-wrapper">
  <div class="material-dialog" style="width:270px">
    <div class="material-dialog-title">
      Take a one-minute survey?
    </div>
    <div class="material-dialog-description">
      Help us improve Android tools and documentation.
    </div>
    <div class="material-button-bar">
      <a class="dac-button dac-primary dac-raised" target="_blank"
          href="https://goo.gl/forms/kV7MoyD2dvcWkd5N2">Sure</a>
      <a class="dac-button" href="#">No thanks</a>
    </div>
  </div>
</div>

</body>

<!-- Mirrored from developer.android.com/guide/components/fragments.html?hl=zh-cn by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 15 Jun 2017 09:14:32 GMT -->
</html>
